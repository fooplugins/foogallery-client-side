/*
* FooGallery - The Most Intuitive and Extensible Gallery Creation and Management Tool Ever Created for WordPress
* @version 0.0.1
* @link 
* @copyright Steven Usher & Brad Vincent 2015
* @license Released under the GPLv3 license.
*/
!function(a,b){b.$=a}(jQuery,window.FooGallery=window.FooGallery||{}),function(a){if(!a)return void console.warn("jQuery must be included in the page prior to the FooGallery.utils library.");var b={$:a,version:"0.0.1"};b.versionCompare=function(a,b){function c(a){for(var b=a.split("."),c=0,d=b.length;c<d;c++)b[c]=parseInt(b[c]),isNaN(b[c])&&(b[c]=0);return b}if(!/[\d.]/.test(a)||!/[\d.]/.test(b))return NaN;for(var d=c(a),e=c(b);d.length<e.length;)d.push(0);for(;e.length<d.length;)e.push(0);for(var f=0;f<d.length;++f){if(e.length==f)return 1;if(d[f]!=e[f])return d[f]>e[f]?1:-1}return d.length!=e.length?-1:0};var c=!!window.FooGallery.utils;c?c&&(b.versionCompare(b.version,window.FooGallery.utils.version)>0?(console.warn("An older version of FooGallery.utils ("+window.FooGallery.utils.version+") already exists in the page, version "+b.version+" will override it."),window.FooGallery.utils=b):console.warn("A newer version of FooGallery.utils ("+window.FooGallery.utils.version+") already exists in the page, version "+b.version+" will not register itself.")):window.FooGallery.utils=b}(jQuery),function(a,b){"0.0.1"===b.version&&(b.is={},b.is.array=function(a){return"[object Array]"===Object.prototype.toString.call(a)},b.is.boolean=function(a){return"[object Boolean]"===Object.prototype.toString.call(a)},b.is.element=function(a){return"object"==typeof HTMLElement?a instanceof HTMLElement:!!a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName},b.is.empty=function(a){if(b.is.undef(a)||null===a)return!0;if(b.is.number(a)&&0==a)return!0;if(b.is.boolean(a)&&a===!1)return!0;if(b.is.string(a)&&0===a.length)return!0;if(b.is.array(a)&&0===a.length)return!0;if(b.is.jq(a)&&0===a.length)return!0;if(b.is.hash(a)){for(var c in a)if(a.hasOwnProperty(c))return!1;return!0}return!1},b.is.error=function(a){return"[object Error]"===Object.prototype.toString.call(a)},b.is.fn=function(a){return a===window.alert||"[object Function]"===Object.prototype.toString.call(a)},b.is.hash=function(a){return b.is.object(a)&&a.constructor===Object&&!a.nodeType&&!a.setInterval},b.is.jq=function(c){return!b.is.undef(a)&&c instanceof a},b.is.number=function(a){return"[object Number]"===Object.prototype.toString.call(a)&&!isNaN(a)},b.is.object=function(a){return"[object Object]"===Object.prototype.toString.call(a)&&!b.is.undef(a)&&null!==a},b.is.promise=function(a){return b.is.object(a)&&b.is.fn(a.then)&&b.is.fn(a.promise)},b.is.size=function(a){return!!(b.is.string(a)&&!b.is.empty(a)||b.is.number(a))&&/^(auto|none|(?:[\d\.]*)+?(?:%|px|mm|q|cm|in|pt|pc|em|ex|ch|rem|vh|vw|vmin|vmax)?)$/.test(a)},b.is.string=function(a){return"[object String]"===Object.prototype.toString.call(a)},b.is.undef=function(a){return void 0===a})}(FooGallery.utils.$,FooGallery.utils),function(a,b,c){if("0.0.1"===b.version){b.fn={};var d=Function.prototype.toString;b.fn.CONTAINS_SUPER=/xyz/.test(d.call(function(){xyz}))?/\b_super\b/:/.*/,b.fn.addOrOverride=function(a,e,f){if(c.object(a)&&c.string(e)&&!c.empty(e)&&c.fn(f)){var g=a[e],h=c.fn(g)&&b.fn.CONTAINS_SUPER.test(d.call(f));a[e]=h?function(a,b){return function(){var c=this._super;this._super=a;var d=b.apply(this,arguments);return this._super=c,d}}(g,f):f}},b.fn.apply=function(a,b){function d(){return a.apply(this,b)}return b=c.array(b)?b:[],d.prototype=a.prototype,new d},b.fn.arg2arr=function(a){return Array.prototype.slice.call(a)},b.fn.check=function(d,e,f,g){function h(a){return function(){return a.apply(d,arguments)}}return f=c.fn(f)?f:a.noop,d=c.object(d)?d:window,e=c.string(e)?b.fn.fetch(e,g):e,h(c.fn(e)?e:f)},b.fn.fetch=function(b,d){return!c.string(b)||c.empty(b)?null:(d=c.object(d)?d:window,a.each(b.split("."),function(a,b){if(!d[b])return!1;d=d[b]}),c.fn(d)?d:null)},b.fn.enqueue=function(d,e,f,g){function h(a,b){try{return n.push(a),b.apply(a,i)}catch(a){return j.reject(a,n),j}}var i=b.fn.arg2arr(arguments),j=a.Deferred(),k=a.Deferred(),l=k.promise(),m=[],n=[],o=!0;return d=i.shift(),e=i.shift(),a.each(d,function(a,d){c.fn(d[e])&&(l=l.then(function(){if(!o){var a=b.fn.arg2arr(arguments);m.push(a)}return o=!1,h(d,d[e])}))}),l.then(function(){if(!o){var a=b.fn.arg2arr(arguments);m.push(a)}o=!1,j.resolve(m)}),l.fail(function(){var a=b.fn.arg2arr(arguments);a.push(n),j.reject.apply(j,a)}),k.resolve(),j}}}(FooGallery.utils.$,FooGallery.utils,FooGallery.utils.is),function(a,b){if("0.0.1"===a.version){a.url={};var c=document.createElement("a");a.url.parts=function(a){return c.href=a,{hash:c.hash,host:c.host,hostname:c.hostname,href:c.href,origin:c.origin,pathname:c.pathname,port:c.port,protocol:c.protocol,search:c.search}},a.url.full=function(a){return!b.string(a)||b.empty(a)?null:(c.href=a,c.href)},a.url.param=function(a,c,d){if(!b.string(a)||b.empty(a)||!b.string(c)||b.empty(c))return a;var e,f,g,h;return b.undef(d)?(e=new RegExp("[?|&]"+c+"=([^&;]+?)(&|#|;|$)"),f=e.exec(a)||[,""],g=f[1].replace(/\+/g,"%20"),b.string(g)&&!b.empty(g)?decodeURIComponent(g):null):(e=new RegExp("([?&])"+c+"[^&]*"),h=c+"="+encodeURIComponent(d),g=a.replace(e,"$1"+h),g!==a||e.test(g)||(g+="&"+h),g)}}}(FooGallery.utils,FooGallery.utils.is),function(a,b,c){"0.0.1"===a.version&&(a.str={},a.str.camel=function(a){return b.empty(a)?a:a.toUpperCase()===a?a.toLowerCase():a.replace(/^([A-Z])|[-\s_]+(\w)/g,function(a,c,d){return b.string(d)?d.toUpperCase():c.toLowerCase()})},a.str.contains=function(a,c,d){return!(!b.string(a)||b.empty(a)||!b.string(c)||b.empty(c))&&(c.length<=a.length&&(d?a.toUpperCase().indexOf(c.toUpperCase()):a.indexOf(c))!==-1)},a.str.containsWord=function(a,c,d){if(!b.string(a)||b.empty(a)||!b.string(c)||b.empty(c)||a.length<c.length)return!1;for(var e=a.split(/\W/),f=0,g=e.length;f<g;f++)if(d?e[f].toUpperCase()==c.toUpperCase():e[f]==c)return!0;return!1},a.str.endsWith=function(a,c){return!b.string(a)||b.empty(a)||!b.string(c)||b.empty(c)?a==c:a.slice(a.length-c.length)==c},a.str.escapeRegExp=function(a){return b.empty(a)?a:a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},a.str.fnv1a=function(a){if(!b.string(a)||b.empty(a))return null;var c,d,e=2166136261;for(c=0,d=a.length;c<d;c++)e^=a.charCodeAt(c),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0},a.str.from=function(c,d){return!b.string(c)||b.empty(c)||!b.string(d)||b.empty(d)?null:a.str.contains(c,d)?c.substring(c.indexOf(d)+d.length):null},a.str.join=function(d,e,f){if(!b.string(d)||!b.string(e))return null;var g=c.arg2arr(arguments);d=g.shift();var h,i,j=g.shift();for(h=0,i=g.length;h<i;h++)e=g[h],b.empty(e)||(a.str.endsWith(j,d)&&(j=j.slice(0,j.length-d.length)),a.str.startsWith(e,d)&&(e=e.slice(d.length)),j+=d+e);return j},a.str.startsWith=function(a,c){return!b.empty(a)&&!b.empty(c)&&a.slice(0,c.length)==c},a.str.until=function(c,d){return b.empty(c)||b.empty(d)?c:a.str.contains(c,d)?c.substring(0,c.indexOf(d)):c},a.str.format=function(a,d,e){var f=c.arg2arr(arguments);if(a=f.shift(),b.empty(a)||b.empty(f))return a;1===f.length&&(b.array(f[0])||b.object(f[0]))&&(f=f[0]);for(var g in f)a=a.replace(new RegExp("\\{"+g+"\\}","gi"),f[g]);return a})}(FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn),function(a,b,c,d,e){if("0.0.1"===b.version){b.obj={};var f=function(){};b.obj.create=function(a){if(!c.object(a))throw TypeError("Argument must be an object");f.prototype=a;var b=new f;return f.prototype=null,b},b.obj.extend=function(e,f,g){if(!c.object(e)||!c.object(f))return e;var h=d.arg2arr(arguments);return e=h.shift(),a.each(h,function(a,c){b.obj.merge(e,c)}),e},b.obj.merge=function(a,d){if(!c.object(a)||!c.object(d))return a;var e;for(e in d)d.hasOwnProperty(e)&&(c.object(d[e])?(a[e]=c.object(a[e])?a[e]:{},b.obj.merge(a[e],d[e])):c.array(d[e])?a[e]=d[e].slice():a[e]=d[e]);return a},b.obj.mergeValid=function(d,e,f,g){if(!c.hash(f)||!c.hash(e))return d;e=c.hash(e)?e:{},g=c.hash(g)?g:{};var h,i,j;for(h in e)e.hasOwnProperty(h)&&c.fn(e[h])&&(i=c.array(g[h])?g[h]:c.string(g[h])?[g[h]]:[h],a.each(i,function(a,g){if(j=b.obj.prop(f,g),!c.undef(j))return e[h](j)?(b.obj.prop(d,h,j),!1):void 0}));return d},b.obj.prop=function(b,d,f){if(c.object(b)&&!c.empty(d)){var g,h;if(c.undef(f))return e.contains(d,".")?(g=d.split("."),h=g.length-1,a.each(g,function(a,d){if(a===h)f=b[d];else{if(!c.object(b[d]))return!1;b=b[d]}})):c.undef(b[d])||(f=b[d]),f;e.contains(d,".")?(g=d.split("."),h=g.length-1,a.each(g,function(a,d){if(a===h)b[d]=f;else{if(!c.object(b[d]))return!1;b=b[d]}})):c.undef(b[d])||(b[d]=f)}}}}(FooGallery.utils.$,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.str),function(a,b,c){if("0.0.1"===b.version){var d=0;b.uniqueId=function(a,b){var e=a.attr("id");return c.empty(e)&&(b=c.string(b)&&!c.empty(b)?b:"uid-",e=b+ ++d,a.attr("id",e).data("__uniqueId__",!0)),e},b.removeUniqueId=function(a){a.data("__uniqueId__")&&a.removeAttr("id").removeData("__uniqueId__")}}}(FooGallery.utils.$,FooGallery.utils,FooGallery.utils.is),function(a,b,c){if("0.0.1"===b.version){b.transition={};var d=document.createElement("div");b.transition.supported=function(a){var b=a.style;return c.string(b.transition)||c.string(b.WebkitTransition)||c.string(b.MozTransition)||c.string(b.msTransition)||c.string(b.OTransition)}(d),b.transition.end=function(a){var b=a.style;return c.string(b.transition)?"transitionend":c.string(b.WebkitTransition)?"webkitTransitionEnd":c.string(b.MozTransition)?"transitionend":c.string(b.msTransition)?"msTransitionEnd":c.string(b.OTransition)?"oTransitionEnd":null}(d),b.transition.duration=function(a,b){if(b=c.number(b)?b:0,!c.jq(a))return b;var d=a.css("transition-duration");if(/^([\d\.]*)+?(ms|s)$/i.test(d)){var e=d.match(/^([\d\.]*)+?(ms|s)$/i),f=parseFloat(e[1]);return"s"===e[2].toLowerCase()&&(f*=1e3),f}return b},b.transition.start=function(d,e,f,g){var h=a.Deferred();if(d=d.first(),b.transition.supported){var i=d.data("transition_safety");c.hash(i)&&c.number(i.timer)&&(clearTimeout(i.timer),d.removeData("transition_safety").off(b.transition.end+".utils"),i.deferred.reject()),g=c.number(g)?g:b.transition.duration(d)+50,i=d.data("transition_safety",{deferred:h,timer:setTimeout(function(){d.removeData("transition_safety").off(b.transition.end+".utils"),h.resolve()},g)}),d.on(b.transition.end+".utils",function(a){d.is(a.target)&&(clearTimeout(i.timer),d.removeData("transition_safety").off(b.transition.end+".utils"),h.resolve())})}return setTimeout(function(){d.toggleClass(e,f),b.transition.supported||h.resolve()},1),h},a.fn.fooTransition=function(a,c,d,e){return b.transition.start(this,a,c,e).then(d),this}}}(FooGallery.utils.$,FooGallery.utils,FooGallery.utils.is),function(a,b,c,d,e){"0.0.1"===b.version&&(b.Class=function(){},b.Class.extend=function(a){function f(){if(!c.fn(this.construct))throw new SyntaxError('FooGallery.utils.Class objects must be constructed with the "new" keyword.');this.construct.apply(this,arguments)}a=c.hash(a)?a:{};var g=d.create(this.prototype);for(var h in a)a.hasOwnProperty(h)&&e.addOrOverride(g,h,a[h]);return g.construct=c.fn(g.construct)?g.construct:function(){},f.prototype=g,f.prototype.constructor=c.fn(g.__ctor__)?g.__ctor__:f,f.extend=b.Class.extend,f.override=b.Class.override,f},b.Class.override=function(a,b){e.addOrOverride(this.prototype,a,b)})}(FooGallery.utils.$,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.obj,FooGallery.utils.fn),function(a,b,c,d){"0.0.1"===b.version&&(b.Factory=b.Class.extend({construct:function(){this.registered={}},contains:function(a){return!c.undef(this.registered[a])},load:function(b,e,f){var g,h,i=this,j=d.arg2arr(arguments),k=[],l=[];b=j.shift()||{};for(g in i.registered)if(i.registered.hasOwnProperty(g)){var m=i.registered[g];b.hasOwnProperty(g)&&(h=b[g],c.string(h)&&(h=d.fetch(b[g])),c.fn(h)&&(m={name:g,klass:h,priority:i.registered[g].priority})),k.push(m)}for(g in b)b.hasOwnProperty(g)&&!i.registered.hasOwnProperty(g)&&(h=b[g],c.string(h)&&(h=d.fetch(b[g])),c.fn(h)&&k.push({name:g,klass:h,priority:0}));return k.sort(function(a,b){return b.priority-a.priority}),a.each(k,function(a,b){c.fn(b.klass)&&l.push(d.apply(b.klass,j))}),l},make:function(a,b,e){var f,g=this,h=d.arg2arr(arguments);return a=h.shift(),f=g.registered[a],c.hash(f)&&c.fn(f.klass)?d.apply(f.klass,h):null},names:function(b){b=!!c.boolean(b)&&b;var d,e=[];if(b){var f=[];for(d in this.registered)this.registered.hasOwnProperty(d)&&f.push(this.registered[d]);f.sort(function(a,b){return b.priority-a.priority}),a.each(f,function(a,b){e.push(b.name)})}else for(d in this.registered)this.registered.hasOwnProperty(d)&&e.push(d);return e},register:function(a,b,d){if(!c.string(a)||c.empty(a)||!c.fn(b))return!1;d=c.number(d)?d:0;var e=this.registered[a];return this.registered[a]={name:a,klass:b,priority:c.undef(e)?d:e.priority},!0}}))}(FooGallery.utils.$,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn),function(a,b,c){"0.0.1"===a.version&&(a.Debugger=a.Class.extend({construct:function(a){this.key=a,this.enabled=!!localStorage.getItem(this.key)},enable:function(){this.enabled=!0,localStorage.setItem(this.key,this.enabled)},disable:function(){this.enabled=!1,localStorage.removeItem(this.key)},log:function(a,c){this.enabled&&console.log.apply(console,b.arg2arr(arguments))},logf:function(a,d,e){if(this.enabled){var f=b.arg2arr(arguments);a=f.shift(),d=f.shift(),f.unshift(c.format(a,d)),this.log.apply(this,f)}}}))}(FooGallery.utils,FooGallery.utils.fn,FooGallery.utils.str),function(a,b,c){"0.0.1"===b.version&&(b.Throttle=b.Class.extend({construct:function(a){this.id=null,this.active=!1,this.idle=c.number(a)?a:0},limit:function(a){if(c.fn(a)){this.clear();var b=this;this.active=!0,this.id=setTimeout(function(){b.active=!1,b.id=null,a()},this.idle)}},clear:function(){c.number(this.id)&&(clearTimeout(this.id),this.active=!1,this.id=null)}}))}(FooGallery.utils.$,FooGallery.utils,FooGallery.utils.is),function(a,b,c,d,e){b.ready=function(a){function c(){try{a.call(window,b.$)}catch(a){console.error(a)}}(Function("/*@cc_on return true@*/")()?"complete"===document.readyState:"loading"!==document.readyState)?c():document.addEventListener("DOMContentLoaded",c,!1)},b.when=function(b){if(!d.array(b)||d.empty(b))return a.when();for(var c=a.Deferred(),e=[],f=b.length,g=0;g<b.length;g++)b[g].then(function(a){e.push(a)}).always(function(){--f||c.resolve(e)});return c.promise()};var f;b.getViewportBounds=function(b){f||(f=a(window));var c={top:f.scrollTop(),left:f.scrollLeft(),width:f.width(),height:f.height()};return c.right=c.left+c.width,c.bottom=c.top+c.height,d.number(b)&&(c.top-=b,c.right+=b,c.bottom+=b,c.left-=b,c.width+=2*b,c.height+=2*b),c},b.getElementBounds=function(b){d.jq(b)||(b=a(b));var c={top:0,left:0,width:0,height:0};return 0!==b.length&&(c=b.offset(),c.width=b.width(),c.height=b.height()),c.right=c.left+c.width,c.bottom=c.top+c.height,c},b.intersects=function(a,b){return a.left<=b.right&&b.left<=a.right&&a.top<=b.bottom&&b.top<=a.bottom},b.selectorFromClassName=function(b){return d.array(b)||(b=[b]),a.map(b,function(a){return d.string(a)?"."+a.split(/\s/g).join("."):null}).join(",")},b.selectorsFromClassNames=function(a){var c={};for(var e in a)a.hasOwnProperty(e)&&(c[e]=d.hash(a[e])?b.selectorsFromClassNames(a[e]):b.selectorFromClassName(a[e]));return c},b.get=function(b){return b=d.jq(b)?b:a(b),b.data("__FooGallery__")||null},b.init=function(c,f){c=d.jq(c)?c:a(c),f=e.extend({},f,c.data("foogallery"));var g=b.get(c);return g instanceof b.Gallery&&g.destroy(),g=new b.Gallery(c,f),g.initialize(),g},b.initAll=function(c){a(".foogallery").each(function(a,d){b.init(d,c)})},b.idToItemMap=function(b){var c={};return a.each(b,function(a,b){d.empty(b.id)&&(b.id=""+(a+1)),c[b.id]=b}),c},b.parseSrc=function(b,c,e,f,g,h){if(!d.string(b))return null;if(!d.string(f))return b;var i=a.map(f.replace(/(\s[\d.]+[whx]),/g,"$1 @,@ ").split(" @,@ "),function(a){return{url:/^\s*(\S*)/.exec(a)[1],w:parseFloat((/\S\s+(\d+)w/.exec(a)||[0,1/0])[1]),h:parseFloat((/\S\s+(\d+)h/.exec(a)||[0,1/0])[1]),x:parseFloat((/\S\s+([\d.]+)x/.exec(a)||[0,1])[1])}});if(!i.length)return b;i.unshift({url:b,w:i[0].w!==1/0&&i[0].h===1/0?c:1/0,h:i[0].h!==1/0&&i[0].w===1/0?e:1/0,x:1});var j,k=window.devicePixelRatio||1,l={w:g*k,h:h*k,x:k};for(j in l)l.hasOwnProperty(j)&&(i=a.grep(i,function(a,b){return function(c){return c[a]>=l[a]||c[a]===b}}(j,Math.max.apply(null,a.map(i,function(a){return a[j]})))));for(j in l)l.hasOwnProperty(j)&&(i=a.grep(i,function(a,b){return function(c){return c[a]===b}}(j,Math.min.apply(null,a.map(i,function(a){return a[j]})))));return i[0].url}}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.obj),function(a,b,c,d){a.TemplateFactory=b.Factory.extend({construct:function(){this.registered={}},register:function(a,b,d,e){if(!c.fn(d))return!1;var f=this,g=f._super(a,b,e);return g&&(f.registered[a].test=d),g},from:function(a,b,e){c.jq(a),a=a;var f=this,g=f.names(!0);if(c.empty(g))return null;var h=d.arg2arr(arguments),i=f.registered,j=g.shift();h.shift();for(var k=0,l=g.length;k<l;k++)if(i.hasOwnProperty(g[k])&&i[g[k]].test(a)){j=g[k];break}return h.unshift(j),f.make.apply(f,h)}}),a.template=new a.TemplateFactory}(FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn),function(a,b,c){a.ItemsFactory=b.Factory.extend({from:function(a,b){var d,e=this,f=e.names(!0);return c.undef(b)||!c.hash(a)||c.empty(f)?null:(d=c.hash(a.paging)&&e.contains(a.paging.type)?a.paging.type:f[0],e.make(d,b,c.hash(a[d])?a[d]:{},c.hash(b.cls[d])?b.cls[d]:{},c.hash(b.il8n[d])?b.il8n[d]:{},c.hash(b.sel[d])?b.sel[d]:{}))}}),a.items=new a.ItemsFactory}(FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn),function(a,b){a.Component=b.Class.extend({construct:function(a){this.g=a}}),a.components=new b.Factory}(FooGallery,FooGallery.utils),function(a,b,c,d,e){b.Gallery=c.Class.extend({construct:function(c,f){var g=this;g.$el=d.jq(c)?c:a(c),g.id=g.$el.prop("id"),g.opt=e.extend({},b.Gallery.options,f),g.cls=g.opt.classes,g.il8n=g.opt.il8n,g.sel=b.selectorsFromClassNames(g.cls),g.state=b.components.make("state",g),g.tmpl=b.template.from(g.$el,g),g.items=b.items.from(g.opt,g)},initialize:function(){var a=this;return a.preinit().then(function(){return a._initDelay()}).then(function(){return a.init()}).then(function(){return a.postinit()})},preinit:function(){var c=this,d=c.$el.data("__FooGallery__");return d instanceof b.Gallery&&d.destroy(),c.items.preinit().then(function(){return a.when(c.tmpl.onpreinit())})},init:function(){var b=this;return b.items.init().then(function(){return a.when(b.tmpl.oninit())})},postinit:function(){var b=this;return b.$el.data("__FooGallery__",b),b.items.postinit().then(function(){return a.when(b.tmpl.onpostinit())})},destroy:function(){var a=this;a.tmpl.ondestroy(),a.items.destroy(),a.$el.removeData("__FooGallery__")},_initDelay:function(){var b=this;return a.Deferred(function(a){b._delay=setTimeout(function(){b._delay=null,a.resolve()},b.opt.delay)}).promise()}}),b.emptyImage="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",b.Gallery.options={debug:!1,lazy:!0,viewport:200,items:[],delay:100,throttle:50,timeout:6e4,srcset:"data-srcset",src:"data-src",placeholder:b.emptyImage,error:b.emptyImage,template:{},classes:{},il8n:{}}}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.obj),function(a,b,c,d){b.State=b.Component.extend({construct:function(a){var b=this;b._super(a),b.opt=b.g.opt.state,b.enabled=b.opt.enabled,b.apiEnabled=!!window.history&&history.replaceState,b.pushOrReplace=b.opt.pushOrReplace;var c=d.escapeRegExp(b.g.id),e=d.escapeRegExp(b.opt.values),f=d.escapeRegExp(b.opt.pair);b.regex={exists:new RegExp("^#"+c+"\\"+e+".+?"),values:new RegExp("(\\w+)"+f+"([^"+e+"]+)","g")}},isPushOrReplace:function(b){return a.inArray(b,["push","replace"])!==-1},exists:function(){return this.regex.exists.test(location.hash)&&this.regex.values.test(location.hash)},parse:function(){var b=this,d={};if(b.exists())if(b.enabled){d.id=b.g.id;var e=location.hash.match(b.regex.values);a.each(e,function(e,f){var g=f.split(b.opt.pair);2===g.length&&(d[g[0]]=g[1].indexOf(b.opt.array)===-1?decodeURIComponent(g[1]):a.map(g[1].split(b.opt.array),function(a){return decodeURIComponent(a)}),c.string(d[g[0]])&&!isNaN(d[g[0]])&&(d[g[0]]=parseInt(d[g[0]])))})}else b.apiEnabled?history.replaceState(null,"",location.pathname+location.search):location.hash="#";return d},hashify:function(b){var d=this;if(c.hash(b)){var e=[];return a.each(b,function(b,f){c.empty(f)||"id"===b||(f=c.array(f)?a.map(f,function(a){return encodeURIComponent(a)}).join("+"):encodeURIComponent(f),e.push(b+d.opt.pair+f))}),e.length>0&&e.unshift("#"+d.g.id),e.join(d.opt.values)}return""},replace:function(a){var b=this;if(b.enabled&&b.apiEnabled){a.id=b.g.id;var d=b.hashify(a),e=c.empty(d);history.replaceState(e?null:a,"",e?location.pathname+location.search:d)}},push:function(a){var b=this;if(b.enabled&&b.apiEnabled){a.id=b.g.id;var d=b.hashify(a),e=c.empty(d);history.pushState(e?null:a,"",e?location.pathname+location.search:d)}},update:function(a,b){var c=this;c.enabled&&c.apiEnabled&&(b=c.isPushOrReplace(b)?b:c.pushOrReplace,c[b](a))}}),b.Gallery.options.state={enabled:!1,pushOrReplace:"replace",values:"/",pair:":",array:"+"},b.components.register("state",b.State)}(FooGallery.$,FooGallery,FooGallery.utils.is,FooGallery.utils.str),function(a,b,c,d,e){b.Template=b.Component.extend({construct:function(a){this._super(a),this.options=this.g.opt.template,this.eventNamespace=".foogallery"},raise:function(b,c){c=d.array(c)?c:[];var f=this,g=e.contains(b,".")?b:b+f.eventNamespace,h=a.Event(g);return f.g.opt.debug&&console.log(f.g.id+":"+g,c),f.g.$el.trigger(h,c),h},onpreinit:function(){this.raise("preinit")},oninit:function(){this.raise("init")},onpostinit:function(){this.raise("postinit")},ondestroy:function(){this.raise("destroy")},onpredraw:function(){this.raise("predraw")},ondraw:function(){this.raise("draw")},onpostdraw:function(){this.raise("postdraw")},onitemparse:function(a){this.raise("item-parse",[a]);var c=b.components.make("item",this.g);return c.parseDOM(a)?c.fix():null},onitemsparsed:function(a){this.raise("items-parsed",[a])},onitemmake:function(a){return this.raise("item-make",[a]),b.components.make("item",this.g,a)},onitemsmade:function(a){this.raise("items-made",[a])},onitemcreate:function(a){this.raise("item-create",[a]),a.createDOM(!0)},onitemscreated:function(a){this.raise("items-created",[a])},onitemappend:function(a){this.raise("item-append",[a]),a.append().fix()},onitemsappended:function(a){this.raise("items-appended",[a])},onitemdetach:function(a){this.raise("item-detach",[a]),a.detach().unfix()},onitemsdetached:function(a){this.raise("items-detached",[a])},onitemsload:function(a){this.raise("items-load",[a])},onitemloading:function(a){this.raise("item-loading",[a]),a.setLoading()},onitemloaded:function(a){this.raise("item-loaded",[a]),a.setLoaded().unfix()},onitemerror:function(a){this.raise("item-error",[a]),a.setError()},onitemsloaded:function(a){this.raise("items-loaded",[a])}}),b.template.register("default",b.Template,function(a){return a.is(".foogallery")},1e3)}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.str),function(a,b,c,d,e){b.Item=b.Component.extend({construct:function(a,c){c=e.extend({},b.Item.defaults,d.hash(c)?c:{}),this._super(a),this.isFiltered=!1,this.isAttached=!1,this.isCreated=!1,this.isCaptionCreated=!1,this.isLoading=!1,this.isLoaded=!1,this.isError=!1,this.$el=null,this.$inner=null,this.$anchor=null,this.$image=null,this.$caption=null,this.id=c.id,this.href=c.href,this.src=c.src,this.srcset=c.srcset,this.width=c.width,this.height=c.height,this.title=c.title,this.description=c.description,this.attr=c.attr,this.tags=c.tags,this._thumbUrl=null},canCreate:function(){return!this.isCreated&&d.string(this.href)&&d.string(this.src)&&d.number(this.width)&&d.number(this.height)},canCreateCaption:function(){return!this.isCaptionCreated&&(d.string(this.title)||d.string(this.description))},canLoad:function(){return this.isCreated&&this.isAttached&&!this.isLoading&&!this.isLoaded&&!this.isError},canAppend:function(){return this.isCreated&&!this.isAttached},canDetach:function(){return this.isCreated&&this.isAttached},parseDOM:function(b){var c=this,e=c.g.opt,f=c.g.sel.item,g=a(b);return(c.isCreated=g.is(f.elem))&&(c.$el=g.data("__FooGalleryItem__",c),c.$inner=c.$el.find(f.inner),c.$anchor=c.$el.find(f.anchor).on("click.foogallery",{self:c},c.onAnchorClick),c.$image=c.$anchor.find(f.image),c.$caption=c.$el.find(f.caption.elem),c.isAttached=c.$el.parent().length>0,c.isLoading=c.$el.is(f.loading),c.isLoaded=c.$el.is(f.loaded),c.isError=c.$el.is(f.error),c.isCaptionCreated=c.$caption.length>0,c.id=c.$el.data("id"),c.tags=c.$el.data("tags"),c.href=c.$anchor.attr("href"),c.src=c.$image.attr(e.src),c.srcset=c.$image.attr(e.srcset),c.width=parseInt(c.$image.attr("width")),c.height=parseInt(c.$image.attr("height")),c.title=c.$image.attr("title"),c.description=c.$image.attr("alt"),d.empty(c.$image.prop("src"))&&c.$image.prop("src",e.placeholder),c.canLoad()&&c.$el.addClass(c.classes.idle)),c.isCreated},createDOM:function(b,c){var e=this;if(e.canCreate()){b=!!d.boolean(b)&&b,c=!d.boolean(c)||c;var f=e.g.opt,g=e.g.cls.item,h=e.attr;h.elem.class=g.elem+" "+g.idle,h.elem["data-id"]=e.id,h.elem["data-tags"]=JSON.stringify(e.tags),b?(h.inner.class=g.inner,h.anchor.class=g.anchor):h.anchor.class=g.anchor+" "+g.inner,h.anchor.href=e.href,h.image.class=g.image,h.image.src=f.placeholder,h.image[f.src]=e.src,h.image[f.srcset]=e.srcset,h.image.width=e.width,h.image.height=e.height,h.image.title=e.title,h.image.alt=e.description,e.$el=a("<div/>").attr(h.elem).data("__FooGalleryItem__",e),e.$anchor=a("<a/>").attr(h.anchor).on("click.foogallery",{self:e},e.onAnchorClick),e.$image=a("<img/>").attr(h.image).appendTo(e.$anchor),e.$el.append(e.$inner=b?a("<div/>").attr(h.inner).append(e.$anchor):e.$anchor),c&&e.createCaptionDOM()&&e.$anchor.append(e.$caption),e.isCreated=!0}return e.isCreated},createCaptionDOM:function(){var b=this;if(b.canCreateCaption()){var c=b.g.cls.item.caption,e=b.attr.caption;e.elem.class=c.elem,e.inner.class=c.inner,e.title.class=c.title,e.description.class=c.description,b.$caption=a("<div/>").attr(e.elem);var f=a("<div/>").attr(e.inner).appendTo(b.$caption);d.empty(b.title)||f.append(a("<div/>").attr(e.title).html(b.title)),d.empty(b.description)||f.append(a("<div/>").attr(e.description).html(b.description)),b.isCaptionCreated=!0}return b.isCaptionCreated},append:function(){var a=this;return a.canAppend()&&(a.g.$el.append(a.$el),a.isAttached=!0),a},detach:function(){var a=this;return a.canDetach()&&(a.$el.detach(),a.isAttached=!1),a},load:function(){var b=this;return a.Deferred(function(a){if(!b.isCreated||!b.isAttached)return void a.reject(b);var c=b.$image.get(0);d.undef(window.InstallTrigger)||(c.src=""),c.onload=function(){c.onload=c.onerror=null,a.resolve(b)},c.onerror=function(){c.onload=c.onerror=null,a.reject(b)},c.src=b.getThumbUrl()}).promise()},setLoading:function(){var a=this;if(a.canLoad()){var b=a.g.cls.item;a.isLoading=!0,a.$el.removeClass(b.idle).removeClass(b.loaded).removeClass(b.error).addClass(b.loading)}return a},setLoaded:function(){var a=this;if(a.isLoading){var b=a.g.cls.item;a.isLoading=!1,a.isLoaded=!0,a.$el.removeClass(b.loading).addClass(b.loaded)}return a},setError:function(){var a=this;if(a.isLoading){var b=a.g.cls.item;a.isLoading=!1,a.isError=!0,a.$el.removeClass(b.loading).addClass(b.error),d.string(a.g.opt.error)&&a.$image.prop("src",a.g.opt.error)}return a},fix:function(a){var b=this;if(b.canLoad()){var c=b.width,e=b.height;if(!isNaN(c)&&!isNaN(e)){var f=b.$image.outerWidth();d.number(a)&&(f=a>c?c:a);var g=f/c,h=e*g;b.$image.css({width:f,height:h})}}return b},unfix:function(){var a=this;return a.isCreated&&a.$image.css({width:"",height:""}),a},getThumbUrl:function(a){a=!!d.boolean(a)&&a;var c=this;return!a&&d.string(c._thumbUrl)?c._thumbUrl:c._thumbUrl=b.parseSrc(c.src,c.width,c.height,c.srcset,c.$anchor.innerWidth(),c.$anchor.innerHeight())},scrollTo:function(a){var c=this;if(c.isAttached){var d=c.$el.offset(),e=b.getViewportBounds();switch(a){case"top":d.left+=c.$el.outerWidth()/2-e.width/2,d.top-=e.height/5;break;default:d.left+=c.$el.outerWidth()/2-e.width/2,d.top+=c.$el.outerHeight()/2-e.height/2}console.log("scrollTo:",a,d),window.scrollTo(d.left,d.top)}return c},focus:function(){var a=this;return a.isAttached&&a.$anchor.focus(),a},replaceState:function(){var a=this;if(a.isAttached){var b=a.g.items.getState(a);a.g.state.replace(b)}},onAnchorClick:function(a){a.data.self.replaceState()}}),b.components.register("item",b.Item),b.Item.defaults={id:"",href:"",src:"",srcset:"",width:0,height:0,title:"",description:"",tags:[],attr:{elem:{},inner:{},anchor:{},image:{},caption:{elem:{},inner:{},title:{},description:{}}}},b.Gallery.options.classes.item={elem:"fg-item",inner:"fg-item-inner",anchor:"fg-thumb",image:"fg-image",idle:"fg-idle",loading:"fg-loading",loaded:"fg-loaded",error:"fg-error",caption:{elem:"fg-caption",inner:"fg-caption-inner",title:"fg-caption-title",description:"fg-caption-desc"}}}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.obj),function(a,b,c,d,e){b.Items=b.Component.extend({construct:function(a){var b=this;b._super(a),b.array=[],b.idMap={},b._init=null,b._available=[],b._throttle=new c.Throttle(b.g.opt.throttle),b._filter=[]},preinit:function(){return a.when()},init:function(){var c=this;if(d.promise(c._init))return c._init;var e=c.g,f=e.sel,g=e.opt.items,h=a.Deferred(),i=c.make(e.$el.find(f.item.elem));return d.empty(g)?(i.push.apply(i,c.make(window[e.id+"-items"])),h.resolve(i)):d.array(g)?(i.push.apply(i,c.make(g)),h.resolve(i)):d.string(g)?a.get(g).then(function(a){i.push.apply(i,c.make(a)),h.resolve(i)},function(a,b,c){console.log("FooGallery: GET items error.",g,a,b,c),h.resolve(i)}):h.resolve(i),h.then(function(a){c.array=a,c.idMap=b.idToItemMap(c.array);var e=c.g.state.parse();c.setState(d.empty(e)?c.getState():e)}),c._init=h.promise()},postinit:function(){var b=this;return b.load(b.loadable(b.available())).then(function(){a(window).on("scroll.foogallery",{self:b},b.onWindowScroll).on("popstate.foogallery",{self:b},b.onWindowPopState)})},destroy:function(){var b=this;a(window).off("scroll.foogallery",b.onWindowScroll).off("popstate.foogallery",b.onWindowPopState)},available:function(){var a=this;return d.empty(a._available)?a._available=a.array.slice():a._available},loadable:function(a){var c=this,d=c.g.opt;return a=c.idle(a),d.lazy&&(a=c.visible(a,b.getViewportBounds(d.viewport))),a},filter:function(b,c){var d=this;return d._filter=c,d._available=a.map(b,function(b,d){for(var e=0,f=c.length;e<f;e++)if(a.inArray(c[e],d.tags)!==-1)return d;return null})},idle:function(b){return a.map(b,function(a){return a.canLoad()?a:null})},visible:function(c,d){return a.map(c,function(a){return b.intersects(d,b.getElementBounds(a.$el))?a:null})},jq:function(b){return a(a.map(b,function(a){return a.$el.get()}))},make:function(c){for(var f,g=this,h=e.arg2arr(arguments),i=g.g.tmpl,j=[],k=[],l=0,m=h.length;l<m;l++)f=h[l],(d.jq(f)||d.array(f))&&j.push.apply(j,a.map(a.makeArray(f),function(a){return d.hash(a)?a=i.onitemmake(a):d.element(a)&&k.push(a=i.onitemparse(a)),a instanceof b.Item?a:null}));return k.length>0&&i.onitemsparsed(k),j.length>0&&i.onitemsmade(j),j},create:function(b,c){var e=this;if(d.array(b)&&b.length>0){var f=e.g.tmpl;c=!!d.boolean(c)&&c;var g=[],h=[];a.each(b,function(a,b){b.canCreate()&&(f.onitemcreate(b),b.isCreated&&g.push(b)),c&&b.canAppend()&&(f.onitemappend(b),b.isAttached&&h.push(b))}),g.length>0&&f.onitemscreated(g),h.length>0&&f.onitemsappended(h)}},append:function(b){var c=this;if(d.array(b)&&b.length>0){var e=c.g.tmpl,f=a.map(b,function(a){return a.canAppend()&&(e.onitemappend(a),a.isAttached)?a:null});f.length>0&&e.onitemsappended(f)}},detach:function(b){var c=this;if(d.array(b)&&b.length>0){var e=c.g.tmpl,f=a.map(b,function(a){return a.canDetach()&&(e.onitemdetach(a),!a.isAttached)?a:null})
;f.length>0&&e.onitemsdetached(f)}},load:function(c){var e=this;if(d.array(c)&&c.length>0){var f=e.g.tmpl;f.onitemsload(c);var g=a.map(c,function(a){return a.canLoad()?(f.onitemloading(a),a.load().then(function(a){return f.onitemloaded(a),a},function(a){return f.onitemerror(a),a})):null});return b.when(g).done(function(a){f.onitemsloaded(a)})}return a.Deferred().resolve().promise()},getState:function(a){var c=this,e={};return d.empty(c._filter)||(e.f=c._filter.slice()),a instanceof b.Item&&(e.i=a.id),e},setState:function(a){var c=this;if(d.hash(a)){var e=c.array.slice();if(d.empty(a.f)||(c.detach(e),e=c.filter(e,a.f)),c.create(e,!0),!d.empty(a.i)){var f=c.idMap[a.i];f instanceof b.Item&&f.scrollTo(),a.i=null,c.g.state.replace(a)}}},onWindowScroll:function(a){var b=a.data.self;b._throttle.limit(function(){b.load(b.loadable(b.available()))})},onWindowPopState:function(a){var b=a.data.self,c=a.originalEvent.state;d.empty(c)||c.id!==b.g.id||(b.setState(c),b.load(b.loadable(b.available())))}}),b.items.register("items",b.Items,1e3)}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.str),function(a,b,c,d){b.Paged=b.Items.extend({construct:function(a,b,c,d,e){var f=this;f._super(a),f.opt=b,f.cls=c,f.il8n=d,f.sel=e,f.controls=[],f.total=0,f.pages=[],f.currentPage=1;var g=f.g.opt.paging;f.g.state.pushOrReplace=g.pushOrReplace,f.theme=g.theme,f.size=g.size,f.position=g.position,f.ctrl=g.control},available:function(){var a=this,b=a.getPage(a.currentPage);return d.empty(b)?a._super():b},buildPages:function(a){var b=this;if(b.total=b.size>0&&a.length>0?Math.ceil(a.length/b.size):1,b.pages.splice(0,b.pages.length),b.total<=1)b.pages.push(a);else for(var c=0;c<b.total;c++)b.pages.push(a.splice(0,b.size));b.buildControls()},buildControls:function(){var a=this;if(a.destroyControls(),b.controls.contains(a.ctrl)){var c,d,e=a.position;"both"!==e&&"top"!==e||(c=b.controls.make(a.ctrl,a.g,"top"),c.create()&&(c.append(),a.controls.push(c))),"both"!==e&&"bottom"!==e||(d=b.controls.make(a.ctrl,a.g,"bottom"),d.create()&&(d.append(),a.controls.push(d)))}},destroyControls:function(){var b=this;d.empty(b.controls)||a.each(b.controls.splice(0,b.controls.length),function(a,b){b.destroy()})},updateControls:function(b){var c=this;d.empty(c.controls)||a.each(c.controls,function(a,c){c.update(b)})},isValidPage:function(a){return d.number(a)&&a>0&&a<=this.total},getPageNumber:function(a){return this.isValidPage(a)?a:this.currentPage},getPage:function(a){return this.isValidPage(a)?this.pages[a-1]:[]},setPage:function(a){var b=this;if(b.isValidPage(a)){for(var c=a-1,d=0,e=b.pages.length;d<e;d++)d===c?b.create(b.pages[d],!0):b.detach(b.pages[d]);return b.currentPage=a,b.pages[a-1]}return[]},scrollToPageTop:function(){var a=this,b=a.getPage(a.currentPage);b.length>0&&b[0].scrollTo("top")},goto:function(a,b){var c=this;if(c.isValidPage(a)){c.updateControls(a);var e=c.getPageNumber(a);if(e!==c.currentPage){1!==c.currentPage||c.g.state.exists()||c.g.state.update(c.getState());var f=c.setPage(e);return f.length>0&&(b=!!d.boolean(b)&&b,b&&f.length>0&&c.scrollToPageTop(),c.g.state.update(c.getState())),f}}return[]},getState:function(a){var b=this,c=b._super(a);return b.isValidPage(b.currentPage)&&(c.p=b.currentPage),c},setState:function(b){var c=this;if(d.hash(b)){var e=c.array.slice();d.empty(b.f)||(c.detach(e),e=c.filter(e,b.f)),c.buildPages(e);var f=c.getPageNumber(b.p),g=!d.empty(b.i)&&c.idMap[b.i]?c.idMap[b.i]:null;e=c.getPage(f),g&&a.inArray(g,e)===-1&&(f=c.getPageNumber(c.findPage(g))),c.updateControls(f),e=c.setPage(f),e.length>0&&(g&&a.inArray(g,e)!==-1?g.scrollTo():d.empty(b)||c.scrollToPageTop()),d.empty(b.i)||(b.i=null,c.g.state.replace(b))}},findPage:function(b){for(var c=this,d=0,e=c.pages.length;d<e;d++)if(a.inArray(b,c.pages[d])!==-1)return d+1;return 0}}),b.PagedControl=b.Component.extend({construct:function(a,b){this._super(a),this.p=this.g.items,this.position=b},create:function(){return!1},destroy:function(){},append:function(){},update:function(a){}}),b.controls=new c.Factory,b.Gallery.options.paging={type:"none",theme:"fg-light",size:30,pushOrReplace:"push",position:"none",control:"none"}}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(a,b,c,d){b.Infinite=b.Paged.extend({construct:function(a,b,c,d,e){this._super(a,b,c,d,e),this.g.state.pushOrReplace=b.pushOrReplace,this.distance=b.distance,this._created=[]},buildPages:function(a){this._super(a),this._created=[]},available:function(){var a=this;return d.empty(a._available)?a._available=a.array.slice():a._available},loadable:function(a){var c=this,e=c.getPage(c.currentPage);if(!d.empty(e)){var f=b.getViewportBounds();b.getElementBounds(e[e.length-1].$el).top-f.bottom<c.distance&&c.goto(c.currentPage+1,!1)}return c._super(a)},setPage:function(b){var c=this;if(c.isValidPage(b)){for(var d=0;d<b;d++)a.inArray(d,c._created)===-1&&(c.create(c.pages[d],!0),c._created.push(d));return c.currentPage=b,c.pages[b-1]}return[]}}),b.Gallery.options.infinite={distance:200,pushOrReplace:"replace"},b.items.register("infinite",b.Infinite)}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(a,b,c,d){b.LoadMore=b.Infinite.extend({construct:function(a,b,c,d,e){this._super(a,b,c,d,e),this.position=b.position,this.ctrl=b.control,this.amount=b.amount,this._count=b.amount},buildPages:function(a){this._super(a),this._count=this.amount},loadable:function(a){var c=this,e=c.getPage(c.currentPage);if(!d.empty(e)){var f=b.getViewportBounds();if(b.getElementBounds(e[e.length-1].$el).top-f.bottom<c.distance){var g=c.currentPage+1;c.isValidPage(g)&&c._count<c.amount&&(c._count++,c.goto(g,!1)),c.currentPage===c.total&&c.destroyControls()}}return b.Paged.prototype.loadable.call(c,a)},loadMore:function(){var a=this;a._count=0,a.load(a.loadable(a.available()))}}),b.LoadMoreControl=b.PagedControl.extend({construct:function(b,c){this._super(b,c),this.$container=a(),this.$button=a()},create:function(){var b=this;return b.$container=a("<div/>",{class:b.p.cls.container}).addClass(b.p.theme),b.$button=a("<button/>",{class:b.p.cls.button,type:"button"}).html(b.p.il8n.button).on("click.foogallery",{self:b},b.onButtonClick).appendTo(b.$container),!0},destroy:function(){var b=this;b.$button.off("click.foogallery",b.onButtonClick),b.$container.remove(),b.$container=a(),b.$button=a()},append:function(){var a=this;"top"===a.position?a.$container.insertBefore(a.g.$el):a.$container.insertAfter(a.g.$el)},onButtonClick:function(a){a.preventDefault(),a.data.self.p.loadMore()}}),b.Gallery.options.loadMore={amount:1,distance:200,pushOrReplace:"replace",position:"bottom",control:"loadMore-control"},b.Gallery.options.il8n.loadMore={button:"Load More"},b.Gallery.options.classes.loadMore={container:"fg-paging-container",button:"fg-load-more"},b.items.register("loadMore",b.LoadMore),b.controls.register("loadMore-control",b.LoadMoreControl)}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(a,b,c,d){b.Dots=b.Paged.extend({construct:function(a,b,c,d,e){this._super(a,b,c,d,e),this.g.state.pushOrReplace=b.pushOrReplace,this.position=b.position,this.ctrl=b.control}}),b.DotsControl=b.PagedControl.extend({construct:function(b,c){this._super(b,c),this.$container=a(),this.$list=a(),this.$items=a()},create:function(){for(var b,c=this,d=c.p.cls,e=c.p.il8n,f=[],g=a("<ul/>",{class:d.list}),h=0,i=c.p.pages.length;h<i;h++)f.push(b=c.createItem(h+1,e.dot)),g.append(b);return c.$list=g,c.$container=a("<nav/>",{class:d.container}).addClass(c.p.theme).append(g),c.$items=a(a.map(f,function(a){return a.get()})),!0},append:function(){var a=this;"top"===a.position?a.$container.insertBefore(a.g.$el):a.$container.insertAfter(a.g.$el)},destroy:function(){var b=this,c=b.p.sel;b.$list.find(c.link).off("click.foogallery",b.onLinkClick),b.$container.remove(),b.$container=a(),b.$list=a(),b.$items=a()},update:function(a){this.setSelected(a-1)},setSelected:function(b){var c=this,e=c.p.cls,f=c.p.il8n,g=c.p.sel;c.$items.filter(g.selected).removeClass(e.selected).each(function(b,c){var e=a(c),f=e.data("label"),h=e.find(g.reader);d.string(f)&&0!==h.length&&h.html(f)}),c.$items.eq(b).addClass(e.selected).each(function(b,c){var e=a(c),h=e.find(g.reader),i=h.html();d.string(i)&&0!==h.length&&(e.data("label",i),h.html(f.current))})},createItem:function(b,c,e,f,g){e=d.string(e)?e:b,c=d.string(c)?c:"";var h=this,i=h.p.opt,j=h.p.cls,k=a("<a/>",{class:j.link,href:"#page-"+b}).html(e).on("click.foogallery",{self:h,page:b},h.onLinkClick);d.empty(c)||k.attr("title",c.replace(/\{PAGE}/g,b).replace(/\{LIMIT}/g,i.limit+"")),g=d.string(g)?g:c,d.empty(g)||k.prepend(a("<span/>",{class:j.reader,text:g.replace(/\{PAGE}/g,"").replace(/\{LIMIT}/g,i.limit+"")}));var l=a("<li/>",{class:j.item}).append(k);return f=d.string(f)?f:"",d.empty(f)||l.addClass(f),l},onLinkClick:function(b){b.preventDefault();var c=b.data.self,d=b.data.page,e=c.p.sel;a(this).closest(e.item).is(e.disabled)||(c.p.goto(d,!0),c.p.load(c.p.loadable(c.p.available())))}}),b.Gallery.options.dots={position:"both",pushOrReplace:"push",control:"dots-control"},b.Gallery.options.classes.dots={container:"fg-paging-container",list:"fg-dots",item:"fg-dot-item",link:"fg-dot-link",disabled:"fg-disabled",selected:"fg-selected",visible:"fg-visible",reader:"fg-sr-only"},b.Gallery.options.il8n.dots={current:"Current page",dot:"Page {PAGE}"},b.items.register("dots",b.Dots),b.controls.register("dots-control",b.DotsControl)}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(a,b,c,d){b.Pagination=b.Dots.extend({construct:function(a,b,c,d,e){this._super(a,b,c,d,e),this.limit=b.limit,this.showFirstLast=b.showFirstLast,this.showPrevNext=b.showPrevNext,this.showPrevNextMore=0!==b.limit&&b.showPrevNextMore,this.pageKeywords=["first","prev","prevMore","nextMore","next","last"],this.sel.firstPrev=[this.sel.first,this.sel.prev].join(","),this.sel.nextLast=[this.sel.next,this.sel.last].join(","),this.range={index:-1,start:-1,end:-1,changed:!1,selected:!1}},buildPages:function(a){this._super(a),this.range={index:-1,start:-1,end:-1,changed:!1,selected:!1}},updateControls:function(b){var c=this;c.isValidPage(b)&&(c.range=c.getControlRange(b),a.each(c.controls,function(a,b){b.update(c.range)}))},isValidPage:function(a){return this._super(a)||this.isKeyword(a)},isKeyword:function(b){return d.string(b)&&a.inArray(b,this.pageKeywords)!==-1},getPageNumber:function(a){var b=this;return"first"===a&&(a=1),"prev"===a&&(a=b.currentPage-1),"next"===a&&(a=b.currentPage+1),"last"===a&&(a=b.total),"prevMore"!==a&&"nextMore"!==a||(a=b.currentPage),b._super(a)},getControlRange:function(a){var b=this;switch(a){case"prevMore":return b._range(b.range.start-1,!1,!1);case"nextMore":return b._range(b.range.end+1,!0,!1);default:return a=b.getPageNumber(a),b._range(a-1,a<=b.currentPage)}},_range:function(a,b,c){var e=this,f={index:a,start:e.range.start,end:e.range.end,changed:!1,selected:!d.boolean(c)||c};if(e.total<=e.limit||0===e.limit)f.start=0,f.end=e.total-1;else if(a<f.start||a>f.end){var g=a+(e.limit-1),h=a-(e.limit-1);if(b)for(f.start=a,f.end=g;f.end>e.total;)f.start-=1,f.end-=1;else for(f.start=h,f.end=a;f.start<0;)f.start+=1,f.end+=1}return(f.changed=f.start!==e.range.start||f.end!==e.range.end)&&(e.range=f),f}}),b.PaginationControl=b.DotsControl.extend({construct:function(b,c){this._super(b,c),this.$buttons=a()},create:function(){var b=this;if(b._super()){var c,d=b.p.total<=b.p.limit||0===b.p.limit,e=[];return!d&&b.p.showPrevNextMore&&(e.push(c=b.createButton("prevMore")),b.$list.prepend(c)),b.p.showPrevNext&&(e.push(c=b.createButton("prev")),b.$list.prepend(c)),b.p.showFirstLast&&(e.push(c=b.createButton("first")),b.$list.prepend(c)),!d&&b.p.showPrevNextMore&&(e.push(c=b.createButton("nextMore")),b.$list.append(c)),b.p.showPrevNext&&(e.push(c=b.createButton("next")),b.$list.append(c)),b.p.showFirstLast&&(e.push(c=b.createButton("last")),b.$list.append(c)),b.$buttons=a(a.map(e,function(a){return a.get()})),!0}return!1},destroy:function(){this._super(),this.$buttons=a()},update:function(a){var b=this,c=b.p.sel;a.changed&&b.setVisible(a.start,a.end),a.selected&&(b.setSelected(a.index),b.toggleDisabled(b.$buttons.filter(c.firstPrev),a.index<=0),b.toggleDisabled(b.$buttons.filter(c.nextLast),a.index>=b.p.pages.length-1)),b.toggleDisabled(b.$buttons.filter(c.prevMore),a.start<=0),b.toggleDisabled(b.$buttons.filter(c.nextMore),a.end>=b.p.pages.length-1)},setVisible:function(a,b){var c=this,d=c.p.cls;c.$items.removeClass(d.visible).slice(a,b+1).addClass(d.visible)},toggleDisabled:function(a,b){var c=this,d=c.p.cls,e=c.p.sel;b?a.addClass(d.disabled).find(e.link).attr("tabindex",-1):a.removeClass(d.disabled).find(e.link).removeAttr("tabindex")},createButton:function(a){var b=this,c=b.p.cls,d=b.p.il8n;return b.createItem(a,d.labels[a],d.buttons[a],c.button+" "+c[a])}}),b.Gallery.options.pagination={limit:5,position:"both",showPrevNext:!0,showFirstLast:!0,showPrevNextMore:!0,pushOrReplace:"push",control:"pagination-control"},b.Gallery.options.classes.pagination={container:"fg-paging-container",list:"fg-pages",item:"fg-page-item",button:"fg-page-button",link:"fg-page-link",first:"fg-page-first",prev:"fg-page-prev",prevMore:"fg-page-prev-more",nextMore:"fg-page-next-more",next:"fg-page-next",last:"fg-page-last",disabled:"fg-disabled",selected:"fg-selected",visible:"fg-visible",reader:"fg-sr-only"},b.Gallery.options.il8n.pagination={buttons:{first:"&laquo;",prev:"&lsaquo;",next:"&rsaquo;",last:"&raquo;",prevMore:"&hellip;",nextMore:"&hellip;"},labels:{current:"Current page",page:"Page {PAGE}",first:"First page",prev:"Previous page",next:"Next page",last:"Last page",prevMore:"Select from previous {LIMIT} pages",nextMore:"Select from next {LIMIT} pages"}},b.items.register("pagination",b.Pagination),b.controls.register("pagination-control",b.PaginationControl)}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is);