/*
* FooGallery - The Most Intuitive and Extensible Gallery Creation and Management Tool Ever Created for WordPress
* @version 0.0.1
* @link 
* @copyright Steven Usher & Brad Vincent 2015
* @license Released under the GPLv3 license.
*/
!function(a,b){b.$=a}(jQuery,window.FooGallery=window.FooGallery||{}),function(a){if(!a)return void console.warn("jQuery must be included in the page prior to the FooGallery.utils library.");var b={$:a,version:"0.0.1"};b.versionCompare=function(a,b){function c(a){for(var b=a.split("."),c=0,d=b.length;c<d;c++)b[c]=parseInt(b[c]),isNaN(b[c])&&(b[c]=0);return b}if(!/[\d.]/.test(a)||!/[\d.]/.test(b))return NaN;for(var d=c(a),e=c(b);d.length<e.length;)d.push(0);for(;e.length<d.length;)e.push(0);for(var f=0;f<d.length;++f){if(e.length==f)return 1;if(d[f]!=e[f])return d[f]>e[f]?1:-1}return d.length!=e.length?-1:0};var c=!!window.FooGallery.utils;c?c&&(b.versionCompare(b.version,window.FooGallery.utils.version)>0?(console.warn("An older version of FooGallery.utils ("+window.FooGallery.utils.version+") already exists in the page, version "+b.version+" will override it."),window.FooGallery.utils=b):console.warn("A newer version of FooGallery.utils ("+window.FooGallery.utils.version+") already exists in the page, version "+b.version+" will not register itself.")):window.FooGallery.utils=b}(jQuery),function(a,b){"0.0.1"===b.version&&(b.is={},b.is.array=function(a){return"[object Array]"===Object.prototype.toString.call(a)},b.is.boolean=function(a){return"[object Boolean]"===Object.prototype.toString.call(a)},b.is.element=function(a){return"object"==typeof HTMLElement?a instanceof HTMLElement:!!a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName},b.is.empty=function(a){if(b.is.undef(a)||null===a)return!0;if(b.is.number(a)&&0==a)return!0;if(b.is.boolean(a)&&a===!1)return!0;if(b.is.string(a)&&0===a.length)return!0;if(b.is.array(a)&&0===a.length)return!0;if(b.is.jq(a)&&0===a.length)return!0;if(b.is.hash(a)){for(var c in a)if(a.hasOwnProperty(c))return!1;return!0}return!1},b.is.error=function(a){return"[object Error]"===Object.prototype.toString.call(a)},b.is.fn=function(a){return a===window.alert||"[object Function]"===Object.prototype.toString.call(a)},b.is.hash=function(a){return b.is.object(a)&&a.constructor===Object&&!a.nodeType&&!a.setInterval},b.is.jq=function(c){return!b.is.undef(a)&&c instanceof a},b.is.number=function(a){return"[object Number]"===Object.prototype.toString.call(a)&&!isNaN(a)},b.is.object=function(a){return"[object Object]"===Object.prototype.toString.call(a)&&!b.is.undef(a)&&null!==a},b.is.promise=function(a){return b.is.object(a)&&b.is.fn(a.then)&&b.is.fn(a.promise)},b.is.size=function(a){return!!(b.is.string(a)&&!b.is.empty(a)||b.is.number(a))&&/^(auto|none|(?:[\d\.]*)+?(?:%|px|mm|q|cm|in|pt|pc|em|ex|ch|rem|vh|vw|vmin|vmax)?)$/.test(a)},b.is.string=function(a){return"[object String]"===Object.prototype.toString.call(a)},b.is.undef=function(a){return void 0===a})}(FooGallery.utils.$,FooGallery.utils),function(a,b,c){if("0.0.1"===b.version){b.fn={};var d=Function.prototype.toString;b.fn.CONTAINS_SUPER=/xyz/.test(d.call(function(){xyz}))?/\b_super\b/:/.*/,b.fn.addOrOverride=function(a,e,f){if(c.object(a)&&c.string(e)&&!c.empty(e)&&c.fn(f)){var g=a[e],h=c.fn(g)&&b.fn.CONTAINS_SUPER.test(d.call(f));a[e]=h?function(a,b){return function(){var c=this._super;this._super=a;var d=b.apply(this,arguments);return this._super=c,d}}(g,f):f}},b.fn.apply=function(a,b){function d(){return a.apply(this,b)}return b=c.array(b)?b:[],d.prototype=a.prototype,new d},b.fn.arg2arr=function(a){return Array.prototype.slice.call(a)},b.fn.check=function(d,e,f,g){function h(a){return function(){return a.apply(d,arguments)}}return f=c.fn(f)?f:a.noop,d=c.object(d)?d:window,e=c.string(e)?b.fn.fetch(e,g):e,h(c.fn(e)?e:f)},b.fn.fetch=function(b,d){return!c.string(b)||c.empty(b)?null:(d=c.object(d)?d:window,a.each(b.split("."),function(a,b){if(!d[b])return!1;d=d[b]}),c.fn(d)?d:null)},b.fn.enqueue=function(d,e,f,g){function h(a,b){try{return n.push(a),b.apply(a,i)}catch(a){return j.reject(a,n),j}}var i=b.fn.arg2arr(arguments),j=a.Deferred(),k=a.Deferred(),l=k.promise(),m=[],n=[],o=!0;return d=i.shift(),e=i.shift(),a.each(d,function(a,d){c.fn(d[e])&&(l=l.then(function(){if(!o){var a=b.fn.arg2arr(arguments);m.push(a)}return o=!1,h(d,d[e])}))}),l.then(function(){if(!o){var a=b.fn.arg2arr(arguments);m.push(a)}o=!1,j.resolve(m)}),l.fail(function(){var a=b.fn.arg2arr(arguments);a.push(n),j.reject.apply(j,a)}),k.resolve(),j}}}(FooGallery.utils.$,FooGallery.utils,FooGallery.utils.is),function(a,b){if("0.0.1"===a.version){a.url={};var c=document.createElement("a");a.url.parts=function(a){return c.href=a,{hash:c.hash,host:c.host,hostname:c.hostname,href:c.href,origin:c.origin,pathname:c.pathname,port:c.port,protocol:c.protocol,search:c.search}},a.url.full=function(a){return!b.string(a)||b.empty(a)?null:(c.href=a,c.href)},a.url.param=function(a,c,d){if(!b.string(a)||b.empty(a)||!b.string(c)||b.empty(c))return a;var e,f,g,h;return b.undef(d)?(e=new RegExp("[?|&]"+c+"=([^&;]+?)(&|#|;|$)"),f=e.exec(a)||[,""],g=f[1].replace(/\+/g,"%20"),b.string(g)&&!b.empty(g)?decodeURIComponent(g):null):(e=new RegExp("([?&])"+c+"[^&]*"),h=c+"="+encodeURIComponent(d),g=a.replace(e,"$1"+h),g!==a||e.test(g)||(g+="&"+h),g)}}}(FooGallery.utils,FooGallery.utils.is),function(a,b,c){"0.0.1"===a.version&&(a.str={},a.str.camel=function(a){return b.empty(a)?a:a.toUpperCase()===a?a.toLowerCase():a.replace(/^([A-Z])|[-\s_]+(\w)/g,function(a,c,d){return b.string(d)?d.toUpperCase():c.toLowerCase()})},a.str.contains=function(a,c,d){return!(!b.string(a)||b.empty(a)||!b.string(c)||b.empty(c))&&(c.length<=a.length&&(d?a.toUpperCase().indexOf(c.toUpperCase()):a.indexOf(c))!==-1)},a.str.containsWord=function(a,c,d){if(!b.string(a)||b.empty(a)||!b.string(c)||b.empty(c)||a.length<c.length)return!1;for(var e=a.split(/\W/),f=0,g=e.length;f<g;f++)if(d?e[f].toUpperCase()==c.toUpperCase():e[f]==c)return!0;return!1},a.str.endsWith=function(a,c){return!b.string(a)||b.empty(a)||!b.string(c)||b.empty(c)?a==c:a.slice(a.length-c.length)==c},a.str.escapeRegExp=function(a){return b.empty(a)?a:a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},a.str.fnv1a=function(a){if(!b.string(a)||b.empty(a))return null;var c,d,e=2166136261;for(c=0,d=a.length;c<d;c++)e^=a.charCodeAt(c),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0},a.str.from=function(c,d){return!b.string(c)||b.empty(c)||!b.string(d)||b.empty(d)?null:a.str.contains(c,d)?c.substring(c.indexOf(d)+d.length):null},a.str.join=function(d,e,f){if(!b.string(d)||!b.string(e))return null;var g=c.arg2arr(arguments);d=g.shift();var h,i,j=g.shift();for(h=0,i=g.length;h<i;h++)e=g[h],b.empty(e)||(a.str.endsWith(j,d)&&(j=j.slice(0,j.length-d.length)),a.str.startsWith(e,d)&&(e=e.slice(d.length)),j+=d+e);return j},a.str.startsWith=function(a,c){return!b.empty(a)&&!b.empty(c)&&a.slice(0,c.length)==c},a.str.until=function(c,d){return b.empty(c)||b.empty(d)?c:a.str.contains(c,d)?c.substring(0,c.indexOf(d)):c},a.str.format=function(a,d,e){var f=c.arg2arr(arguments);if(a=f.shift(),b.empty(a)||b.empty(f))return a;1===f.length&&(b.array(f[0])||b.object(f[0]))&&(f=f[0]);for(var g in f)a=a.replace(new RegExp("\\{"+g+"\\}","gi"),f[g]);return a})}(FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn),function(a,b,c,d,e){if("0.0.1"===b.version){b.obj={};var f=function(){};b.obj.create=function(a){if(!c.object(a))throw TypeError("Argument must be an object");f.prototype=a;var b=new f;return f.prototype=null,b},b.obj.extend=function(e,f,g){if(!c.object(e)||!c.object(f))return e;var h=d.arg2arr(arguments);return e=h.shift(),a.each(h,function(a,c){b.obj.merge(e,c)}),e},b.obj.merge=function(a,d){if(!c.object(a)||!c.object(d))return a;var e;for(e in d)d.hasOwnProperty(e)&&(c.object(d[e])?(a[e]=c.object(a[e])?a[e]:{},b.obj.merge(a[e],d[e])):c.array(d[e])?a[e]=d[e].slice():a[e]=d[e]);return a},b.obj.mergeValid=function(d,e,f,g){if(!c.hash(f)||!c.hash(e))return d;e=c.hash(e)?e:{},g=c.hash(g)?g:{};var h,i,j;for(h in e)e.hasOwnProperty(h)&&c.fn(e[h])&&(i=c.array(g[h])?g[h]:c.string(g[h])?[g[h]]:[h],a.each(i,function(a,g){if(j=b.obj.prop(f,g),!c.undef(j))return e[h](j)?(b.obj.prop(d,h,j),!1):void 0}));return d},b.obj.prop=function(b,d,f){if(c.object(b)&&!c.empty(d)){var g,h;if(c.undef(f))return e.contains(d,".")?(g=d.split("."),h=g.length-1,a.each(g,function(a,d){if(a===h)f=b[d];else{if(!c.object(b[d]))return!1;b=b[d]}})):c.undef(b[d])||(f=b[d]),f;e.contains(d,".")?(g=d.split("."),h=g.length-1,a.each(g,function(a,d){if(a===h)b[d]=f;else{if(!c.object(b[d]))return!1;b=b[d]}})):c.undef(b[d])||(b[d]=f)}}}}(FooGallery.utils.$,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.str),function(a,b,c){if("0.0.1"===b.version){var d=0;b.uniqueId=function(a,b){var e=a.attr("id");return c.empty(e)&&(b=c.string(b)&&!c.empty(b)?b:"uid-",e=b+ ++d,a.attr("id",e).data("__uniqueId__",!0)),e},b.removeUniqueId=function(a){a.data("__uniqueId__")&&a.removeAttr("id").removeData("__uniqueId__")}}}(FooGallery.utils.$,FooGallery.utils,FooGallery.utils.is),function(a,b,c){if("0.0.1"===b.version){b.transition={};var d=document.createElement("div");b.transition.supported=function(a){var b=a.style;return c.string(b.transition)||c.string(b.WebkitTransition)||c.string(b.MozTransition)||c.string(b.msTransition)||c.string(b.OTransition)}(d),b.transition.end=function(a){var b=a.style;return c.string(b.transition)?"transitionend":c.string(b.WebkitTransition)?"webkitTransitionEnd":c.string(b.MozTransition)?"transitionend":c.string(b.msTransition)?"msTransitionEnd":c.string(b.OTransition)?"oTransitionEnd":null}(d),b.transition.duration=function(a,b){if(b=c.number(b)?b:0,!c.jq(a))return b;var d=a.css("transition-duration");if(/^([\d\.]*)+?(ms|s)$/i.test(d)){var e=d.match(/^([\d\.]*)+?(ms|s)$/i),f=parseFloat(e[1]);return"s"===e[2].toLowerCase()&&(f*=1e3),f}return b},b.transition.start=function(d,e,f,g){var h=a.Deferred();if(d=d.first(),b.transition.supported){var i=d.data("transition_safety");c.hash(i)&&c.number(i.timer)&&(clearTimeout(i.timer),d.removeData("transition_safety").off(b.transition.end+".utils"),i.deferred.reject()),g=c.number(g)?g:b.transition.duration(d)+50,i=d.data("transition_safety",{deferred:h,timer:setTimeout(function(){d.removeData("transition_safety").off(b.transition.end+".utils"),h.resolve()},g)}),d.on(b.transition.end+".utils",function(a){d.is(a.target)&&(clearTimeout(i.timer),d.removeData("transition_safety").off(b.transition.end+".utils"),h.resolve())})}return setTimeout(function(){d.toggleClass(e,f),b.transition.supported||h.resolve()},1),h},a.fn.fooTransition=function(a,c,d,e){return b.transition.start(this,a,c,e).then(d),this}}}(FooGallery.utils.$,FooGallery.utils,FooGallery.utils.is),function(a,b,c,d,e){"0.0.1"===b.version&&(b.Class=function(){},b.Class.extend=function(a){function f(){if(!c.fn(this.construct))throw new SyntaxError('FooGallery.utils.Class objects must be constructed with the "new" keyword.');this.construct.apply(this,arguments)}a=c.hash(a)?a:{};var g=d.create(this.prototype);for(var h in a)a.hasOwnProperty(h)&&e.addOrOverride(g,h,a[h]);return g.construct=c.fn(g.construct)?g.construct:function(){},f.prototype=g,f.prototype.constructor=c.fn(g.__ctor__)?g.__ctor__:f,f.extend=b.Class.extend,f.override=b.Class.override,f},b.Class.override=function(a,b){e.addOrOverride(this.prototype,a,b)})}(FooGallery.utils.$,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.obj,FooGallery.utils.fn),function(a,b,c,d){"0.0.1"===b.version&&(b.Factory=b.Class.extend({construct:function(){this.registered={}},contains:function(a){return!c.undef(this.registered[a])},load:function(b,e,f){var g,h,i=this,j=d.arg2arr(arguments),k=[],l=[];b=j.shift()||{};for(g in i.registered)if(i.registered.hasOwnProperty(g)){var m=i.registered[g];b.hasOwnProperty(g)&&(h=b[g],c.string(h)&&(h=d.fetch(b[g])),c.fn(h)&&(m={name:g,klass:h,priority:i.registered[g].priority})),k.push(m)}for(g in b)b.hasOwnProperty(g)&&!i.registered.hasOwnProperty(g)&&(h=b[g],c.string(h)&&(h=d.fetch(b[g])),c.fn(h)&&k.push({name:g,klass:h,priority:0}));return k.sort(function(a,b){return b.priority-a.priority}),a.each(k,function(a,b){c.fn(b.klass)&&l.push(d.apply(b.klass,j))}),l},make:function(a,b,e){var f,g=this,h=d.arg2arr(arguments);return a=h.shift(),f=g.registered[a],c.hash(f)&&c.fn(f.klass)?d.apply(f.klass,h):null},names:function(b){b=!!c.boolean(b)&&b;var d,e=[];if(b){var f=[];for(d in this.registered)this.registered.hasOwnProperty(d)&&f.push(this.registered[d]);f.sort(function(a,b){return b.priority-a.priority}),a.each(f,function(a,b){e.push(b.name)})}else for(d in this.registered)this.registered.hasOwnProperty(d)&&e.push(d);return e},register:function(a,b,d){if(!c.string(a)||c.empty(a)||!c.fn(b))return!1;d=c.number(d)?d:0;var e=this.registered[a];return this.registered[a]={name:a,klass:b,priority:c.undef(e)?d:e.priority},!0}}))}(FooGallery.utils.$,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn),function(a,b,c){"0.0.1"===a.version&&(a.Debugger=a.Class.extend({construct:function(a){this.key=a,this.enabled=!!localStorage.getItem(this.key)},enable:function(){this.enabled=!0,localStorage.setItem(this.key,this.enabled)},disable:function(){this.enabled=!1,localStorage.removeItem(this.key)},log:function(a,c){this.enabled&&console.log.apply(console,b.arg2arr(arguments))},logf:function(a,d,e){if(this.enabled){var f=b.arg2arr(arguments);a=f.shift(),d=f.shift(),f.unshift(c.format(a,d)),this.log.apply(this,f)}}}))}(FooGallery.utils,FooGallery.utils.fn,FooGallery.utils.str),function(a,b,c){"0.0.1"===b.version&&(b.Throttle=b.Class.extend({construct:function(a){this.id=null,this.active=!1,this.idle=c.number(a)?a:0},limit:function(a){if(c.fn(a)){this.clear();var b=this;this.active=!0,this.id=setTimeout(function(){b.active=!1,b.id=null,a()},this.idle)}},clear:function(){c.number(this.id)&&(clearTimeout(this.id),this.active=!1,this.id=null)}}))}(FooGallery.utils.$,FooGallery.utils,FooGallery.utils.is),function(a,b,c,d){b.ready=function(a){function c(){try{a.call(window,b.$)}catch(a){console.error(a)}}(Function("/*@cc_on return true@*/")()?"complete"===document.readyState:"loading"!==document.readyState)?c():document.addEventListener("DOMContentLoaded",c,!1)},b.get=function(b){return b=d.jq(b)?b:a(b),b.data("__FooGallery__")||null},b.init=function(c,e){c=d.jq(c)?c:a(c);var f=b.get(c);return f instanceof b.Gallery&&f.destroy(),f=new b.Gallery(c,a.extend(!0,{},e,c.data("foogallery"))),f.initialize(),f},b.initAll=function(c){a(".foogallery").each(function(a,d){b.init(d,c)})},b.when=function(b){if(!d.array(b)||d.empty(b))return a.when();for(var c=a.Deferred(),e=[],f=b.length,g=0;g<b.length;g++)b[g].then(function(a){e.push(a)}).always(function(){--f||c.resolve(e)});return c.promise()};var e;b.getViewportBounds=function(){e||(e=a(window));var b={top:e.scrollTop(),left:e.scrollLeft(),width:e.width(),height:e.height()};return b.right=b.left+b.width,b.bottom=b.top+b.height,b},b.getElementBounds=function(b){d.jq(b)||(b=a(b));var c=b.offset();return c.width=b.width(),c.height=b.height(),c.right=c.left+c.width,c.bottom=c.top+c.height,c},b.intersects=function(a,b){return a.left<=b.right&&b.left<=a.right&&a.top<=b.bottom&&b.top<=a.bottom}}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(a,b,c,d,e){b.Gallery=c.Class.extend({construct:function(d,e){var f=this;f.$elem=a(d),f.id=f.$elem.prop("id"),f.options=a.extend(!0,{},b.Gallery.options,e),f.items=[],f.template=b.templates.make(f.$elem,f,f.options.template),f.infinite=new b.InfiniteScroll(f),f.paging=new b.Pagination(f),f._throttle=new c.Throttle(f.options.throttle),f._selectors=null,f._delay=null,f.hashValues=[],f.lastState=null},invoke:function(b,c){c=d.array(c)?c:[];var e=this,f=b.replace(/^on/i,"")+".fg.gallery",g=a.Event(f);return e.options.debug&&console.log(e.id+":"+f,c),this.$elem.trigger(g,c),d.fn(e.options[b])?e.options[b].apply(e.template,c):d.fn(e.template[b])?e.template[b].apply(e.template,c):null},initialize:function(){var b=this;return b.preinit().then(function(){return a.Deferred(function(a){b._delay=setTimeout(function(){b._delay=null,a.resolve()},b.options.delay)}).promise()}).then(function(){return b.init()}).then(function(){return b.postinit()})},preinit:function(){var b,c=this;return c.$elem.data("__FooGallery__",c),e.startsWith(b=location.hash.substr(1),c.id)&&(c.hashValues=b.split(/\//g),c.hashValues.shift()),a.when(c.invoke("onpreinit"))},init:function(){var b=this,c=b.items;return c.push.apply(c,b.parseItems()),b.fetchItems().then(function(a){c.push.apply(c,a)}).always(function(){return b.infinite.enabled||b.paging.enabled||b.createItems(c,!0),b.infinite.init(),b.paging.init(),a.when(b.invoke("oninit"))})},postinit:function(){var b=this;return b.checkItems().always(function(){return(b.options.lazy||b.infinite.enabled)&&a(window).on("scroll.fg.loader",{self:b},b.onWindowScroll).on("popstate",function(a){var c,f=a.originalEvent.state;console.log("state:",f),!d.empty(f)&&d.number(f.index)?(b.hashValues=[f.index],b.checkItems()):e.startsWith(c=location.hash.substr(1),b.id)&&(b.hashValues=c.split(/\//g),b.hashValues.shift(),b.checkItems())}),a.when(b.invoke("onpostinit"))})},checkState:function(){var a,b=this;if(e.startsWith(a=location.hash.substr(1),b.id)){var c,f=a.split(/\//g),g={page:-1,index:-1};f.shift(),1===f.length&&(c=isNaN(f[0])?f[0]:parseInt(f[0]),d.number(c)?g.index=c:d.string(c)&&(g.page=parseInt(e.from(c,"p"))))}},destroy:function(){var b=this;return d.number(b._delay)&&clearTimeout(b._delay),b._throttle.clear(),a.when(b.invoke("ondestroy")).always(function(){a(window).off("scroll.fg.loader",this.onWindowScroll),b.infinite.destroy(),b.paging.destroy(),b.$elem.removeData("__FooGallery__")})},getSelectors:function(a){var b=this;if(!(a=!!d.boolean(a)&&a)&&d.hash(b._selectors))return b._selectors;var c=b.options.classes.item,e=b.selectorFromCSSClass;return b._selectors={item:e(c.elem),inner:e(c.inner),anchor:e(c.anchor),image:e(c.image),loading:e(c.loading),loaded:e(c.loaded),error:e(c.error),caption:e(c.caption.elem),ignore:e([c.loading,c.loaded,c.error])}},selectorFromCSSClass:function(b){return d.array(b)||(b=[b]),a.map(b,function(a){return d.string(a)?"."+a.split(/\s/g).join("."):null}).join(",")},jq:function(b){return a(a.map(b,function(a){return a.$el.get()}))},itemFromPoint:function(a,b,c){c=!d.boolean(c)||c;var e=this;if(!c)return e.itemFromElement(document.elementFromPoint(a,b));for(var f,g,h=20,i=[[a,b],[a-h,b],[a-h,b-h],[a,b-h],[a+h,b-h],[a+h,b],[a+h,b+h],[a,b+h]],j=0,k=i.length;j<k;j++)if(d.element(f=document.elementFromPoint(i[j][0],i[j][1]))&&!d.empty(g=e.itemFromElement(f)))return g},itemFromElement:function(b){var c=this,e=c.getSelectors();return b=d.jq(b)?b:a(b),b=b.is(e.item)?b:b.closest(e.item),b.data("__FooGalleryItem__")||null},parseItems:function(){var a=this,b=a.getSelectors(),c=a.$elem.find(b.item).map(function(b,c){return a.invoke("onparse",[c,b])}).get();return c.length>0&&a.invoke("onparsed",[c]),c},fetchItems:function(){var c=this,e=c.options.items;return a.Deferred(function(b){d.array(e)&&!d.empty(e)?b.resolve(e.slice()):!d.empty(c.id)&&d.array(window[c.id+"-items"])?b.resolve(window[c.id+"-items"]):d.string(e)?a.get(e).done(function(a){d.array(a)?b.resolve(a):b.reject(Error("Unexpected response from items url."))}).fail(b.reject):b.reject()}).promise().then(function(e){return a.map(e,function(a){return d.hash(a)&&(a=new b.Item(c,a)),a instanceof b.Item?a:null})})},checkItems:function(){var c=this,e=c.options,f=[];c.infinite.check();var g,h=c.hashValues;!d.empty(h)&&!isNaN(g=parseInt(h[0]))&&c.items.length>g&&(c.items[g].scrollTo().focus(),h.splice(0,h.length));var i=b.getViewportBounds();return i.top-=e.distance,i.right+=e.distance,i.bottom+=e.distance,i.left-=e.distance,a.each(c.items,function(a,c){c.canLoad()&&(e.lazy?b.intersects(i,b.getElementBounds(c.$el))&&f.push(c):f.push(c))}),c.loadItems(f)},createItems:function(b,c){var e=this;if(d.array(b)&&b.length>0){c=!!d.boolean(c)&&c;var f=[],g=[];a.each(b,function(a,b){b.canCreate()&&e.invoke("oncreate",[b]).isCreated&&f.push(b),c&&b.canAppend()&&e.invoke("onappend",[b]).isAttached&&g.push(b)}),f.length>0&&e.invoke("oncreated",[f]),g.length>0&&e.invoke("onappended",[g])}},appendItems:function(b){var c=this;if(d.array(b)&&b.length>0){var e=a.map(b,function(a){return a.canAppend()?c.invoke("onappend",[a]):null});e.length>0&&c.invoke("onappended",[e])}},detachItems:function(b){var c=this;if(b=d.array(b)?b:c.items.slice(),b.length>0){var e=a.map(b,function(a){return a.canDetach()?c.invoke("ondetach",[a]):null});e.length>0&&c.invoke("ondetached",[e])}},loadItems:function(c){var e=this;if(c=d.array(c)?c:e.items.slice(),c.length>0){e.invoke("onbatch",[c]);var f=a.map(c,function(a){return a.canLoad()?(e.invoke("onloading",[a]),a.load().then(function(a){return e.invoke("onload",[a]),a},function(a){return e.invoke("onerror",[a]),a})):null});return b.when(f).done(function(a){e.invoke("onbatched",[a])})}return a.Deferred().reject().promise()},onWindowScroll:function(a){var b=a.data.self;b._throttle.limit(function(){b.checkItems()})}}),b.emptyImage="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",b.Gallery.options={debug:!1,template:{},lazy:!1,items:[],srcset:"data-srcset",src:"data-src",throttle:50,timeout:3e4,distance:200,delay:100,placeholder:b.emptyImage,error:b.emptyImage,classes:{},il8n:{}}}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.str),function(a,b,c,d){a.TemplateFactory=b.Factory.extend({construct:function(){this.registered={}},register:function(a,b,d,e){if(!c.fn(d))return!1;var f=this,g=f._super(a,b,e);return g&&(f.registered[a].test=d),g},make:function(a,b,e){c.jq(a),a=a;var f,g=this,h=d.arg2arr(arguments);for(f in g.registered)if(g.registered.hasOwnProperty(f)&&"default"!==f&&g.registered[f].test(a))return h.shift(),h.unshift(f),g._super.apply(g,h);return h.shift(),h.unshift("default"),g._super.apply(g,h)}}),a.templates=new a.TemplateFactory}(FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn),function(a,b,c,d){b.Template=c.Class.extend({construct:function(a){this.gallery=a,this.options=this.gallery.options.template},onpreinit:function(){},oninit:function(){},onpostinit:function(){a(window).trigger("resize")},ondestroy:function(){},onparse:function(a){return new b.Item(this.gallery).parseDOM(a).fix()},onparsed:function(a){},oncreate:function(a){return a.createDOM()},oncreated:function(a){},onappend:function(a){return a.append().fix()},onappended:function(a){},ondetach:function(a){return a.detach().unfix()},ondetached:function(a){},onloading:function(a){return a.setLoading()},onload:function(a){return a.setLoaded().unfix()},onerror:function(a){return a.setError()},onbatch:function(a){},onbatched:function(a){}}),b.templates.register("default",b.Template,function(a){return a.is(".foogallery")})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(a,b,c,d){b.Item=c.Class.extend({construct:function(c,e){e=a.extend(!0,{},b.Item.defaults,d.hash(e)?e:{}),this.g=c,this.isAttached=!1,this.isCreated=!1,this.isCaptionCreated=!1,this.isLoading=!1,this.isLoaded=!1,this.isError=!1,this.$el=null,this.$inner=null,this.$anchor=null,this.$image=null,this.$caption=null,this.href=e.href,this.src=e.src,this.srcset=e.srcset,this.width=e.width,this.height=e.height,this.title=e.title,this.description=e.description,this.attr=e.attr,this._thumbUrl=null},canCreate:function(){return!this.isCreated&&d.string(this.href)&&d.string(this.src)&&d.number(this.width)&&d.number(this.height)},canCreateCaption:function(){return!this.isCaptionCreated&&(d.string(this.title)||d.string(this.description))},canLoad:function(){return this.isCreated&&this.isAttached&&!this.isLoading&&!this.isLoaded&&!this.isError},canAppend:function(){return this.isCreated&&!this.isAttached},canDetach:function(){return this.isCreated&&this.isAttached},parseDOM:function(b){var c=this,e=c.g.options,f=c.g.getSelectors(),g=a(b);return(c.isCreated=g.is(f.item))&&(c.$el=g.data("__FooGalleryItem__",c),c.$inner=c.$el.find(f.inner),c.$anchor=c.$el.find(f.anchor).on("click.fg.item",{self:c},c.onAnchorClick),c.$image=c.$anchor.find(f.image),c.$caption=c.$el.find(f.caption.elem),c.isAttached=c.$el.parent.length>0,c.isLoading=c.$el.is(f.loading),c.isLoaded=c.$el.is(f.loaded),c.isError=c.$el.is(f.error),c.isCaptionCreated=c.$caption.length>0,c.href=c.$anchor.attr("href"),c.src=c.$image.attr(e.src),c.srcset=c.$image.attr(e.srcset),c.width=parseInt(c.$image.attr("width")),c.height=parseInt(c.$image.attr("height")),c.title=c.$image.attr("title"),c.description=c.$image.attr("alt"),d.empty(c.$image.prop("src"))&&c.$image.prop("src",e.placeholder),c.canLoad()&&c.$el.addClass(c.classes.idle)),c},createDOM:function(b,c){var e=this;if(e.isCreated||!e.canCreate())return e;b=!!d.boolean(b)&&b,c=!d.boolean(c)||c;var f=e.g.options,g=f.classes.item,h=e.attr;return h.elem.class=g.elem+" "+g.idle,b?(h.inner.class=g.inner,h.anchor.class=g.anchor):h.anchor.class=g.anchor+" "+g.inner,h.anchor.href=e.href,h.image.class=g.image,h.image.src=f.placeholder,h.image[f.src]=e.src,h.image[f.srcset]=e.srcset,h.image.width=e.width,h.image.height=e.height,h.image.title=e.title,h.image.alt=e.description,e.$el=a("<div/>").attr(h.elem).data("__FooGalleryItem__",e),e.$anchor=a("<a/>").attr(h.anchor).on("click.fg.item",{self:e},e.onAnchorClick),e.$image=a("<img/>").attr(h.image).appendTo(e.$anchor),e.$el.append(e.$inner=b?a("<div/>").attr(h.inner).append(e.$anchor):e.$anchor),c&&e.createCaptionDOM().isCaptionCreated&&e.$anchor.append(e.$caption),e.isCreated=!0,e},createCaptionDOM:function(){var b=this;if(!b.canCreateCaption())return b;var c=b.g.options,e=c.classes.item.caption,f=b.attr.caption;f.elem.class=e.elem,f.inner.class=e.inner,f.title.class=e.title,f.description.class=e.description,b.$caption=a("<div/>").attr(f.elem);var g=a("<div/>").attr(f.inner).appendTo(b.$caption);return d.empty(b.title)||g.append(a("<div/>").attr(f.title).html(b.title)),d.empty(b.description)||g.append(a("<div/>").attr(f.description).html(b.description)),b.isCaptionCreated=!0,b},append:function(){var a=this;return a.canAppend()&&(a.g.$elem.append(a.$el),a.isAttached=!0),a},detach:function(){var a=this;return a.canDetach()&&(a.$el.detach(),a.isAttached=!1),a},load:function(){var b=this;return a.Deferred(function(a){if(!b.isCreated||!b.isAttached)return void a.reject(b);var c=b.$image.get(0);c.onload=function(){c.onload=c.onerror=null,a.resolve(b)},c.onerror=function(){c.onload=c.onerror=null,a.reject(b)},c.src=b.getThumbUrl()}).promise()},setLoading:function(){var a=this;if(a.canLoad()){var b=a.g.options.classes.item;a.isLoading=!0,a.$el.removeClass(b.idle).removeClass(b.loaded).removeClass(b.error).addClass(b.loading)}return a},setLoaded:function(){var a=this;if(a.isLoading){var b=a.g.options.classes.item;a.isLoading=!1,a.isLoaded=!0,a.$el.removeClass(b.loading).addClass(b.loaded)}return a},setError:function(){var a=this;if(a.isLoading){var b=a.g.options.classes.item;a.isLoading=!1,a.isError=!0,a.$el.removeClass(b.loading).addClass(b.error),d.string(a.g.options.error)&&a.$image.prop("src",a.g.options.error)}return a},fix:function(a){var b=this;if(b.canLoad()){var c=b.width,e=b.height;if(!isNaN(c)&&!isNaN(e)){var f=b.$image.outerWidth();d.number(a)&&(f=a>c?c:a);var g=f/c,h=e*g;b.$image.css({width:f,height:h})}}return b},unfix:function(){var a=this;return a.isCreated&&a.$image.css({width:"",height:""}),a},getThumbUrl:function(b){b=!!d.boolean(b)&&b;var c=this;if(!b&&d.string(c._thumbUrl))return c._thumbUrl;if(!d.string(c.srcset))return c._thumbUrl=c.src;var e=a.map(c.srcset.replace(/(\s[\d.]+[whx]),/g,"$1 @,@ ").split(" @,@ "),function(a){return{url:/^\s*(\S*)/.exec(a)[1],w:parseFloat((/\S\s+(\d+)w/.exec(a)||[0,1/0])[1]),h:parseFloat((/\S\s+(\d+)h/.exec(a)||[0,1/0])[1]),x:parseFloat((/\S\s+([\d.]+)x/.exec(a)||[0,1])[1])}});if(!e.length)return c._thumbUrl=c.src;e.unshift({url:c.src,w:e[0].w!==1/0&&e[0].h===1/0?c.width:1/0,h:e[0].h!==1/0&&e[0].w===1/0?c.height:1/0,x:1});var f,g=window.devicePixelRatio||1,h={w:c.$anchor.innerWidth()*g,h:c.$anchor.innerHeight()*g,x:g};for(f in h)h.hasOwnProperty(f)&&(e=a.grep(e,function(a,b){return function(c){return c[a]>=h[a]||c[a]===b}}(f,Math.max.apply(null,a.map(e,function(a){return a[f]})))));for(f in h)h.hasOwnProperty(f)&&(e=a.grep(e,function(a,b){return function(c){return c[a]===b}}(f,Math.min.apply(null,a.map(e,function(a){return a[f]})))));return c._thumbUrl=e[0].url},scrollTo:function(){var a=this;if(a.isAttached){var c=a.$el.offset(),d=b.getViewportBounds();c.left+=a.$el.outerWidth()/2-d.width/2,c.top+=a.$el.outerHeight()/2-d.height/2,window.scrollTo(c.left,c.top)}return a},focus:function(){var a=this;return a.isAttached&&a.$anchor.focus(),a},pushState:function(){var b=this;if(b.isAttached&&history&&history.pushState){var c=a.inArray(b,b.g.items);c!==-1&&(history.pushState({index:c,type:"push"},"","#"+b.g.id+"/"+c),b.g.lastState="push")}},replaceState:function(){var b=this;if(b.isAttached&&history&&history.replaceState){var c=a.inArray(b,b.g.items);c!==-1&&(history.replaceState({index:c,type:"replace"},"","#"+b.g.id+"/"+c),b.g.lastState="replace")}},onAnchorClick:function(a){a.data.self.pushState()}}),b.Item.defaults={href:"",src:"",srcset:"",width:0,height:0,title:"",description:"",attr:{elem:{},inner:{},anchor:{},image:{},caption:{elem:{},inner:{},title:{},description:{}}}},b.Gallery.options.classes.item={elem:"fg-item",inner:"fg-item-inner",anchor:"fg-thumb",image:"fg-image",idle:"fg-idle",loading:"fg-loading",loaded:"fg-loaded",error:"fg-error",caption:{elem:"fg-caption",inner:"fg-caption-inner",title:"fg-caption-title",description:"fg-caption-desc"}}}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(a,b,c,d){b.InfiniteScroll=c.Class.extend({construct:function(a){this.g=a,this.o=this.g.options.infinite,this.classes=this.g.options.classes.infinite,this.il8n=this.g.options.il8n.infinite,this.enabled=this.o.enabled,this.isCreated=!1,this.isAttached=!1,this.count=this.o.auto?0:this.o.threshold,this.$container=null,this.$button=null,this.remaining=[]},canCreate:function(){var a=this,b=a.o,c=a.il8n;return!a.isCreated&&!d.empty(c.button)&&a.remaining.length>0&&b.threshold!==-1},init:function(){var b=this;b.enabled&&(b.remaining=a.map(b.g.items,function(a){return a.isAttached?null:a}),b.createDOM().isCreated&&b.append())},destroy:function(){var a=this;a.isCreated&&(a.$button.off("click.fg.infinite",a.onButtonClick),a.$container.remove(),a.$button=a.$container=null,a.isCreated=a.isAttached=!1)},createDOM:function(){var b=this,c=b.o,d=b.classes,e=b.il8n;return b.canCreate()&&(b.$container=a("<div/>",{class:d.container}).addClass(c.theme),b.$button=a("<button/>",{class:d.button,type:"button"}).html(e.button).on("click.fg.infinite",{self:b},b.onButtonClick).appendTo(b.$container),b.isCreated=!0),b},append:function(){var a=this;return a.isCreated&&!a.isAttached&&(a.$container.insertAfter(a.g.$elem),a.isAttached=!0),a},detach:function(){var a=this;return a.canDetach()&&(a.$container.detach(),a.isAttached=!1),a},check:function(){var a=this,c=a.o,d=a._required(),e=d>0?d:a.o.size,f=c.threshold===-1,g=c.threshold>0&&c.threshold>a.count;if(a.enabled&&a.remaining.length>0&&(d>0||f||g)){var h=b.getViewportBounds(),i=b.getElementBounds(a.g.$elem);if(h.top-=c.distance,h.right+=c.distance,h.bottom+=c.distance,h.left-=c.distance,d>0||b.intersects(h,i)&&h.bottom>i.bottom){var j=a.remaining.splice(0,e);if(j.length>0&&(a.count+=j.length,a.g.createItems(j,!0),g)){(a.g.itemFromPoint(h.width/2,h.height/2)||j[0]).replaceState()}}0===a.remaining.length&&a.isAttached&&a.detach()}},_required:function(){var a=this;if(a.enabled&&a.remaining.length>0){var b,c=a.o.size,e=a.g.hashValues,f=a.g.items.length-a.remaining.length;if(!d.empty(e)&&!isNaN(b=parseInt(e[0]))&&++b>f)return b-f+c;if(c>f)return c}return 0},onButtonClick:function(a){a.preventDefault();var b=a.data.self;b.count=0,b.g.checkItems()}}),b.Gallery.options.infinite={enabled:!1,distance:200,threshold:100,size:15,theme:"fg-light",button:"Load More",auto:!1},b.Gallery.options.il8n.infinite={button:"Load More"},b.Gallery.options.classes.infinite={
container:"fg-infinite",button:"fg-load-more"}}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(a,b,c,d){b.Pagination=c.Class.extend({construct:function(a){this.g=a,this.o=this.g.options.paging,this.classes=this.g.options.classes.paging,this.il8n=this.g.options.il8n.paging,this.enabled=this.o.enabled,this.controls=null,this.pages=[],this.index=this.o.index,this.displayAll=!1,this._selectors=null,this._range=[-1,-1]},init:function(){var a=this;a.enabled&&(a.pages=a.getPages(),a.displayAll=a.pages.length<=a.o.limit,(a.enabled=a.pages.length>1)&&(a.controls=a.createControls(),a.goto(a.index+1,!0)))},destroy:function(){var b=this;b.enabled&&a.each(b.controls,function(a,b){b.destroyDOM()})},getPages:function(){for(var a,b=this,c=b.o,d=[],e=b.g.items.slice(),f=Math.ceil(e.length/c.size),g=0;g<f;g++){a={items:e.splice(0,c.size),created:!1,attached:!1};for(var h=0,i=a.items.length;h<i;h++)if(a.items[h].isCreated){a.isCreated=!0,a.isAttached=!0;break}a.isCreated&&b.g.createItems(a.items),a.isAttached&&(b.g.detachItems(a.items),a.isAttached=!1),d.push(a)}return d},getSelectors:function(a){var b=this;if(!(a=!!d.boolean(a)&&a)&&d.hash(b._selectors))return b._selectors;var c=b.classes,e=b.g.selectorFromCSSClass;return b._selectors={item:e(c.item),button:e(c.button),link:e(c.link),firstPrev:e([c.first,c.prev]),nextLast:e([c.next,c.last]),prevMore:e(c.prevMore),nextMore:e(c.nextMore),disabled:e(c.disabled),selected:e(c.selected),visible:e(c.visible),reader:e(c.reader)}},createControls:function(){var a,c,d=this.o.position,e=[];return"both"!==d&&"top"!==d||(a=new b.Pagination.Control(this.g),a.createDOM().isCreated&&(a.$container.insertBefore(this.g.$elem),e.push(a))),"both"!==d&&"bottom"!==d||(c=new b.Pagination.Control(this.g),c.createDOM().isCreated&&(c.$container.insertAfter(this.g.$elem),e.push(c))),e},range:function(a,b,c){var e=this,f={index:a,start:e._range[0],end:e._range[1],changed:!1,selected:!d.boolean(c)||c};if(e.displayAll)f.start=0,f.end=e.pages.length-1;else if(a<f.start||a>f.end){var g=a+(e.o.limit-1),h=a-(e.o.limit-1);if(b)for(f.start=a,f.end=g;f.end>e.pages.length;)f.start-=1,f.end-=1;else for(f.start=h,f.end=a;f.start<0;)f.start+=1,f.end+=1}return(f.changed=f.start!==e._range[0]||f.end!==e._range[1])&&(e._range=[f.start,f.end]),f},goto:function(b,c){c=!!d.boolean(c)&&c;var e,f=this;if(d.number(b))b=b<1?1:b>f.pages.length?f.pages.length:b,e=f.range(b-1,c||b-1<f.index);else if(d.string(b))switch(b){case"first":e=f.range(0,!0);break;case"last":e=f.range(f.pages.length-1,!1);break;case"prev":e=f.range(f.index-1,!0);break;case"prevMore":e=f.range(f._range[0]-1,!1,!1);break;case"next":e=f.range(f.index+1,!1);break;case"nextMore":e=f.range(f._range[1]+1,!0,!1)}if(a.each(f.controls,function(a,b){b.setState(e,c)}),e.selected){var g=!1;!c&&f.controls.length>0&&(g=f._scrollInfo()),a.each(f.pages,function(a,b){b.isAttached&&(f.g.detachItems(b.items),b.isAttached=!1)});var h=f.pages[e.index];h.isCreated?(f.g.appendItems(h.items),h.isAttached=!0):(f.g.createItems(h.items,!0),h.isAttached=h.isCreated=!0),f.index=e.index,g&&window.scrollTo(g.x,g.y),c||f.g.checkItems()}},_scrollInfo:function(){var a,b=this,c={y:d.undef(window.scrollY)?document.documentElement.scrollTop:window.scrollY,x:d.undef(window.scrollX)?document.documentElement.scrollLeft:window.scrollX};return(a="both"===b.o.position||"top"===b.o.position?b.controls[0].$container.offset().top:b.items.l.$elem.offset().top)<=c.y&&(c.y=a,c)}}),b.Gallery.options.paging={enabled:!1,size:15,index:0,limit:5,position:"both",theme:"fg-light",showPrevNext:!0,showFirstLast:!0,showPrevNextMore:!0},b.Gallery.options.classes.paging={container:"fg-pagination",list:"fg-pages",item:"fg-page-item",button:"fg-page-button",link:"fg-page-link",first:"fg-page-first",prev:"fg-page-prev",prevMore:"fg-page-prev-more",nextMore:"fg-page-next-more",next:"fg-page-next",last:"fg-page-last",disabled:"fg-disabled",selected:"fg-selected",visible:"fg-visible",reader:"fg-sr-only"},b.Gallery.options.il8n.paging={buttons:{first:"&laquo;",prev:"&lsaquo;",next:"&rsaquo;",last:"&raquo;",prevMore:"...",nextMore:"..."},labels:{current:"Current page",page:"Page {PAGE}",first:"First page",prev:"Previous page",next:"Next page",last:"Last page",prevMore:"Select from previous {LIMIT} pages",nextMore:"Select from next {LIMIT} pages"}}}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(a,b,c,d){b.Pagination.Control=c.Class.extend({construct:function(a){this.g=a,this.p=this.g.paging,this.isCreated=!1,this.$container=null,this.$list=null,this.$items=null,this.$buttons=null},createDOM:function(){var b,c=this,d=c.p.o,e=c.p.classes,f=c.p.il8n,g=a("<ul/>",{class:e.list}),h=[],i=[];!c.p.displayAll&&d.showFirstLast&&(i.push(b=c._createButton("first")),g.append(b)),d.showPrevNext&&(i.push(b=c._createButton("prev")),g.append(b)),!c.p.displayAll&&d.showPrevNextMore&&(i.push(b=c._createButton("prevMore")),g.append(b));for(var j,k=0,l=c.p.pages.length;k<l;k++)h.push(j=c._createItem(k+1,f.labels.page)),g.append(j);return!c.p.displayAll&&d.showPrevNextMore&&(i.push(b=c._createButton("nextMore")),g.append(b)),d.showPrevNext&&(i.push(b=c._createButton("next")),g.append(b)),!c.p.displayAll&&d.showFirstLast&&(i.push(b=c._createButton("last")),g.append(b)),c.$list=g,c.$container=a("<nav/>",{class:e.container}).addClass(d.theme).append(g),c.$items=a(a.map(h,function(a){return a.get()})),c.$buttons=a(a.map(i,function(a){return a.get()})),c.isCreated=!0,c},destroyDOM:function(){var a=this,b=a.p.getSelectors();a.$list.find(b.link).off("click.fg.loader",a.onLinkClick),a.$container.remove(),a.$container=a.$list=a.$items=a.$buttons=null,a.isCreated=!1},setState:function(a,b){var c=this;if(c.isCreated){var d=c.p.getSelectors();(b||a.changed)&&c.setVisible(a.start,a.end),a.selected&&(c.setSelected(a.index),c.toggleDisabled(c.$buttons.filter(d.firstPrev),a.index<=0),c.toggleDisabled(c.$buttons.filter(d.nextLast),a.index>=c.p.pages.length-1)),c.displayAll||(c.toggleDisabled(c.$buttons.filter(d.prevMore),a.start<=0),c.toggleDisabled(c.$buttons.filter(d.nextMore),a.end>=c.p.pages.length-1))}},setVisible:function(a,b){var c=this,d=c.p.classes;c.$items.removeClass(d.visible).slice(a,b+1).addClass(d.visible)},setSelected:function(b){var c=this,e=c.p.classes,f=c.p.il8n,g=c.p.getSelectors();c.$items.filter(g.selected).removeClass(e.selected).each(function(b,c){var e=a(c),f=e.data("label"),h=e.find(g.reader);d.string(f)&&0!==h.length&&h.html(f)}),c.$items.eq(b).addClass(e.selected).each(function(b,c){var e=a(c),h=e.find(g.reader),i=h.html();d.string(i)&&0!==h.length&&(e.data("label",i),h.html(f.labels.current))})},toggleDisabled:function(a,b){var c=this,d=c.p.classes,e=c.p.getSelectors();b?a.addClass("fg-disabled").find(".fg-page-link").attr("tabindex",-1):a.removeClass(d.disabled).find(e.link).removeAttr("tabindex")},_createButton:function(a){var b=this,c=b.p.classes,d=b.p.il8n;return this._createItem(a,d.labels[a],d.buttons[a],c.button+" "+c[a])},_createItem:function(b,c,e,f,g){e=d.string(e)?e:b,c=d.string(c)?c:"";var h=this,i=h.p.o,j=h.p.classes,k=a("<a/>",{class:j.link,href:"#page-"+b}).html(e).on("click.fg.loader",{self:h,page:b},h.onLinkClick);d.empty(c)||k.attr("title",c.replace(/\{PAGE}/g,b).replace(/\{LIMIT}/g,i.limit+"")),g=d.string(g)?g:c,d.empty(g)||k.prepend(a("<span/>",{class:j.reader,text:g.replace(/\{PAGE}/g,"").replace(/\{LIMIT}/g,i.limit+"")}));var l=a("<li/>",{class:j.item}).append(k);return f=d.string(f)?f:"",d.empty(f)||l.addClass(f),l},onLinkClick:function(b){b.preventDefault();var c=b.data.self,d=c.p.getSelectors();a(this).closest(d.item).is(d.disabled)||c.p.goto(b.data.page)}})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is);