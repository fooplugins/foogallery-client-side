/*
* FooGallery - The Most Intuitive and Extensible Gallery Creation and Management Tool Ever Created for WordPress
* @version 2.0.27
* @link 
* @copyright Steven Usher & Brad Vincent 2015
* @license Released under the GPLv3 license.
*/
function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){"use strict";var d,t;function l(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||r(),this.isIntersecting=!!e.intersectionRect;var e=this.boundingClientRect,e=e.width*e.height,t=this.intersectionRect,t=t.width*t.height;this.intersectionRatio=e?Number((t/e).toFixed(4)):this.isIntersecting?1:0}function e(e,t){var n,i,r,t=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(t.root&&1!=t.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),i=this.THROTTLE_TIMEOUT,r=null,function(){r=r||setTimeout(function(){n(),r=null},i)}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(t.rootMargin),this.thresholds=this._initThresholds(t.threshold),this.root=t.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function n(e,t,n,i){"function"==typeof e.addEventListener?e.addEventListener(t,n,i||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function i(e,t,n,i){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,i||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function h(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?t.width&&t.height?t:{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}:r()}function r(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function o(e,t){for(var n=t;n;){if(n==e)return!0;n=p(n)}return!1}function p(e){e=e.parentNode;return e&&11==e.nodeType&&e.host?e.host:e&&e.assignedSlot?e.assignedSlot.parentNode:e}"object"==typeof window&&("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}}):(d=window.document,t=[],e.prototype.THROTTLE_TIMEOUT=100,e.prototype.POLL_INTERVAL=null,e.prototype.USE_MUTATION_OBSERVER=!0,e.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},e.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},e.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},e.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},e.prototype._initThresholds=function(e){e=e||[0];return(e=!Array.isArray(e)?[e]:e).sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},e.prototype._parseRootMargin=function(e){e=(e||"0px").split(/\s+/).map(function(e){e=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},e.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(n(window,"resize",this._checkForIntersections,!0),n(d,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(d,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},e.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,i(window,"resize",this._checkForIntersections,!0),i(d,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},e.prototype._checkForIntersections=function(){var s=this._rootIsInDom(),a=s?this._getRootRect():r();this._observationTargets.forEach(function(e){var t=e.element,n=h(t),i=this._rootContainsTarget(t),r=e.entry,o=s&&i&&this._computeTargetAndRootIntersection(t,a),e=e.entry=new l({time:window.performance&&performance.now&&performance.now(),target:t,boundingClientRect:n,rootBounds:a,intersectionRect:o});r?s&&i?this._hasCrossedThreshold(r,e)&&this._queuedEntries.push(e):r&&r.isIntersecting&&this._queuedEntries.push(e):this._queuedEntries.push(e)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},e.prototype._computeTargetAndRootIntersection=function(e,u){if("none"!=window.getComputedStyle(e).display){for(var t,n,i,r,o=h(e),s=p(e),a=!1;!a;){var l=null,c=1==s.nodeType?window.getComputedStyle(s):{};if("none"==c.display)return;if(s==this.root||s==d?(a=!0,l=u):s!=d.body&&s!=d.documentElement&&"visible"!=c.overflow&&(l=h(s)),l&&(c=l,l=o,r=i=n=t=void 0,t=Math.max(c.top,l.top),n=Math.min(c.bottom,l.bottom),i=Math.max(c.left,l.left),c=Math.min(c.right,l.right),r=n-t,!(o=0<=(l=c-i)&&0<=r&&{top:t,bottom:n,left:i,right:c,width:l,height:r})))break;s=p(s)}return o}},e.prototype._getRootRect=function(){var e,t;return t=this.root?h(this.root):(t=d.documentElement,e=d.body,{top:0,left:0,right:t.clientWidth||e.clientWidth,width:t.clientWidth||e.clientWidth,bottom:t.clientHeight||e.clientHeight,height:t.clientHeight||e.clientHeight}),this._expandRectByRootMargin(t)},e.prototype._expandRectByRootMargin=function(n){var e=this._rootMarginValues.map(function(e,t){return"px"==e.unit?e.value:e.value*(t%2?n.width:n.height)/100}),e={top:n.top-e[0],right:n.right+e[1],bottom:n.bottom+e[2],left:n.left-e[3]};return e.width=e.right-e.left,e.height=e.bottom-e.top,e},e.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,i=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==i)for(var r=0;r<this.thresholds.length;r++){var o=this.thresholds[r];if(o==n||o==i||o<n!=o<i)return!0}},e.prototype._rootIsInDom=function(){return!this.root||o(d,this.root)},e.prototype._rootContainsTarget=function(e){return o(this.root||d,e)},e.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},e.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=e,window.IntersectionObserverEntry=l))}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ResizeObserver=t()}(this,function(){"use strict";var a="undefined"!=typeof Map?Map:(Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){e=i(this.__entries__,e),e=this.__entries__[e];return e&&e[1]},e.prototype.set=function(e,t){var n=i(this.__entries__,e);~n?this.__entries__[n][1]=t:this.__entries__.push([e,t])},e.prototype.delete=function(e){var t=this.__entries__,e=i(t,e);~e&&t.splice(e,1)},e.prototype.has=function(e){return!!~i(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.__entries__;n<i.length;n++){var r=i[n];e.call(t,r[1],r[0])}},e);function i(e,n){var i=-1;return e.some(function(e,t){return e[0]===n&&(i=t,!0)}),i}function e(){this.__entries__=[]}var n="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,t="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),l="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(t):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},h=2;var p=["top","right","bottom","left","width","height","size","weight"],f="undefined"!=typeof MutationObserver,g=(r.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},r.prototype.removeObserver=function(e){var t=this.observers_,e=t.indexOf(e);~e&&t.splice(e,1),!t.length&&this.connected_&&this.disconnect_()},r.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},r.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),0<e.length},r.prototype.connect_=function(){n&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),f?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},r.prototype.disconnect_=function(){n&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},r.prototype.onTransitionEnd_=function(e){var e=e.propertyName,t=void 0===e?"":e;p.some(function(e){return!!~t.indexOf(e)})&&this.refresh()},r.getInstance=function(){return this.instance_||(this.instance_=new r),this.instance_},r.instance_=null,r);function r(){function e(){o&&(o=!1,i()),s&&n()}function t(){l(e)}function n(){var e=Date.now();if(o){if(e-a<h)return;s=!0}else s=!(o=!0),setTimeout(t,r);a=e}var i,r,o,s,a;this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=(i=this.refresh.bind(this),s=o=!(r=20),a=0,n)}var m=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},c=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||t},v=d(0,0,0,0);function u(e){return parseFloat(e)||0}function y(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(e,t){return e+u(n["border-"+t+"-width"])},0)}function b(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return v;var i=c(e).getComputedStyle(e),r=function(e){for(var t={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var r=i[n],o=e["padding-"+r];t[r]=u(o)}return t}(i),o=r.left+r.right,s=r.top+r.bottom,a=u(i.width),l=u(i.height);return"border-box"===i.boxSizing&&(Math.round(a+o)!==t&&(a-=y(i,"left","right")+o),Math.round(l+s)!==n&&(l-=y(i,"top","bottom")+s)),e!==c(e).document.documentElement&&(i=Math.round(a+o)-t,e=Math.round(l+s)-n,1!==Math.abs(i)&&(a-=i),1!==Math.abs(e)&&(l-=e)),d(r.left,r.top,a,l)}var _="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof c(e).SVGGraphicsElement}:function(e){return e instanceof c(e).SVGElement&&"function"==typeof e.getBBox};function w(e){return n?_(e)?d(0,0,(t=(t=e).getBBox()).width,t.height):b(e):v;var t}function d(e,t,n,i){return{x:e,y:t,width:n,height:i}}o.prototype.isActive=function(){var e=w(this.target);return(this.contentRect_=e).width!==this.broadcastWidth||e.height!==this.broadcastHeight},o.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e};var x=o;function o(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=d(0,0,0,0),this.target=e}var C=function(e,t){n=(t=t).x,i=t.y,o=t.width,t=t.height,r="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,r=Object.create(r.prototype),m(r,{x:n,y:i,width:o,height:t,top:i,right:n+o,bottom:t+i,left:n});var n,i,r,o=r;m(this,{target:e,contentRect:o})},$=(s.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof c(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new x(e)),this.controller_.addObserver(this),this.controller_.refresh())}},s.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof c(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},s.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},s.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},s.prototype.broadcastActive=function(){var e,t;this.hasActive()&&(e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new C(e.target,e.broadcastRect())}),this.callback_.call(e,t,e),this.clearActive())},s.prototype.clearActive=function(){this.activeObservations_.splice(0)},s.prototype.hasActive=function(){return 0<this.activeObservations_.length},s);function s(e,t,n){if(this.activeObservations_=[],this.observations_=new a,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}var P=new("undefined"!=typeof WeakMap?WeakMap:a),F=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=g.getInstance(),t=new $(t,n,this);P.set(this,t)};return["observe","unobserve","disconnect"].forEach(function(t){F.prototype[t]=function(){var e;return(e=P.get(this))[t].apply(e,arguments)}}),void 0!==t.ResizeObserver?t.ResizeObserver:F}),function(e){(window.FooGallery=window.FooGallery||{}).$=e}(jQuery),function(e){e?function(){try{return window.FooGallery.utils}catch(e){return}}()||(window.FooGallery.utils={$:e,version:"1.0.0"}):console.warn("jQuery must be included in the page prior to the FooGallery.utils library.")}(jQuery),function(t,n){"1.0.0"===n.version&&(n.is={},n.is.array=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.is.boolean=function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},n.is.element=function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement))?e instanceof HTMLElement:!!e&&"object"===_typeof(e)&&1===e.nodeType&&"string"==typeof e.nodeName},n.is.empty=function(e){if(n.is.undef(e)||null===e)return!0;if(n.is.number(e)&&0===e)return!0;if(n.is.boolean(e)&&!1===e)return!0;if(n.is.string(e)&&0===e.length)return!0;if(n.is.array(e)&&0===e.length)return!0;if(n.is.jq(e)&&0===e.length)return!0;if(n.is.hash(e)){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}return!1},n.is.error=function(e){return"[object Error]"===Object.prototype.toString.call(e)},n.is.fn=function(e){return e===window.alert||"[object Function]"===Object.prototype.toString.call(e)},n.is.hash=function(e){return n.is.object(e)&&e.constructor===Object&&!e.nodeType&&!e.setInterval},n.is.jq=function(e){return!n.is.undef(t)&&e instanceof t},n.is.number=function(e){return"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)},n.is.object=function(e){return"[object Object]"===Object.prototype.toString.call(e)&&!n.is.undef(e)&&null!==e},n.is.promise=function(e){return n.is.object(e)&&n.is.fn(e.then)&&n.is.fn(e.promise)},n.is.size=function(e){return!!(n.is.string(e)&&!n.is.empty(e)||n.is.number(e))&&/^(auto|none|(?:[\d.]*)+?(?:%|px|mm|q|cm|in|pt|pc|em|ex|ch|rem|vh|vw|vmin|vmax)?)$/.test(e)},n.is.string=function(e){return"[object String]"===Object.prototype.toString.call(e)},n.is.undef=function(e){return void 0===e})}(FooGallery.utils.$,FooGallery.utils),function(l,c,u){var a;"1.0.0"===c.version&&(c.fn={},a=Function.prototype.toString,c.fn.CONTAINS_SUPER=/xyz/.test(a.call(function(){xyz}))?/\b_super\b/:/.*/,c.fn.noop=function(){},c.fn.addOrOverride=function(e,t,n){var i,r,o,s;u.object(e)&&u.string(t)&&!u.empty(t)&&u.fn(n)&&(i=e[t],r=u.fn(i)&&c.fn.CONTAINS_SUPER.test(a.call(n)),e[t]=r?(o=i,s=n,function(){var e=this._super,t=(this._super=o,s.apply(this,arguments));return this._super=e,t}):n)},c.fn.expose=function(t,n,e,i){u.object(t)&&u.object(n)&&u.array(e)&&(i=u.undef(i)?t:i,e.forEach(function(e){u.string(e)&&u.fn(t[e])&&(n[e]=t[e].bind(i))}))},c.fn.apply=function(e,t){return t.unshift(e),new(Function.prototype.bind.apply(e,t))},c.fn.arg2arr=function(e){return Array.prototype.slice.call(e)},c.fn.debounce=function(n,i){var r;return function(){var e=this,t=c.fn.arg2arr(arguments);clearTimeout(r),r=setTimeout(function(){n.apply(e,t)},i)}},c.fn.throttle=function(n,i){var r,o;return function(){var e=this,t=c.fn.arg2arr(arguments);r?(clearTimeout(o),o=setTimeout(function(){Date.now()-r>=i&&(n.apply(e,t),r=Date.now())},i-(Date.now()-r))):(n.apply(e,t),r=Date.now())}},c.fn.resolved=l.Deferred().resolve().promise(),c.fn.rejected=l.Deferred().reject().promise(),c.fn.reject=function(e,t){var n=l.Deferred(),i=c.fn.arg2arr(arguments);return n.reject.apply(n,i).promise()},c.fn.resolve=function(e,t){var n=l.Deferred(),i=c.fn.arg2arr(arguments);return n.resolve.apply(n,i).promise()},c.fn.rejectWith=function(e,t,n){var i=l.Deferred(),r=c.fn.arg2arr(arguments);return r.shift(),i.rejectWith(e,r).promise()},c.fn.resolveWith=function(e,t,n){var i=l.Deferred(),r=c.fn.arg2arr(arguments);return r.shift(),i.resolveWith(e,r).promise()},c.fn.all=function(t){var n=l.Deferred(),i=[];if(u.array(t)&&0<t.length){function r(e,t){s||(i[e]=0===t.length?void 0:1===t.length?t[0]:t,--o||n.resolve(i))}for(var o=t.length,s=!1,a=0,e=t.length;a<e&&"break"!==function(){if(s)return"break";var e=a;u.promise(t[e])?t[e].then(function(){r(e,c.fn.arg2arr(arguments))},function(){s||(s=!0,n.reject.apply(n,c.fn.arg2arr(arguments)))}):r(e,[t[e]])}();a++);}else n.resolve(i);return n.promise()},c.fn.allSettled=function(t){var i=l.Deferred(),r=[];if(u.array(t)&&0<t.length){function n(e,t,n){r[e]={status:t},0<n.length&&(r[e]["rejected"===t?"reason":"value"]=1===n.length?n[0]:n),--o||i.resolve(r)}for(var o=t.length,s=0,e=t.length;s<e;s++)!function(){var e=s;u.promise(t[e])?t[e].then(function(){n(e,"fulfilled",c.fn.arg2arr(arguments))},function(){n(e,"rejected",c.fn.arg2arr(arguments))}):n(e,"fulfilled",[t[e]])}()}else i.resolve(r);return i.promise()})}(FooGallery.utils.$,FooGallery.utils,FooGallery.utils.is),function(e,o){var r;"1.0.0"===e.version&&(e.url={},r=document.createElement("a"),e.url.parts=function(e){r.href=e;var e=r.port||(-1!==["http:","https:"].indexOf(r.protocol)?"https:"===r.protocol?"443":"80":""),t=r.hostname+(e?":"+e:""),n=r.origin||r.protocol+"//"+t,i="/"===r.pathname.slice(0,1)?r.pathname:"/"+r.pathname;return{hash:r.hash,host:t,hostname:r.hostname,href:r.href,origin:n,pathname:i,port:e,protocol:r.protocol,search:r.search}},e.url.full=function(e){return!o.string(e)||o.empty(e)?null:(r.href=e,r.href)},e.url.param=function(e,t,n){return o.string(e)&&o.string(t)&&!o.empty(t)?o.undef(n)?(r=((i=new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)")).exec(e)||["",""])[1].replace(/\+/g,"%20"),o.string(r)&&!o.empty(r)?decodeURIComponent(r):null):(o.empty(n)?(i=new RegExp("^([^#]*?)(([^#]*)&)?"+t+"(=[^&#]*)?(&|#|$)"),r=e.replace(i,"$1$3$5").replace(/^([^#]*)((\?)&|\?(#|$))/,"$1$3$4")):(i=new RegExp("([?&])"+t+"[^&]*"),t=t+"="+encodeURIComponent(n),(r=e.replace(i,"$1"+t))!==e||i.test(r)||(r+=(-1!==r.indexOf("?")?"&":"?")+t)),r):e;var i,r})}(FooGallery.utils,FooGallery.utils.is),function(a,l,c){"1.0.0"===a.version&&(a.str={},a.str.trim=function(e){return l.string(e)?e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):null},a.str.camel=function(e){return l.string(e)?e.toUpperCase()===e?e.toLowerCase():e.replace(/^([A-Z])|[-\s_]+(\w)/g,function(e,t,n){return l.string(n)?n.toUpperCase():t.toLowerCase()}):e},a.str.kebab=function(e){return l.string(e)?e.match(/[A-Z]{2,}(?=[A-Z][a-z0-9]*|\b)|[A-Z]?[a-z0-9]*|[A-Z]|[0-9]+/g).filter(Boolean).map(function(e){return e.toLowerCase()}).join("-"):e},a.str.contains=function(e,t,n){return!(!l.string(e)||l.empty(e)||!l.string(t)||l.empty(t))&&(t.length<=e.length&&-1!==(n?e.toUpperCase().indexOf(t.toUpperCase()):e.indexOf(t)))},a.str.containsWord=function(e,t,n){if(!l.string(e)||l.empty(e)||!l.string(t)||l.empty(t)||e.length<t.length)return!1;for(var i=e.split(/\W/),r=0,o=i.length;r<o;r++)if(n?i[r].toUpperCase()===t.toUpperCase():i[r]===t)return!0;return!1},a.str.endsWith=function(e,t){return!(!l.string(e)||!l.string(t)||t.length>e.length)&&e.slice(e.length-t.length)===t},a.str.startsWith=function(e,t){return!l.empty(e)&&!l.empty(t)&&e.slice(0,t.length)===t},a.str.escapeRegExp=function(e){return l.string(e)?e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):e},a.str.fnv1a=function(e){if(!l.string(e)||l.empty(e))return null;for(var t=2166136261,n=0,i=e.length;n<i;n++)t=(t^=e.charCodeAt(n))+((t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24));return t>>>0},a.str.from=function(e,t){return a.str.contains(e,t)?e.substring(e.indexOf(t)+t.length):null},a.str.join=function(e,t,n){if(!l.string(e)||!l.string(t))return null;var i=c.arg2arr(arguments);e=i.shift();for(var r=i.shift(),o=0,s=i.length;o<s;o++)t=i[o],l.empty(t)||(a.str.endsWith(r,e)&&(r=r.slice(0,r.length-e.length)),r+=e+(t=a.str.startsWith(t,e)?t.slice(e.length):t));return r},a.str.until=function(e,t){return a.str.contains(e,t)?e.substring(0,e.indexOf(t)):e},a.str.format=function(n,e,t){var i=c.arg2arr(arguments);return n=i.shift(),l.string(n)&&0<i.length&&(1===i.length&&(l.array(i[0])||l.object(i[0]))&&(i=i[0]),a.each(i,function(e,t){n=n.replace(new RegExp("\\{"+t+"\\}","gi"),e+"")})),n})}(FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn),function(a,l,r,o){"1.0.0"===a.version&&(a.obj={},a.obj.create=function(e){if(!l.object(e))throw TypeError("Argument must be an object");function t(){}return t.prototype=e,new t},a.obj.extend=function(t,e,n){t=l.object(t)?t:{};var i=r.arg2arr(arguments);return i.shift(),a.each(i,function(e){a.obj.merge(t,e)}),t},a.obj.merge=function(e,t){for(var n in e=l.hash(e)?e:{},t=l.hash(t)?t:{})t.hasOwnProperty(n)&&(l.hash(t[n])?(e[n]=l.hash(e[n])?e[n]:{},a.obj.merge(e[n],t[n])):l.array(t[n])?e[n]=t[n].slice():e[n]=t[n]);return e},a.obj.mergeValid=function(t,n,i,e){if(!l.hash(i)||!l.hash(n))return t;var r,o,s;for(r in n=l.hash(n)?n:{},e=l.hash(e)?e:{},n)n.hasOwnProperty(r)&&l.fn(n[r])&&(o=l.array(e[r])?e[r]:l.string(e[r])?[e[r]]:[r],a.each(o,function(e){if(s=a.obj.prop(i,e),!l.undef(s))return n[r](s)?(a.obj.prop(t,r,s),!1):void 0}));return t},a.obj.prop=function(n,e,i){var t,r;if(l.object(n)&&!l.empty(e))return l.undef(i)?(o.contains(e,".")?(t=e.split("."),r=t.length-1,a.each(t,function(e,t){if(t===r)i=n[e];else{if(!l.hash(n[e]))return!1;n=n[e]}})):l.undef(n[e])||(i=n[e]),i):void(o.contains(e,".")?(t=e.split("."),r=t.length-1,a.each(t,function(e,t){t===r?n[e]=i:n=l.hash(n[e])?n[e]:n[e]={}})):l.undef(n[e])||(n[e]=i))})}((FooGallery.utils.$,FooGallery.utils),FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.str),function(t,r,s){"1.0.0"===r.version&&(r.ready=function(e){function t(){try{e.call(window,r.$)}catch(e){console.error(e)}}(Function("/*@cc_on return true@*/")()?"complete"===document.readyState:"loading"!==document.readyState)?t():document.addEventListener("DOMContentLoaded",t,!1)},r.find=function(e,t,n){if(s.fn(t))if(n=s.undef(n)?t:n,s.array(e)){for(r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return e[r]}else if(s.object(e))for(var i=Object.keys(e),r=0,o=i.length;r<o;r++)if(t.call(n,e[i[r]],i[r],e))return e[i[r]]},r.each=function(e,t,n){if(s.fn(t))if(n=s.undef(n)?t:n,s.array(e))for(r=0,o=e.length;r<o&&!1!==t.call(n,e[r],r,e);r++);else if(s.object(e))for(var i=Object.keys(e),r=0,o=i.length;r<o&&!1!==t.call(n,e[i[r]],i[r],e);r++);},r.inArray=function(e,t){return s.array(t)?t.indexOf(e):-1},r.selectify=function(e){if(s.empty(e))return null;if(s.hash(e)){var t,n,i={};for(n in e)e.hasOwnProperty(n)&&(t=r.selectify(e[n]))&&(i[n]=t);return i}return s.string(e)||s.array(e)?(e=s.string(e)?[e]:e).map(function(e){return s.string(e)?"."+e.split(/\s/g).join("."):null}).join(","):null},r.requestFrame=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)}).bind(window),r.cancelFrame=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window),r.nextFrame=function(e,n){return t.Deferred(function(t){s.fn(e)?(n=s.undef(n)?e:n,r.requestFrame(function(){try{t.resolve(e.call(n))}catch(e){t.reject(e)}})):t.reject(new Error("Provided callback is not a function."))}).promise()})}(FooGallery.utils.$,FooGallery.utils,FooGallery.utils.is),function(r,o,s,a){"1.0.0"===r.version&&(r.Class=function(){},r.Class.extend=function(e){e=o.hash(e)?e:{};var t,n=s.create(this.prototype);for(t in e)e.hasOwnProperty(t)&&a.addOrOverride(n,t,e[t]);function i(){if(!o.fn(this.construct))throw new SyntaxError('FooGallery.utils.Class objects must be constructed with the "new" keyword.');this.construct.apply(this,arguments)}return n.construct=o.fn(n.construct)?n.construct:function(){},(i.prototype=n).constructor=o.fn(n.__ctor__)?n.__ctor__:i,i.extend=r.Class.extend,i.override=r.Class.override,i.getBaseClasses=r.Class.getBaseClasses,i.__baseClass__=this,i},r.Class.override=function(e,t){a.addOrOverride(this.prototype,e,t)},r.Class.__baseClass__=null,r.Class.getBaseClasses=function(){return function e(t,n){return o.array(n)||(n=[]),o.fn(t)&&null!==t.__baseClass__?(n.unshift(t.__baseClass__),e(t.__baseClass__,n)):n}(this,[])})}((FooGallery.utils.$,FooGallery.utils),FooGallery.utils.is,FooGallery.utils.obj,FooGallery.utils.fn),function(e,a,l,r){e.ClassRegistry=e.Class.extend({construct:function(e){this.opt=r.extend({allowBase:!0,beforeCreate:null},e),this.registered={}},register:function(e,t,n,i){var r;return!(!a.string(e)||a.empty(e)||!a.fn(t))&&(i=a.number(i)?i:0,r=this.registered[e],this.registered[e]={name:e,ctor:t,config:a.hash(n)?n:{},priority:a.undef(r)?i:r.priority},!0)},each:function(e,t,n){t=!!a.boolean(t)&&t,n=a.undef(n)?e:n;for(var i=this,r=Object.keys(i.registered).map(function(e){return i.registered[e]}),o=(t&&r.sort(function(e,t){return t.priority-e.priority}),0),s=r.length;o<s&&!1!==e.call(n,r[o],o);o++);},find:function(e,t,n){t=!!a.boolean(t)&&t,n=a.undef(n)?e:n;for(var i=this,r=Object.keys(i.registered).map(function(e){return i.registered[e]}),o=(t&&r.sort(function(e,t){return t.priority-e.priority}),0),s=r.length;o<s;o++)if(e.call(n,r[o],o))return r[o];return null},create:function(e,t,n){var i=this,r=l.arg2arr(arguments);if(e=r.shift(),a.string(e)&&i.registered.hasOwnProperty(e)){var o=i.registered[e],s=!0;if((s=o.priority<0&&!i.opt.allowBase?!1:s)&&a.fn(o.ctor))return t=r.shift(),t=i.mergeConfigurations(o.name,t),r.unshift.apply(r,[o.name,t]),l.apply(o.ctor,i.onBeforeCreate(o,r))}return null},onBeforeCreate:function(e,t){return null!==this.opt.beforeCreate&&a.fn(this.opt.beforeCreate)?this.opt.beforeCreate.call(this,e,t):t},mergeConfigurations:function(e,t){var n,i;return a.string(e)&&this.registered.hasOwnProperty(e)?(t=a.hash(t)?t:{},n=this.getBaseClasses(e),i=[{}],n.push(this.registered[e]),n.forEach(function(e){i.push(e.config)}),i.push(t),r.extend.apply(r,i)):{}},getBaseClass:function(){return this.find(function(e){return e.priority<0},!0)},getBaseClasses:function(e){var t=this,e=t.registered[e],n=[];return a.undef(e)||e.ctor.getBaseClasses().forEach(function(e){e=t.fromType(e);a.hash(e)&&n.push(e)}),n},fromType:function(t){if(a.fn(t))return this.find(function(e){return e.ctor===t})}})}((FooGallery.utils.$,FooGallery.utils),FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.obj),function(o,s,n){"1.0.0"===o.version&&(o.Event=o.Class.extend({construct:function(e){if(s.empty(e))throw new SyntaxError("FooGallery.utils.Event objects must be supplied a `type`.");e=o.Event.parse(e);this.type=e.type,this.namespace=e.namespace,this.defaultPrevented=!1,this.target=null},preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented}}),o.Event.parse=function(e){e=s.string(e)&&!s.empty(e)?e:null;var t=n.contains(e,".");return{namespaced:t,type:t?n.startsWith(e,".")?null:n.until(e,"."):e,namespace:t?n.from(e,"."):null}},o.EventClass=o.Class.extend({construct:function(){this.events={}},destroy:function(){this.events={}},on:function(n,t,i){var r=this;return s.object(n)?(i=t,Object.keys(n).forEach(function(t){s.fn(n[t])&&t.split(" ").forEach(function(e){r.addListener(e,n[t],i)})})):s.string(n)&&s.fn(t)&&n.split(" ").forEach(function(e){r.addListener(e,t,i)}),r},addListener:function(e,t,n){if(!s.string(e)||/\s/.test(e)||!s.fn(t))return!1;var i=this,r=o.Event.parse(e);return n=s.undef(n)?i:n,s.array(i.events[r.type])||(i.events[r.type]=[]),!i.events[r.type].some(function(e){return e.namespace===r.namespace&&e.fn===t&&e.thisArg===n})&&(i.events[r.type].push({namespace:r.namespace,fn:t,thisArg:n}),!0)},off:function(n,t,i){var r=this;return s.object(n)?(i=t,Object.keys(n).forEach(function(t){t.split(" ").forEach(function(e){r.removeListener(e,n[t],i)})})):s.string(n)&&n.split(" ").forEach(function(e){r.removeListener(e,t,i)}),r},removeListener:function(e,t,n){if(!s.string(e)||/\s/.test(e))return!1;var i=this,r=o.Event.parse(e),e=[];return n=s.undef(n)?i:n,s.empty(r.type)?s.empty(r.namespace)||e.push.apply(e,Object.keys(i.events)):e.push(r.type),e.forEach(function(e){s.array(i.events[e])&&(i.events[e]=i.events[e].filter(function(e){return null!=t?!(e.namespace===r.namespace&&e.fn===t&&e.thisArg===n):null!=r.namespace&&e.namespace!==r.namespace}),0===i.events[e].length&&delete i.events[e])}),!0},trigger:function(e,t){t=s.array(t)?t:[];var n=this,i=[];return e instanceof o.Event?(i.push(e),n.emit(e,t)):s.string(e)&&e.split(" ").forEach(function(e){e=new o.Event(e);i.push(e),n.emit(e,t)}),s.empty(i)?null:1===i.length?i[0]:i},emit:function(t,n){var e;t instanceof FooGallery.utils.Event&&(e=this,n=s.array(n)?n:[],null===t.target&&(t.target=e),s.array(e.events[t.type])&&e.events[t.type].forEach(function(e){null!=t.namespace&&e.namespace!==t.namespace||e.fn.apply(e.thisArg,[t].concat(n))}),s.array(e.events.__all__)&&e.events.__all__.forEach(function(e){e.fn.apply(e.thisArg,[t].concat(n))}))}}))}(FooGallery.utils,FooGallery.utils.is,FooGallery.utils.str),function(e,i,t){"1.0.0"===e.version&&(e.Timer=e.EventClass.extend({construct:function(e){var t=this;t._super(),t.interval=i.number(e)?e:1e3,t.isRunning=!1,t.isPaused=!1,t.canResume=!1,t.canRestart=!1,t.__timeout=null,t.__decrement=!1,t.__time=0,t.__remaining=0,t.__current=0,t.__finish=0,t.__restart=[]},__reset:function(){var e=this;clearTimeout(e.__timeout),e.__timeout=null,e.__decrement=!1,e.__time=0,e.__remaining=0,e.__current=0,e.__finish=0,e.isRunning=!1,e.isPaused=!1,e.canResume=!1},__eventArgs:function(e){return[this.__current,this.__time,this.__decrement].concat(t.arg2arr(arguments))},__tick:function(){var e=this;e.trigger("tick",e.__eventArgs()),e.__current===e.__finish?(e.trigger("complete",e.__eventArgs()),e.__reset()):(e.__decrement?e.__current--:e.__current++,e.__remaining--,e.canResume=0<e.__remaining,e.__timeout=setTimeout(function(){e.__tick()},e.interval))},start:function(e,t){var n=this;n.isRunning||(t=!!i.boolean(t)&&t,n.__restart=[e,t],n.__decrement=t,n.__time=e,n.__remaining=e,n.__current=t?e:0,n.__finish=t?0:e,n.canRestart=!0,n.isRunning=!0,n.isPaused=!1,n.trigger("start",n.__eventArgs()),n.__tick())},countdown:function(e){this.start(e,!0)},countup:function(e){this.start(e,!1)},restart:function(){var e=this;e.stop(),e.canRestart&&e.start.apply(e,e.__restart)},stop:function(){var e=this;(e.isRunning||e.isPaused)&&(e.__reset(),e.trigger("stop",e.__eventArgs()))},pause:function(){var e=this;return null!=e.__timeout&&(clearTimeout(e.__timeout),e.__timeout=null),e.isRunning&&(e.isRunning=!1,e.isPaused=!0,e.canResume=0<e.__remaining,e.trigger("pause",e.__eventArgs())),e.__remaining},resume:function(){var e=this;e.canResume&&(e.isRunning=!0,e.isPaused=!1,e.trigger("resume",e.__eventArgs()),e.__tick())},reset:function(){this.__reset(),this.trigger("reset",this.__eventArgs())}}))}((FooGallery.utils.$,FooGallery.utils),FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.obj),function(o,e,t){"1.0.0"===e.version&&(e.FullscreenAPI=e.EventClass.extend({construct:function(){this._super(),this.apis={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitFullscreenEnabled",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},this.api=this.getAPI(),this.supported=null!=this.api,this.__listen()},destroy:function(){return this.__stopListening(),this._super()},getAPI:function(){for(var e in this.apis)if(this.apis.hasOwnProperty(e)&&this.apis[e].enabled in document)return this.apis[e];return null},element:function(){return this.supported?document[this.api.element]:null},request:function(e){return this.supported&&e[this.api.request]?e[this.api.request]()||o.Deferred(this.__resolver(this.api.request)).promise():t.rejected},exit:function(){return this.supported&&this.element()?document[this.api.exit]()||o.Deferred(this.__resolver(this.api.exit)).promise():t.rejected},toggle:function(e){return this.element()?this.exit():this.request(e)},__listen:function(){var e=this;e.supported&&o(document).on(e.api.events.change+".utils",function(){e.trigger("change")}).on(e.api.events.error+".utils",function(){e.trigger("error")})},__stopListening:function(){this.supported&&o(document).off(this.api.events.change+".utils").off(this.api.events.error+".utils")},__resolver:function(i){var r=this;return function(e){function t(){e.resolve(),o(document).off(r.api.events.change,t).off(r.api.events.error,n)}function n(){e.reject(new TypeError),o(document).off(r.api.events.change,t).off(r.api.events.error,n)}i===r.api.exit&&r.element()?setTimeout(function(){e.reject(new TypeError)},1):o(document).on(r.api.events.change,t).on(r.api.events.error,n)}}}))}(FooGallery.utils.$,FooGallery.utils,FooGallery.utils.fn),function(l,c,u,a){"1.0.0"===c.version&&(c.transition={},c.transition.dataName="__foo-transition__",c.transition.disableClassName=null,c.transition.timeout=3e3,c.transition.disable=function(e,t){var n,i,r,e=u.jq(e)?e:l(e);0<e.length&&u.fn(t)&&(n=e.get(0),r=null,(i=u.string(c.transition.disableClassName))?e.addClass(c.transition.disableClassName):(r={value:n.style.getPropertyValue("transition"),priority:n.style.getPropertyPriority("transition")},n.style.setProperty("transition","none","important")),t.call(t,e),e.prop("offsetWidth"),i?e.removeClass(c.transition.disableClassName):(n.style.removeProperty("transition"),u.string(r.value)&&0<r.value.length&&n.style.setProperty("transition",r.value,r.priority)))},c.transition.stop=function(e){var t=l.Deferred(),n=u.jq(e)?e:l(e);return 0<n.length?(e=n.data(c.transition.dataName),u.promise(e)?e.always(function(){c.requestFrame(function(){t.resolve(n)})}).reject(new Error("Transition cancelled.")):t.resolve(n)):t.reject(new Error("Unable to stop transition. Make sure the element exists.")),t.promise()},c.transition.createListener=function(e,t,n){var i=e,r=t,o=n,s=u.string(n);return function(e){var t=e.originalEvent instanceof TransitionEvent?e.originalEvent:e,n=!1;(n=t.target===i?!s||t.propertyName===o:n)&&r.apply(r,a.arg2arr(arguments))}},c.transition.start=function(e,n,i,r){var o,s=l.Deferred(),a=u.jq(e)?e:l(e);return 0<a.length&&u.fn(n)?(o=a.get(0),c.transition.stop(a).always(function(){var t=c.transition.createListener(o,function(){s.resolve(a)},i);a.data(c.transition.dataName,s).on("transitionend.foo-utils",t).prop("offsetWidth"),c.requestFrame(function(){var e=setTimeout(function(){s.reject(new Error("Transition safety timeout triggered."))},u.number(r)?r:c.transition.timeout);s.always(function(){clearTimeout(e),a.removeData(c.transition.dataName).off("transitionend.foo-utils",t)}),n.call(n,a)})})):s.reject(new Error("Unable to perform transition. Make sure the element exists and a trigger function is supplied.")),s.promise()},c.transition.modify=function(e,t,n,i){e=u.jq(e)?e:l(e);return 0<e.length&&u.fn(t)?n?(c.transition.disable(e,t),a.resolve()):c.transition.start(e,t,i):a.reject(new Error("Unable to perform modification. Make sure the element exists and a modify function is supplied."))})}(FooGallery.utils.$,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn),function(o,s,e,a,i,t){s.DATA_TEMPLATE="__FooGallery__",s.DATA_ITEM="__FooGalleryItem__",s.get=function(e){return o(e).data(s.DATA_TEMPLATE)},s.init=function(t,n){if(0<(n=a.jq(n)?n:o(n)).length){var e=n.data(s.DATA_TEMPLATE);if(e instanceof s.Template)return e.destroy(!0).then(function(){var e=s.template.make(t,n);return e instanceof s.Template?e.initialize():i.rejected})}e=s.template.make(t,n);return e instanceof s.Template?e.initialize():i.rejected},o.fn.foogallery=function(i,r){return r=a.fn(r)?r:o.noop,this.each(function(e,t){if(a.string(i)){var n=o.data(t,s.DATA_TEMPLATE);if(n instanceof s.Template)switch(i){case"layout":return void n.layout();case"destroy":return void n.destroy()}}else s.init(i,t).then(r)})},s.isCached=function(e){var t=new Image,e=(t.src=e,t.complete);return t.src="",t=null,e},s.supportedExifProperties=["camera","aperture","created_timestamp","shutter_speed","focal_length","iso","orientation"],a.exif=function(t){var e;return!!a.object(t)&&(0<(e=Object.keys(t)).length&&e.some(function(e){return-1!==s.supportedExifProperties.indexOf(e)&&!a.empty(t[e])}))},t.trimTo=function(e,t,n){return a.string(e)&&a.number(t)&&0<t&&e.length>t?e.substr(0,t)+(a.string(n)?n:"&hellip;"):e},e.getResizeObserverSize=function(e){var t,e=e.contentBoxSize?e.contentBoxSize[0]?(t=e.contentBoxSize[0].inlineSize,e.contentBoxSize[0].blockSize):(t=e.contentBoxSize.inlineSize,e.contentBoxSize.blockSize):(t=e.contentRect.width,e.contentRect.height);return{width:t,height:e}},s.supportsWebP=!1;var n=new Image;n.onload=function(){s.supportsWebP=0<n.width&&0<n.height},n.onerror=function(){s.supportsWebP=!1},n.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",s.supportsPicture=!!window.HTMLPictureElement,e.DOMEventListeners=e.Class.extend({construct:function(){this.eventTargets=new Map},add:function(e,t,n,i){e.addEventListener(t,n,i);let r=this.eventTargets.get(e);return r||(r=new Map,this.eventTargets.set(e,r)),!r.get(t)&&(r.set(t,{listener:n,options:i}),!0)},remove:function(e,t){let n=this.eventTargets.get(e);var i;!n||(i=n.get(t))&&(e.removeEventListener(t,i.listener,i.options),n.delete(t),0===n.size&&this.eventTargets.delete(e))},clear:function(){this.eventTargets.forEach(function(e,n){e.forEach(function(e,t){n.removeEventListener(t,e.listener,e.options)})}),this.eventTargets.clear()}}),e.Timeouts=e.Class.extend({construct:function(){this.instances=new Map},has:function(e){return this.instances.has(e)},get:function(e){return this.instances.get(e)},set:function(e,t,n){const i=this;i.delete(e);n={id:setTimeout(function(){i.instances.delete(e),t.call(i)},n),delay:n,fn:t};return this.instances.set(e,n),i},delete:function(e){var t;return!!this.instances.has(e)&&(t=this.instances.get(e),clearTimeout(t.id),this.instances.delete(e))},clear:function(){this.instances.forEach(function(e){clearTimeout(e.id)}),this.instances.clear()}})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.str),function(o,e,t,a,l){e.Icons=t.Class.extend({construct:function(){this.className="fg-icon",this.registered={default:{close:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M13.957 3.457l-1.414-1.414-4.543 4.543-4.543-4.543-1.414 1.414 4.543 4.543-4.543 4.543 1.414 1.414 4.543-4.543 4.543 4.543 1.414-1.414-4.543-4.543z"></path></svg>',"arrow-left":'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M10.5 16l1.5-1.5-6.5-6.5 6.5-6.5-1.5-1.5-8 8 8 8z"></path></svg>',"arrow-right":'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M5.5 0l-1.5 1.5 6.5 6.5-6.5 6.5 1.5 1.5 8-8-8-8z"></path></svg>',maximize:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M2 2v4h-2v-5c0-0.552 0.448-1 1-1h14c0.552 0 1 0.448 1 1v14c0 0.552-0.448 1-1 1h-14c-0.552 0-1-0.448-1-1v-9h9c0.552 0 1 0.448 1 1v7h4v-12h-12z"/></svg>',expand:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M2 5h-2v-4c0-0.552 0.448-1 1-1h4v2h-3v3z"></path><path d="M16 5h-2v-3h-3v-2h4c0.552 0 1 0.448 1 1v4z"></path><path d="M15 16h-4v-2h3v-3h2v4c0 0.552-0.448 1-1 1z"></path><path d="M5 16h-4c-0.552 0-1-0.448-1-1v-4h2v3h3v2z"></path></svg>',shrink:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M3 0h2v4c0 0.552-0.448 1-1 1h-4v-2h3v-3z"></path><path d="M11 0h2v3h3v2h-4c-0.552 0-1-0.448-1-1v-4z"></path><path d="M12 11h4v2h-3v3h-2v-4c0-0.552 0.448-1 1-1z"></path><path d="M0 11h4c0.552 0 1 0.448 1 1v4h-2v-3h-3v-2z"></path></svg>',info:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M7 4.75c0-0.412 0.338-0.75 0.75-0.75h0.5c0.412 0 0.75 0.338 0.75 0.75v0.5c0 0.412-0.338 0.75-0.75 0.75h-0.5c-0.412 0-0.75-0.338-0.75-0.75v-0.5z"></path><path d="M10 12h-4v-1h1v-3h-1v-1h3v4h1z"></path><path d="M8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 14.5c-3.59 0-6.5-2.91-6.5-6.5s2.91-6.5 6.5-6.5 6.5 2.91 6.5 6.5-2.91 6.5-6.5 6.5z"></path></svg>',comment:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M3 4h10v1h-10zM3 6h8v1h-8zM3 8h4v1h-4zM14.5 1h-13c-0.825 0-1.5 0.675-1.5 1.5v8c0 0.825 0.675 1.5 1.5 1.5h2.5v4l4.8-4h5.7c0.825 0 1.5-0.675 1.5-1.5v-8c0-0.825-0.675-1.5-1.5-1.5zM14 10h-5.924l-3.076 2.73v-2.73h-3v-7h12v7z"></path></svg>',thumbs:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M3 3v10h-2v-11c0-0.552 0.448-1 1-1h12c0.552 0 1 0.448 1 1v12c0 0.552-0.448 1-1 1h-12c-0.552 0-1-0.448-1-1v-1h4v-2h-2v-2h2v-2h-2v-2h2v-2h2v10h6v-10h-10z"></path></svg>',cart:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M13.238 9c0.55 0 1.124-0.433 1.275-0.962l1.451-5.077c0.151-0.529-0.175-0.962-0.725-0.962h-10.238c0-1.105-0.895-2-2-2h-3v2h3v8.5c0 0.828 0.672 1.5 1.5 1.5h9.5c0.552 0 1-0.448 1-1s-0.448-1-1-1h-9v-1h8.238zM5 4h9.044l-0.857 3h-8.187v-3z"></path><path d="M6 14.5c0 0.828-0.672 1.5-1.5 1.5s-1.5-0.672-1.5-1.5c0-0.828 0.672-1.5 1.5-1.5s1.5 0.672 1.5 1.5z"></path><path d="M15 14.5c0 0.828-0.672 1.5-1.5 1.5s-1.5-0.672-1.5-1.5c0-0.828 0.672-1.5 1.5-1.5s1.5 0.672 1.5 1.5z"></path></svg>',"circle-close":'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 14.5c-3.59 0-6.5-2.91-6.5-6.5s2.91-6.5 6.5-6.5 6.5 2.91 6.5 6.5-2.91 6.5-6.5 6.5z"></path><path d="M10.5 4l-2.5 2.5-2.5-2.5-1.5 1.5 2.5 2.5-2.5 2.5 1.5 1.5 2.5-2.5 2.5 2.5 1.5-1.5-2.5-2.5 2.5-2.5z"></path></svg>',"auto-progress":'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path class="[ICON_CLASS]-idle" d="M11.39 8c2.152-1.365 3.61-3.988 3.61-7 0-0.339-0.019-0.672-0.054-1h-13.891c-0.036 0.328-0.054 0.661-0.054 1 0 3.012 1.457 5.635 3.609 7-2.152 1.365-3.609 3.988-3.609 7 0 0.339 0.019 0.672 0.054 1h13.891c0.036-0.328 0.054-0.661 0.054-1 0-3.012-1.457-5.635-3.609-7zM2.5 15c0-2.921 1.253-5.397 3.5-6.214v-1.572c-2.247-0.817-3.5-3.294-3.5-6.214v0h11c0 2.921-1.253 5.397-3.5 6.214v1.572c2.247 0.817 3.5 3.294 3.5 6.214h-11zM9.462 10.462c-1.12-0.635-1.181-1.459-1.182-1.959v-1.004c0-0.5 0.059-1.327 1.184-1.963 0.602-0.349 1.122-0.88 1.516-1.537h-6.4c0.395 0.657 0.916 1.188 1.518 1.538 1.12 0.635 1.181 1.459 1.182 1.959v1.004c0 0.5-0.059 1.327-1.184 1.963-1.135 0.659-1.98 1.964-2.236 3.537h7.839c-0.256-1.574-1.102-2.879-2.238-3.538z"/><circle class="[ICON_CLASS]-circle" r="4" cx="8" cy="8"/><path class="[ICON_CLASS]-play" d="M3 2l10 6-10 6z"/><path class="[ICON_CLASS]-pause" d="M2 2h5v12h-5zM9 2h5v12h-5z"/></svg>',search:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M16 13.5l-4.695-4.695c0.444-0.837 0.695-1.792 0.695-2.805 0-3.314-2.686-6-6-6s-6 2.686-6 6 2.686 6 6 6c1.013 0 1.968-0.252 2.805-0.695l4.695 4.695 2.5-2.5zM2 6c0-2.209 1.791-4 4-4s4 1.791 4 4-1.791 4-4 4-4-1.791-4-4z"></path></svg>',"exif-aperture":'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M 8,0 C 3.5876443,0 0,3.5876443 0,8 c 0,4.412356 3.5876443,8 8,8 4.412356,0 8,-3.587644 8,-8 C 16,3.5876443 12.412356,0 8,0 Z m 0,1 c 3.871916,0 7,3.1280844 7,7 0,3.871916 -3.128084,7 -7,7 C 4.1280844,15 1,11.871916 1,8 1,4.1280844 4.1280844,1 8,1 Z M 7.53125,2.0214844 A 6,6 0 0 0 3.1835938,4.4335938 H 8.9257812 Z M 8.6132812,2.03125 C 9.5587451,3.6702105 10.504247,5.3091484 11.451172,6.9472656 L 12.863281,4.5 A 6,6 0 0 0 8.6132812,2.03125 Z M 2.5957031,5.4101562 A 6,6 0 0 0 2,8 6,6 0 0 0 2.5273438,10.439453 L 5.4296875,5.4101562 Z m 10.8261719,0.033203 -2.855469,4.9433598 h 2.935547 A 6,6 0 0 0 14,8 6,6 0 0 0 13.421875,5.4433592 Z M 4.5722656,8.8945312 3.0996094,11.449219 a 6,6 0 0 0 4.40625,2.527343 z m 2.5820313,2.4707028 1.4960937,2.591797 a 6,6 0 0 0 4.3144534,-2.591797 z"></path></svg>',"exif-camera":'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="m 8.0000002,5 a 4,4 0 0 0 -4,4 4,4 0 0 0 4,4 A 4,4 0 0 0 12,9 4,4 0 0 0 8.0000002,5 Z m 0.019531,1.015625 a 3,2.9814477 0 0 1 2.9804688,3 l -1,-0.00586 a 2,2 0 0 0 0,-0.00976 2,2 0 0 0 -1.9863279,-2 z M 5.125,1 C 4.5,1 4,1.5 4,2.125 V 3.0000004 L 1.125,3 C 0.5,2.9999999 0,3.5 0,4.125 v 9.75 C 0,14.5 0.5,15 1.125,15 h 13.75 C 15.5,15 16,14.5 16,13.875 V 4.125 C 16,3.5 15.5,3 14.875,3 H 12 V 2.125 C 12,1.5 11.5,1 10.875,1 Z M 5.25,2.0000004 h 5.5 c 0.125,0 0.25,0.1249996 0.25,0.25 v 1.75 h 3.75 c 0.125,0 0.25,0.1249996 0.25,0.25 V 13.75 C 15,13.875 14.875,14 14.75,14 H 1.25 C 1.125,14 1,13.875 1,13.75 V 4.25 C 1,4.125 1.125,4 1.25,4 l 3.75,4e-7 v -1.75 c 0,-0.1250004 0.125,-0.25 0.25,-0.25 z"></path></svg>',"exif-created-timestamp":'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M 3,1 V 2 H 1 V 15 H 16 V 2 H 14 V 1 H 13 V 2 H 4 V 1 Z M 2,4 H 15 V 14 H 2 Z M 6,5 V 7 H 8 V 5 Z m 3,0 v 2 h 2 V 5 Z m 3,0 v 2 h 2 V 5 Z M 3,8 v 2 H 5 V 8 Z m 3,0 v 2 H 8 V 8 Z m 3,0 v 2 h 2 V 8 Z m 3,0 v 2 h 2 V 8 Z m -9,3 v 2 h 2 v -2 z m 3,0 v 2 h 2 v -2 z m 3,0 v 2 h 2 v -2 z"></path></svg>',"exif-shutter-speed":'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M 8,0 C 3.5876443,0 -2.9415707e-8,3.5876443 0,8 c 2.3532563e-7,4.412356 3.5876445,8 8,8 4.412356,0 8,-3.587644 8,-8 C 16,3.5876443 12.412356,0 8,0 Z m 0,1 c 3.871916,0 7,3.1280844 7,7 0,3.871915 -3.128085,7 -7,7 -3.8719154,0 -6.9999998,-3.128085 -7,-7 -3e-8,-3.8719156 3.1280844,-7 7,-7 z M 11.646484,3.6464844 8.6445312,6.6484375 A 1.5,1.5 0 0 0 8,6.5 1.5,1.5 0 0 0 6.5,8 1.5,1.5 0 0 0 8,9.5 1.5,1.5 0 0 0 9.5,8 1.5,1.5 0 0 0 9.3515625,7.3554688 L 12.353516,4.3535156 Z M 2,7.5 v 1 h 2 v -1 z M 7.5,12 v 2 h 1 V 12 Z M 12,7.5 v 1 h 2 v -1 z M 7.5,2 v 2 h 1 V 2 Z"></path></svg>',"exif-focal-length":'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="m 1,4.125 -1,0.25 v 7.25 l 1,0.25 z M 5,1 2,4 v 8 l 3,3 h 6.875 C 12.500003,15 13,14.5 13,13.875 V 2.125 C 13,1.4999986 12.5,1 11.875,1 9.576807,0.99914375 7.1414067,0.96597644 5,1 Z M 5.5,2 H 6 V 14 H 5.5 L 3,11.5 v -7 z M 7,2 h 4.75 C 11.875,2 12,2.1249997 12,2.25 v 11.5 c 0,0.125 -0.125,0.250622 -0.25,0.25 H 7 Z m 7,0 c 1,2.2 1.5,4.35 1.5,6 0,1.65 -0.5,3.8 -1.5,6"></path></svg>',"exif-iso":'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M 7.5,0 V 1.6015625 C 6.0969201,1.7146076 4.8392502,2.256185 3.828125,3.1210938 L 2.6035156,1.8964844 1.8964844,2.6035156 3.1210938,3.828125 C 2.256185,4.8392502 1.7146076,6.0969201 1.6015625,7.5 H 0 v 1 h 1.6015625 c 0.1130451,1.4030799 0.6546225,2.66075 1.5195313,3.671875 l -1.2246094,1.224609 0.7070312,0.707032 1.2246094,-1.22461 C 4.8392502,13.743815 6.0969201,14.285392 7.5,14.398438 V 16 h 1 v -1.601562 c 1.4030799,-0.113046 2.66075,-0.654623 3.671875,-1.519532 l 1.224609,1.22461 0.707032,-0.707032 -1.22461,-1.224609 C 13.743815,11.16075 14.285392,9.9030799 14.398438,8.5 H 16 v -1 H 14.398438 C 14.285392,6.0969201 13.743815,4.8392502 12.878906,3.828125 L 14.103516,2.6035156 13.396484,1.8964844 12.171875,3.1210938 C 11.16075,2.256185 9.9030799,1.7146076 8.5,1.6015625 V 0 Z M 8,2.5 c 3.043488,0 5.5,2.4565116 5.5,5.5 0,3.043488 -2.456512,5.5 -5.5,5.5 C 4.9565116,13.5 2.5,11.043488 2.5,8 2.5,4.9565116 4.9565116,2.5 8,2.5 Z"></path></svg>',"exif-orientation":'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M 1.25,0 C 0.625,0 0,0.625 0,1.25 V 5 H 1 V 3 h 8 v 2 h 1 V 1.25 C 10,0.625 9.375,0 8.75,0 Z m 0,1 h 7.5 C 8.875,1 9,1.125 9,1.25 V 2 H 1 V 1.25 C 1,1.125 1.125,1 1.25,1 Z m 0,5 C 0.625,6 0,6.625 0,7.25 v 7.5 C 0,15.375 0.625,16 1.25,16 h 13.5 C 15.375,16 16,15.375 16,14.75 V 7.25 C 16,6.625 15.375,6 14.75,6 Z m 0,1 H 2 v 3 H 1 V 7.25 C 1,7.125 1.125,7 1.25,7 Z M 3,7 h 10 v 8 H 3 Z m 11,0 h 0.75 C 14.875,7 15,7.125 15,7.25 v 7.5 C 15,14.875 14.875,15 14.75,15 H 14 Z M 1,12 h 1 v 3 H 1.25 C 1.125,15 1,14.875 1,14.75 Z"></path></svg>'}}},register:function(e,t){return!(a.empty(e)||a.empty(t)||!a.string(e)||!a.hash(t))&&(this.registered[e]=l.extend({},this.registered.default,t),!0)},get:function(e,t){var n=this,i="default",r=l.extend({},n.registered.default),t=(a.string(t)&&"default"!==t?r=l.extend(r,n.registered[i=t]):a.hash(t)&&(i="custom",r=l.extend(r,t)),a.string(e)&&r.hasOwnProperty(e)?r[e].replace(/\[ICON_CLASS]/g,n.className+"-"+e):null),r=[!1,e,i].map(function(e){return!1===e?n.className:n.className+"-"+e}).join(" ");return o(t).addClass(r)},element:function(e,t){const n=this;let i="default",r=l.extend({},n.registered.default);a.string(t)&&"default"!==t?(i=t,r=l.extend(r,n.registered[t])):a.hash(t)&&(i="custom",r=l.extend(r,t));t=a.string(e)&&r.hasOwnProperty(e)?r[e].replace(/\[ICON_CLASS]/g,n.className+"-"+e):null;if(null!==t){const o=document.createRange().createContextualFragment(t),s=o.querySelector("svg");if(s)return["","-"+e,"-"+i].forEach(function(e){s.classList.add(n.className+e)}),s}return null}}),e.icons=new e.Icons}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.obj),function(r,n,i,o,s){var a="__FooGallerySwipe__",e="ontouchstart"in window,l=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!e,c=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!e,u=e||c;n.Swipe=i.Class.extend({construct:function(e,t){var n=this,i=".fgswipe";n.$el=r(e),n.opt=s.extend({threshold:20,allowPageScroll:!1,swipe:r.noop,data:{}},t),n.active=!1,n.startPoint=null,n.endPoint=null,n.events={start:(u?c?l?"MSPointerDown":"pointerdown":"touchstart":"mousedown")+i,move:(u?c?l?"MSPointerMove":"pointermove":"touchmove":"mousemove")+i,end:(u?c?l?"MSPointerUp":"pointerup":"touchend":"mouseup")+i,leave:(!u||c?"mouseleave":null)+i}},init:function(){var e=this;e.$el.on(e.events.start,{self:e},e.onStart),e.$el.on(e.events.move,{self:e},e.onMove),e.$el.on(e.events.end,{self:e},e.onEnd),o.string(e.events.leave)&&e.$el.on(e.events.leave,{self:e},e.onEnd),e.$el.data(a,e)},destroy:function(){var e=this;e.$el.off(e.events.start,e.onStart),e.$el.off(e.events.move,e.onMove),e.$el.off(e.events.end,e.onEnd),o.string(e.events.leave)&&e.$el.off(e.events.leave,e.onEnd),e.$el.removeData(a)},getAngle:function(e,t){e=Math.atan2(e.x-t.x,e.y-t.y),t=Math.round(180*e/Math.PI);return 360-(t<0?360-Math.abs(t):t)},getDistance:function(e,t){var n=t.x-e.x,t=t.y-e.y;return n*=n,t*=t,Math.sqrt(n+t)},getDirection:function(e,t){e=this.getAngle(e,t);return 337.5<e||e<=22.5?"N":22.5<e&&e<=67.5?"NE":67.5<e&&e<=112.5?"E":112.5<e&&e<=157.5?"SE":157.5<e&&e<=202.5?"S":202.5<e&&e<=247.5?"SW":247.5<e&&e<=292.5?"W":292.5<e&&e<=337.5?"NW":"NONE"},getPoint:function(e){var t;return u&&!o.empty(t=e.originalEvent.touches||e.touches)?{x:t[0].pageX,y:t[0].pageY}:o.number(e.pageX)&&o.number(e.pageY)?{x:e.pageX,y:e.pageY}:null},getOffset:function(e){var t=this.$el.offset();return{left:e.x-t.left,top:e.y-t.top}},onStart:function(e){var t=e.data.self,e=t.getPoint(e);o.empty(e)||(t.active=!0,t.startPoint=t.endPoint=e)},onMove:function(e){var t=e.data.self,n=t.getPoint(e);t.active&&!o.empty(n)&&(t.endPoint=n,t.opt.allowPageScroll?o.hash(t.opt.allowPageScroll)&&(n=t.getDirection(t.startPoint,t.endPoint),t.opt.allowPageScroll.x||-1===i.inArray(n,["NE","E","SE","NW","W","SW"])||e.preventDefault(),t.opt.allowPageScroll.y||-1===i.inArray(n,["NW","N","NE","SW","S","SE"])||e.preventDefault()):e.preventDefault())},onEnd:function(e){var t,e=e.data.self;e.active&&(e.active=!1,t={startPoint:e.startPoint,endPoint:e.endPoint,startOffset:e.getOffset(e.startPoint),endOffset:e.getOffset(e.endPoint),angle:e.getAngle(e.startPoint,e.endPoint),distance:e.getDistance(e.startPoint,e.endPoint),direction:e.getDirection(e.startPoint,e.endPoint)},0<e.opt.threshold&&t.distance<e.opt.threshold||(e.opt.swipe.apply(this,[t,e.opt.data]),e.startPoint=null,e.endPoint=null))}}),r.fn.fgswipe=function(t){return this.each(function(){var e=r(this).data(a);if(e instanceof n.Swipe){if(o.string(t)&&o.fn(e[t]))return void e[t]();e.destroy()}o.hash(t)&&(e=new n.Swipe(this,t)).init()})}}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.obj),function(r,e,t,o,s){e.Factory=t.Class.extend({construct:function(){this.registered={}},contains:function(e){return!o.undef(this.registered[e])},make:function(e,t,n){var i,r=s.arg2arr(arguments);return e=r.shift(),i=this.registered[e],o.hash(i)&&o.fn(i.klass)?s.apply(i.klass,r):null},names:function(e){e=!!o.boolean(e)&&e;var t,n=[];if(e){var i=[];for(t in this.registered)this.registered.hasOwnProperty(t)&&i.push(this.registered[t]);i.sort(function(e,t){return t.priority-e.priority}),r.each(i,function(e,t){n.push(t.name)})}else for(t in this.registered)this.registered.hasOwnProperty(t)&&n.push(t);return n},register:function(e,t,n){if(!o.string(e)||o.empty(e)||!o.fn(t))return!1;n=o.number(n)?n:0;var i=this.registered[e];return this.registered[e]={name:e,klass:t,priority:o.undef(i)?n:i.priority},!0},load:function(){var e,n=this,i=[],t=[];for(e in n.registered)n.registered.hasOwnProperty(e)&&t.push(n.registered[e]);return t.sort(function(e,t){return t.priority-e.priority}),r.each(t,function(e,t){i.push(n.make(t.name))}),i}})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn),function(l,s,c,u,a){s.TemplateFactory=s.Factory.extend({construct:function(){this.registered={}},register:function(e,t,n,i,r,o){t=this._super(e,t,o);return t&&((o=this.registered)[e].opt=u.hash(n)?n:{},o[e].cls=u.hash(i)?i:{},o[e].il8n=u.hash(r)?r:{}),t},make:function(e,t){t=u.jq(t)?t:l(t),e=a.extend({},e,t.data("foogallery"));var n=this.type(e,t);return this.contains(n)?(e=this.options(n,e),this._super(n,e,t)):null},type:function(e,t){t=u.jq(t)?t:l(t);var n=u.hash(e)&&u.hash(e)&&u.string(e.type)&&this.contains(e.type)?e.type:null;if(null===n&&0<t.length)for(var i=this.registered,r=this.names(!0),o=0,s=r.length;o<s;o++)if(i.hasOwnProperty(r[o])&&"core"!==r[o]){var a=i[r[o]].cls;if(u.string(a.container)){a=c.selectify(a.container);if(t.is(a)){n=r[o];break}}}return n},configure:function(e,t,n,i){var r;this.contains(e)&&(r=this.registered,a.extend(r[e].opt,t),a.extend(r[e].cls,n),a.extend(r[e].il8n,i))},options:function(e,t){t=a.extend({type:e},t);var n=this.registered,i=n.core.opt,r=n.core.cls,o=n.core.il8n;return u.hash(t.cls)||(t.cls={}),u.hash(t.il8n)||(t.il8n={}),u.undef(s.filtering)||(t=s.filtering.merge(t)),u.undef(s.paging)||(t=s.paging.merge(t)),"core"!==e&&this.contains(e)?((t=a.extend({},i,n[e].opt,t)).cls=a.extend({},r,n[e].cls,t.cls),t.il8n=a.extend({},o,n[e].il8n,t.il8n)):((t=a.extend({},i,t)).cls=a.extend({},r,t.cls),t.il8n=a.extend({},o,t.il8n)),t}}),s.template=new s.TemplateFactory}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,(FooGallery.utils.fn,FooGallery.utils.obj)),function(i,r,o,s,a){var l=0;r.Template=o.EventClass.extend({construct:function(e,t){var n=this;n._super(),n.namespace=".foogallery-"+ ++l,n.$el=s.jq(t)?t:i(t),n.el=n.$el.get(0)||null,n.$scrollParent=null,n.opt=e,n.template=e.template,n.id=n.$el.prop("id")||e.id,n.cls=e.cls,n.il8n=e.il8n,n.sel=o.selectify(n.cls),n.items=r.components.make("items",n),n.pages=s.undef(r.paging)?null:r.paging.make(e.paging.type,n),n.filter=s.undef(r.filtering)?null:r.filtering.make(e.filtering.type,n),n.state=r.components.make("state",n),n._initialize=null,n._layoutTimeout=null,n._layoutWidths=[],n.lastWidth=0,n.initializing=!1,n.initialized=!1,n.destroying=!1,n.destroyed=!1,n._undo={classes:"",style:"",create:!1,children:!1},n.robserver=new ResizeObserver(a.throttle(function(e){n.destroying||n.destroyed||1!==e.length||e[0].target!==n.el||(e=o.getResizeObserverSize(e[0]),n.layout(e.width))},50))},initialize:function(t){var n=this;return s.promise(n._initialize)?n._initialize:n._initialize=i.Deferred(function(e){n.preInit(t)?n.init().then(function(){n.postInit()?(n.ready(),e.resolve(n)):e.reject("post-init failed")}).fail(e.reject):e.reject("pre-init failed")}).fail(function(e){return console.log("initialize failed",n,e),n.destroy()}).promise()},preInit:function(e){var t,n=this;if(n.destroying)return!1;if(e=s.jq(e)?e:i(e),n.initializing=!0,0===e.length&&0===n.$el.parent().length)return!1;0===n.$el.length&&(n.$el=n.create(),n.el=n.$el.get(0),n._undo.create=!0),0<e.length&&n.$el.appendTo(e),s.empty(n.opt.scrollParent)||0===(t=i(n.opt.scrollParent)).length?n.$scrollParent=i(document):n.$scrollParent=t.is("html")?i(document):t,n.$el.data(r.DATA_TEMPLATE,n),s.empty(n.opt.on)||n.on(n.opt.on),n._undo.classes=n.$el.attr("class"),n._undo.style=n.$el.attr("style"),n.$el.is(n.sel.container)||n.$el.addClass(n.cls.container);e=o.selectify(n.opt.classes);return null==e||n.$el.is(e)||n.$el.addClass(n.opt.classes),0===n.$el.children().not(n.sel.item.elem).length&&(n.$el.append(n.createChildren()),n._undo.children=!0),n.opt.protected&&(n.el.oncontextmenu=function(e){return e.preventDefault(),!1}),!n.trigger("pre-init").isDefaultPrevented()},init:function(){return this.trigger("init").isDefaultPrevented()?a.reject("init default prevented"):this.items.fetch()},postInit:function(){var e=this;return!e.destroying&&(!e.trigger("post-init").isDefaultPrevented()&&(e.state.init(),e.pages&&e.pages.init(),i(window).on("popstate"+e.namespace,{self:e},e.onWindowPopState),e.robserver.observe(e.el),!0))},ready:function(){return!this.destroying&&(this.initializing=!1,this.initialized=!0,this.trigger("ready"),!0)},create:function(){return i("<div/>",{id:this.id,class:this.cls.container}).addClass(this.opt.classes)},createChildren:function(){return i()},destroy:function(t){var n=this,e=n._super.bind(n);return n.destroyed?a.resolved:(n.destroying=!0,i.Deferred(function(e){n.initializing&&s.promise(n._initialize)?n._initialize.always(function(){n.destroying=!1,n.doDestroy(t),e.resolve()}):(n.destroying=!1,n.doDestroy(t),e.resolve())}).then(function(){e()}).promise())},doDestroy:function(e){var t=this;t.destroyed||(t.trigger("destroy"),t.robserver.disconnect(),i(window).off(t.namespace),t.state.destroy(e),t.filter&&t.filter.destroy(),t.pages&&t.pages.destroy(),t.items.destroy(),s.empty(t.opt.on)||t.$el.off(t.opt.on),t.trigger("destroyed"),t.$el.removeData(r.DATA_TEMPLATE),s.empty(t._undo.classes)?t.$el.removeAttr("class"):t.$el.attr("class",t._undo.classes),s.empty(t._undo.style)?t.$el.removeAttr("style"):t.$el.attr("style",t._undo.style),t._undo.children&&t.destroyChildren(),t._undo.create&&t.$el.remove(),t.$el=t.state=t.items=t.pages=null,t.destroyed=!0,t.initializing=!1,t.initialized=!1)},destroyChildren:function(){},getAvailable:function(){return(this.pages||this.items).available()},layout:function(e){var t=this;null!==t._initialize&&(0===(e=!s.number(e)?t.el.getBoundingClientRect().width:e)||t._checkWidth(e)||(t.lastWidth=e,t.trigger("layout",[e])))},_checkWidth:function(e){var t,n=this;return(t=-1!==n._layoutWidths.indexOf(e))||(n._layoutWidths.unshift(e),n._layoutWidths.splice(2,n._layoutWidths.length-2),null!=n._layoutTimeout&&clearTimeout(n._layoutTimeout),n._layoutTimeout=setTimeout(function(){n._layoutWidths.splice(0,n._layoutWidths.length)},100)),t},getCSSClass:function(e,t){t=s.empty(t)?"":t;var e=e instanceof RegExp?e:s.string(e)&&this.opt.regex.hasOwnProperty(e)?this.opt.regex[e]:null,n=this.$el.prop("className")||"",n=null!=e?n.match(e):null;return null!=n&&2<=n.length?n[1]:t},onWindowPopState:function(e){var t=e.data.self,e=e.originalEvent.state;s.empty(e)||e.id!==t.id||t.state.set(e)}}),r.template.register("core",r.Template,{id:null,type:"core",classes:"",on:{},lazy:!0,items:[],scrollParent:null,delay:0,throttle:50,shortpixel:!1,srcset:"data-srcset-fg",src:"data-src-fg",protected:!1,template:{},regex:{theme:/(?:\s|^)(fg-(?:light|dark|custom))(?:\s|$)/,loadingIcon:/(?:\s|^)(fg-loading-(?:default|bars|dots|partial|pulse|trail))(?:\s|$)/,hoverIcon:/(?:\s|^)(fg-hover-(?:zoom|zoom2|zoom3|plus|circle-plus|eye|external|tint))(?:\s|$)/,videoIcon:/(?:\s|^)(fg-video-(?:default|1|2|3|4))(?:\s|$)/,border:/(?:\s|^)(fg-border-(?:thin|medium|thick))(?:\s|$)/,hoverColor:/(?:\s|^)(fg-hover-(?:colorize|grayscale))(?:\s|$)/,hoverScale:/(?:\s|^)(fg-hover-scale)(?:\s|$)/,stickyVideoIcon:/(?:\s|^)(fg-video-sticky)(?:\s|$)/,insetShadow:/(?:\s|^)(fg-shadow-inset-(?:small|medium|large))(?:\s|$)/,filter:/(?:\s|^)(fg-filter-(?:1977|amaro|brannan|clarendon|earlybird|lofi|poprocket|reyes|toaster|walden|xpro2|xtreme))(?:\s|$)/}},{container:"foogallery"},{},-100)}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.str),function(e,t){e.Component=t.EventClass.extend({construct:function(e){this._super(),this.tmpl=e},destroy:function(){this.tmpl=null,this._super()}}),e.components=new e.Factory}(FooGallery,FooGallery.utils,FooGallery.utils.is),function(t,o,n,s,a,l){o.State=o.Component.extend({construct:function(e){var t=this,e=(t._super(e),t.apiEnabled=!!window.history&&!!history.replaceState,t.opt=t.tmpl.opt.state,t.enabled=t.opt.enabled,t.current={filter:[],page:0,item:null},t.pushOrReplace=t.isPushOrReplace(t.opt.pushOrReplace)?t.opt.pushOrReplace:"replace",t.defaultMask="foogallery-gallery-{id}",a.escapeRegExp(t.tmpl.id)),n=a.escapeRegExp(t.getMasked()),i=a.escapeRegExp(t.opt.values),r=a.escapeRegExp(t.opt.pair);t.regex={exists:new RegExp("^#"+e+"\\"+i+".+?"),masked:new RegExp("^#"+n+"\\"+i+".+?"),values:new RegExp("(\\w+)"+r+"([^"+i+"]+)","g")}},destroy:function(e){e||this.clear(),this.opt=this.regex={},this._super()},init:function(){this.set(this.initial())},getIdNumber:function(){return this.tmpl.id.match(/\d+/g)[0]},getMasked:function(){var e=a.contains(this.opt.mask,"{id}")?this.opt.mask:this.defaultMask;return a.format(e,{id:this.getIdNumber()})},isPushOrReplace:function(e){return-1!==n.inArray(e,["push","replace"])},exists:function(){return this.regex.values.lastIndex=0,(this.regex.exists.test(location.hash)||this.regex.masked.test(location.hash))&&this.regex.values.test(location.hash)},parse:function(){var e,r=this,o=r.tmpl,s={};return r.exists()&&(r.enabled?(s.id=r.tmpl.id,r.regex.values.lastIndex=0,e=location.hash.match(r.regex.values),t.each(e,function(e,t){var n,i=t.split(r.opt.pair);if(2===i.length)switch(i[0]){case r.opt.itemKey:null!==(n=o.items.fromHash(i[1]))&&(s.item=n);break;case r.opt.pageKey:o.pages&&null!==(n=o.pages.fromHash(i[1]))&&(s.page=n);break;case r.opt.filterKey:o.filter&&null!==(n=o.filter.fromHash(i[1]))&&(s.filter=n)}})):r.apiEnabled?history.replaceState(null,"",location.pathname+location.search):location.hash="#"),s},hashify:function(e){var t,n,i=this,r=i.tmpl;return s.hash(e)?(t=[],null!==(n=r.items.toHash(e.item))&&t.push(i.opt.itemKey+i.opt.pair+n),r.filter&&null!==(n=r.filter.toHash(e.filter))&&t.push(i.opt.filterKey+i.opt.pair+n),r.pages&&null!==(n=r.pages.toHash(e.page))&&t.push(i.opt.pageKey+i.opt.pair+n),0<t.length&&t.unshift("#"+i.getMasked()),t.join(i.opt.values)):""},replace:function(e){var t,n;this.enabled&&this.apiEnabled&&(e.id=this.tmpl.id,t=this.hashify(e),n=s.empty(t),e=l.extend({},e,{item:e.item instanceof o.Item?e.item.id:e.item}),history.replaceState(n?null:e,"",n?location.pathname+location.search:t))},push:function(e){var t,n;this.enabled&&this.apiEnabled&&(e.id=this.tmpl.id,t=this.hashify(e),n=s.empty(t),e=l.extend({},e,{item:e.item instanceof o.Item?e.item.id:e.item}),history.pushState(n?null:e,"",n?location.pathname+location.search:t))},update:function(e,t){var n=this;n.enabled&&n.apiEnabled&&(t=n.isPushOrReplace(t)?t:n.pushOrReplace,n[t](e))},clear:function(){this.exists()&&this.replace({})},initial:function(){var e=this.parse();return s.empty(e)?this.get():l.extend({filter:[],page:1,item:null},e)},get:function(e){var t,n=this.tmpl,i={};return e instanceof o.Item&&(i.item=e),n.filter&&null!==(t=n.filter.getState())&&(i.filter=t),n.pages&&null!==(t=n.pages.getState())&&(i.page=t),l.extend({filter:[],page:1,item:null},i)},set:function(e){var t,n,i,r=this.tmpl;s.hash(e)&&(t=l.extend({filter:[],page:1,item:null},e),r.items.reset(),r.trigger("before-state",[t]).isDefaultPrevented()||(r.filter&&r.filter.setState(t),r.pages?r.pages.setState(t):(n=r.items.available(),r.items.isAll(n)||(i=r.items.not(n),r.items.detach(i)),r.items.create(n,!0)),t.item instanceof o.Item&&(this.opt.scrollTo&&t.item.scrollTo(),s.empty(e.item)||(e.item=null,this.replace(e))),this.current=t,r.trigger("after-state",[t])))}}),o.template.configure("core",{state:{enabled:!1,scrollTo:!0,pushOrReplace:"replace",mask:"foogallery-gallery-{id}",values:"/",pair:":",array:"+",arraySeparator:",",itemKey:"i",filterKey:"f",pageKey:"p"}}),o.components.register("state",o.State)}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.str,FooGallery.utils.obj),function(s,o,n,a,i,l){o.Items=o.Component.extend({construct:function(e){var t=this,e=(t.ALLOW_CREATE=!0,t.ALLOW_APPEND=!0,t.LAYOUT_AFTER_LOAD=!0,t._super(e),t._typeRegex=/(?:^|\s)?fg-type-(.*?)(?:$|\s)/,t._fetched=null,t._all=[],t._available=[],t._unavailable=[],t._observed=new Map,t.tmpl.cls.item.caption);t.tmpl.sel.item.caption.all=n.selectify([e.elem,e.inner,e.title,e.description]),t._wait=[],t._layoutTimeout=null,t.iobserver=new IntersectionObserver(function(e){t.tmpl.destroying||t.tmpl.destroyed||(t.LAYOUT_AFTER_LOAD&&clearTimeout(t._layoutTimeout),e.forEach(function(e){!e.isIntersecting||(e=t._observed.get(e.target))instanceof o.Item&&t._wait.push(e.load())}),t.LAYOUT_AFTER_LOAD&&(t._layoutTimeout=setTimeout(function(){0<t._wait.length&&i.allSettled(t._wait.splice(0)).then(function(){t.tmpl.layout()})},100)))})},fromHash:function(t){return this.find(this._all,function(e){return e.id===t})},toHash:function(e){return e instanceof o.Item?e.id:null},destroy:function(){var e=this,t=e.all();e.iobserver.disconnect(),0<t.length&&(e.tmpl.trigger("destroy-items",[t]),0<(t=s.map(t,function(e){return e.destroy()?e:null})).length&&e.tmpl.trigger("destroyed-items",[t])),e._fetched=null,e._all=[],e._available=[],e._unavailable=[],e._observed.clear(),e._super()},fetch:function(e){var t=this;if(!e&&a.promise(t._fetched))return t._fetched;var e=t.tmpl.id+"_items",n=t.tmpl.sel,i=t.tmpl.opt.items,r=s.Deferred(),o=t.make(t.tmpl.$el.find(n.item.elem));return a.empty(i)?(a.array(window[e])&&o.push.apply(o,t.make(window[e])),r.resolve(o)):a.array(i)?(o.push.apply(o,t.make(i)),r.resolve(o)):a.string(i)?s.get(i).then(function(e){o.push.apply(o,t.make(e)),r.resolve(o)},function(e,t,n){console.log("FooGallery: GET items error.",i,e,t,n),r.resolve(o)}):r.resolve(o),r.then(function(e){t.setAll(e)}),t._fetched=r.promise()},toJSON:function(e){return(e?this.all():this.available()).map(function(e){return e.toJSON()})},all:function(){return this._all.slice()},count:function(e){return(e?this.all():this.available()).length},available:function(e){return a.fn(e)?this._available.filter(e,this):this._available.slice()},unavailable:function(e){return a.fn(e)?this._unavailable.filter(e,this):this._unavailable.slice()},setAll:function(e){this._all=a.array(e)?e:[],this._all.forEach(function(e,t){e.index=t,a.empty(e.id)&&(e.id=t+1+"")}),this._available=this.all(),this._unavailable=[]},setAvailable:function(e){var t=this;t._available=a.array(e)?e:[],t._all.length!==t._available.length?t._unavailable=t._all.filter(function(e){return-1===t._available.indexOf(e)}):t._unavailable=[]},reset:function(){this.setAvailable(this.all())},find:function(e,t){if(t=a.fn(t)?t:function(){return!0},a.array(e))for(var n=0,i=e.length;n<i;n++)if(!0===t.call(this,e[n]))return e[n];return null},not:function(t){var e=this.all();return a.array(t)?e.filter(function(e){return-1===t.indexOf(e)}):e},isAll:function(e){return!!a.array(e)&&this._all.length===e.length},first:function(e){return this.find(this._available,e)},last:function(e){return this.find(this._available.slice().reverse(),e)},next:function(e,t,n){if(!(e instanceof o.Item))return null;n=!!a.boolean(n)&&n;var i,r=this._available.slice(),e=r.indexOf(e);return-1!==e?(i=r.slice(0,e),r=r.slice(e+1),n&&(r=r.concat(i)),this.find(r,t)):null},prev:function(e,t,n){if(!(e instanceof o.Item))return null;n=!!a.boolean(n)&&n;var i,r=this._available.slice().reverse(),e=r.indexOf(e);return-1!==e?(i=r.slice(0,e),r=r.slice(e+1),n&&(r=r.concat(i)),this.find(r,t)):null},get:function(t,e){e=e?this._all:this._available;return a.number(t)?0<=t&&t<this._all.length?e[t]:null:this.find(e,function(e){return e.el===t})},indexOf:function(e,t){return(t?this._all:this._available).indexOf(e)},creatable:function(e){return this.ALLOW_CREATE&&a.array(e)?s.map(e,function(e){return e instanceof o.Item&&!e.isCreated?e:null}):[]},appendable:function(e){return this.ALLOW_APPEND&&a.array(e)?s.map(e,function(e){return e instanceof o.Item&&e.isCreated&&!e.isAttached?e:null}):[]},detachable:function(e){return a.array(e)?s.map(e,function(e){return e instanceof o.Item&&e.isCreated&&e.isAttached?e:null}):[]},jquerify:function(e){return s(s.map(e,function(e){return e.$el.get()}))},make:function(e){var i=this,t=[];if(a.jq(e)||a.array(e)){var r=[],e=s.makeArray(e);if(0===e.length)return t;0<(t=!i.tmpl.trigger("make-items",[e]).isDefaultPrevented()?s.map(e,function(e){var t=i.type(e),n=l.extend(a.hash(e)?e:{},{type:t}),t=o.components.make(t,i.tmpl,n);return a.element(e)?t.parse(e)?(r.push(t),i.ALLOW_APPEND||t.detach(),t):null:t}):t).length&&i.tmpl.trigger("made-items",[t]),0<r.length&&i.tmpl.trigger("parsed-items",[r])}return t},type:function(e){var t;return a.hash(e)?t=e.type:!a.element(e)||null!==(e=e.className.match(this._typeRegex))&&2===e.length&&(t=e[1]),a.string(t)&&o.components.contains(t)?t:"image"},create:function(e,t){var n=[],i=this.creatable(e);return 0<i.length&&0<(n=!this.tmpl.trigger("create-items",[i]).isDefaultPrevented()?s.map(i,function(e){return e.create()?e:null}):n).length&&this.tmpl.trigger("created-items",[n]),a.boolean(t)&&t?this.append(e):n},append:function(e){var t=[],e=this.appendable(e);return 0<e.length&&0<(t=!this.tmpl.trigger("append-items",[e]).isDefaultPrevented()?s.map(e,function(e){return e.append()?e:null}):t).length&&this.tmpl.trigger("appended-items",[t]),t},detach:function(e){var t=[],e=this.detachable(e);return 0<e.length&&0<(t=!this.tmpl.trigger("detach-items",[e]).isDefaultPrevented()?s.map(e,function(e){return e.detach()?e:null}):t).length&&this.tmpl.trigger("detached-items",[t]),t},observe:function(e){!(this.iobserver&&e.isCreated&&e.isAttached)||e.isLoading&&e.isLoaded||(this.iobserver.observe(e.el),this._observed.set(e.el,e))},unobserve:function(e){this.iobserver&&(this.iobserver.unobserve(e.el),this._observed.delete(e.el))}}),o.components.register("items",o.Items)}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.obj),function(y,b,_,w,o,x){b.Item=b.Component.extend({construct:function(e,t){var n=this;n._super(e),n.cls=e.cls.item,n.il8n=e.il8n.item,n.sel=e.sel.item,n.opt=o.extend({},e.opt.item,t),n.isAttached=!1,n.isCreated=!1,n.isDestroyed=!1,n.isLoading=!1,n.isLoaded=!1,n.isError=!1,n.isParsed=!1,n.isPicture=!1,n.$el=null,n.el=null,n.$inner=null,n.$anchor=null,n.$overlay=null,n.$wrap=null,n.$image=null,n.$caption=null,n.$loader=null,n.index=-1,n.type=n.opt.type,n.id=n.opt.id,n.productId=n.opt.productId,n.href=n.opt.href,n.placeholder=n.opt.placeholder,n.src=n.opt.src,n.srcset=n.opt.srcset,n.sources=n.opt.sources,n.width=n.opt.width,n.height=n.opt.height,n.title=n.opt.title,n.alt=n.opt.alt,n.caption=n.opt.caption,n.description=n.opt.description,n.attr=n.opt.attr,n.tags=n.opt.tags,n.maxCaptionLength=n.opt.maxCaptionLength,n.maxDescriptionLength=n.opt.maxDescriptionLength,n.showCaptionTitle=n.opt.showCaptionTitle,n.showCaptionDescription=n.opt.showCaptionDescription,n.noLightbox=n.opt.noLightbox,n.panelHide=n.opt.panelHide,n.exif=n.opt.exif,n.hasExif=w.exif(n.exif),n.ribbon=n.opt.ribbon,n.hasRibbon=w.hash(n.ribbon)&&w.string(n.ribbon.text)&&w.string(n.ribbon.type),n.buttons=n.opt.buttons,n._load=null,n._undo={classes:"",style:"",placeholder:!1}},destroy:function(){var e=this;return e.tmpl.trigger("destroy-item",[e]).isDefaultPrevented()||(e.isDestroyed=e.doDestroyItem()),e.isDestroyed&&(e.tmpl.trigger("destroyed-item",[e]),e._super()),e.isDestroyed},doDestroyItem:function(){var e=this;return e.isParsed?(e.$anchor.add(e.$caption).off("click.foogallery"),e.append(),e.tmpl.items.unobserve(e),w.empty(e._undo.classes)?e.$el.removeAttr("class"):e.$el.attr("class",e._undo.classes),w.empty(e._undo.style)?e.$el.removeAttr("style"):e.$el.attr("style",e._undo.style),e._undo.placeholder&&e.$image.prop("src")===e.placeholder&&e.$image.removeAttr("src")):e.isCreated&&(e.detach(),e.$el.remove()),!0},parse:function(e){var t=this,e=y(e);return!t.tmpl.trigger("parse-item",[t,e]).isDefaultPrevented()&&(t.isCreated=e.is(t.sel.elem))&&(t.isParsed=t.doParseItem(e)),t.isParsed&&(t.isLoaded||t.tmpl.items.observe(t),t.tmpl.trigger("parsed-item",[t])),t.isParsed},doParseItem:function(e){var n=this,t=n.cls,i=n.sel,r=e.get(0);if(n._undo.classes=e.attr("class")||"",n._undo.style=e.attr("style")||"",n.$el=e.data(b.DATA_ITEM,n),n.el=r,n.$inner=y(r.querySelector(i.inner)),n.$anchor=y(r.querySelector(i.anchor)).on("click.foogallery",{self:n},n.onAnchorClick),n.$image=y(r.querySelector(i.image)),n.$caption=y(r.querySelector(i.caption.elem)).on("click.foogallery",{self:n},n.onCaptionClick),n.$overlay=y(r.querySelector(i.overlay)),n.$wrap=y(r.querySelector(i.wrap)),n.$loader=y(r.querySelector(i.loader)),!(n.$el.length&&n.$inner.length&&n.$anchor.length&&n.$image.length))return console.error("FooGallery Error: Invalid HTML markup. Check the item markup for additional elements or malformed HTML in the title or description.",n),n.isError=!0,n.tmpl.trigger("error-item",[n]),0!==n.$el.length&&n.$el.remove(),!1;n.isAttached=null!==r.parentNode,n.isLoading=n.$el.hasClass(t.loading),n.isLoaded=n.$el.hasClass(t.loaded),n.isError=n.$el.hasClass(t.error);var e=n.$anchor.data(),i=(n.id=e.id||n.id,n.productId=e.productId||n.productId,n.tags=e.tags||n.tags,n.href=e.href||n.$anchor.attr("href")||n.href,r=n.$image.is("picture")?(n.isPicture=!0,n.sources=n.$image.find("source").map(function(e,t){return{srcset:t.getAttribute(n.tmpl.opt.srcset),type:t.getAttribute("type"),media:t.getAttribute("media"),sizes:t.getAttribute("sizes")}}).get(),n.$image.find("img")):n.$image,n.src=r.attr(n.tmpl.opt.src)||n.src,n.srcset=r.attr(n.tmpl.opt.srcset)||n.srcset,n.width=parseInt(r.attr("width"))||n.width,n.height=parseInt(r.attr("height"))||n.height,n.title=r.attr("title")||n.title,n.alt=r.attr("alt")||n.alt,n.caption=e.title||e.captionTitle||n.caption,n.description=e.description||e.captionDesc||n.description,n.noLightbox=n.$anchor.hasClass(t.noLightbox),n.panelHide=n.$anchor.hasClass(t.panelHide),w.exif(e.exif)&&(n.exif=o.extend(n.exif,e.exif),n.hasExif=!0),0<n.maxCaptionLength&&((e=x.trimTo(n.caption,n.maxCaptionLength))!==n.caption&&n.$caption.find(i.caption.title).html(e)),!n.maxDescriptionLength||(e=x.trimTo(n.description,n.maxDescriptionLength))!==n.description&&n.$caption.find(i.caption.description).html(e),r.get(0)),e=(w.string(i.src)&&0!==i.src.length||(w.string(n.placeholder)&&0!==n.placeholder.length||(n.placeholder=n.createPlaceholder(n.width,n.height)),0<n.placeholder.length&&(i.src=n.placeholder,n._undo.placeholder=!0)),n.getTypeClass());return n.$el.hasClass(e)||n.$el.addClass(e),n.hasExif&&!n.$el.hasClass(t.exif)&&n.$el.addClass(t.exif),!n.isCreated||!n.isAttached||n.isLoading||n.isLoaded||n.isError||n.$el.hasClass(t.idle)||n.$el.addClass(t.idle),n.doShortPixel(),!0},create:function(){var e=this;return!e.isCreated&&w.string(e.href)&&w.string(e.src)&&w.number(e.width)&&w.number(e.height)&&(e.tmpl.trigger("create-item",[e]).isDefaultPrevented()||(e.isCreated=e.doCreateItem()),e.isCreated&&e.tmpl.trigger("created-item",[e])),e.isCreated},_setAttributes:function(t,n){Object.keys(n).forEach(function(e){w.empty(n[e])||t.setAttribute(e,w.string(n[e])?n[e]:JSON.stringify(n[e]))})},doShortPixel:function(){var e,t=this;function n(e,t,n){return"/"===t||"/"===n?"/":t}t.tmpl.opt.shortpixel&&!b.supportsWebP&&(t.href=t.href.replace(e=/([\/,+])to_webp([\/,+])/i,n),t.src=t.src.replace(e,n),t.srcset=t.srcset.replace(e,n))},doCreateItem:function(){var i,u,r=this,e=r.cls,t=r.attr,n=r.hasExif?e.exif:"",o=(r.isLoaded=!r.tmpl.opt.lazy,r.isPicture=0<r.sources.length,r.doShortPixel(),document.createElement("div")),n=(r._setAttributes(o,t.elem),o.className=[e.elem,r.getTypeClass(),n,r.isLoaded?e.loaded:e.idle].join(" "),document.createElement("figure")),s=(r._setAttributes(n,t.inner),n.className=e.inner,[e.anchor]),a=(r.noLightbox&&s.push(e.noLightbox),r.panelHide&&s.push(e.panelHide),document.createElement("a")),s=(r._setAttributes(a,t.anchor),r._setAttributes(a,{class:s.join(" "),href:r.href,"data-id":r.id,"data-type":r.type,"data-title":r.caption,"data-description":r.description,"data-tags":r.tags,"data-exif":r.exif,"data-product-id":r.productId}),w.string(r.placeholder)&&0!==r.placeholder.length||(r.placeholder=r.createPlaceholder(r.width,r.height)),document.createElement("img")),l=(r._setAttributes(s,t.image),{class:e.image,src:r.placeholder,width:r.width+"",height:r.height+"",title:r.title,alt:r.alt}),l=(r.isLoaded?(l.src=r.src,l.srcset=r.srcset):(l[r.tmpl.opt.src]=r.src,l[r.tmpl.opt.srcset]=r.srcset),r._setAttributes(s,l),r.isPicture&&(i=document.createElement("picture"),r._setAttributes(i,t.picture),r.sources.forEach(function(e){var t=document.createElement("source"),n={media:e.media,sizes:e.sizes,type:e.type};r.isLoaded?n.srcset=e.srcset:n[r.tmpl.opt.srcset]=e.srcset,r._setAttributes(t,n),i.appendChild(t)}),i.appendChild(s)),r.hasRibbon&&((u=document.createElement("div")).className=r.ribbon.type,(l=document.createElement("span")).innerHTML=r.ribbon.text,u.appendChild(l)),document.createElement("span")),d=(l.className=e.overlay,document.createElement("span")),h=(d.className=e.wrap,document.createElement("div")),p=(h.className=e.loader,document.createElement("figcaption")),f=(r._setAttributes(p,t.caption.elem),p.className=e.caption.elem,document.createElement("div")),c=(r._setAttributes(f,t.caption.inner),f.className=e.caption.inner,null),g=r.showCaptionTitle&&w.string(r.caption)&&0<r.caption.length,c=(g&&(c=document.createElement("div"),r._setAttributes(c,t.caption.title),c.className=e.caption.title,c.innerHTML=0<r.maxCaptionLength?x.trimTo(r.caption,r.maxCaptionLength):r.caption,f.appendChild(c)),null),m=r.showCaptionDescription&&w.string(r.description)&&0<r.description.length,v=(m&&(c=document.createElement("div"),r._setAttributes(c,t.caption.description),c.className=e.caption.description,c.innerHTML=0<r.maxDescriptionLength?x.trimTo(r.description,r.maxDescriptionLength):r.description,f.appendChild(c)),null),t=w.array(r.buttons)&&0<r.buttons.length;return t&&((v=document.createElement("div")).className=e.caption.buttons,_.each(r.buttons,function(e){var t;w.hash(e)&&w.string(e.text)&&((t=document.createElement("a")).innerHTML=e.text,w.string(e.url)&&0<e.url.length&&(t.href=e.url),w.string(e.rel)&&0<e.rel.length&&(t.rel=e.rel),w.string(e.target)&&0<e.target.length&&(t.target=e.target),w.string(e.classes)&&0<e.classes.length&&(t.className=e.classes),w.hash(e.attr)&&r._setAttributes(t,e.attr),v.appendChild(t))}),f.appendChild(v)),p.appendChild(f),r.isPicture?d.appendChild(i):d.appendChild(s),a.appendChild(l),a.appendChild(d),n.appendChild(a),(g||m||t)&&n.appendChild(p),r.hasRibbon&&o.appendChild(u),o.appendChild(n),o.appendChild(h),r.$el=y(o).data(b.DATA_ITEM,r),r.el=o,r.$inner=y(n),r.$anchor=y(a).on("click.foogallery",{self:r},r.onAnchorClick),r.$overlay=y(l),r.$wrap=y(d),r.isPicture?r.$image=y(i):r.$image=y(s),r.$caption=y(p).on("click.foogallery",{self:r},r.onCaptionClick),r.$loader=y(h),!0},append:function(){var e=this;return e.isCreated&&!e.isAttached&&(e.tmpl.trigger("append-item",[e]).isDefaultPrevented()||(e.tmpl.$el.append(e.$el.removeClass(e.cls.hidden)),e.isAttached=!0),e.isAttached&&(e.isLoaded||e.tmpl.items.observe(e),e.tmpl.trigger("appended-item",[e]))),e.isAttached},detach:function(){var e=this;return e.isCreated&&e.isAttached&&(e.tmpl.items.unobserve(e),e.tmpl.trigger("detach-item",[e]).isDefaultPrevented()||(e.$el.detach().removeClass(e.cls.hidden),e.isAttached=!1),e.isAttached||e.tmpl.trigger("detached-item",[e])),!e.isAttached},load:function(){var n=this;return w.promise(n._load)?n._load:n._load=y.Deferred(function(t){return n.isLoaded?t.resolve(n):n.isCreated&&n.isAttached?n.tmpl.trigger("load-item",[n]).isDefaultPrevented()?t.reject("default prevented"):(n.isLoading=!0,n.tmpl.items.unobserve(n),n.$el.removeClass(n.cls.idle).removeClass(n.cls.hidden).removeClass(n.cls.loaded).removeClass(n.cls.error).addClass(n.cls.loading),void n.loadIMG().then(function(){n.isLoading=!1,n.isLoaded=!0,n.$el.removeClass(n.cls.loading).addClass(n.cls.loaded),n.tmpl.trigger("loaded-item",[n]),t.resolve(n)},function(e){n.isLoading=!1,n.isError=!0,n.$el.removeClass(n.cls.loading).addClass(n.cls.error),n.tmpl.trigger("error-item",[n]),t.reject(e)})):t.reject("not created or attached")}).promise()},loadIMG:function(){var o=this;return new y.Deferred(function(e){var t=(o.isPicture?o.$image.find("img"):o.$image).get(0);if(!t)return e.reject("Unable to find img element.");var n=t.src,i=t.srcset,r=(t.onload=function(){t.onload=t.onerror=null,t.style.removeProperty("width"),t.style.removeProperty("height"),e.resolve(t)},t.onerror=function(){t.onload=t.onerror=null,w.empty(n)?t.removeAttribute("src"):t.src=n,w.empty(i)?t.removeAttribute("srcset"):t.srcset=i,e.reject(t)},o.isPicture&&o.$image.find("source").each(function(e,t){var n=t.getAttribute(o.tmpl.opt.srcset);w.empty(n)||(t.srcset=n)}),t.getBoundingClientRect());t.style.width=r.width,t.style.height=r.height,t.src=o.src,w.empty(o.srcset)||(t.srcset=o.srcset),t.complete&&t.onload()}).promise()},createPlaceholder:function(e,t){return w.number(e)&&w.number(t)?"data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20width=%22"+e+"%22%20height=%22"+t+"%22%20viewBox=%220%200%20"+e+"%20"+t+"%22%3E%3C/svg%3E":""},getTypeClass:function(){return this.cls.types[this.type]||""},scrollTo:function(e){var t;return this.isAttached&&((t=this.$el.get(0)).scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded():t.scrollIntoView("top"===e)),this},updateState:function(){this.tmpl.state.update(this.tmpl.state.get(this))},toJSON:function(){return{type:this.type,id:this.id,productId:this.productId,href:this.href,src:this.src,srcset:this.srcset,width:this.width,height:this.height,alt:this.alt,title:this.title,caption:this.caption,description:this.description,tags:this.tags.slice(),maxCaptionLength:this.maxCaptionLength,maxDescriptionLength:this.maxDescriptionLength,showCaptionTitle:this.showCaptionTitle,showCaptionDescription:this.showCaptionDescription,noLightbox:this.noLightbox,panelHide:this.panelHide,attr:o.extend({},this.attr)}},onAnchorClick:function(e){var t=e.data.self;t.tmpl.trigger("anchor-click-item",[t]).isDefaultPrevented()?e.preventDefault():t.updateState()},onCaptionClick:function(e){var t=e.data.self;!t.tmpl.trigger("caption-click-item",[t]).isDefaultPrevented()&&0<t.$anchor.length&&!y(e.target).is("a[href],:input")&&t.$anchor.get(0).click()}}),b.template.configure("core",{item:{type:"item",id:"",href:"",placeholder:"",src:"",srcset:"",sources:[],width:0,height:0,title:"",alt:"",caption:"",description:"",tags:[],maxCaptionLength:0,maxDescriptionLength:0,showCaptionTitle:!0,showCaptionDescription:!0,noLightbox:!1,panelHide:!1,buttons:[],ribbon:{type:null,text:null},exif:{aperture:null,camera:null,created_timestamp:null,shutter_speed:null,focal_length:null,iso:null,orientation:null},attr:{elem:{},inner:{},anchor:{},image:{},picture:{},caption:{elem:{},inner:{},title:{},description:{}}}}},{item:{elem:"fg-item",inner:"fg-item-inner",exif:"fg-item-exif",anchor:"fg-thumb",overlay:"fg-image-overlay",wrap:"fg-image-wrap",image:"fg-image",loader:"fg-loader",idle:"fg-idle",loading:"fg-loading",loaded:"fg-loaded",error:"fg-error",hidden:"fg-hidden",noLightbox:"fg-no-lightbox",panelHide:"fg-panel-hide",types:{item:"fg-type-unknown"},caption:{elem:"fg-caption",inner:"fg-caption-inner",title:"fg-caption-title",description:"fg-caption-desc",buttons:"fg-caption-buttons",button:"fg-caption-button"}}},{item:{exif:{aperture:"Aperture",camera:"Camera",created_timestamp:"Date",shutter_speed:"Exposure",focal_length:"Focal Length",iso:"ISO",orientation:"Orientation"}}}),b.components.register("item",b.Item)}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,(FooGallery.utils.fn,FooGallery.utils.obj),FooGallery.utils.str),function(e){e.Image=e.Item.extend({}),e.template.configure("core",null,{item:{types:{image:"fg-type-image"}}}),e.components.register("image",e.Image)}((FooGallery.$,FooGallery),(FooGallery.utils,FooGallery.utils.is)),function(e){e.Video=e.Item.extend({construct:function(e,t){this._super(e,t),this.cover=this.opt.cover},doParseItem:function(e){return!!this._super(e)&&(this.cover=this.$anchor.data("cover")||this.cover,!0)},doCreateItem:function(){return!!this._super()&&(this.$anchor.attr("data-cover",this.cover),!0)},toJSON:function(){var e=this._super();return e.cover=this.cover,e}}),e.template.configure("core",{item:{cover:""}},{item:{types:{video:"fg-type-video"}}}),e.components.register("video",e.Video)}((FooGallery.$,FooGallery),(FooGallery.utils,FooGallery.utils.is)),function(e){e.Iframe=e.Item.extend({}),e.template.configure("core",null,{item:{types:{iframe:"fg-type-iframe"}}}),e.components.register("iframe",e.Iframe)}((FooGallery.$,FooGallery),(FooGallery.utils,FooGallery.utils.is)),function(e){e.Html=e.Item.extend({}),e.template.configure("core",null,{item:{types:{html:"fg-type-html"}}}),e.components.register("html",e.Html)}((FooGallery.$,FooGallery),(FooGallery.utils,FooGallery.utils.is)),function(e){e.Embed=e.Video.extend({}),e.template.configure("core",null,{item:{types:{embed:"fg-type-embed fg-type-video"}}}),e.components.register("embed",e.Embed)}((FooGallery.$,FooGallery),(FooGallery.utils,FooGallery.utils.is)),function(e,c,u){e.FilteringFactory=e.Factory.extend({construct:function(){this.registered={}},register:function(e,t,n,i,r,o,s){t=this._super(e,t,s);return t&&((s=this.registered)[e].ctrl=c.fn(n)?n:null,s[e].opt=c.hash(i)?i:{},s[e].cls=c.hash(r)?r:{},s[e].il8n=c.hash(o)?o:{}),t},type:function(e){var t;return c.hash(e)&&c.hash(t=e.filtering)&&c.string(t.type)&&this.contains(t.type)?t.type:null},merge:function(e){e=u.extend({},e);var t=this.type(e),n=this.registered,i=n.default.opt,r=n.default.cls,o=n.default.il8n,s=c.hash(e.filtering)?e.filtering:{},a=c.hash(e.cls)&&c.hash(e.cls.filtering)?u.extend({},e.cls.filtering):{},l=c.hash(e.il8n)&&c.hash(e.il8n.filtering)?u.extend({},e.il8n.filtering):{};return c.hash(e.cls)||(e.cls={}),c.hash(e.il8n)||(e.il8n={}),"default"!==t&&this.contains(t)?(e.filtering=u.extend({},i,n[t].opt,s,{type:t}),e.cls=u.extend(e.cls,{filtering:r},{filtering:n[t].cls},{filtering:a}),e.il8n=u.extend(e.il8n,{filtering:o},{filtering:n[t].il8n},{filtering:l})):(e.filtering=u.extend({},i,s,{type:t}),e.cls=u.extend(e.cls,{filtering:r},{filtering:a}),e.il8n=u.extend(e.il8n,{filtering:o},{filtering:l})),e},configure:function(e,t,n,i){var r;this.contains(e)&&(r=this.registered,u.extend(r[e].opt,t),u.extend(r[e].cls,n),u.extend(r[e].il8n,i))},hasCtrl:function(e){e=this.registered[e];return c.hash(e)&&c.fn(e.ctrl)},makeCtrl:function(e,t,n,i){e=this.registered[e];return c.hash(e)&&c.fn(e.ctrl)?new e.ctrl(t,n,i):null}}),e.filtering=new e.FilteringFactory}(FooGallery,FooGallery.utils.is,(FooGallery.utils.fn,FooGallery.utils.obj)),function(u,o,y,h,d){o.Filtering=o.Component.extend({construct:function(e){var t=this;t._super(e),t.opt=t.tmpl.opt.filtering,t.cls=t.tmpl.cls.filtering,t.il8n=t.tmpl.il8n.filtering,t.sel=t.tmpl.sel.filtering,t.pushOrReplace=t.opt.pushOrReplace,t.type=t.opt.type,t.theme=t.opt.theme,t.position=t.opt.position,t.mode=t.opt.mode,t.sortBy=t.opt.sortBy,t.sortInvert=t.opt.sortInvert,t.min=t.opt.min,t.limit=t.opt.limit,t.showCount=t.opt.showCount,t.noAll=t.opt.noAll,t.autoSelected=t.opt.autoSelected,t.adjustSize=t.opt.adjustSize,t.smallest=t.opt.smallest,t.largest=t.opt.largest,t.adjustOpacity=t.opt.adjustOpacity,t.lightest=t.opt.lightest,t.darkest=t.opt.darkest,t.current=[],t.ctrls=[],t.tags=[],t.search="",t.isMultiLevel=!1},fromHash:function(e){var t=this.tmpl.state.opt;return e.split(t.arraySeparator).map(function(e){return h.empty(e)?[]:e.split(t.array).map(function(e){return decodeURIComponent(e)})})},toHash:function(e){var t=this.tmpl.state.opt,n=null;return h.array(e)&&(n=u.map(e,function(e){return(h.array(e)?u.map(e,function(e){return h.undef(e)?"":encodeURIComponent(e)}):[]).join(t.array)}).join(t.arraySeparator)),h.empty(n)?null:n},getState:function(){return h.array(this.current)&&!this.current.every(function(e){return 0===e.length})?this.current.slice():null},setState:function(e){var t=this,n=(t.rebuild(),e.filter);if(t.autoSelected&&(!h.array(e.filter)||0===e.filter.length)&&0<t.tags.length)for(var n=[],i=0;i<t.tags.length;i++)h.array(t.tags[i])&&(0===i?n.push([t.tags[i][0].value]):n.push([]));t.set(n,"",!1)},destroy:function(){var e=this;e.tags.splice(0,e.tags.length),u.each(e.ctrls.splice(0,e.ctrls.length),function(e,t){t.destroy()}),e._super()},count:function(e,t){e=h.array(e)?e:[];for(var n,i={__ALL__:0},r=0===(t=h.array(t)?t:[]).length,o=0,s=e.length;o<s;o++)if(!h.empty(n=e[o].tags)){i.__ALL__++;for(var a,l=0,u=n.length;l<u;l++)h.empty(a=n[l])||!r&&-1===y.inArray(a,t)||(h.number(i[a])?i[a]++:i[a]=1)}for(var c=0,d=t.length;c<d;c++)i.hasOwnProperty(t[c])||(i[t[c]]=0);return i},createTagObjects:function(u,e,d,h){var t,n,i,r=this,o=[],s=r.count(u,e),a=1/0,l=0,p=-1;if(0===s.__ALL__)return o;for(t in s)s.hasOwnProperty(t)&&(n=s[t],i="__ALL__"===t,r.noAll&&i||(r.min<=0||n>=r.min)&&(0<e.length?p=y.inArray(t,e):p++,o.push({level:d,index:p,value:i?"":t,text:i?h:t,count:n,percent:1,size:r.largest,opacity:r.darkest}),n<a&&(a=n),l<n&&(l=n)));if(0<r.limit&&o.length>r.limit&&(o.sort(function(e,t){return t.count-e.count}),o=o.slice(0,r.limit)),!r.isMultiLevel&&(!0===r.adjustSize||!0===r.adjustOpacity))for(var c,f=r.largest-r.smallest,g=r.darkest-r.lightest,m=0,v=o.length;m<v;m++)(c=o[m]).percent=(c.count-a)/(l-a),c.size=r.adjustSize?Math.round(f*c.percent+r.smallest):r.largest,c.opacity=r.adjustOpacity?g*c.percent+r.lightest:r.darkest;return"none"===r.sortBy?r.sort(o,"index",!1):r.sort(o,r.sortBy,r.sortInvert),o},showControl:function(){return this.opt.search||!this.tags.every(function(e){return 0===e.length})},build:function(e){var n,t,i=this,r=e?i.tmpl.items.available():i.tmpl.items.all();i.isMultiLevel=0<i.opt.tags.length&&h.object(i.opt.tags[0]),0<r.length&&(i.isMultiLevel?u.each(i.opt.tags,function(e,t){n=i.createTagObjects(r,t.tags,e,t.all||i.il8n.all),h.empty(n)||i.tags.push(n)}):(n=i.createTagObjects(r,i.opt.tags,0,i.il8n.all),h.empty(n)||i.tags.push(n))),i.showControl()&&o.filtering.hasCtrl(i.type)&&("both"!==(e=i.position)&&"top"!==e||(t=o.filtering.makeCtrl(i.type,i.tmpl,i,"top")).create()&&(t.append(),i.ctrls.push(t)),"both"!==e&&"bottom"!==e||(t=o.filtering.makeCtrl(i.type,i.tmpl,i,"bottom")).create()&&(t.append(),i.ctrls.push(t)))},rebuild:function(e){var t=this;t.tags.splice(0,t.tags.length),u.each(t.ctrls.splice(0,t.ctrls.length),function(e,t){t.destroy()}),t.build(e)},controls:function(n,i){u.each(this.ctrls,function(e,t){t.update(n,i)})},hasAll:function(t,e){return e.every(function(e){return 0===e.length||h.array(t.tags)&&e.every(function(e){return-1!==t.tags.indexOf(e)})})},hasSome:function(t,e){return e.every(function(e){return 0===e.length||h.array(t.tags)&&e.some(function(e){return-1!==t.tags.indexOf(e)})})},isMatch:function(e,t){return h.string(e.title)&&t.test(e.title)||h.string(e.alt)&&t.test(e.alt)||h.string(e.caption)&&t.test(e.caption)||h.string(e.description)&&t.test(e.description)||h.array(e.tags)&&e.tags.some(function(e){return t.test(e)})},set:function(r,o,s){h.string(r)&&(r=[[r]]),h.array(r)||(r=[]);var a,l,e,c=this;return(!c.arraysEqual(c.current,r)||c.search!==o)&&(l=c.current.slice(),!c.tmpl.trigger("before-filter-change",[c.current,r,e=function(){(s=!h.boolean(s)||s)&&!c.tmpl.state.exists()&&(a=c.tmpl.state.get(),c.tmpl.state.update(a,c.pushOrReplace));var t,e,n=c.search!==o,i=h.empty(o);h.empty(r)&&i?c.tmpl.items.reset():(e=c.tmpl.items.all(),i||(t=new RegExp(d.escapeRegExp(o),"i"),e=u.map(e,function(e){return c.isMatch(e,t)?e:null})),e="intersect"===c.mode?u.map(e,function(e){return c.hasAll(e,r)?e:null}):u.map(e,function(e){return c.hasSome(e,r)?e:null}),c.tmpl.items.setAvailable(e)),c.current=r.slice(),c.search=o,n?c.rebuild(!i):c.controls(c.current,c.search),c.tmpl.pages?(c.tmpl.pages.rebuild(),c.tmpl.pages.set(1,null,null,!0)):(c.tmpl.items.detach(c.tmpl.items.all()),c.tmpl.items.create(c.tmpl.getAvailable(),!0)),s&&(a=c.tmpl.state.get(),c.tmpl.state.update(a,c.pushOrReplace)),c.tmpl.trigger("after-filter-change",[c.current,l])}]).isDefaultPrevented()&&(e(),!0))},arraysEqual:function(e,t){if(e.length!==t.length)return!1;e=e.slice(),t=t.slice(),e.sort(),t.sort();for(var n=e.length;n--;)if(e[n]!==t[n])return!1;return!0},sort:function(e,n,i){e.sort(function(e,t){if(e.hasOwnProperty(n)&&t.hasOwnProperty(n)){if(!h.string(e[n])||!h.string(t[n]))return i?t[n]-e[n]:e[n]-t[n];e=e[n].toUpperCase(),t=t[n].toUpperCase();if(i){if(t<e)return-1;if(e<t)return 1}else{if(e<t)return-1;if(t<e)return 1}}return 0})},apply:function(e,t){this.set(e,t,!this.tmpl.pages)}}),o.FilteringControl=o.Component.extend({construct:function(e,t,n){this._super(e),this.filter=t,this.position=n,this.$container=null},create:function(){var n=this;return n.$container=u("#"+n.tmpl.id+"_filtering-"+n.position),0<n.$container.length?(n._containerExisted=!0,n.$container.removeClass(function(e,t){return n._placeholderClasses=t.match(/(^|\s)fg-ph-\S+/g)||[],n._placeholderClasses.join(" ")}).addClass([n.filter.cls.container,n.filter.theme].join(" "))):n.$container=u("<nav/>",{class:[n.filter.cls.container,n.filter.theme].join(" ")}),!0},destroy:function(){var e=this;e._containerExisted?e.$container.empty().removeClass().addClass(e._placeholderClasses.join(" ")):e.$container.remove(),e.$container=null},append:function(){var e=this;e._containerExisted||("top"===e.position?e.$container.insertBefore(e.tmpl.$el):e.$container.insertAfter(e.tmpl.$el))},update:function(e){}}),o.filtering.register("default",o.Filtering,null,{type:"none",theme:"fg-light",pushOrReplace:"push",position:"none",mode:"single",sortBy:"value",sortInvert:!1,search:!1,noAll:!1,autoSelected:!1,tags:[],min:0,limit:0,showCount:!1,adjustSize:!1,adjustOpacity:!1,smallest:12,largest:16,lightest:.5,darkest:1},{container:"fg-filtering-container"},null,-100)}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.str),function(s,r,a,l){r.Tags=r.Filtering.extend({}),r.TagsControl=r.FilteringControl.extend({construct:function(e,t,n){this._super(e,t,n),this.$container=null,this.searchEnabled="top"===this.position&&this.filter.opt.search,this.search={$wrap:null,$inner:null,$input:null,$clear:null,$submit:null},this.lists=[]},create:function(){var e=this;if(e._super()){var t=e.filter.cls;if(e.searchEnabled&&(e.$container.append(e.createSearch(e.filter.search)),l.empty(e.filter.opt.searchPosition)||e.$container.addClass("fg-search-"+e.filter.opt.searchPosition)),0<e.filter.tags.length){for(var n=0,i=e.filter.tags.length;n<i;n++)e.lists.push(e.createList(e.filter.tags[n]).appendTo(e.$container));e.filter.isMultiLevel||!0!==e.filter.showCount||e.$container.addClass(t.showCount)}else e.$container.addClass(t.noTags);return!0}return!1},createSearch:function(e){var t=this,n=t.filter.cls.search,i=t.filter.il8n;return t.search.$wrap=s("<div/>",{class:n.wrap}),t.search.$inner=s("<div/>",{class:n.inner}).appendTo(t.search.$wrap),t.search.$input=s("<input/>",{type:"text",class:n.input,placeholder:i.searchPlaceholder}).on("input.foogallery",{self:t},t.onSearchInput).on("keydown.foogallery",{self:t},t.onSearchKeydown).appendTo(t.search.$inner),t.search.$clear=s("<button/>",{type:"button",class:n.clear}).append(s("<span/>",{class:n.reader,text:i.searchClear})).append(r.icons.get("close")).on("click.foogallery",{self:t},t.onSearchClear).appendTo(t.search.$inner),t.search.$submit=s("<button/>",{type:"button",class:n.submit}).append(s("<span/>",{class:n.reader,text:i.searchSubmit})).append(r.icons.get("search")).on("click.foogallery",{self:t},t.onSearchSubmit).appendTo(t.search.$inner),l.empty(e)||(t.search.$wrap.addClass(n.hasValue),t.search.$input.val(e).attr("placeholder",e)),t.search.$wrap},createList:function(e){for(var t=this.filter.cls,n=s("<ul/>",{class:t.list}),i=0,r=e.length;i<r;i++){var o=this.createItem(e[i]);n.append(o.toggleClass(t.selected,0===i&&(this.filter.autoSelected||l.empty(e[i].value))))}return n},destroy:function(){var n=this,i=n.filter.sel;n.lists.forEach(function(e,t){e.find(i.link).off("click.foogallery",n.onLinkClick)}),n.lists=[],n._super()},update:function(r,e){var t=this,o=t.filter.cls,n=t.filter.sel;t.searchEnabled&&(t.search.$wrap.toggleClass(o.search.hasValue,!l.empty(e)),t.search.$input.val(e)),t.lists.forEach(function(e,i){e.find(n.item).removeClass(o.selected).each(function(){var e=s(this),t=e.data("tag")+"",n=l.empty(t),n=n&&l.empty(r[i])||!n&&-1!==a.inArray(t,r[i]);e.toggleClass(o.selected,n)})})},createItem:function(e){var t=this,n=t.filter.cls,i=s("<li/>",{class:n.item}).attr("data-tag",e.value),r=s("<span/>").addClass(n.text).html(l.string(e.text)?e.text:e.value),r=s("<a/>",{href:"#tag-"+e.value,class:n.link}).on("click.foogallery",{self:t,tag:e},t.onLinkClick).css("font-size",e.size).css("opacity",e.opacity).append(r).appendTo(i);return t.filter.isMultiLevel||!0!==t.filter.showCount||r.append(s("<span/>",{text:e.count,class:n.count})),i},onLinkClick:function(e){e.preventDefault();var t,n=e.data.self,i=e.data.tag,r=n.filter.current.map(function(e){return l.array(e)?e.slice():e});if(l.empty(i.value))r[i.level]=[];else switch(n.filter.mode){case"union":case"intersect":l.array(r[i.level])||(r[i.level]=[]),-1===(t=a.inArray(i.value,r[i.level]))?r[i.level].push(i.value):r[i.level].splice(t,1);break;default:r[i.level]=[i.value]}r.every(l.empty)&&(r=[]),n.filter.apply(r,n.filter.search)},onSearchInput:function(e){var e=e.data.self,t=e.filter.cls.search,n=!l.empty(e.search.$input.val())||e.search.$input.attr("placeholder")!==e.filter.il8n.searchPlaceholder;e.search.$wrap.toggleClass(t.hasValue,n)},onSearchKeydown:function(e){13===e.which&&(e=e.data.self).filter.apply([],e.search.$input.val())},onSearchClear:function(e){e.preventDefault();e=e.data.self;e.search.$wrap.removeClass(e.filter.cls.search.hasValue),e.search.$input.val(""),e.search.$input.attr("placeholder")!==e.filter.il8n.searchPlaceholder&&e.filter.apply([],"")},onSearchSubmit:function(e){e.preventDefault();e=e.data.self;e.filter.apply([],e.search.$input.val())}}),r.filtering.register("tags",r.Tags,r.TagsControl,{type:"tags",position:"top",pushOrReplace:"push",searchPosition:"above-center"},{showCount:"fg-show-count",noTags:"fg-no-tags",list:"fg-tag-list",item:"fg-tag-item",link:"fg-tag-link",text:"fg-tag-text",count:"fg-tag-count",selected:"fg-selected",search:{wrap:"fg-search-wrap",inner:"fg-search-inner",input:"fg-search-input",clear:"fg-search-clear",submit:"fg-search-submit",hasValue:"fg-search-has-value",reader:"fg-sr-only"}},{all:"All",none:"No items found.",searchPlaceholder:"Search gallery...",searchSubmit:"Submit search",searchClear:"Clear search"},-100)}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(e,c,u){e.PagingFactory=e.Factory.extend({construct:function(){this.registered={}},register:function(e,t,n,i,r,o,s){t=this._super(e,t,s);return t&&((s=this.registered)[e].ctrl=c.fn(n)?n:null,s[e].opt=c.hash(i)?i:{},s[e].cls=c.hash(r)?r:{},s[e].il8n=c.hash(o)?o:{}),t},type:function(e){var t;return c.hash(e)&&c.hash(t=e.paging)&&c.string(t.type)&&this.contains(t.type)?t.type:null},merge:function(e){e=u.extend({},e);var t=this.type(e),n=this.registered,i=n.default.opt,r=n.default.cls,o=n.default.il8n,s=c.hash(e.paging)?e.paging:{},a=c.hash(e.cls)&&c.hash(e.cls.paging)?u.extend({},e.cls.paging):{},l=c.hash(e.il8n)&&c.hash(e.il8n.paging)?u.extend({},e.il8n.paging):{};return c.hash(e.cls)||(e.cls={}),c.hash(e.il8n)||(e.il8n={}),"default"!==t&&this.contains(t)?(e.paging=u.extend({},i,n[t].opt,s,{type:t}),e.cls=u.extend(e.cls,{paging:r},{paging:n[t].cls},{paging:a}),e.il8n=u.extend(e.il8n,{paging:o},{paging:n[t].il8n},{paging:l})):(e.paging=u.extend({},i,s,{type:t}),e.cls=u.extend(e.cls,{paging:r},{paging:a}),e.il8n=u.extend(e.il8n,{paging:o},{paging:l})),e},configure:function(e,t,n,i){var r;this.contains(e)&&(r=this.registered,u.extend(r[e].opt,t),u.extend(r[e].cls,n),u.extend(r[e].il8n,i))},hasCtrl:function(e){e=this.registered[e];return c.hash(e)&&c.fn(e.ctrl)},makeCtrl:function(e,t,n,i){e=this.registered[e];return c.hash(e)&&c.fn(e.ctrl)?new e.ctrl(t,n,i):null}}),e.paging=new e.PagingFactory}(FooGallery,FooGallery.utils.is,(FooGallery.utils.fn,FooGallery.utils.obj)),function(t,o,i,l){o.Paging=o.Component.extend({construct:function(e){var t=this;t._super(e),t.opt=t.tmpl.opt.paging,t.cls=t.tmpl.cls.paging,t.il8n=t.tmpl.il8n.paging,t.sel=t.tmpl.sel.paging,t.pushOrReplace=t.opt.pushOrReplace,t.type=t.opt.type,t.theme=t.opt.theme,t.size=t.opt.size,t.position=t.opt.position,t.scrollToTop=t.opt.scrollToTop,t.current=0,t.total=0,t.ctrls=[],t._pages=[]},init:function(){},fromHash:function(e){e=parseInt(e);return isNaN(e)?null:e},toHash:function(e){return l.number(e)&&0<e?e.toString():null},getState:function(){return this.isValid(this.current)?this.current:null},setState:function(e){this.rebuild();var t=!1;e.item&&!this.contains(e.page,e.item)&&(e.page=this.find(e.item),e.page=0!==e.page?e.page:1,t=!0),this.set(e.page,t,!1,!1)},destroy:function(){var e=this;e._pages.splice(0,e._pages.length),t.each(e.ctrls.splice(0,e.ctrls.length),function(e,t){t.destroy()}),e._super()},build:function(){var e=this,t=e.tmpl.items.available();e.total=0<e.size&&0<t.length?Math.ceil(t.length/e.size):1;for(var n,i,r=0;r<e.total;r++)e._pages.push(t.splice(0,e.size));1<e.total&&o.paging.hasCtrl(e.type)&&("both"!==(n=e.position)&&"top"!==n||(i=o.paging.makeCtrl(e.type,e.tmpl,e,"top")).create()&&(i.append(),e.ctrls.push(i)),"both"!==n&&"bottom"!==n||(i=o.paging.makeCtrl(e.type,e.tmpl,e,"bottom")).create()&&(i.append(),e.ctrls.push(i)))},rebuild:function(){var e=this;e.current=0,e.total=0,e._pages.splice(0,e._pages.length),t.each(e.ctrls.splice(0,e.ctrls.length),function(e,t){t.destroy()}),e.build()},all:function(){return this._pages.slice()},available:function(){return this.get(this.current)},controls:function(n){this.isValid(n)&&t.each(this.ctrls,function(e,t){t.update(n)})},isValid:function(e){return l.number(e)&&0<e&&e<=this.total},number:function(e){return this.isValid(e)?e:0===this.current?1:this.current},create:function(e,t){var n=this,i=(e=n.number(e))-1,r=n._pages[i],t=t?n.tmpl.items.all():n._pages.reduce(function(e,t,n){return n===i?e:e.concat(t)},n.tmpl.items.unavailable());n.current=e,n.tmpl.items.detach(t),n.tmpl.items.create(r,!0)},get:function(e){return this.isValid(e)?(e=this.number(e),this._pages[e-1]):[]},set:function(e,t,n,i){var r=this;if(r.isValid(e)){r.controls(e);var o,s,a=r.number(e);if(a!==r.current)return s=r.current,!r.tmpl.trigger("before-page-change",[r.current,a,e=function(){var e;n=!l.boolean(n)||n,i=!!l.boolean(i)&&i,n&&1===r.current&&!r.tmpl.state.exists()&&(o=r.tmpl.state.get(),r.tmpl.state.update(o,r.pushOrReplace)),r.create(a,i),n&&(o=r.tmpl.state.get(),r.tmpl.state.update(o,r.pushOrReplace)),r.tmpl.trigger("page-change",[r.current,s,i]),r.scrollToTop&&l.boolean(t)&&t&&(0<(e=r.get(r.current)).length&&e[0].scrollTo("top")),r.tmpl.trigger("after-page-change",[r.current,s,i])},i]).isDefaultPrevented()&&(e(),!0)}return!1},find:function(e){for(var t=0,n=this._pages.length;t<n;t++)if(-1!==i.inArray(e,this._pages[t]))return t+1;return 0},contains:function(e,t){e=this.get(e);return-1!==i.inArray(t,e)},first:function(){this.goto(1)},last:function(){this.goto(this._pages.length)},prev:function(){this.goto(this.current-1)},next:function(){this.goto(this.current+1)},goto:function(e){this.set(e,!0)}}),o.PagingControl=o.Component.extend({construct:function(e,t,n){var i=this;i._super(e),i.pages=t,i.position=n,i.$container=null,i._containerExisted=!1,i._placeholderClasses=[]},create:function(){var n=this;return n.$container=t("#"+n.tmpl.id+"_paging-"+n.position),0<n.$container.length?(n._containerExisted=!0,n.$container.removeClass(function(e,t){return n._placeholderClasses=t.match(/(^|\s)fg-ph-\S+/g)||[],n._placeholderClasses.join(" ")}).addClass([n.pages.cls.container,n.pages.theme].join(" "))):n.$container=t("<nav/>",{class:[n.pages.cls.container,n.pages.theme].join(" ")}),!0},destroy:function(){var e=this;e._containerExisted?e.$container.empty().removeClass().addClass(e._placeholderClasses.join(" ")):e.$container.remove(),e.$container=null},append:function(){var e=this;e._containerExisted||("top"===e.position?e.$container.insertBefore(e.tmpl.$el):e.$container.insertAfter(e.tmpl.$el))},update:function(e){}}),o.paging.register("default",o.Paging,null,{type:"none",theme:"fg-light",size:30,pushOrReplace:"push",position:"none",scrollToTop:!0},{container:"fg-paging-container"},null,-100)}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(e,o,r,t){e.Infinite=e.Paging.extend({construct:function(e){this._super(e),this.distance=this.opt.distance,this._created=[]},init:function(){var e=this;e.checkBounds(),e.tmpl.$scrollParent.on("scroll"+e.tmpl.namespace,{self:e},t.throttle(function(){e.tmpl.destroying||e.tmpl.destroyed||e.checkBounds()},50))},destroy:function(){this.tmpl.$scrollParent.off(this.tmpl.namespace)},checkBounds:function(){var e,t=this,n=t.get(t.current);!t.tmpl.initializing&&!r.empty(n)&&t._created.length<t.total&&null!==(e=t.tmpl.el.getBoundingClientRect())&&e.bottom-window.innerHeight<t.distance&&(t.set(t.current+1,!1,!0,!1),t.checkBounds())},build:function(){this._super(),this._created=[]},available:function(){for(var e,t=[],n=0,i=this._created.length;n<i;n++)e=this.get(n+1),r.empty(e)||t.push.apply(t,e);return t},create:function(i,e){for(var t=this,n=(i=t.number(i),[]),e=e?t.tmpl.items.all():t._pages.reduce(function(e,t,n){return n<i?e:e.concat(t)},t.tmpl.items.unavailable()),r=0;r<i;r++)-1===o.inArray(r,t._created)&&(n.push.apply(n,t._pages[r]),t._created.push(r));t.current=i,t.tmpl.items.detach(e),t.tmpl.items.create(n,!0)}}),e.paging.register("infinite",e.Infinite,null,{type:"infinite",pushOrReplace:"replace",distance:200})}((FooGallery.$,FooGallery),FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn),function(n,e,o,r){e.LoadMore=e.Paging.extend({construct:function(e){this._super(e),this._created=[]},build:function(){this._super(),this._created=[]},create:function(i,e){for(var t=this,n=(i=t.number(i),[]),e=e?t.tmpl.items.all():t._pages.reduce(function(e,t,n){return n<i?e:e.concat(t)},t.tmpl.items.unavailable()),r=0;r<i;r++)-1===o.inArray(r,t._created)&&(n.push.apply(n,t._pages[r]),t._created.push(r));t.current=i,t.tmpl.items.detach(e),t.tmpl.items.create(n,!0)},available:function(){for(var e,t=[],n=0,i=this._created.length;n<i;n++)e=this.get(n+1),r.empty(e)||t.push.apply(t,e);return t},loadMore:function(){var e=this,t=e.get(e.current);!r.empty(t)&&e._created.length<e.total&&e.set(e.current+1,!1,!0,!1),e._created.length>=e.total&&(r.empty(e.ctrls)||n.each(e.ctrls.splice(0,e.ctrls.length),function(e,t){t.destroy()}))}}),e.LoadMoreControl=e.PagingControl.extend({construct:function(e,t,n){this._super(e,t,n),this.$button=null},create:function(){var e=this;return!!e._super()&&(e.$button=n("<button/>",{class:e.pages.cls.button,type:"button"}).html(e.pages.il8n.button).on("click.foogallery",{self:e},e.onButtonClick).appendTo(e.$container),!0)},destroy:function(){this.$button.off("click.foogallery",this.onButtonClick),this.$button=null,this._super()},onButtonClick:function(e){e.preventDefault(),e.data.self.pages.loadMore()}}),e.paging.register("loadMore",e.LoadMore,e.LoadMoreControl,{type:"loadMore",position:"bottom",pushOrReplace:"replace"},{button:"fg-load-more"},{button:"Load More"})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(l,e,a){e.Dots=e.Paging.extend({}),e.DotsControl=e.PagingControl.extend({construct:function(e,t,n){this._super(e,t,n),this.$list=null,this.$items=null},create:function(){var e=this;if(e._super()){for(var t,n=e.pages.cls,i=e.pages.il8n,r=[],o=l("<ul/>",{class:n.list}),s=0,a=e.pages.total;s<a;s++)r.push(t=e.createItem(s+1,i.page)),o.append(t);return e.$list=o,e.$items=l(l.map(r,function(e){return e.get()})),e.$container.append(o),!0}return!1},destroy:function(){var e=this,t=e.pages.sel;e.$list.find(t.link).off("click.foogallery",e.onLinkClick),e.$list=l(),e.$items=l(),e._super()},update:function(e){this.setSelected(e-1)},setSelected:function(e){var t=this,n=t.pages.cls,r=t.pages.il8n,o=t.pages.sel;t.$items.filter(o.selected).removeClass(n.selected).each(function(e,t){var t=l(t),n=t.data("label"),t=t.find(o.reader);a.string(n)&&0!==t.length&&t.html(n)}),t.$items.eq(e).addClass(n.selected).each(function(e,t){var t=l(t),n=t.find(o.reader),i=n.html();a.string(i)&&0!==n.length&&(t.data("label",i),n.html(r.current))})},createItem:function(e,t,n,i,r){n=a.string(n)?n:e,t=a.string(t)?t:"";var o=this.pages.opt,s=this.pages.cls,n=l("<a/>",{class:s.link,href:"#page-"+e}).html(n).on("click.foogallery",{self:this,page:e},this.onLinkClick),e=(a.empty(t)||n.attr("title",t.replace(/\{PAGE}/g,e).replace(/\{LIMIT}/g,o.limit+"")),r=a.string(r)?r:t,a.empty(r)||n.prepend(l("<span/>",{class:s.reader,text:r.replace(/\{PAGE}/g,"").replace(/\{LIMIT}/g,o.limit+"")})),l("<li/>",{class:s.item}).append(n));return i=a.string(i)?i:"",a.empty(i)||e.addClass(i),e},onLinkClick:function(e){e.preventDefault();var t=e.data.self,e=e.data.page,n=t.pages.sel;l(this).closest(n.item).is(n.disabled)||t.pages.set(e,!0)}}),e.paging.register("dots",e.Dots,e.DotsControl,{type:"dots",position:"both",pushOrReplace:"push"},{list:"fg-dots",item:"fg-dot-item",link:"fg-dot-link",disabled:"fg-disabled",selected:"fg-selected",visible:"fg-visible",reader:"fg-sr-only"},{current:"Current page",page:"Page {PAGE}"})}(FooGallery.$,FooGallery,(FooGallery.utils,FooGallery.utils.is)),function(r,e,t,s){e.Pagination=e.Dots.extend({construct:function(e){this._super(e),this.limit=this.opt.limit,this.showFirstLast=this.opt.showFirstLast,this.showPrevNext=this.opt.showPrevNext,this.showPrevNextMore=0!==this.opt.limit&&this.opt.showPrevNextMore,this.pageKeywords=["first","prev","prevMore","nextMore","next","last"],this.sel.firstPrev=[this.sel.first,this.sel.prev].join(","),this.sel.nextLast=[this.sel.next,this.sel.last].join(","),this.range={index:-1,start:-1,end:-1,changed:!1,selected:!1}},build:function(){this._super(),this.range={index:-1,start:-1,end:-1,changed:!1,selected:!1}},controls:function(e){var n=this;n.isValid(e)&&(n.range=n.getControlRange(e),r.each(n.ctrls,function(e,t){t.update(n.range)}))},isValid:function(e){return this._super(e)||this.isKeyword(e)},isKeyword:function(e){return s.string(e)&&-1!==t.inArray(e,this.pageKeywords)},number:function(e){var t=this;return"prevMore"!==(e="last"===(e="next"===(e="prev"===(e="first"===e?1:e)?t.current-1:e)?t.current+1:e)?t.total:e)&&"nextMore"!==e||(e=t.current),t._super(e)},getControlRange:function(e){var t=this;switch(e){case"prevMore":return t._range(t.range.start-1,!1,!1);case"nextMore":return t._range(t.range.end+1,!0,!1);default:return e=t.number(e),t._range(e-1,e<=t.current)}},_range:function(e,t,n){var i=this,r={index:e,start:i.range.start,end:i.range.end,changed:!1,selected:!s.boolean(n)||n};if(i.total<=i.limit||0===i.limit)r.start=0,r.end=i.total-1;else if(e<r.start||e>r.end){var n=e+(i.limit-1),o=e-(i.limit-1);if(t)for(r.start=e,r.end=n;r.end>i.total;)--r.start,--r.end;else for(r.start=o,r.end=e;r.start<0;)r.start+=1,r.end+=1}return r.changed=r.start!==i.range.start||r.end!==i.range.end,r.changed&&(i.range=r),r}}),e.PaginationControl=e.DotsControl.extend({construct:function(e,t,n){this._super(e,t,n),this.$buttons=r()},create:function(){var e,t,n,i=this;return!!i._super()&&(t=[],!(e=i.pages.total<=i.pages.limit||0===i.pages.limit)&&i.pages.showPrevNextMore&&(t.push(n=i.createButton("prevMore")),i.$list.prepend(n)),i.pages.showPrevNext&&(t.push(n=i.createButton("prev")),i.$list.prepend(n)),i.pages.showFirstLast&&(t.push(n=i.createButton("first")),i.$list.prepend(n)),!e&&i.pages.showPrevNextMore&&(t.push(n=i.createButton("nextMore")),i.$list.append(n)),i.pages.showPrevNext&&(t.push(n=i.createButton("next")),i.$list.append(n)),i.pages.showFirstLast&&(t.push(n=i.createButton("last")),i.$list.append(n)),i.$buttons=r(r.map(t,function(e){return e.get()})),!0)},destroy:function(){this.$buttons=null,this._super()},update:function(e){var t=this,n=t.pages.sel;e.changed&&t.setVisible(e.start,e.end),e.selected&&(t.setSelected(e.index),t.toggleDisabled(t.$buttons.filter(n.firstPrev),e.index<=0),t.toggleDisabled(t.$buttons.filter(n.nextLast),e.index>=t.pages.total-1)),t.toggleDisabled(t.$buttons.filter(n.prevMore),e.start<=0),t.toggleDisabled(t.$buttons.filter(n.nextMore),e.end>=t.pages.total-1)},setVisible:function(e,t){var n=this.pages.cls;this.$items.removeClass(n.visible).slice(e,t+1).addClass(n.visible)},toggleDisabled:function(e,t){var n=this.pages.cls,i=this.pages.sel;t?e.addClass(n.disabled).find(i.link).attr("tabindex",-1):e.removeClass(n.disabled).find(i.link).removeAttr("tabindex")},createButton:function(e){var t=this.pages.cls,n=this.pages.il8n;return this.createItem(e,n.labels[e],n.buttons[e],t.button+" "+t[e])}}),e.paging.register("pagination",e.Pagination,e.PaginationControl,{type:"pagination",position:"both",pushOrReplace:"push",limit:5,showPrevNext:!0,showFirstLast:!0,showPrevNextMore:!0},{list:"fg-pages",item:"fg-page-item",button:"fg-page-button",link:"fg-page-link",first:"fg-page-first",prev:"fg-page-prev",prevMore:"fg-page-prev-more",nextMore:"fg-page-next-more",next:"fg-page-next",last:"fg-page-last",disabled:"fg-disabled",selected:"fg-selected",visible:"fg-visible",reader:"fg-sr-only"},{buttons:{first:"&laquo;",prev:"&lsaquo;",next:"&rsaquo;",last:"&raquo;",prevMore:"&hellip;",nextMore:"&hellip;"},labels:{current:"Current page",page:"Page {PAGE}",first:"First page",prev:"Previous page",next:"Next page",last:"Last page",prevMore:"Show previous {LIMIT} pages",nextMore:"Show next {LIMIT} pages"}})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(o,s,a,l,c,u){var d=0;s.Panel=s.Component.extend({construct:function(e,t,n,i){var r=this,o=(r.instanceId=++d,r._super(e),r.opt=c.extend({},r.tmpl.opt.panel,t),r.cls=c.extend({},r.tmpl.cls.panel,n),r.il8n=c.extend({},r.tmpl.il8n.panel,i),r.cls.states);r.cls.states.all=Object.keys(o).map(function(e){return o[e]}).join(" "),r.cls.states.allLoading=[o.idle,o.loading,o.loaded,o.error].join(" "),r.cls.states.allProgress=[o.idle,o.started,o.stopped,o.paused].join(" "),r.sel=a.selectify(r.cls),r.videoSources=l.undef(s.Panel.Video)?[]:s.Panel.Video.sources.load(),r.buttons=new s.Panel.Buttons(r),r.content=new s.Panel.Content(r),r.info=new s.Panel.Info(r),r.thumbs=new s.Panel.Thumbs(r),r.cart=new s.Panel.Cart(r),r.areas=[r.content,r.info,r.thumbs,r.cart],r.$el=null,r.el=null,r.isCreated=!1,r.isDestroyed=!1,r.isDestroying=!1,r.isAttached=!1,r.isLoading=!1,r.isLoaded=!1,r.isError=!1,r.isInline=!1,r.isMaximized=!1,r.isFullscreen=!1,r.hasTransition=!l.empty(r.cls.transition[r.opt.transition]),r.currentItem=null,r.prevItem=null,r.nextItem=null,r.lastBreakpoint=null,r.breakpointClassNames=r.opt.breakpoints.map(function(e){return"fg-"+e.name+" fg-"+e.name+"-width fg-"+e.name+"-height"}).concat(["fg-landscape","fg-portrait"]).join(" "),r.robserver=new ResizeObserver(u.throttle(function(e){r.destroying||r.destroyed||e.forEach(function(e){e.target===r.el&&(e=a.getResizeObserverSize(e),r.onResize(e.width,e.height))})},50)),r.__media={},r.__loading=null,r.tmpl.destroying||r.tmpl.destroyed||r.tmpl.on({"after-filter-change":r.onItemsChanged},r)},isVisible:function(e){return e instanceof s.Item&&!e.noLightbox&&!e.panelHide},onItemsChanged:function(e){var t=this;t.thumbs.isCreated&&t.tmpl.initialized&&(t.thumbs.doCreateThumbs(t.tmpl.items.available(t.isVisible)),t.isAttached&&t.load(t.tmpl.items.first(t.isVisible)))},create:function(){var e=this;return e.isCreated||(e.trigger("create").isDefaultPrevented()||(e.isCreated=e.doCreate()),e.isCreated&&e.trigger("created")),e.isCreated},doCreate:function(){var t=this;return t.$el=t.createElem(),t.el=t.$el.get(0),t.tmpl.opt.protected&&(t.el.oncontextmenu=function(e){return e.preventDefault(),!1}),t.opt.keyboard&&t.$el.attr("tabindex",-1).on("keydown.foogallery",{self:t},t.onKeyDown),t.areas.forEach(function(e){e.appendTo(t.$el)}),t.buttons.appendTo(t.content.$el),!0},createElem:function(){var e=this,t=e.cls.transition[e.opt.transition]||"",t=(e.hasTransition=!l.empty(t),[e.cls.elem,t,l.string(e.opt.theme)?e.opt.theme:e.tmpl.getCSSClass("theme","fg-dark"),l.string(e.opt.loadingIcon)?e.opt.loadingIcon:e.tmpl.getCSSClass("loadingIcon"),l.string(e.opt.hoverIcon)?e.opt.hoverIcon:e.tmpl.getCSSClass("hoverIcon"),l.string(e.opt.videoIcon)?e.opt.videoIcon:e.tmpl.getCSSClass("videoIcon"),l.boolean(e.opt.stickyVideoIcon)&&e.opt.stickyVideoIcon?e.cls.stickyVideoIcon:e.tmpl.getCSSClass("stickyVideoIcon"),l.string(e.opt.insetShadow)?e.opt.insetShadow:e.tmpl.getCSSClass("insetShadow"),l.string(e.opt.filter)?e.opt.filter:e.tmpl.getCSSClass("filter"),l.string(e.opt.hoverColor)?e.opt.hoverColor:e.tmpl.getCSSClass("hoverColor"),l.boolean(e.opt.hoverScale)&&e.opt.hoverScale?e.cls.hoverScale:e.tmpl.getCSSClass("hoverScale"),l.string(e.opt.button)?e.opt.button:"",l.string(e.opt.highlight)?e.opt.highlight:"",e.opt.stackSideAreas?e.cls.stackSideAreas:"",e.opt.preserveButtonSpace?e.cls.preserveButtonSpace:"",e.opt.fitMedia?e.cls.fitMedia:"",e.opt.noMobile?e.cls.noMobile:"",e.opt.hoverButtons?e.cls.hoverButtons:"",e.opt.classNames]);return o("<div/>").addClass(t.join(" "))},destroy:function(){var n=this,e=n._super.bind(n);return n.isDestroyed?u.resolved:(n.isDestroying=!0,o.Deferred(function(t){var e;n.isLoading&&l.promise(n.__loading)?n.__loading.always(function(){var e=n.trigger("destroy");n.isDestroying=!1,e.isDefaultPrevented()||(n.isDestroyed=n.doDestroy()),n.isDestroyed&&n.trigger("destroyed"),t.resolve()}):(e=n.trigger("destroy"),n.isDestroying=!1,e.isDefaultPrevented()||(n.isDestroyed=n.doDestroy()),n.isDestroyed&&n.trigger("destroyed"),t.resolve())}).then(function(){e()}).promise())},doDestroy:function(){var e=this;return e.buttons.destroy(),e.areas.reverse(),e.areas.forEach(function(e){e.destroy()}),e.detach(),e.isCreated&&e.$el.remove(),!0},appendTo:function(e){var t=this;return!t.isCreated&&!t.create()||t.isAttached||(t.trigger("append",[e]).isDefaultPrevented()||(t.isAttached=t.doAppendTo(e)),t.isAttached&&t.trigger("appended",[e])),t.isAttached},doAppendTo:function(e){var t=this,e=o(e),n=t.buttons.get("maximize");return t.isInline=!e.is("body"),t.$el.appendTo(e),n.set(!t.isInline,t.isInline&&n.isEnabled()),t.robserver.observe(t.el),t.areas.forEach(function(e){e.listen()}),null!==t.el.parentNode},detach:function(){var e=this;return e.isCreated&&e.isAttached&&(e.trigger("detach").isDefaultPrevented()||(e.isAttached=!e.doDetach()),e.isAttached||e.trigger("detached")),!e.isAttached},doDetach:function(){return this.robserver.unobserve(this.el),this.areas.forEach(function(e){e.stopListening()}),this.$el.detach(),!0},resize:function(){var e=this;e.$el.removeClass(e.breakpointClassNames).addClass(e.lastBreakpoint),e.areas.forEach(function(e){e.resize()}),e.buttons.resize()},onResize:function(e,t){e=this.getBreakpoint(e,t);this.lastBreakpoint!==e&&(this.lastBreakpoint=e,this.resize())},getBreakpoint:function(i,r){var o=[];return this.opt.breakpoints.forEach(function(e){var t=e.width<=i,n=e.height<=r;t&&n&&o.push("fg-"+e.name),t&&o.push("fg-"+e.name+"-width"),n&&o.push("fg-"+e.name+"-height")}),o.push(r<i?"fg-landscape":"fg-portrait"),0<o.length?o.join(" "):null},getMedia:function(e){return e instanceof s.Item?this.__media.hasOwnProperty(e.id)?this.__media[e.id]:this.__media[e.id]=s.Panel.media.make(e.type,this,e):null},getItem:function(e){var t=this,n=e;return(n=!(n instanceof s.Item)?t.currentItem:n)instanceof s.Item||(n=t.tmpl.items.first(t.isVisible)),e instanceof s.Item&&!t.isVisible(e)&&((n=t.tmpl.items.next(e,t.isVisible,t.opt.loop))instanceof s.Item||(n=t.tmpl.items.prev(e,t.isVisible,t.opt.loop))),n},load:function(n){var i=this;return(n=i.getItem(n))instanceof s.Item?n===i.currentItem?u.reject("item is currently loaded"):(i.isLoading=!0,i.isLoaded=!1,i.isError=!1,i.__loading=o.Deferred(function(e){var t;i.isCreated&&i.isAttached?(t=i.getMedia(n))instanceof s.Panel.Media?i.trigger("load",[t,n]).isDefaultPrevented()?e.rejectWith("default prevented"):(i.currentItem=n,i.prevItem=i.tmpl.items.prev(n,i.isVisible,i.opt.loop),i.nextItem=i.tmpl.items.next(n,i.isVisible,i.opt.loop),i.doLoad(t).then(e.resolve).fail(e.reject)):e.rejectWith("no media to load"):e.rejectWith("not created or attached")}).always(function(){i.isLoading=!1}).then(function(){i.isLoaded=!0,i.trigger("loaded",[n]),n.updateState()}).fail(function(){i.isError=!0,i.trigger("error",[n])}).promise()):u.reject("no item to load")},doLoad:function(t){var e=this,n=[];return e.buttons.beforeLoad(t),e.areas.forEach(function(e){n.push(e.load(t))}),o.when.apply(o,n).then(function(){e.buttons.afterLoad(t)}).promise()},open:function(e,t){var n=this;return e=n.getItem(e),n.trigger("open",[e,t]).isDefaultPrevented()?u.reject("default prevented"):n.doOpen(e,t).then(function(){n.trigger("opened",[e,t])})},doOpen:function(t,n){var i=this;return o.Deferred(function(e){t instanceof s.Item?(n=l.empty(n)?"body":n,i.isAttached||i.appendTo(n),i.isAttached?i.load(t).then(e.resolve).fail(e.reject):e.rejectWith("not attached")):e.rejectWith("item not instanceof FooGallery.Item")}).promise()},next:function(){var e=this,t=e.currentItem,n=e.nextItem;return n instanceof s.Item?e.trigger("next",[t,n]).isDefaultPrevented()?u.reject("default prevented"):e.doNext(n).then(function(){e.trigger("after-next",[t,n])}):u.reject("no next item")},doNext:function(e){return this.load(e)},prev:function(){var e=this,t=e.currentItem,n=e.prevItem;return n instanceof s.Item?e.trigger("prev",[t,n]).isDefaultPrevented()?u.reject("default prevented"):e.doPrev(n).then(function(){e.trigger("after-prev",[t,n])}):u.reject("no prev item")},doPrev:function(e){return this.load(e)},close:function(e){var t=this;return t.trigger("close",[t.currentItem]).isDefaultPrevented()?u.reject("default prevented"):t.doClose(e).then(function(){t.trigger("closed")})},doClose:function(n,e){e=!l.boolean(e)||e;var i=this;return o.Deferred(function(e){i.content.close(n).then(function(){var t=[];i.areas.forEach(function(e){e!==i.content&&t.push(e.close(n))}),o.when.apply(o,t).then(e.resolve).fail(e.reject)})}).always(function(){i.currentItem=null,i.buttons.close(),e&&i.detach(),i.tmpl.state.clear()}).promise()},trapFocus:function(){this.isCreated&&this.$el.on("keydown",{self:this},this.onTrapFocusKeydown)},releaseFocus:function(){this.isCreated&&this.$el.off("keydown",this.onTrapFocusKeydown)},onTrapFocusKeydown:function(e){var t,n,i,r;9===e.keyCode&&(n=e.data.self,(r=(t=o(e.target)).parents("[role=dialog]")).length&&(n=(r=r.find(n.opt.focusable.include).not(n.opt.focusable.exclude)).first(),r=r.last(),i=e.shiftKey?n:r,r=e.shiftKey?r:n,i.length&&t.is(i)&&(e.preventDefault(),r.trigger("focus"))))},onKeyDown:function(e){var t=e.data.self;switch(e.which){case 39:case 40:t.next();break;case 37:case 38:t.prev();break;case 27:t.isFullscreen?t.buttons.get("fullscreen").exit():t.isMaximized&&t.isInline?t.buttons.get("maximize").exit():t.opt.buttons.close&&t.close()}}}),s.template.configure("core",{panel:{classNames:"",theme:null,button:null,highlight:null,loadingIcon:null,hoverIcon:null,videoIcon:null,stickyVideoIcon:null,hoverColor:null,hoverScale:null,insetShadow:null,filter:null,noMobile:!1,hoverButtons:!1,icons:"default",transition:"none",loop:!0,autoProgress:0,autoProgressStart:!0,fitMedia:!1,keyboard:!0,noScrollbars:!0,swipe:!0,stackSideAreas:!0,preserveButtonSpace:!0,admin:!1,info:"bottom",infoVisible:!1,infoOverlay:!0,infoAutoHide:!0,infoAlign:"default",exif:"none",cart:"none",cartVisible:!1,cartAjax:null,cartNonce:null,cartTimeout:null,thumbs:"none",thumbsVisible:!0,thumbsCaptions:!0,thumbsCaptionsAlign:"default",thumbsSmall:!1,thumbsBestFit:!0,focusable:{include:"a[href], area[href], input, select, textarea, button, iframe, object, embed, [tabindex], [contenteditable]",exclude:"[tabindex=-1], [disabled], :hidden"},buttons:{prev:!0,next:!0,close:!0,maximize:!0,fullscreen:!0,autoProgress:!0,info:!0,thumbs:!1,cart:!0},breakpoints:[{name:"medium",width:480,height:480},{name:"large",width:768,height:640},{name:"x-large",width:1024,height:768}]}},{panel:{elem:"fg-panel",maximized:"fg-panel-maximized",fullscreen:"fg-panel-fullscreen",fitMedia:"fg-panel-fit-media",noScrollbars:"fg-panel-no-scroll",stackSideAreas:"fg-panel-area-stack",preserveButtonSpace:"fg-panel-preserve-button-space",hoverButtons:"fg-panel-hover-buttons",stickyVideoIcon:"fg-video-sticky",hoverScale:"fg-hover-scale",noMobile:"fg-panel-no-mobile",loader:"fg-loader",states:{idle:"fg-idle",loading:"fg-loading",loaded:"fg-loaded",error:"fg-error",visible:"fg-visible",reverse:"fg-reverse",selected:"fg-selected",disabled:"fg-disabled",hidden:"fg-hidden",started:"fg-started",stopped:"fg-stopped",paused:"fg-paused",noTransitions:"fg-no-transitions"},buttons:{container:"fg-panel-buttons",prev:"fg-panel-button fg-panel-button-prev",next:"fg-panel-button fg-panel-button-next",autoProgress:"fg-panel-button fg-panel-button-progress",close:"fg-panel-button fg-panel-button-close",fullscreen:"fg-panel-button fg-panel-button-fullscreen",maximize:"fg-panel-button fg-panel-button-maximize",info:"fg-panel-button fg-panel-button-info",thumbs:"fg-panel-button fg-panel-button-thumbs",cart:"fg-panel-button fg-panel-button-cart"},transition:{fade:"fg-panel-fade",horizontal:"fg-panel-horizontal",vertical:"fg-panel-vertical"},area:{elem:"fg-panel-area",inner:"fg-panel-area-inner"},content:{},sideArea:{toggle:"fg-panel-area-toggle",button:"fg-panel-area-button",visible:"fg-panel-area-visible",position:{top:"fg-panel-area-top",right:"fg-panel-area-right",bottom:"fg-panel-area-bottom",left:"fg-panel-area-left"}},info:{overlay:"fg-panel-info-overlay",align:{left:"fg-panel-media-caption-left",center:"fg-panel-media-caption-center",right:"fg-panel-media-caption-right",justified:"fg-panel-media-caption-justified"}},cart:{},thumbs:{prev:"fg-panel-thumbs-button fg-panel-thumbs-prev",next:"fg-panel-thumbs-button fg-panel-thumbs-next",viewport:"fg-panel-thumbs-viewport",stage:"fg-panel-thumbs-stage",noCaptions:"fg-panel-thumbs-no-captions",small:"fg-panel-thumbs-small",spacer:"fg-panel-thumb-spacer",thumb:{elem:"fg-panel-thumb",media:"fg-panel-thumb-media",overlay:"fg-panel-thumb-overlay",wrap:"fg-panel-thumb-wrap",image:"fg-panel-thumb-image",caption:"fg-panel-thumb-caption",title:"fg-panel-thumb-title",description:"fg-panel-thumb-description"},align:{left:"fg-panel-thumb-caption-left",center:"fg-panel-thumb-caption-center",right:"fg-panel-thumb-caption-right",justified:"fg-panel-thumb-caption-justified"}}}},{panel:{buttons:{prev:"Previous Media",next:"Next Media",close:"Close Modal",maximize:"Toggle Maximize",fullscreen:"Toggle Fullscreen",autoProgress:"Auto Progress",info:"Toggle Information",thumbs:"Toggle Thumbnails",cart:"Toggle Cart"}}})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.obj,FooGallery.utils.fn,FooGallery.utils.transition),function(e,n,t,i){n.Panel.Buttons=t.Class.extend({construct:function(e){this.panel=e,this.opt=e.opt.buttons,this.cls=e.cls.buttons,this.sel=e.sel.buttons,this.il8n=e.il8n.buttons,this.$el=null,this.isCreated=!1,this.isAttached=!1,this.__registered=[],this.registerCore()},registerCore:function(){this.register(new n.Panel.Button(this.panel,"prev",{icon:"arrow-left",label:this.il8n.prev,click:this.panel.prev.bind(this.panel),beforeLoad:function(e){this.disable(null==this.panel.prevItem)}}),10),this.register(new n.Panel.Button(this.panel,"next",{icon:"arrow-right",label:this.il8n.next,click:this.panel.next.bind(this.panel),beforeLoad:function(e){this.disable(null==this.panel.nextItem)}}),20),this.register(new n.Panel.AutoProgress(this.panel),30),this.register(new n.Panel.Maximize(this.panel),180),this.register(new n.Panel.Fullscreen(this.panel),190),this.register(new n.Panel.Button(this.panel,"close",{icon:"close",label:this.il8n.close,click:this.panel.close.bind(this.panel)}),200)},register:function(e,t){return e instanceof n.Panel.Button?this.__registered.push({name:e.name,button:e,priority:i.number(t)?t:99})-1:-1},get:function(e){for(var t=null,n=0,i=this.__registered.length;n<i;n++)if(this.__registered[n].name===e){t=this.__registered[n].button;break}return t},each:function(t,e){var n=this;e&&n.__registered.sort(function(e,t){return e.priority-t.priority}),n.__registered.forEach(function(e){t.call(n,e.button)})},toggle:function(e,t){e=this.get(e);null!=e&&e.toggle(t)},disable:function(e,t){e=this.get(e);null!=e&&e.disable(t)},destroy:function(){var e=this;return e.panel.trigger("buttons-destroy",[e]).isDefaultPrevented()||(e.isCreated=!e.doDestroy()),e.isCreated||e.panel.trigger("buttons-destroyed",[e]),!e.isCreated},doDestroy:function(){return this.each(function(e){e.destroy()}),this.isCreated&&(this.detach(),this.$el.remove()),!0},create:function(){var e=this;return e.isCreated||(e.panel.trigger("buttons-create",[e]).isDefaultPrevented()||(e.isCreated=e.doCreate()),e.isCreated&&e.panel.trigger("buttons-created",[e])),e.isCreated},doCreate:function(){var t=this;return t.$el=e("<div/>").addClass(t.cls.container),t.each(function(e){e.appendTo(t.$el)},!0),!0},appendTo:function(e){var t=this;return t.isCreated||t.create(),t.isCreated&&!t.isAttached&&(t.panel.trigger("buttons-append",[t,e]).isDefaultPrevented()||(t.isAttached=t.doAppendTo(e)),t.isAttached&&t.panel.trigger("buttons-appended",[t,e])),t.isAttached},doAppendTo:function(e){return this.$el.appendTo(e),0<this.$el.parent().length},detach:function(){var e=this;return e.isCreated&&e.isAttached&&(e.panel.trigger("buttons-detach",[e]).isDefaultPrevented()||(e.isAttached=!e.doDetach()),e.isAttached||e.panel.trigger("buttons-detached",[e])),!e.isAttached},doDetach:function(){return this.$el.detach(),!0},beforeLoad:function(t){this.each(function(e){e.beforeLoad(t)})},afterLoad:function(t){this.each(function(e){e.afterLoad(t)})},close:function(){this.each(function(e){e.close()})},resize:function(){this.each(function(e){e.resize()})}})}(FooGallery.$,FooGallery,(FooGallery.icons,FooGallery.utils),FooGallery.utils.is),function(i,e,n,t,r,o){e.Panel.Button=t.Class.extend({construct:function(e,t,n){this.panel=e,this.name=t,this.opt=o.extend({icon:null,label:null,visible:!!e.opt.buttons[t],disabled:!1,click:i.noop,beforeLoad:i.noop,afterLoad:i.noop,close:i.noop,resize:i.noop},n),this.cls={elem:e.cls.buttons[t],states:e.cls.states},this.$el=null,this.isVisible=this.opt.visible,this.isDisabled=this.opt.disabled,this.isCreated=!1,this.isAttached=!1},isEnabled:function(){return this.panel.opt.buttons.hasOwnProperty(this.name)&&this.panel.opt.buttons[this.name]},create:function(){var e,t=this;return t.isCreated||(t.$el=i("<button/>",{type:"button","aria-label":t.opt.label,"aria-disabled":t.isDisabled,"aria-hidden":!t.isVisible}).addClass(t.cls.elem).on("click.foogallery",{self:t},t.onButtonClick),r.string(t.opt.icon)?t.$el.append(n.get(t.opt.icon,t.panel.opt.icons)):r.array(t.opt.icon)?t.opt.icon.forEach(function(e){t.$el.append(n.get(e,t.panel.opt.icons))}):r.fn(t.opt.icon)&&t.$el.append(t.opt.icon.call(this)),t.isCreated=!0,e=t.isEnabled(),t.toggle(e),t.disable(!e)),t.isCreated},destroy:function(){return this.isCreated&&(this.$el.off("click.foogallery").remove(),this.isCreated=!1),!this.isCreated},appendTo:function(e){return!this.isCreated&&!this.create()||this.isAttached||this.$el.appendTo(e),this.isAttached},detach:function(){return this.isCreated&&this.isAttached&&this.$el.detach(),!this.isAttached},toggle:function(e){this.isCreated&&(this.isVisible=r.boolean(e)?e:!this.isVisible,this.$el.toggleClass(this.cls.states.hidden,!this.isVisible).attr("aria-hidden",!this.isVisible))},disable:function(e){this.isCreated&&(this.isDisabled=r.boolean(e)?e:!this.isDisabled,this.$el.toggleClass(this.cls.states.disabled,this.isDisabled).attr({"aria-disabled":this.isDisabled,disabled:this.isDisabled}))},beforeLoad:function(e){this.opt.beforeLoad.call(this,e)},afterLoad:function(e){this.opt.afterLoad.call(this,e)},close:function(){this.opt.close.call(this)},click:function(){this.opt.click.call(this)},resize:function(){this.opt.resize.call(this)},onButtonClick:function(e){e.preventDefault(),e.data.self.click()}})}(FooGallery.$,FooGallery,FooGallery.icons,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.obj),function(e,i){e.Panel.SideAreaButton=e.Panel.Button.extend({construct:function(e){this._super(e.panel,e.name,{icon:e.opt.icon,label:e.opt.label,autoHideArea:e.opt.autoHide,click:e.toggle.bind(e)}),this.area=e,this.__isVisible=null,this.__autoHide=null},beforeLoad:function(e){var t=this.area.isEnabled(),n=t&&this.area.canLoad(e);n||null!=this.__isVisible?n&&i.boolean(this.__isVisible)&&(this.area.toggle(this.__isVisible),this.__isVisible=null):(this.__isVisible=this.area.isVisible,this.area.toggle(!1)),t?this.disable(!n):this.toggle(n),this.checkAutoHide(t,n),this.opt.beforeLoad.call(this,e)},checkAutoHide:function(e,t){e&&t&&!0===this.opt.autoHideArea&&(null==this.__autoHide&&i.empty(this.panel.lastBreakpoint)?(this.__autoHide=this.area.isVisible,this.area.toggle(!1),this.area.button.toggle(!0)):i.boolean(this.__autoHide)&&!i.empty(this.panel.lastBreakpoint)&&(this.area.button.toggle(this.area.button.isEnabled()&&this.area.opt.toggle),this.area.toggle(this.__autoHide),this.__autoHide=null))},resize:function(){var e=this.area.isEnabled(),t=e&&this.area.canLoad(this.area.currentMedia);this.checkAutoHide(e,t)}})}((FooGallery.$,FooGallery),FooGallery.utils.is),function(e,n){e.Panel.AutoProgress=e.Panel.Button.extend({construct:function(e){var t=this;t.__stopped=!e.opt.autoProgressStart,t.__timer=new n.Timer,t._super(e,"autoProgress",{icon:"auto-progress",label:e.il8n.buttons.autoProgress}),t.$icon=null,t.$circle=null,t.circumference=0},isEnabled:function(){return this._super()&&0<this.panel.opt.autoProgress},create:function(){var e;return this._super()&&(this.$icon=this.$el.find("svg"),this.$circle=this.$icon.find("circle"),e=parseFloat(this.$circle.attr("r")),this.circumference=2*e*Math.PI,this.$circle.css({"stroke-dasharray":this.circumference+" "+this.circumference,"stroke-dashoffset":this.circumference+""}),this.__timer.on({"start resume":this.onStartOrResume,pause:this.onPause,stop:this.onStop,tick:this.onTick,"complete reset":this.onCompleteOrReset,complete:this.onComplete},this)),this.isCreated},close:function(){this.__timer.pause(),this._super()},destroy:function(){return this.__timer.destroy(),this._super()},beforeLoad:function(e){this.isEnabled()&&this.__timer.reset(),this._super(e)},afterLoad:function(e){this.isEnabled()&&(this.__timer.countdown(this.panel.opt.autoProgress),this.__stopped&&this.__timer.pause()),this._super(e)},click:function(){this.__timer.isRunning?(this.__stopped=!0,this.__timer.pause()):this.__timer.canResume?(this.__stopped=!1,this.__timer.resume()):(this.__stopped=!1,this.__timer.restart()),this._super()},onStartOrResume:function(){this.$icon.removeClass(this.cls.states.allProgress).addClass(this.cls.states.started)},onPause:function(){this.$icon.removeClass(this.cls.states.allProgress).addClass(this.cls.states.paused)},onStop:function(){this.$icon.removeClass(this.cls.states.allProgress).addClass(this.cls.states.stopped)},onTick:function(e,t,n){this.$circle.css("stroke-dashoffset",this.circumference-t/n*100/100*this.circumference)},onCompleteOrReset:function(){this.$icon.removeClass(this.cls.states.allProgress)},onComplete:function(){this.panel.next()}})}((FooGallery.$,FooGallery),FooGallery.utils),function(n,e){n.fullscreen=new e.FullscreenAPI,n.Panel.Fullscreen=n.Panel.Button.extend({construct:function(e){this._super(e,"fullscreen",{icon:["expand","shrink"],label:e.il8n.buttons.fullscreen})},create:function(){return!!this._super()&&(this.$el.attr("aria-pressed",!1),!0)},click:function(){var e=this,t=e.panel.el;n.fullscreen.toggle(t).then(function(){n.fullscreen.element()===t?(n.fullscreen.on("change error",e.onFullscreenChange,e),e.enter()):(n.fullscreen.off("change error",e.onFullscreenChange,e),e.exit())},function(e){console.debug("Error toggling fullscreen on element.",e,t)}),e._super()},onFullscreenChange:function(){n.fullscreen.element()!==this.panel.el&&this.exit()},enter:function(){this.panel.isFullscreen||(this.panel.isFullscreen=!0,this.panel.$el.addClass(this.panel.cls.fullscreen),this.panel.isMaximized||(this.panel.$el.attr({role:"dialog","aria-modal":!0}).trigger("focus"),this.panel.trapFocus()),this.isCreated&&this.$el.attr("aria-pressed",!0),this.panel.buttons.toggle("maximize",!1))},exit:function(){this.panel.isFullscreen&&(this.panel.$el.removeClass(this.panel.cls.fullscreen),this.panel.isMaximized||(this.panel.$el.attr({role:null,"aria-modal":null}).trigger("focus"),this.panel.releaseFocus()),this.isCreated&&this.$el.attr("aria-pressed",!1),this.panel.buttons.toggle("maximize",this.panel.isInline&&this.panel.buttons.opt.maximize),this.panel.isFullscreen=!1)}})}((FooGallery.$,FooGallery),FooGallery.utils),function(t,e,n){e.Panel.Maximize=e.Panel.Button.extend({construct:function(e){this._super(e,"maximize",{icon:"maximize",label:e.il8n.buttons.maximize}),this.scrollPosition=[],this.$placeholder=t("<span/>")},create:function(){return!!this._super()&&(this.$el.attr("aria-pressed",!1),!0)},click:function(){this.set(!this.panel.isMaximized),this._super()},close:function(){this.exit(),this._super()},set:function(e,t){e?this.enter():this.exit(),t=n.boolean(t)?t:this.isVisible,this.toggle(t)},enter:function(){this.panel.isMaximized||(this.panel.isMaximized=!0,this.$placeholder.insertAfter(this.panel.$el),this.panel.$el.appendTo("body").addClass(this.panel.cls.maximized).attr({role:"dialog","aria-modal":!0}).trigger("focus"),this.isCreated&&this.$el.attr("aria-pressed",!0),this.panel.trapFocus(),this.panel.opt.noScrollbars&&(this.scrollPosition=[window.scrollX,window.scrollY],t("html").addClass(this.panel.cls.noScrollbars)))},exit:function(){this.panel.isMaximized&&(this.panel.isMaximized=!1,this.panel.$el.removeClass(this.panel.cls.maximized).attr({role:null,"aria-modal":null}).insertBefore(this.$placeholder),this.panel.isInline&&this.panel.$el.trigger("focus"),this.$placeholder.detach(),this.isCreated&&this.$el.attr("aria-pressed",!1),this.panel.releaseFocus(),this.panel.opt.noScrollbars&&(t("html").removeClass(this.panel.cls.noScrollbars).prop("clientWidth"),n.array(this.scrollPosition)&&2===this.scrollPosition.length&&window.scrollTo(this.scrollPosition[0],this.scrollPosition[1]),this.scrollPosition=[]))}})}(FooGallery.$,FooGallery,FooGallery.utils.is),function(e,s,r,i,o){s.Panel.Area=r.Class.extend({construct:function(e,t,n,i){this.panel=e,this.name=t,this.opt=o.extend({waitForUnload:!0},n),this.cls=o.extend({elem:this.__cls(e.cls.area.elem,t,!0),inner:this.__cls(e.cls.area.inner,t,!0)},i),this.sel=r.selectify(this.cls),this.currentMedia=null,this.$el=null,this.$inner=null,this.isCreated=!1,this.isAttached=!1},__cls:function(e,t,n){t=e.replace(/-area($|-)/,"-"+t+"$1");return n?[e,t].join(" "):t},create:function(){var e=this;return e.isCreated||(e.panel.trigger("area-create",[e]).isDefaultPrevented()||(e.isCreated=e.doCreate()),e.isCreated&&e.panel.trigger("area-created",[e])),e.isCreated},doCreate:function(){return this.$el=e("<div/>").addClass(this.cls.elem),this.$inner=e("<div/>").addClass(this.cls.inner).appendTo(this.$el),!0},destroy:function(){var e=this;return e.isCreated&&(e.panel.trigger("area-destroy",[e]).isDefaultPrevented()||(e.isCreated=!e.doDestroy()),e.isCreated||e.panel.trigger("area-destroyed",[e])),!e.isCreated},doDestroy:function(){return this.currentMedia instanceof s.Panel.Media&&this.currentMedia.detach(),this.$el.remove(),!0},appendTo:function(e){var t=this;return t.isCreated||t.create(),t.isCreated&&!t.isAttached&&(t.panel.trigger("area-append",[t,e]).isDefaultPrevented()||(t.isAttached=t.doAppendTo(e)),t.isAttached&&t.panel.trigger("area-appended",[t,e])),t.isAttached},doAppendTo:function(e){return this.$el.appendTo(e),0<this.$el.parent().length},detach:function(){var e=this;return e.isCreated&&e.isAttached&&(e.panel.trigger("area-detach",[e]).isDefaultPrevented()||(e.isAttached=!e.doDetach()),e.isAttached||e.panel.trigger("area-detached",[e])),!e.isAttached},doDetach:function(){return this.$el.detach(),!0},load:function(r){var o=this;return r instanceof s.Panel.Media?e.Deferred(function(e){var t,n,i=o.shouldReverseTransition(o.currentMedia,r);o.panel.trigger("area-load",[o,r,i]).isDefaultPrevented()?e.rejectWith("default prevented"):(t=o.currentMedia instanceof s.Panel.Media,n=o.currentMedia,o.opt.waitForUnload&&t?(o.panel.trigger("area-unload",[o,n]),o.doUnload(n,i).then(function(){o.panel.trigger("area-unloaded",[o,n]),o.currentMedia=r,o.panel.trigger("area-load",[o,r]),o.doLoad(r,i).then(e.resolve).fail(e.reject)}).fail(e.reject)):(t&&(o.panel.trigger("area-unload",[o,n]),o.doUnload(n,i).then(function(){o.panel.trigger("area-unloaded",[o,n])})),o.currentMedia=r,o.panel.trigger("area-load",[o,r]),o.doLoad(r,i).then(e.resolve).fail(e.reject)))}).then(function(){o.panel.trigger("area-loaded",[o,r])}).fail(function(){o.panel.trigger("area-error",[o,r])}).promise():i.reject("unable to load media")},doLoad:function(e,t){return i.resolved},doUnload:function(e,t){return i.resolved},close:function(e){var t=this;if(t.currentMedia instanceof s.Panel.Media){var n=t.currentMedia;if(!e)return t.panel.trigger("area-unload",[t,n]),t.doUnload(n,!1).then(function(){t.panel.trigger("area-unloaded",[t,n]),t.currentMedia=null});t.panel.trigger("area-unload",[t,n]),t.doUnload(n,!1).then(function(){t.panel.trigger("area-unloaded",[t,n])}),t.currentMedia=null}return i.resolved},shouldReverseTransition:function(e,t){if(!(e instanceof s.Panel.Media&&t instanceof s.Panel.Media))return!0;var n=e.item.index<t.item.index,i=this.panel.tmpl.items.last(this.panel.isVisible);return n=i instanceof s.Item&&(0===t.item.index&&e.item.index===i.index||t.item.index===i.index&&0===e.item.index)?!n:n},listen:function(){},stopListening:function(){},resize:function(){}})}(FooGallery.$,FooGallery,FooGallery.utils,(FooGallery.utils.is,FooGallery.utils.fn),FooGallery.utils.obj,FooGallery.utils.str),function(s,t,n,a){t.Panel.Content=t.Panel.Area.extend({construct:function(e){this._super(e,"content",{waitForUnload:!1},e.cls.content),this.robserver=null},doCreate:function(){var e=this;return!!e._super()&&(e.panel.opt.swipe&&e.$inner.fgswipe({data:{self:e},swipe:e.onSwipe,allowPageScroll:!0}),e.robserver=new ResizeObserver(n.throttle(function(){e.panel instanceof t.Panel&&!e.panel.destroying&&!e.panel.destroyed&&e.resize()},50)),e.robserver.observe(e.$inner.get(0)),!0)},doDestroy:function(){return this.robserver instanceof ResizeObserver&&this.robserver.disconnect(),this.$inner.fgswipe("destroy"),this._super()},doLoad:function(n,i){var r=this,o=r.panel.cls.states;return s.Deferred(function(e){n.isCreated||n.create(),n.$el.toggleClass(o.reverse,i),n.appendTo(r.$inner);var t=[];r.panel.hasTransition?t.push(a.start(n.$el,function(e){e.addClass(o.visible)},null,350)):n.$el.addClass(o.visible),t.push(n.load()),s.when.apply(s,t).then(e.resolve).fail(e.reject)}).promise()},doUnload:function(n,i){var r=this,o=r.panel.cls.states;return s.Deferred(function(e){var t=[];n.isCreated&&(n.$el.toggleClass(o.reverse,!i),r.panel.hasTransition?t.push(a.start(n.$el,function(e){e.removeClass(o.visible)},null,350)):n.$el.removeClass(o.visible)),t.push(n.unload()),s.when.apply(s,t).then(e.resolve).fail(e.reject)}).always(function(){n.isCreated&&n.$el.removeClass(o.reverse),n.detach()}).promise()},onSwipe:function(e,t){t=t.self;"E"===e.direction&&t.panel.prev(),"W"===e.direction&&t.panel.next()},resize:function(){this.currentMedia instanceof t.Panel.Media&&this.currentMedia.resize()}})}(FooGallery.$,FooGallery,FooGallery.utils.fn,FooGallery.utils.transition),function(e,t,n,i,s){t.Panel.SideArea=t.Panel.Area.extend({construct:function(e,t,n,i){var r=this,o=e.cls.sideArea;r._super(e,t,s.extend({icon:null,label:null,position:null,visible:!0,autoHide:!1,toggle:!!e.opt.buttons[t]},n),s.extend({toggle:this.__cls(o.toggle,t,!0),visible:this.__cls(o.visible,t),position:{top:this.__cls(o.position.top,t),right:this.__cls(o.position.right,t),bottom:this.__cls(o.position.bottom,t),left:this.__cls(o.position.left,t)}},i)),r.isVisible=r.opt.visible,r.allPositionClasses=Object.keys(r.cls.position).map(function(e){return r.cls.position[e]}).join(" "),r.button=r.registerButton()},registerButton:function(){var e=new t.Panel.SideAreaButton(this);return this.panel.buttons.register(e),e},doCreate:function(){return!!this._super()&&(this.opt.toggle&&e("<button/>",{type:"button"}).addClass(this.cls.toggle).append(n.get("circle-close",this.panel.opt.icons)).on("click.foogallery",{self:this},this.onToggleClick).appendTo(this.$inner),this.isEnabled()&&(this.panel.$el.toggleClass(this.cls.visible,this.isVisible),this.setPosition(this.opt.position)),!0)},isEnabled:function(){return this.cls.position.hasOwnProperty(this.opt.position)},canLoad:function(e){return e instanceof t.Panel.Media},getPosition:function(){return this.isEnabled()?this.cls.position[this.opt.position]:null},setPosition:function(e){this.opt.position=this.cls.position.hasOwnProperty(e)?e:null,i.jq(this.panel.$el)&&this.panel.$el.removeClass(this.allPositionClasses).addClass(this.getPosition())},toggle:function(e){this.isVisible=i.boolean(e)?e:!this.isVisible,i.jq(this.panel.$el)&&this.panel.$el.toggleClass(this.cls.visible,this.isVisible)},onToggleClick:function(e){e.preventDefault(),e.data.self.toggle()}})}(FooGallery.$,FooGallery,FooGallery.icons,(FooGallery.utils,FooGallery.utils.is),(FooGallery.utils.fn,FooGallery.utils.obj)),function(e,n,i){e.Panel.Info=e.Panel.SideArea.extend({construct:function(e){this._super(e,"info",{icon:"info",label:e.il8n.buttons.info,position:e.opt.info,overlay:e.opt.infoOverlay,visible:e.opt.infoVisible,autoHide:e.opt.infoAutoHide,align:e.opt.infoAlign,waitForUnload:!1},e.cls.info),this.allPositionClasses+=" "+this.cls.overlay},doCreate:function(){var e=this;return!(!e.isEnabled()||!e._super())&&(n.string(e.opt.align)&&e.cls.align.hasOwnProperty(e.opt.align)&&e.panel.$el.addClass(e.cls.align[e.opt.align]),!0)},getPosition:function(){var e=this._super();return null!=e&&this.opt.overlay?e+" "+this.cls.overlay:e},setPosition:function(e,t){n.boolean(t)&&(this.opt.overlay=t),this._super(e)},canLoad:function(e){return this._super(e)&&e.caption.canLoad()},doLoad:function(e,t){return this.canLoad(e)&&(e.caption.appendTo(this.$inner),e.caption.load()),i.resolved},doUnload:function(e,t){return e.caption.unload(),e.caption.detach(),i.resolved}})}((FooGallery.$,FooGallery),FooGallery.utils.is,FooGallery.utils.fn),function(r,o,e,s,n,u,d){o.Panel.Thumbs=o.Panel.SideArea.extend({construct:function(e){this._super(e,"thumbs",{icon:"thumbs",label:e.il8n.buttons.thumbs,position:e.opt.thumbs,captions:e.opt.thumbsCaptions,align:e.opt.thumbsCaptionsAlign,small:e.opt.thumbsSmall,bestFit:e.opt.thumbsBestFit,toggle:!1,waitForUnload:!1},e.cls.thumbs),this.iobserver=null,this.robserver=null,this.$prev=null,this.$next=null,this.$viewport=null,this.$stage=null,this.$dummy=null,this.__items=[],this.__animationFrameId=null,this.info=this.getInfo(),this.selectedIndex=0,this.scrollIndex=0,this.lastIndex=0},isHorizontal:function(){return-1!==["top","bottom"].indexOf(this.opt.position)},doCreate:function(){var i=this;return!(!i.isEnabled()||!i._super())&&(i.opt.captions||i.panel.$el.addClass(i.cls.noCaptions),i.opt.small&&i.panel.$el.addClass(i.cls.small),n.string(i.opt.align)&&i.cls.align.hasOwnProperty(i.opt.align)&&i.panel.$el.addClass(i.cls.align[i.opt.align]),i.$prev=r("<button/>",{type:"button"}).addClass(i.cls.prev).append(e.get("arrow-left",i.panel.opt.icons)).on("click.foogallery",{self:i},i.onPrevClick).prependTo(i.$inner),i.$viewport=r("<div/>").addClass(i.cls.viewport).appendTo(i.$inner),i.$next=r("<button/>",{type:"button"}).addClass(i.cls.next).append(e.get("arrow-right",i.panel.opt.icons)).on("click.foogallery",{self:i},i.onNextClick).appendTo(i.$inner),i.$stage=r("<div/>").addClass(i.cls.stage).appendTo(i.$viewport),i.$dummy=r("<div/>").addClass(i.cls.thumb.elem).appendTo(i.$viewport),i.iobserver=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(i.iobserver.unobserve(e.target),i.loadThumbElement(e.target))})},{root:i.$inner.get(0),rootMargin:"82px 300px"}),i.robserver=new ResizeObserver(u.throttle(function(e){var t,n;0<e.length&&i.panel instanceof o.Panel&&!i.panel.destroying&&!i.panel.destroyed&&(e=s.getResizeObserverSize(e[0]),t=i.info.viewport,n=Math.floor(Math.abs(e.width-t.width)),e=Math.floor(Math.abs(e.height-t.height)),i.isVisible&&(1<n||1<e)&&i.resize())},50)),i.doCreateThumbs(i.panel.tmpl.items.available(i.panel.isVisible)),!0)},doCreateThumbs:function(e){var t;n.empty(e)||((t=this).iobserver instanceof IntersectionObserver&&t.iobserver.takeRecords().forEach(function(e){t.iobserver.unobserve(e.target)}),t.__items=e,t.selectedIndex=0,t.scrollIndex=0,t.lastIndex=t.__items.length-1,t.$stage.empty(),e.forEach(function(e){e=t.doCreateThumb(e).appendTo(t.$stage);t.iobserver.observe(e.get(0))}),t.$stage.append(r("<div/>").addClass(t.cls.spacer)))},doCreateThumb:function(e){var t=this,n=t.cls.thumb;return r("<figure/>").addClass(n.elem).addClass(e.getTypeClass()).addClass(t.panel.cls.states.idle).append(r("<div/>").addClass(n.media).append(r("<div/>").addClass(n.overlay),r("<div/>").addClass(n.wrap).append(r("<img/>",{title:e.title,alt:e.alt}).attr({draggable:!1}).addClass(n.image)),r("<div/>").addClass(t.panel.cls.loader)),r("<div/>").addClass(n.caption).append(r("<div/>").addClass(n.title).html(e.caption),r("<div/>").addClass(n.description).html(e.description))).data("item",e).on("click",{self:t,item:e},t.onThumbClick)},doDestroy:function(){return this.stopListening(),this.iobserver instanceof IntersectionObserver&&this.iobserver.disconnect(),this.robserver instanceof ResizeObserver&&this.robserver.disconnect(),this._super()},doLoad:function(e,t){return!this.isCreated||-1!==(e=this.__items.indexOf(e.item))&&(this.makeVisible(e),this.$stage.find(this.sel.thumb.elem).removeClass(this.panel.cls.states.selected).eq(e).addClass(this.panel.cls.states.selected),this.selectedIndex=e),u.resolved},makeVisible:function(e,t){(e<=this.scrollIndex||e>=this.scrollIndex+this.info.count)&&this.goto(e,t)},listen:function(){var e=this;e.stopListening(),e.isCreated&&(e.resize(),e.robserver.observe(e.$viewport.get(0)),e.$inner.fgswipe({data:{self:e},swipe:e.onSwipe,allowPageScroll:!0}).on("DOMMouseScroll.foogallery-panel-thumbs mousewheel.foogallery-panel-thumbs",{self:e},e.onMouseWheel))},stopListening:function(){this.isCreated&&(this.$inner.fgswipe("destroy").off(".foogallery-panel-thumbs"),this.$stage.find(this.sel.thumb).css({width:"",minWidth:"",height:"",minHeight:""}),this.robserver.unobserve(this.$viewport.get(0)))},loadThumbElement:function(e){var t=r(e),e=t.data("item"),n=t.find(this.sel.thumb.image).get(0),i=this.panel.cls.states;t.removeClass(i.allLoading).addClass(i.loading),n.onload=function(){n.onload=n.onerror=null,t.removeClass(i.allLoading).addClass(i.loaded)},n.onerror=function(){n.onload=n.onerror=null,t.removeClass(i.allLoading).addClass(i.error)},n.src=e.src,n.srcset=e.srcset,n.complete&&n.onload()},goto:function(e,s){var a=this;if(!a.isCreated)return u.reject("thumbs not created");e=e<0?0:e>a.lastIndex?a.lastIndex:e;var l=a.panel.cls.states,c=e>=a.scrollIndex+a.info.count?e-(a.info.count-1):e,t=a.lastIndex-(a.info.count-1);return(t=t<0?0:t)<(c=c<0?0:c)&&(c=t),r.Deferred(function(e){var t,n,i,r,o=a.$stage.find(a.sel.thumb.elem).eq(c);0<o.length?(t=c>a.scrollIndex,n=a.__items.length>=a.info.count,r=a.info.isHorizontal?(i=-o.prop("offsetLeft"),t&&(i+=a.info.remaining.width),"translateX("+((i=n&&a.info.stage.width-Math.abs(i)<a.info.viewport.width?a.info.viewport.width-a.info.stage.width:i)-1)+"px)"):(i=-o.prop("offsetTop"),t&&(i+=a.info.remaining.height),"translateY("+((i=n&&a.info.stage.height-Math.abs(i)<a.info.viewport.height?a.info.viewport.height-a.info.stage.height:i)-1)+"px)"),a.panel.hasTransition&&!s?d.start(a.$stage,function(e){e.css("transform",r)},null,350).then(function(){e.resolve()}).fail(e.reject):(a.$stage.addClass(l.noTransitions).css("transform",r),a.$stage.prop("offsetHeight"),a.$stage.removeClass(l.noTransitions),e.resolve())):e.resolve()}).always(function(){a.scrollIndex=c,a.$prev.toggleClass(l.disabled,c<=0),a.$next.toggleClass(l.disabled,t<=c)}).promise()},getInfo:function(){var e=this.isHorizontal(),t={width:0,height:0},n={width:0,height:0},i={width:0,height:0},r={horizontal:0,vertical:0},o={width:0,height:0},s={width:0,height:0},a=0,l=0,c=this.__items.length;return this.isCreated&&(t={width:this.$viewport.innerWidth()+1,height:this.$viewport.innerHeight()+1},i={width:this.$dummy.outerWidth(),height:this.$dummy.outerHeight()},r={horizontal:Math.floor(t.width/i.width),vertical:Math.floor(t.height/i.height)},o={width:t.width/Math.min(c,r.horizontal),height:t.height/Math.min(c,r.vertical)},a=(this.opt.bestFit?o:i).width,l=(this.opt.bestFit?o:i).height,n={width:e?this.__items.length*a:a,height:e?l:this.__items.length*l},s={width:Math.floor(t.width-r.horizontal*a),height:Math.floor(t.height-r.vertical*l)}),{isHorizontal:e,viewport:t,stage:n,original:i,adjusted:o,remaining:s,counts:r,count:e?r.horizontal:r.vertical,width:a,height:l}},resize:function(){this.isCreated&&(this.info=this.getInfo(),this.opt.bestFit&&(this.info.isHorizontal?this.$stage.find(this.sel.thumb.elem).css({width:this.info.width,minWidth:this.info.width,height:"",minHeight:""}):this.$stage.find(this.sel.thumb.elem).css({height:this.info.height,minHeight:this.info.height,width:"",minWidth:""})),this.goto(this.scrollIndex,!0))},onThumbClick:function(e){e.preventDefault(),e.data.self.panel.load(e.data.item)},onPrevClick:function(e){e.preventDefault();e=e.data.self;e.goto(e.scrollIndex-(e.info.count-1||1))},onNextClick:function(e){e.preventDefault();e=e.data.self;e.goto(e.scrollIndex+(e.info.count-1||1))},onSwipe:function(e,t){var t=t.self,n=1;t.info.isHorizontal?(n=Math.ceil(e.distance/t.info.width),"E"===e.direction&&t.goto(t.scrollIndex-n),"W"===e.direction&&t.goto(t.scrollIndex+n)):(n=Math.ceil(e.distance/t.info.height),"S"===e.direction&&t.goto(t.scrollIndex-n),"N"===e.direction&&t.goto(t.scrollIndex+n))},onMouseWheel:function(e){var t=e.data.self,n=Math.max(-1,Math.min(1,e.originalEvent.wheelDelta||-e.originalEvent.detail));0<n?(t.goto(t.scrollIndex-1),e.preventDefault()):n<0&&(t.goto(t.scrollIndex+1),e.preventDefault())}})}(FooGallery.$,FooGallery,FooGallery.icons,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.transition),function(e,n){e.Panel.Cart=e.Panel.SideArea.extend({construct:function(e){this._super(e,"cart",{icon:"cart",label:e.il8n.buttons.cart,position:e.opt.cart,visible:e.opt.cartVisible,waitForUnload:!1,toggle:!0},e.cls.cart)},canLoad:function(e){return this._super(e)&&e.product.canLoad()},doLoad:function(e,t){return this.canLoad(e)&&(e.product.appendTo(this.$inner),e.product.load()),n.resolved},doUnload:function(e,t){return e.product.unload(),e.product.detach(),n.resolved}})}((FooGallery.$,FooGallery),FooGallery.utils.fn,FooGallery.utils.transition),function(i,r,e,o,t,s){r.Panel.Media=e.Class.extend({construct:function(e,t){var n=this;n.panel=e,n.item=t,n.opt=s.extend({},e.opt.media),n.cls=s.extend({},e.cls.media),n.sel=s.extend({},e.sel.media),n.il8n=s.extend({},e.il8n.media),n.caption=new r.Panel.Media.Caption(e,n),n.product=new r.Panel.Media.Product(e,n),n.$el=null,n.$content=null,n.isCreated=!1,n.isAttached=!1,n.isLoading=!1,n.isLoaded=!1,n.isError=!1},getSize:function(e,t,n,i){var r={};return o.string(e)&&o.string(t)?(r[e]=o.size(n)?n:null,r[t]=o.size(i)?i:null,this.item.isCreated&&(r[e]=this.item.$anchor.data(e)||r[e],r[t]=this.item.$anchor.data(t)||r[t]),r):r},getSizes:function(){var e=this,t=e.getSize("width","height",e.opt.width,e.opt.height),n=e.getSize("maxWidth","maxHeight",e.opt.maxWidth,e.opt.maxHeight),e=e.getSize("minWidth","minHeight",e.opt.minWidth,e.opt.minHeight);return s.extend(t,n,e)},destroy:function(){var e=this;return e.panel.trigger("media-destroy",[e]).isDefaultPrevented()||(e.isCreated=!e.doDestroy()),e.isCreated||e.panel.trigger("media-destroyed",[e]),!e.isCreated},doDestroy:function(){return this.isCreated&&(this.caption.destroy(),this.detach(),this.$el.remove()),!0},create:function(){var e=this;return!e.isCreated&&o.string(e.item.href)&&(e.panel.trigger("media-create",[e]).isDefaultPrevented()||(e.isCreated=e.doCreate()),e.isCreated&&e.panel.trigger("media-created",[e])),e.isCreated},doCreate:function(){var e=this;return e.$el=i("<div/>").addClass([e.cls.elem,e.cls.type].join(" ")).append(i("<div/>").addClass(e.panel.cls.loader)),e.$content=e.doCreateContent().addClass(e.cls.content).css(e.getSizes()).appendTo(e.$el),!0},doCreateContent:function(){return i()},appendTo:function(e){var t=this;return t.isCreated||t.create(),t.isCreated&&!t.isAttached&&(t.panel.trigger("media-append",[t,e]).isDefaultPrevented()||(t.isAttached=t.doAppendTo(e)),t.isAttached&&t.panel.trigger("media-appended",[t,e])),t.isAttached},doAppendTo:function(e){return this.$el.appendTo(e),0<this.$el.parent().length},detach:function(){var e=this;return e.isCreated&&e.isAttached&&(e.panel.trigger("media-detach",[e]).isDefaultPrevented()||(e.isAttached=!e.doDetach()),e.isAttached||e.panel.trigger("media-detached",[e])),!e.isAttached},doDetach:function(){return this.$el.detach(),!0},load:function(){var t=this,n=t.panel.cls.states;return i.Deferred(function(e){t.panel.trigger("media-load",[t]).isDefaultPrevented()?e.rejectWith("default prevented"):(t.$el.removeClass(n.allLoading).addClass(n.loading),t.doLoad().then(e.resolve).fail(e.reject))}).always(function(){t.$el.removeClass(n.loading)}).then(function(){t.$el.addClass(n.loaded),t.panel.trigger("media-loaded",[t])}).fail(function(){t.$el.addClass(n.loaded),t.panel.trigger("media-error",[t])}).promise()},doLoad:function(){return t.resolved},unload:function(){var t=this;return i.Deferred(function(e){t.isCreated&&t.isAttached?t.panel.trigger("media-unload",[t]).isDefaultPrevented()?e.rejectWith("default prevented"):t.doUnload().then(e.resolve).fail(e.reject):e.rejectWith("not created or attached")}).then(function(){t.panel.trigger("media-unloaded",[t])}).promise()},doUnload:function(){return t.resolved},resize:function(){}}),r.template.configure("core",{panel:{media:{width:null,height:null,minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,attrs:{}}}},{panel:{media:{elem:"fg-media",type:"fg-media-unknown",content:"fg-media-content",caption:{elem:"fg-media-caption",title:"fg-media-caption-title",description:"fg-media-caption-description",exif:{elem:"fg-media-caption-exif",auto:"fg-media-caption-exif-auto",full:"fg-media-caption-exif-full",partial:"fg-media-caption-exif-partial",minimal:"fg-media-caption-exif-minimal",prop:"fg-media-caption-exif-prop",icon:"fg-media-caption-exif-icon",content:"fg-media-caption-exif-content",label:"fg-media-caption-exif-label",value:"fg-media-caption-exif-value",tooltip:"fg-media-caption-exif-tooltip",tooltipPointer:"fg-media-caption-exif-tooltip-pointer",showTooltip:"fg-media-caption-exif-show-tooltip"}},product:{elem:"fg-media-product",inner:"fg-media-product-inner",header:"fg-media-product-header",body:"fg-media-product-body",footer:"fg-media-product-footer",button:"fg-panel-button",hidden:"fg-hidden",disabled:"fg-disabled",loading:"fg-loading"}}}},{panel:{media:{product:{title:"Product Information",addToCart:"Add to Cart",viewProduct:"View Product",success:"Successfully added to cart.",error:"Something went wrong adding to cart."}}}}),r.Panel.media=new r.Factory}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.obj,(FooGallery.utils.str,FooGallery.utils.transition)),function(s,a,l,c,u,e,d){var h=!!window.matchMedia&&window.matchMedia("(hover: hover)").matches;a.Panel.Media.Caption=c.Class.extend({construct:function(e,t){var n=this;n.panel=e,n.media=t,n.opt=e.opt,n.cls=t.cls.caption,n.sel=t.sel.caption,n.$el=null,n.title=null,n.description=null,n.isCreated=!1,n.isAttached=!1,n.hasTitle=!1,n.hasDescription=!1,n.hasExif=!1,n.init(t.item)},canLoad:function(){return this.hasTitle||this.hasDescription||this.hasExif},init:function(e){var t,n,i,r,o;e instanceof a.Item&&(t=this,n=!1,e.isCreated?(o=e.$anchor.data()||{},i=u.string(o.lightboxTitle),r=u.string(o.lightboxDescription),(i||r)&&(n=!0,t.title=i?o.lightboxTitle:"",t.description=r?o.lightboxDescription:"")):(o=e.attr.anchor,i=u.string(o["data-lightbox-title"]),r=u.string(o["data-lightbox-description"]),(i||r)&&(n=!0,t.title=i?o["data-lightbox-title"]:"",t.description=r?o["data-lightbox-description"]:"")),n||(t.title=e.caption,t.description=e.description),t.hasTitle=!u.empty(t.title),t.hasDescription=!u.empty(t.description),t.hasExif=e.hasExif&&-1!==c.inArray(t.opt.exif,["auto","full","partial","minimal"]))},create:function(){return this.isCreated||this.panel.trigger("caption-create",[this]).isDefaultPrevented()||(this.isCreated=this.doCreate(),this.isCreated&&this.panel.trigger("caption-created",[this])),this.isCreated},doCreate:function(){var i,r,o=this;return o.$el=s("<div/>").addClass(o.cls.elem),o.hasTitle&&o.$el.append(s("<div/>").addClass(o.cls.title).html(o.title)),o.hasDescription&&o.$el.append(s("<div/>").addClass(o.cls.description).html(o.description)),o.hasExif&&(i=o.media.item.exif,r=s("<div/>",{class:o.cls.exif.elem}).addClass(o.cls.exif[o.opt.exif]),a.supportedExifProperties.forEach(function(e){var t,n;u.empty(i[e])||(n="exif-"+d.kebab(e),t=o.media.item.il8n.exif[e],e=i[e],n=s("<div/>",{class:o.cls.exif.prop}).append(s("<div/>",{class:o.cls.exif.icon}).append(l.get(n,o.opt.icons)),s("<div/>",{class:o.cls.exif.content}).append(s("<div/>",{class:o.cls.exif.label}).text(t),s("<div/>",{class:o.cls.exif.value}).text(e)),s("<span/>",{class:o.cls.exif.tooltip}).text(t+": "+e).append(s("<span/>",{class:o.cls.exif.tooltipPointer}))),h||n.on("click",{self:o},o.onExifClick),r.append(n))}),o.$el.append(r)),!0},onExifClick:function(e){e.preventDefault();var t,e=e.data.self,n=s(this),i=n.find(e.sel.exif.tooltip),r=s(e.sel.exif.showTooltip);s(e.sel.exif.prop).removeClass(e.cls.exif.showTooltip).find(e.sel.exif.tooltip).css("left","").find(e.sel.exif.tooltipPointer).css("left",""),r.is(n)||(i.css("display","inline-block"),t=(r=i.offset().left)+i.outerWidth(),0<(t=Math.ceil(t-window.innerWidth))&&i.css("left","calc(50% - "+t+"px)").find(e.sel.exif.tooltipPointer).css("left","calc(50% + "+t+"px)"),r<0&&(r=Math.abs(r),i.css("left","calc(50% + "+r+"px)").find(e.sel.exif.tooltipPointer).css("left","calc(50% - "+r+"px)")),i.css("display",""),n.addClass(e.cls.exif.showTooltip))},destroy:function(){return this.isCreated&&(this.panel.trigger("caption-destroy",[this]).isDefaultPrevented()||(this.isCreated=!this.doDestroy(),this.isCreated||this.panel.trigger("caption-destroyed",[this]))),!this.isCreated},doDestroy:function(){return this.$el.remove(),!0},appendTo:function(e){var t=this;return t.isCreated||t.create(),t.isCreated&&!t.isAttached&&(t.panel.trigger("caption-append",[t,e]).isDefaultPrevented()||(t.isAttached=t.doAppendTo(e)),t.isAttached&&t.panel.trigger("caption-appended",[t,e])),t.isAttached},doAppendTo:function(e){return this.$el.appendTo(e),0<this.$el.parent().length},detach:function(){var e=this;return e.isCreated&&e.isAttached&&(e.panel.trigger("caption-detach",[e]).isDefaultPrevented()||(e.isAttached=!e.doDetach()),e.isAttached||e.panel.trigger("caption-detached",[e])),!e.isAttached},doDetach:function(){return this.$el.detach(),!0},load:function(){var t=this,n=t.panel.cls.states;return s.Deferred(function(e){t.panel.trigger("caption-load",[t]).isDefaultPrevented()?e.rejectWith("default prevented"):(t.$el.removeClass(n.allLoading).addClass(n.loading),t.doLoad().then(e.resolve).fail(e.reject))}).always(function(){t.$el.removeClass(n.loading)}).then(function(){t.$el.addClass(n.loaded),t.panel.trigger("caption-loaded",[t])}).fail(function(){t.$el.addClass(n.loaded),t.panel.trigger("caption-error",[t])}).promise()},doLoad:function(){return e.resolved},unload:function(){var t=this;return s.Deferred(function(e){t.isCreated&&t.isAttached?t.panel.trigger("caption-unload",[t]).isDefaultPrevented()?e.rejectWith("default prevented"):t.doUnload().then(e.resolve).fail(e.reject):e.rejectWith("not created or attached")}).then(function(){t.panel.trigger("caption-unloaded",[t])}).promise()},doUnload:function(){return e.resolved}})}(FooGallery.$,FooGallery,FooGallery.icons,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,(FooGallery.utils.obj,FooGallery.utils.str),FooGallery.utils.transition),function(i,e,t,n,r,o){e.Panel.Media.Product=t.Class.extend({construct:function(e,t){var n=this;n.panel=e,n.media=t,n.opt=e.opt,n.cls=t.cls.product,n.sel=t.sel.product,n.il8n=t.il8n.product,n.$el=null,n.$inner=null,n.$header=null,n.$body=null,n.$footer=null,n.isCreated=!1,n.isAttached=!1,n.__loaded=null,n.__requestId=null},canLoad:function(){return!n.empty(this.media.item.productId)&&(this.panel.opt.admin&&!o||!!o)},create:function(){var e=this;return e.isCreated||e.panel.trigger("product-create",[e]).isDefaultPrevented()||(e.isCreated=e.doCreate(),e.isCreated&&e.panel.trigger("product-created",[e])),e.isCreated},doCreate:function(){var e=this;return e.$el=i("<div/>").addClass(e.cls.elem).append(i("<div/>").addClass(e.panel.cls.loader)),e.$inner=i("<div/>").addClass(e.cls.inner).appendTo(e.$el),e.$header=i("<div/>").addClass(e.cls.header).html(e.il8n.title).appendTo(e.$inner),e.$body=i("<div/>").addClass(e.cls.body).appendTo(e.$inner),e.$addToCart=i("<button/>").addClass(e.cls.button).html(e.il8n.addToCart).on("click",{self:e},e.onAddToCartClick),e.$viewProduct=i("<a/>").addClass(e.cls.button).html(e.il8n.viewProduct),e.$footer=i("<div/>").addClass(e.cls.footer).append(e.$addToCart).append(e.$viewProduct).appendTo(e.$inner),!0},destroy:function(){var e=this;return e.isCreated&&(e.panel.trigger("product-destroy",[e]).isDefaultPrevented()||(e.isCreated=!e.doDestroy(),e.isCreated||e.panel.trigger("product-destroyed",[e]))),!e.isCreated},doDestroy:function(){return this.$el.remove(),!0},appendTo:function(e){var t=this;return t.isCreated||t.create(),t.isCreated&&!t.isAttached&&(t.panel.trigger("product-append",[t,e]).isDefaultPrevented()||(t.isAttached=t.doAppendTo(e)),t.isAttached&&t.panel.trigger("product-appended",[t,e])),t.isAttached},doAppendTo:function(e){return this.$el.appendTo(e),0<this.$el.parent().length},detach:function(){var e=this;return e.isCreated&&e.isAttached&&(e.panel.trigger("product-detach",[e]).isDefaultPrevented()||(e.isAttached=!e.doDetach()),e.isAttached||e.panel.trigger("product-detached",[e])),!e.isAttached},doDetach:function(){return this.$el.detach(),!0},load:function(){var t=this,n=t.panel.cls.states;return i.Deferred(function(e){t.panel.trigger("product-load",[t]).isDefaultPrevented()?e.rejectWith("default prevented"):(t.$el.removeClass(n.allLoading).addClass(n.loading),t.doLoad().then(e.resolve).fail(e.reject))}).always(function(){t.$el.removeClass(n.loading)}).then(function(){t.$el.addClass(n.loaded),t.panel.trigger("product-loaded",[t])}).fail(function(){t.$el.addClass(n.loaded),t.panel.trigger("product-error",[t])}).promise()},doLoad:function(){var t=this;return null!==t.__loaded?t.__loaded:t.__loaded=i.ajax({type:"POST",url:t.panel.opt.cartAjax,data:{action:"foogallery_product_variations",nonce:t.panel.opt.cartNonce,nonce_time:t.panel.opt.cartTimeout,product_id:t.media.item.productId,gallery_id:t.panel.tmpl.id,attachment_id:t.media.item.id}}).then(function(e){e.error&&(console.log("Error fetching product information from server.",e.error),t.$footer.addClass(t.cls.hidden)),t.panel.opt.admin?t.$addToCart.toggleClass(t.cls.disabled,!0):t.$addToCart.toggleClass(t.cls.hidden,!o||!e.purchasable),n.string(e.product_url)?t.panel.opt.admin?t.$viewProduct.toggleClass(t.cls.disabled,!0):t.$viewProduct.prop("href",e.product_url):t.$viewProduct.toggleClass(t.cls.hidden,!0),t.$body.html(e.body).find("tr").on("click",{self:t},t.onRowClick),n.string(e.title)?t.$header.html(e.title):t.$header.html(t.il8n.title)}).promise()},unload:function(){var t=this;return i.Deferred(function(e){t.isCreated&&t.isAttached?t.panel.trigger("product-unload",[t]).isDefaultPrevented()?e.rejectWith("default prevented"):t.doUnload().then(e.resolve).fail(e.reject):e.rejectWith("not created or attached")}).then(function(){t.panel.trigger("product-unloaded",[t])}).promise()},doUnload:function(){return r.resolved},onAddToCartClick:function(e){e.preventDefault();var t=i(this),n=e.data.self,e=n.$body.find(":radio:checked").val()||n.media.item.productId;n.$addToCart.addClass(n.cls.disabled).addClass(n.cls.loading),n.media.item.addToCart(t,e,1,!1).then(function(e){!e||e.error?n.$footer.append("<p>"+n.il8n.error+"</p>"):n.$footer.append("<p>"+n.il8n.success+"</p>")}).always(function(){n.$addToCart.removeClass(n.cls.disabled).removeClass(n.cls.loading)})},onRowClick:function(e){i(e.target).is(":radio")||(e.preventDefault(),e.stopPropagation(),i(this).find(":radio").prop("checked",!0))}})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,(FooGallery.utils.obj,FooGallery.utils.transition,window.woocommerce_params)),function(e,t,a,n){t.Panel.Image=t.Panel.Media.extend({construct:function(e,t){this._super(e,t),n.extend(this.opt,e.opt.image),n.extend(this.cls,e.cls.image),n.extend(this.sel,e.sel.image),this.allFullClasses=[this.cls.fullWidth,this.cls.fullHeight].join(" ")},doCreateContent:function(){return e("<img/>").attr(this.opt.attrs)},resize:function(){var e,t,n,i,r,o,s=this;s.isCreated&&s.panel.opt.fitMedia&&((e=s.$content.get(0)).naturalWidth&&e.naturalHeight&&(t=e.naturalWidth>=e.naturalHeight,n=t,i=s.$el.innerWidth(),r=s.$el.innerHeight(),t?(o=i/e.naturalWidth,e.naturalHeight*o<r&&(n=!1)):(o=r/e.naturalHeight,e.naturalWidth*o<i&&(n=!0)),a.requestFrame(function(){s.$content.removeClass(s.allFullClasses).addClass(n?s.cls.fullWidth:s.cls.fullHeight)})))},doLoad:function(){var n=this;return e.Deferred(function(e){var t=n.$content.get(0);t.onload=function(){t.onload=t.onerror=null,e.resolve(n)},t.onerror=function(){t.onload=t.onerror=null,e.rejectWith("error loading image")},t.src=n.item.href,t.complete&&t.onload()}).then(function(){n.resize()}).promise()}}),t.Panel.media.register("image",t.Panel.Image),t.template.configure("core",{panel:{image:{attrs:{draggable:!1}}}},{panel:{image:{type:"fg-media-image",fullWidth:"fg-media-full-width",fullHeight:"fg-media-full-height"}}})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.obj),function(e,t,n){t.Panel.Iframe=t.Panel.Media.extend({construct:function(e,t){this._super(e,t),n.extend(this.opt,e.opt.iframe),n.extend(this.cls,e.cls.iframe),n.extend(this.sel,e.sel.iframe)},doCreateContent:function(){return e("<iframe/>").attr(this.opt.attrs)},doLoad:function(){var t=this;return e.Deferred(function(e){t.$content.off("load error").on({load:function(){t.$content.off("load error"),e.resolve(t)},error:function(){t.$content.off("load error"),e.reject(t)}}),t.$content.attr("src",t.item.href)}).promise()}}),t.Panel.media.register("iframe",t.Panel.Iframe),t.template.configure("core",{panel:{iframe:{attrs:{src:"",frameborder:"no",allow:"autoplay; fullscreen",allowfullscreen:!0}}}},{panel:{iframe:{type:"fg-media-iframe"}}})}(FooGallery.$,FooGallery,(FooGallery.utils,FooGallery.utils.obj)),function(e,t,n,i){t.Panel.Html=t.Panel.Media.extend({construct:function(e,t){this._super(e,t),n.extend(this.opt,e.opt.html),n.extend(this.cls,e.cls.html),n.extend(this.sel,e.sel.html),this.$target=null},doCreate:function(){return!!this._super()&&(!(!i.startsWith(this.item.href,"#")||0===(this.$target=e(this.item.href)).length)||(this.$target=null,!1))},doCreateContent:function(){return e("<div/>").attr(this.opt.attrs)},doAppendTo:function(e){return!!this._super(e)&&(this.$content.append(this.$target.contents()),!0)},doDetach:function(){return this.$target.append(this.$content.contents()),this._super()}}),t.Panel.media.register("html",t.Panel.Html),t.template.configure("core",{panel:{html:{}}},{panel:{html:{type:"fg-media-html"}}})}(FooGallery.$,FooGallery,(FooGallery.utils,FooGallery.utils.obj),FooGallery.utils.str),function(e,n){e.Panel.Embed=e.Panel.Html.extend({construct:function(e,t){this._super(e,t),n.extend(this.opt,e.opt.embed),n.extend(this.cls,e.cls.embed),n.extend(this.sel,e.sel.embed)}}),e.Panel.media.register("embed",e.Panel.Embed),e.template.configure("core",{panel:{embed:{}}},{panel:{embed:{type:"fg-media-embed"}}})}((FooGallery.$,FooGallery),(FooGallery.utils,FooGallery.utils.obj),FooGallery.utils.str),function(i,e,c,n,u){e.Panel.Video=e.Panel.Media.extend({construct:function(e,t){this._super(e,t),n.extend(this.opt,e.opt.video),n.extend(this.cls,e.cls.video),n.extend(this.sel,e.sel.video),this.urls=[],this.isSelfHosted=!1},parseHref:function(){for(var e=this,t=e.item.href.split(","),n=[],i=0,r=t.length;i<r;i++)if(!c.empty(t[i]))for(var o=u.parts(t[i]),s=null,a=0,l=e.panel.videoSources.length;a<l;a++)if(e.panel.videoSources[a].canPlay(o)){s=e.panel.videoSources[a],n.push({parts:o,source:s,embed:s.getEmbedUrl(o,e.opt.autoPlay)});break}return n},doCreateContent:function(){return this.urls=this.parseHref(),this.isSelfHosted=0<i.map(this.urls,function(e){return!!e.source.selfHosted||null}).length,this.isSelfHosted?i("<video/>",this.opt.attrs.video):i("<iframe/>",this.opt.attrs.iframe).addClass("fitvidsignore")},doLoad:function(){var t=this;return i.Deferred(function(e){0!==t.urls.length?(t.isSelfHosted?t.loadSelfHosted():t.loadIframe()).then(e.resolve).fail(e.reject):e.rejectWith("no urls available")}).promise()},loadSelfHosted:function(){var n=this;return i.Deferred(function(t){n.$content.off("loadeddata error"),n.$content.find("source").remove(),c.empty(n.item.cover)||n.$content.attr("poster",n.item.cover),n.$content.on({loadeddata:function(){var e;n.$content.off("loadeddata error"),this.volume=n.opt.volume,!n.opt.autoPlay||void 0!==(e=this.play())&&e.catch(function(){console.log("Unable to autoplay video due to policy changes: https://developers.google.com/web/updates/2017/09/autoplay-policy-changes")}),t.resolve(n)},error:function(){n.$content.off("loadeddata error"),t.reject(n)}});var e=i.map(n.urls,function(e){return i("<source/>",{src:e.embed,mimeType:e.source.mimeType})});n.$content.append(e),n.$content.get(0).load()}).promise()},loadIframe:function(){var t=this;return i.Deferred(function(e){c.empty(t.item.cover)||t.$content.css("background-image","url('"+t.item.cover+"')"),t.$content.off("load error").on({load:function(){t.$content.off("load error"),e.resolve(t)},error:function(){t.$content.off("load error"),e.reject(t)}}),t.$content.attr("src",t.urls[0].embed)}).promise()}}),e.Panel.media.register("video",e.Panel.Video),e.template.configure("core",{panel:{video:{autoPlay:!1,volume:.2,attrs:{iframe:{src:"",frameborder:"no",allow:"autoplay; fullscreen",allowfullscreen:!0},video:{controls:!0,preload:!1,controlsList:"nodownload"}}}}},{panel:{video:{type:"fg-media-video"}}})}(FooGallery.$,FooGallery,(FooGallery.utils,FooGallery.utils.is),FooGallery.utils.obj,FooGallery.utils.url),function(e,o,s,a,n){var l=document.createElement("video");e.Panel.Video.Source=o.Class.extend({construct:function(e,t,n,i,r){this.mimeType=e,this.regex=t,this.selfHosted=!!s.boolean(n)&&n,this.embedParams=s.array(i)?i:[],this.autoPlayParam=s.hash(r)?r:{},this.canPlayType=!this.selfHosted||!s.fn(l.canPlayType)||-1!==o.inArray(l.canPlayType(this.mimeType),["probably","maybe"])},canPlay:function(e){return this.canPlayType&&this.regex.test(e.href)},mergeParams:function(e,t){for(var n,i=this,r=0,o=i.embedParams.length;r<o;r++)n=i.embedParams[r],e.search=a.param(e.search,n.key,n.value);return s.empty(i.autoPlayParam)||(e.search=a.param(e.search,i.autoPlayParam.key,t?i.autoPlayParam.value:"")),e.search},getId:function(e){e=e.href.match(/.*\/(.*?)($|\?|#)/);return e&&2<=e.length?e[1]:null},getEmbedUrl:function(e,t){return e.search=this.mergeParams(e,t),n.join("/",location.protocol,"//",e.hostname,e.pathname)+e.search+e.hash}}),e.Panel.Video.sources=new e.Factory}((FooGallery.$,FooGallery),FooGallery.utils,FooGallery.utils.is,FooGallery.utils.url,FooGallery.utils.str),function(e){e.Panel.Video.Dailymotion=e.Panel.Video.Source.extend({construct:function(){this._super("video/daily",/(www.)?dailymotion\.com|dai\.ly/i,!1,[{key:"wmode",value:"opaque"},{key:"info",value:"0"},{key:"logo",value:"0"},{key:"related",value:"0"}],{key:"autoplay",value:"1"})},getId:function(e){return(/\/video\//i.test(e.href)?e.href.split(/\/video\//i)[1].split(/[?&]/)[0].split(/[_]/):e.href.split(/dai\.ly/i)[1].split(/[?&]/))[0]},getEmbedUrl:function(e,t){var n=this.getId(e);return e.search=this.mergeParams(e,t),"https://www.dailymotion.com/embed/video/"+n+e.search+e.hash}}),e.Panel.Video.sources.register("video/daily",e.Panel.Video.Dailymotion)}(FooGallery),function(e){e.Panel.Video.Mp4=e.Panel.Video.Source.extend({construct:function(){this._super("video/mp4",/\.mp4/i,!0)}}),e.Panel.Video.sources.register("video/mp4",e.Panel.Video.Mp4),e.Panel.Video.Webm=e.Panel.Video.Source.extend({construct:function(){this._super("video/webm",/\.webm/i,!0)}}),e.Panel.Video.sources.register("video/webm",e.Panel.Video.Webm),e.Panel.Video.Wmv=e.Panel.Video.Source.extend({construct:function(){this._super("video/wmv",/\.wmv/i,!0)}}),e.Panel.Video.sources.register("video/wmv",e.Panel.Video.Wmv),e.Panel.Video.Ogv=e.Panel.Video.Source.extend({construct:function(){this._super("video/ogg",/\.ogv|\.ogg/i,!0)}}),e.Panel.Video.sources.register("video/ogg",e.Panel.Video.Ogv)}(FooGallery),function(e){e.Panel.Video.Vimeo=e.Panel.Video.Source.extend({construct:function(){this._super("video/vimeo",/(player.)?vimeo\.com/i,!1,[{key:"badge",value:"0"},{key:"portrait",value:"0"}],{key:"autoplay",value:"1"})},getEmbedUrl:function(e,t){var n=this.getId(e);return e.search=this.mergeParams(e,t),"https://player.vimeo.com/video/"+n+e.search+e.hash}}),e.Panel.Video.sources.register("video/vimeo",e.Panel.Video.Vimeo)}(FooGallery),function(e,a,l){e.Panel.Video.Wistia=e.Panel.Video.Source.extend({construct:function(){this._super("video/wistia",/(.+)?(wistia\.(com|net)|wi\.st)\/.*/i,!1,[],{iframe:{key:"autoPlay",value:"1"},playlists:{key:"media_0_0[autoPlay]",value:"1"}})},getType:function(e){return/playlists\//i.test(e)?"playlists":"iframe"},mergeParams:function(e,t){for(var n,i,r=this,o=0,s=r.embedParams.length;o<s;o++)n=r.embedParams[o],e.search=l.param(e.search,n.key,n.value);return a.empty(r.autoPlayParam)||(i=r.autoPlayParam[r.getType(e.href)],e.search=l.param(e.search,i.key,t?i.value:"")),e.search},getId:function(e){return(/embed\//i.test(e.href)?e.href.split(/embed\/.*?\//i):e.href.split(/medias\//))[1].split(/[?&]/)[0]},getEmbedUrl:function(e,t){var n=this.getId(e);return e.search=this.mergeParams(e,t),"https://fast.wistia.net/embed/"+this.getType(e.href)+"/"+n+e.search+e.hash}}),e.Panel.Video.sources.register("video/wistia",e.Panel.Video.Wistia)}(FooGallery,FooGallery.utils.is,FooGallery.utils.url),function(e){e.Panel.Video.YouTube=e.Panel.Video.Source.extend({construct:function(){this._super("video/youtube",/(www.)?youtube|youtu\.be/i,!1,[{key:"modestbranding",value:"1"},{key:"rel",value:"0"},{key:"wmode",value:"transparent"},{key:"showinfo",value:"0"}],{key:"autoplay",value:"1"})},getId:function(e){return(/embed\//i.test(e.href)?e.href.split(/embed\//i):e.href.split(/v\/|v=|youtu\.be\//i))[1].split(/[?&]/)[0]},getEmbedUrl:function(e,t){var n=this.getId(e);return e.search=this.mergeParams(e,t),"https://www.youtube-nocookie.com/embed/"+n+e.search+e.hash}}),e.Panel.Video.sources.register("video/youtube",e.Panel.Video.YouTube)}(FooGallery),function(e){e.Panel.Video.TED=e.Panel.Video.Source.extend({construct:function(){this._super("video/ted",/(www.)?ted\.com/i,!1,[],{key:"autoplay",value:"1"})},getEmbedUrl:function(e,t){var n=this.getId(e);return e.search=this.mergeParams(e,t),"https://embed.ted.com/talks/"+n+e.search+e.hash}}),e.Panel.Video.sources.register("video/ted",e.Panel.Video.TED)}(FooGallery),function(e,n){e.Panel.Video.Facebook=e.Panel.Video.Source.extend({construct:function(){this._super("video/facebook",/(www.)?facebook\.com\/.*?\/videos\//i,!1,[{key:"show_text",value:"0"},{key:"show_caption",value:"0"}],{key:"autoplay",value:"1"})},getEmbedUrl:function(e,t){return"https://www.facebook.com/plugins/video.php"+n.param(this.mergeParams(e,t),"href",encodeURI(e.origin+e.pathname))+e.hash}}),e.Panel.Video.sources.register("video/facebook",e.Panel.Video.Facebook)}(FooGallery,FooGallery.utils.url),function(i,n,r){i.Lightbox=i.Panel.extend({construct:function(e,t){var n=this;n._super(e,t),n.opt.enabled&&n.tmpl instanceof i.Template&&!n.tmpl.destroying&&!n.tmpl.destroyed&&n.tmpl.on({"after-state":n.onAfterState,"anchor-click-item":n.onAnchorClickItem,destroyed:n.onDestroyedTemplate},n)},onAnchorClickItem:function(e,t){t.noLightbox||(e.preventDefault(),this.open(t))},onDestroyedTemplate:function(){this.destroy()},onAfterState:function(e,t){t.item instanceof i.Item&&!t.item.noLightbox&&this.open(t.item)}}),i.template.configure("core",{lightbox:{enabled:!1}},{}),i.Template.override("construct",function(e,t){this._super(e,t);e=this.$el.data("foogalleryLightbox"),t=this.opt.lightbox.enabled||n.hash(e)||0<this.$el.length&&this.el.hasAttribute("data-foogallery-lightbox");this.opt.lightbox=r.extend({},this.opt.panel,this.opt.lightbox,{enabled:t},e),this.lightbox=t?new i.Lightbox(this,this.opt.lightbox):null})}((FooGallery.$,FooGallery),FooGallery.utils.is,FooGallery.utils.obj),function(s,e,a,l){e.template.configure("core",{},{woo:{button:"fg-woo-add-to-cart-ajax",disabled:"fg-disabled",added:"fg-woo-added",adding:"fg-woo-adding"}}),e.Item.prototype.onAddToCart=function(e){var t=e.data.self,n=s(this);if(l){var i=t.tmpl.cls.woo;if(e.preventDefault(),n.hasClass(i.disabled))return!1;var e=n.attr("data-variation-id")||t.productId,r=n.attr("data-quantity")||1;return n.removeClass(i.added).addClass(i.adding).addClass(i.disabled),t.addToCart(n,e,r,!0).then(function(){n.removeClass(i.adding).removeClass(i.disabled).addClass(i.added)}),!1}console.log("woocommerce_params not found!")},e.Item.prototype.addToCart=function(e,t,n,i){var r=s(document.body),o="?add-to-cart="+t,t=[{name:"product_id",value:t},{name:"quantity",value:n},{name:"foogallery_attachment_id",value:this.id},{name:"foogallery_id",value:this.tmpl.id}];return r.trigger("adding_to_cart",[e,t]),s.ajax({type:"POST",url:l.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),data:t}).then(function(e){return e?e.error?i&&(a.string(e.product_url)&&(window.location=e.product_url),window.location=o):r.trigger("added_to_cart",[e.fragments,e.cart_hash]):console.log("An unexpected response was returned from the server.",e),e},function(e,t,n){console.log("FooGallery: Add to cart ajax error.",e,t,n),i&&(window.location=o)})},e.Item.override("doParseItem",function(e){return!!this._super(e)&&(e.find(this.tmpl.sel.woo.button).on("click.foogallery",{self:this},this.onAddToCart),!0)}),e.Item.override("doCreateItem",function(){var e=this;return!!e._super()&&(e.$el.find(e.tmpl.sel.woo.button).on("click.foogallery",{self:e},e.onAddToCart),!0)}),e.Item.override("doDestroyItem",function(){return this.isParsed&&this.$el.find(this.tmpl.sel.woo.button).off("click.foogallery"),this._super()})}(FooGallery.$,FooGallery,(FooGallery.utils,FooGallery.utils.is),(FooGallery.utils.obj,window.woocommerce_params)),function(e){e.DefaultTemplate=e.Template.extend({}),e.template.register("default",e.DefaultTemplate,null,{container:"foogallery fg-default"})}((FooGallery.$,FooGallery),FooGallery.utils),function(e){e.MasonryTemplate=e.Template.extend({construct:function(e,t){var n=this;n._super(e,t),n.masonry=null,n.on({"pre-init":n.onPreInit,destroyed:n.onDestroyed,"appended-items":n.onAppendedItems,"detach-item":n.onDetachItem,"layout after-filter-change":n.onLayoutRequired,"page-change":n.onPageChange},n)},onPreInit:function(){var e=this,t=e.sel,n=e.$el.hasClass("fg-fixed");e.template.isFitWidth=n,e.template.percentPosition=!n,e.template.transitionDuration=0,e.template.itemSelector=t.item.elem,n||(e.template.gutter=t.gutterWidth,e.template.columnWidth=t.columnWidth),e.masonry=new Masonry(e.el,e.template)},onDestroyed:function(){this.masonry instanceof Masonry&&this.masonry.destroy()},onLayoutRequired:function(){this.masonry.layout()},onPageChange:function(e,t,n,i){i||this.masonry.layout()},onAppendedItems:function(e,t){t=t.map(function(e){return e.el}),t=this.masonry.addItems(t);this.masonry.layoutItems(t,!0)},onDetachItem:function(e,t){e.isDefaultPrevented()||(e.preventDefault(),this.masonry.remove(t.el),t.$el.removeClass(this.cls.hidden),t.isAttached=!1)}}),e.template.register("masonry",e.MasonryTemplate,{template:{}},{container:"foogallery fg-masonry",columnWidth:"fg-column-width",gutterWidth:"fg-gutter-width"})}((FooGallery.$,FooGallery),(FooGallery.utils,FooGallery.utils.is)),function(i,r,e,o){r.Justified=e.Class.extend({construct:function(e,t){var n=this;n.tmpl=e,n.$el=e.$el,n.options=i.extend(!0,{},r.Justified.defaults,t),n._items=[],n.maxRowHeight=0,n.borderSize=0,n.align=-1!==["left","center","right"].indexOf(n.options.align)?n.options.align:"center"},init:function(){var e=this;e.maxRowHeight=e.getMaxRowHeight(e.options.maxRowHeight,e.options.rowHeight),e.borderSize=e.getBorderSize()},destroy:function(){this.$el.removeAttr("style")},getBorderSize:function(){switch(this.tmpl.getCSSClass("border","")){case"fg-border-thin":return 4;case"fg-border-medium":return 10;case"fg-border-thick":return 16;default:return 0}},getMaxRowHeight:function(e,t){var n;return o.string(e)?(n=parseInt(e),isNaN(n)?t:n<=0?1/0:-1!==e.indexOf("%")?t*(n/100):n):o.number(e)?e<=0?1/0:e:t},layout:function(e){var n,i=this;0<(e=!o.number(e)?i.$el.width():e)&&(0!==(n=i.createRows(e)).height&&0<n.rows.length&&(i.$el.height(n.height),n.rows.forEach(function(e,t){i.render(e,t===n.rows.length-1)})))},render:function(t,e){var n=this,i=!e&&"justify"!==n.options.lastRow;t.items.forEach(function(e){e.elem&&(t.visible?(e.elem.style.setProperty("position","absolute"),e.elem.style.setProperty("width",e.width+"px"),e.elem.style.setProperty("height",e.height+"px"),e.elem.style.setProperty("top",e.top+"px"),e.elem.style.setProperty("left",e.left+"px"),e.elem.style.setProperty("margin","0"),e.elem.style.removeProperty("display"),0<n.maxRowHeight&&i?e.elem.style.setProperty("max-height",n.maxRowHeight+2*n.borderSize+"px"):e.elem.style.removeProperty("max-height"),e.elem.classList.contains("fg-positioned")||e.elem.classList.add("fg-positioned")):e.elem.style.setProperty("display","none"))})},justify:function(n,i,e,t){var r=this,o=r.options.margins,s=o*(n.items.length-1),e=e-s,a=n.width-s,l=e/a,c=(n.width=a*l,n.height=n.height*l,n.height>t+2*r.borderSize&&(a=(t+2*r.borderSize)/n.height,n.width=n.width*a,n.height=n.height*a),n.top=i,n.left=0,"left"!==r.align&&n.width<e&&("right"===r.align?n.left=e-n.width:n.left=(e-n.width)/2),n.width+=s,n.left);return n.items.forEach(function(e,t){0<t&&(c+=o),e.left=c,e.top=i;t=n.height/e.height;e.width=e.width*t,e.height=e.height*t,c+=e.width}),n.height},createRows:function(o){var s=this,a=s.options.margins,i=s.tmpl.getAvailable(),l=[],r=-1;function h(){return{index:++r,visible:!0,width:0,height:s.options.rowHeight+2*s.borderSize,top:0,left:0,items:[]}}var c=h(),u=0,d=0;if(i.forEach(function(e){r=c.height,t=e.width,(n=e.height)!==r&&(n*=i=r/n,t*=i),i=s.maxRowHeight/r;var t,n,i,r={__item:e,elem:e.el,width:t,height:n,maxWidth:t*i,maxHeight:n*i,top:0,left:0};c.width+r.width>o&&0<c.items.length&&(0<l.length&&(u+=a),e=s.justify(c,u,o,s.maxRowHeight),d<e&&(d=e),u+=e,l.push(c),c=h()),0<c.items.length&&(c.width+=a),c.width+=r.width,c.items.push(r)}),0<c.items.length){var e=u+a;switch(s.options.lastRow){case"smart":var t,p,n=s.justify(c,e,o,s.maxRowHeight);0!==d&&d<n&&(t=d/n,p=c.width*t/o,(t<.9||p<.9)&&(n=s.justify(c,e,o,d-2*s.borderSize)));break;case"justify":n=s.justify(c,e,o,99999);break;case"hide":n=s.justify(c,e,o,s.maxRowHeight),c.width<o&&(c.visible=!1)}c.visible&&(u+=n+a),l.push(c)}return{height:u,rows:l}}}),r.Justified.defaults={rowHeight:150,maxRowHeight:"200%",margins:0,align:"center",lastRow:"smart"}}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(e){e.JustifiedTemplate=e.Template.extend({construct:function(e,t){var n=this;n._super(e,t),n.justified=null,n.on({"pre-init":n.onPreInit,init:n.onInit,destroyed:n.onDestroyed,"layout after-filter-change":n.onLayoutRequired,"page-change":n.onPageChange},n)},onPreInit:function(){this.justified=new e.Justified(this,this.template)},onInit:function(){this.justified.init()},onDestroyed:function(){this.justified instanceof e.Justified&&this.justified.destroy()},onLayoutRequired:function(){this.justified.layout(this.lastWidth)},onPageChange:function(e,t,n,i){i||this.justified.layout(this.lastWidth)}}),e.template.register("justified",e.JustifiedTemplate,null,{container:"foogallery fg-justified"})}((FooGallery.$,FooGallery)),function(e){e.PortfolioTemplate=e.Template.extend({}),e.template.register("simple_portfolio",e.PortfolioTemplate,{},{container:"foogallery fg-simple_portfolio"})}((FooGallery.$,FooGallery),(FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn)),function(i,e,r){e.ImageViewerTemplate=e.Template.extend({construct:function(e,t){var n=this;n._super(r.extend({},e,{paging:{pushOrReplace:"replace",theme:"fg-light",type:"default",size:1,position:"none",scrollToTop:!1}}),t),n.$inner=i(),n.$current=i(),n.$total=i(),n.$prev=i(),n.$next=i(),n.on({"pre-init":n.onPreInit,init:n.onInit,destroy:n.onDestroy,"append-item":n.onAppendItem,"after-page-change":n.onAfterPageChange,"after-filter-change":n.onAfterFilterChange},n)},createChildren:function(){var e=this;return i("<div/>",{class:e.cls.inner}).append(i("<div/>",{class:e.cls.innerContainer}),i("<div/>",{class:e.cls.controls}).append(i("<div/>",{class:e.cls.prev}).append(i("<span/>",{text:e.il8n.prev})),i("<label/>",{class:e.cls.count,text:e.il8n.count}).prepend(i("<span/>",{class:e.cls.countCurrent,text:"0"})).append(i("<span/>",{class:e.cls.countTotal,text:"0"})),i("<div/>",{class:e.cls.next}).append(i("<span/>",{text:e.il8n.next}))))},destroyChildren:function(){this.$el.find(this.sel.inner).remove()},onPreInit:function(e){var t=this;t.$inner=t.$el.find(t.sel.innerContainer),t.$current=t.$el.find(t.sel.countCurrent),t.$total=t.$el.find(t.sel.countTotal),t.$prev=t.$el.find(t.sel.prev),t.$next=t.$el.find(t.sel.next)},onInit:function(e){var t=this;t.template.attachFooBox&&t.$el.on("foobox.previous",{self:t},t.onFooBoxPrev).on("foobox.next",{self:t},t.onFooBoxNext),t.$prev.on("click",{self:t},t.onPrevClick),t.$next.on("click",{self:t},t.onNextClick)},onDestroy:function(e){var t=this;t.template.attachFooBox&&t.$el.off({"foobox.previous":t.onFooBoxPrev,"foobox.next":t.onFooBoxNext}),t.$prev.off("click",t.onPrevClick),t.$next.off("click",t.onNextClick)},onAppendItem:function(e,t){e.preventDefault(),this.$inner.append(t.$el),t.isAttached=!0},onAfterPageChange:function(e,t,n,i){i||this.update()},onAfterFilterChange:function(e){this.update()},update:function(){this.pages&&(this.$current.text(this.pages.current),this.$total.text(this.pages.total))},prev:function(){this.pages&&(this.template.loop&&1===this.pages.current?this.pages.last():this.pages.prev(),this.update())},next:function(){this.pages&&(this.template.loop&&this.pages.current===this.pages.total?this.pages.first():this.pages.next(),this.update())},onFooBoxPrev:function(e){e.data.self.prev()},onFooBoxNext:function(e){e.data.self.next()},onPrevClick:function(e){e.preventDefault(),e.stopPropagation(),e.data.self.prev()},onNextClick:function(e){e.preventDefault(),e.stopPropagation(),e.data.self.next()}}),e.template.register("image-viewer",e.ImageViewerTemplate,{template:{attachFooBox:!1,loop:!1}},{container:"foogallery fg-image-viewer",inner:"fiv-inner",innerContainer:"fiv-inner-container",controls:"fiv-ctrls",prev:"fiv-prev",next:"fiv-next",count:"fiv-count",countCurrent:"fiv-count-current",countTotal:"fiv-count-total"},{prev:"Prev",next:"Next",count:"of"})}(FooGallery.$,FooGallery,(FooGallery.utils,FooGallery.utils.obj)),function(e,n){e.ThumbnailTemplate=e.Template.extend({construct:function(e,t){this._super(n.extend({},e,{filtering:{type:"none"},paging:{pushOrReplace:"replace",theme:"fg-light",type:"default",size:1,position:"none",scrollToTop:!1}}),t)}}),e.template.register("thumbnail",e.ThumbnailTemplate,null,{container:"foogallery fg-thumbnail"})}((FooGallery.$,FooGallery),FooGallery.utils.obj),function(c,e,o,h){o.Progress=o.EventClass.extend({construct:function(e){var t=this;t._super(),t.percent=0,t.tickRate=h.number(e)?e:100,t.isPaused=!1,t.isActive=!1,t._intervalId=null,t._total=0,t._target=null,t.onTick=t.onTick.bind(t)},destroy:function(){this._reset(),this._super()},_reset:function(){var e=this;null!==e._intervalId&&clearInterval(e._intervalId),e.percent=0,e._total=0,e._intervalId=null,e._target=null,e.isActive=!1,e.isPaused=!1},stop:function(){this.isActive&&(this._reset(),this.trigger("stop"))},start:function(e){var t=this;t.stop(),t.isActive||(t._total=1e3*e,t._target=Date.now()+t._total,t._intervalId=setInterval(t.onTick,t.tickRate),t.isActive=!0,t.trigger("start"))},pause:function(){var e=this;e.isActive&&!e.isPaused&&e.percent<100&&(null!==e._intervalId&&clearInterval(e._intervalId),e._intervalId=null,e._target=null,e.isPaused=!0,e.trigger("pause"))},resume:function(){var e,t=this;t.isActive&&t.isPaused?(e=t._total-t._total*t.percent/100,t._target=Date.now()+e,t._intervalId=setInterval(t.onTick,t.tickRate),t.isPaused=!1,t.trigger("resume")):0<t._total&&t.start(t._total/1e3)},onTick:function(){var e=this,t=e._total-Math.max(e._target-Date.now(),0);e.percent=Math.min(t/e._total*100,100),e.trigger("tick",[e.percent]),100<=e.percent&&(null!==e._intervalId&&clearInterval(e._intervalId),e._intervalId=null,e._target=null,e.isActive=!1,e.trigger("complete"))}}),c.Carousel=o.Class.extend({construct:function(e,t,n,i){var r=this;r.tmpl=e,r.el=e.el,r.opt=t,r.cls=n,r.sel=i,r.elem={inner:null,center:null,bottom:null,prev:null,next:null,progress:null},r.activeItem=null,r._itemWidth=0,r._leftExclude=[r.sel.activeItem,r.sel.nextItem].join(","),r._rightExclude=[r.sel.activeItem,r.sel.prevItem].join(","),r._centerListeners=new o.DOMEventListeners,r._listeners=new o.DOMEventListeners,r._progress=new o.Progress,r._canHover=window.matchMedia("(hover: hover)").matches,r.cache=new Map,r.timeouts=new o.Timeouts,r.interacted=!1,r._firstLayout=!0},getScreenX:function(e,t,n){return n/(n+t)*e},getVectorX:function(e,t,n){return(n+t)/n*e},getSequentialZFromScale:function(e,t,n){return n*(t*(e+1))},scaleToZ:function(e,t,n){return e*(1-t/(n+t))},init:function(){var e=this;e.elem={inner:e.el.querySelector(e.sel.inner),center:e.el.querySelector(e.sel.center),bottom:e.el.querySelector(e.sel.bottom),prev:e.el.querySelector(e.sel.prev),next:e.el.querySelector(e.sel.next),progress:e.el.querySelector(e.sel.progress)},150!==e.opt.perspective&&e.el.style.setProperty("--fg-carousel-perspective",e.opt.perspective+"px")},postInit:function(){var e=this;e.activeItem=e.tmpl.items.first(),e.initNavigation(),e.initPagination(),e.initSwipe(),e.initAutoplay()},initNavigation:function(){const t=this;t._listeners.add(t.elem.prev,"click",function(e){e.preventDefault(),t.interacted=!0,t.previous()}),"button"!==t.elem.prev.type&&(t.elem.prev.type="button"),t.elem.prev.appendChild(e.element("arrow-left")),t._listeners.add(t.elem.next,"click",function(e){e.preventDefault(),t.interacted=!0,t.next()}),"button"!==t.elem.next.type&&(t.elem.next.type="button"),t.elem.next.appendChild(e.element("arrow-right"))},initPagination:function(){const n=this;var e=n.tmpl.items.count();for(let t=0;t<e;t++){const i=document.createElement("button");i.type="button",i.classList.add(n.cls.bullet),0===t&&i.classList.add(n.cls.activeBullet),n._listeners.add(i,"click",function(e){e.preventDefault(),n.interacted=!0,n.goto(n.tmpl.items.get(t))}),n.elem.bottom.appendChild(i)}},initSwipe:function(){const t=this;let n=0,i;t._listeners.add(t.elem.inner,"touchstart",function(e){t.interacted=!0,n=e.changedTouches[0].screenX},{passive:!0}),t._listeners.add(t.elem.inner,"touchend",function(e){i=e.changedTouches[0].screenX,i<n?t.next():t.previous(),n=0},{passive:!0})},initAutoplay:function(){const n=this,t=n.opt.autoplay;if(!(t.time<=0)&&n.elem.progress instanceof HTMLElement){const i=n.elem.progress.style;function e(e,t){o.cancelFrame(null),o.requestFrame(function(){i.setProperty("width",e+"%"),t?i.setProperty("transition-duration","0s"):i.setProperty("transition-duration",n._progress.tickRate+"ms")})}n._progress.on({"start stop":function(){e(0,!0)},"pause resume":function(){e(n._progress.percent,!0)},tick:function(){e(n._progress.percent,!1)},complete:function(){n.next(function(){n._progress.start(t.time)})}}),"pause"===t.interaction&&(n._canHover?(n._listeners.add(n.el,"mouseenter",function(e){n._progress.pause()},{passive:!0}),n._listeners.add(n.el,"mouseleave",function(e){n._progress.resume()},{passive:!0})):(n._listeners.add(n.el,"touchstart",function(e){n.timeouts.delete("autoplay"),n._progress.pause()},{passive:!0}),n._listeners.add(n.el,"touchend",function(e){n.timeouts.set("autoplay",function(){n._progress.resume()},1e3*t.time)},{passive:!0}))),n._progress.start(t.time)}},getNext:function(e){return this.tmpl.items.next(e instanceof c.Item?e:this.activeItem,null,!0)},getPrev:function(e){return this.tmpl.items.prev(e instanceof c.Item?e:this.activeItem,null,!0)},goto:function(e,t){const n=this;if(e instanceof c.Item){const i=n.opt.autoplay,r=!n._canHover&&n.timeouts.has("autoplay"),o=(n.timeouts.delete("autoplay"),n.timeouts.delete("navigation"),n.activeItem=e,n.layout(),n._progress.isPaused);n._progress.isActive&&n._progress.stop(),n.timeouts.set("navigation",function(){0<i.time&&("pause"===i.interaction||"disable"===i.interaction&&!n.interacted)&&(n._progress.start(i.time),o&&n._progress.pause(),r&&n.timeouts.set("autoplay",function(){n._progress.resume()},1e3*i.time)),h.fn(t)&&t.call(n)},n.opt.speed)}},next:function(e){this.goto(this.getNext(),e)},previous:function(e){this.goto(this.getPrev(),e)},destroy:function(){var e=this;e.cache.clear(),e.timeouts.clear(),e._listeners.clear(),e._centerListeners.clear(),150!==e.opt.perspective&&e.el.style.removeProperty("--fg-carousel-perspective")},layout:function(e){const t=this;if(null===t.activeItem&&(t.activeItem=t.tmpl.items.first()),!h.number(e)&&t.cache.has("width")&&(e=t.cache.get("width")),h.number(e)){const n=t.getLayout(e);null!==t._layoutFrame&&o.cancelFrame(t._layoutFrame),t._layoutFrame=o.requestFrame(function(){t._layoutFrame=null,t.renderActive()&&(t.renderSide("left",t.sel.prevItem,t._leftExclude,t.cls.prevItem,n),t.renderSide("right",t.sel.nextItem,t._rightExclude,t.cls.nextItem,n),t._firstLayout=!1)})}},getLayout:function(e){var t=this;if(t.cache.has("layout")&&t.cache.get("width")===e)return t.cache.get("layout");var n=t.elem.center.getBoundingClientRect().width,i=t.elem.inner.getBoundingClientRect().width/2+n/2,n=t.calculate(n,i);return t.cache.set("width",e),t.cache.set("layout",n),n},round:function(e,t){t=Math.pow(10,t||0);return Math.round(e*t)/t},getShowPerSide:function(){var e=this.tmpl.items.count();let t=this.opt.maxItems;return("auto"===t||t<=0)&&(t=e%2==0?e-1:e),t%2==0&&--t,t<1&&(t=1),t>e&&(t=e%2==0?e-1:e),(t-1)/2},calculate:function(t,n,i,r){const o=this,d=[];h.number(i)||(i=o.opt.gutter.max),h.number(r)||(r=o.getShowPerSide());let s=t;for(let e=0;e<r;e++){var a=o.getSequentialZFromScale(e,o.opt.scale,o.opt.perspective),l=o.scaleToZ(t,a,o.opt.perspective),c=(t-l)/2,u=(s-=c,"%"===o.opt.gutter.unit?t*Math.abs(i/100):Math.abs(i)),u="%"===o.opt.gutter.unit?o.scaleToZ(u,a,o.opt.perspective):u;if(0<i?s+=u:s-=u,s+l+c>n)return i-1<o.opt.gutter.min?o.calculate(t,n,o.opt.gutter.max,r-1):o.calculate(t,n,i-1,r);u=o.getVectorX(s,a,o.opt.perspective);s+=l+c,d.push({x:u,z:a})}return d},cleanup:function(e,t,n){const i=this,r=h.string(n);Array.from(i.el.querySelectorAll(e)).forEach(function(e){e.classList.remove(t),i.opt.centerOnClick&&i._centerListeners.remove(e,"click"),r&&e.matches(n)||(e.style.removeProperty("transition-duration"),e.style.removeProperty("transform"),e.style.removeProperty("z-index"))})},renderActive:function(){const n=this;if(!(n.activeItem instanceof c.Item))return!1;const e=n.activeItem.el,i=(n.cleanup(n.sel.activeItem,n.cls.activeItem),e.classList.add(n.cls.activeItem),e.style.setProperty("transition-duration",n.opt.speed+"ms"),e.style.removeProperty("z-index"),e.style.removeProperty("transform"),n.tmpl.items.indexOf(n.activeItem));return Array.from(n.el.querySelectorAll(n.sel.bullet)).forEach(function(e,t){e.classList.remove(n.cls.activeBullet),t===i&&e.classList.add(n.cls.activeBullet)}),!0},renderSide:function(n,e,i,r,o){const s=this;if(-1!==["left","right"].indexOf(n)){s.cleanup(e,r,i);let t=s.activeItem;for(let e=0;e<o.length;e++){var a=o[e];const l="left"===n?s.getPrev(t):s.getNext(t);if(!(l instanceof c.Item))break;a="translate3d("+("left"===n?"-":"")+a.x+"px, 0,-"+a.z+"px)";l.el.classList.add(r),l.isLoaded||(l.el.style.setProperty("transition-duration","0ms"),l.el.style.setProperty("transform","translate3d(0,0,-"+s.opt.perspective+"px)"),l.el.offsetHeight),l.el.style.setProperty("transition-duration",(s._firstLayout?0:s.opt.speed)+"ms"),l.el.style.setProperty("transform",a),s.opt.centerOnClick&&s._centerListeners.add(l.el,"click",function(e){e.preventDefault(),e.stopPropagation(),s.goto(l)},!0),t=l}}}})}((FooGallery.$,FooGallery),FooGallery.icons,FooGallery.utils,FooGallery.utils.is),function(t,i){t.CarouselTemplate=t.Template.extend({construct:function(e,t){var n=this;n._super(i.extend({},e,{paging:{type:"none"}}),t),n.items.LAYOUT_AFTER_LOAD=!1,n.carousel=null,n.on({"pre-init":n.onPreInit,init:n.onInit,"post-init":n.onPostInit,destroyed:n.onDestroyed,"append-item":n.onAppendItem,"layout after-filter-change":n.onLayoutRequired},n)},onPreInit:function(){var e=this;e.carousel=new t.Carousel(e,e.template,e.cls.carousel,e.sel.carousel)},onInit:function(){this.carousel.init()},onPostInit:function(){this.carousel.postInit()},onDestroyed:function(){this.carousel instanceof t.Carousel&&this.carousel.destroy()},onAppendItem:function(e,t){e.preventDefault(),this.carousel.elem.inner.appendChild(t.el),t.isAttached=!0},onLayoutRequired:function(e){"after-filter-change"===e.type&&(this.carousel.activeItem=null,this.carousel.cache.delete("layout")),this.carousel.layout(this.lastWidth)}}),t.template.register("carousel",t.CarouselTemplate,{template:{maxItems:0,perspective:150,scale:.12,speed:300,centerOnClick:!0,gutter:{min:-40,max:-20,unit:"%"},autoplay:{time:0,interaction:"pause"}}},{container:"foogallery fg-carousel",carousel:{inner:"fg-carousel-inner",center:"fg-carousel-center",bottom:"fg-carousel-bottom",prev:"fg-carousel-prev",next:"fg-carousel-next",bullet:"fg-carousel-bullet",activeBullet:"fg-bullet-active",activeItem:"fg-item-active",prevItem:"fg-item-prev",nextItem:"fg-item-next",progress:"fg-carousel-progress"}})}((FooGallery.$,FooGallery),FooGallery.utils.obj),function(s,i,a,t,r){i.FooGridTemplate=i.Template.extend({construct:function(e,t){var n=this;n._super(e,t),n.$section=null,n.isFirst=!1,n.disableTransitions=!1,n.panel=new i.Panel(n,n.template),n.on({"pre-init":n.onPreInit,"parsed-item":n.onParsedItem,"created-item":n.onCreatedItem,"destroy-item":n.onDestroyItem,"after-state":n.onAfterState,"before-page-change":n.onBeforePageChange,"before-filter-change":n.onBeforeFilterChange},n),n.panel.on({next:n.onPanelNext,prev:n.onPanelPrev,close:n.onPanelClose,"area-load":n.onPanelAreaLoad,"area-unload":n.onPanelAreaUnload},n)},destroy:function(e){var t=this,n=t._super.bind(t);return t.panel.destroy().then(function(){return t.$section.remove(),n(e)})},onPreInit:function(){var e=this,t=!1;e.$section=s("<section/>",{class:"foogrid-content"}),"none"===e.panel.opt.transition&&(e.$el.hasClass("foogrid-transition-horizontal")&&(e.panel.opt.transition="horizontal",t=!0),e.$el.hasClass("foogrid-transition-vertical")&&(e.panel.opt.transition="vertical",t=!0),e.$el.hasClass("foogrid-transition-fade")&&(e.panel.opt.transition="fade",t=!0)),(e.template.transitionOpen||e.template.transitionRow)&&(t=t||e.$el.hasClass("foogrid-transition-horizontal foogrid-transition-vertical foogrid-transition-fade"),e.template.transitionOpen=e.template.transitionOpen&&t,e.template.transitionRow=e.template.transitionRow&&t),"none"===e.panel.opt.info&&(e.$el.hasClass("foogrid-caption-below")&&(e.panel.opt.info="bottom"),e.$el.hasClass("foogrid-caption-right")&&(e.panel.opt.info="right")),e.panel.info.isEnabled()&&"default"===e.panel.info.opt.align&&(t=null,e.$el.hasClass("fg-c-l")&&(t="left"),e.$el.hasClass("fg-c-c")&&(t="center"),e.$el.hasClass("fg-c-r")&&(t="right"),null!==(t=e.$el.hasClass("fg-c-j")?"justified":t)&&(e.panel.info.opt.align=t)),null===e.panel.opt.theme&&(e.panel.opt.theme=e.getCSSClass("theme")),"fg-light"===e.panel.opt.theme&&null===e.panel.opt.button&&(e.panel.opt.button="fg-button-blue"),"fg-dark"===e.panel.opt.theme&&null===e.panel.opt.button&&(e.panel.opt.button="fg-button-dark")},onParsedItem:function(e,t){t.isError||t.$anchor.off("click.foogallery").on("click.gg",{self:this,item:t},this.onAnchorClick)},onCreatedItem:function(e,t){t.isError||t.$anchor.off("click.foogallery").on("click.gg",{self:this,item:t},this.onAnchorClick)},onDestroyItem:function(e,t){t.isError||t.$anchor.off("click.gg",this.onAnchorClick)},onAfterState:function(e,t){t.item instanceof i.Item&&this.open(t.item)},onBeforePageChange:function(e,t,n,i,r){r||(this.panel.isMaximized||this.close(!0,this.panel.isAttached))},onBeforeFilterChange:function(){this.panel.isMaximized||this.close(!0,this.panel.isAttached)},onPanelNext:function(e,t,n){e.preventDefault(),this.open(n)},onPanelPrev:function(e,t,n){e.preventDefault(),this.open(n)},onPanelClose:function(e){e.preventDefault(),this.close(!1,!0)},onPanelAreaLoad:function(e,t,n){"content"===t.name&&n.item.$el.addClass(this.cls.visible)},onPanelAreaUnload:function(e,t,n){"content"===t.name&&n.item.$el.removeClass(this.cls.visible)},onAnchorClick:function(e){e.preventDefault(),e.data.self.toggle(e.data.item)},transitionsEnabled:function(){return!this.disableTransitions&&this.panel.hasTransition},isNewRow:function(e){return this.getOffsetTop(this.panel.currentItem)!==this.getOffsetTop(e)},getOffsetTop:function(e){return e instanceof i.Item&&e.isCreated?e.$el.offset().top:0},scrollTo:function(t,n,i){var r=this,e=(t=(a.number(t)?t:0)-+r.template.scrollOffset,n=!a.boolean(n)||n,i=a.number(i)?i:300,s("#wpadminbar")),o=s("html, body");return 1===e.length&&(t-=e.height()),s.Deferred(function(e){r.template.scroll&&n?r.template.scrollSmooth&&!r.panel.isMaximized?o.animate({scrollTop:t},i,function(){e.resolve()}):(o.scrollTop(t),e.resolve()):e.resolve()})},open:function(e){var t,n=this;return-1!==e.index?(t=n.isNewRow(e),n.panel.currentItem instanceof i.Item&&t&&!n.panel.isMaximized?n.doClose(t).then(function(){return n.pages&&!n.pages.contains(n.pages.current,e)&&n.pages.goto(n.pages.find(e)),n.doOpen(e,t)}):(n.pages&&!n.pages.contains(n.pages.current,e)&&n.pages.goto(n.pages.find(e)),n.doOpen(e,t))):s.when()},doOpen:function(e,n){var i=this;return s.Deferred(function(t){i.scrollTo(i.getOffsetTop(e),n||i.isFirst).then(function(){i.panel.appendTo(i.$section),n&&e.$el.after(i.$section),i.transitionOpen(n)?(i.isFirst=!1,r.start(i.$section,function(e){e.addClass(i.cls.visible)},null,350).then(function(){t.resolve()},function(e){t.reject(e)})):(i.$section.addClass(i.cls.visible),t.resolve())})}).then(function(){return i.scrollTo(i.getOffsetTop(e),!0)}).then(function(){return i.panel.load(e)}).then(function(){i.$section.trigger("focus")}).always(function(){i.isBusy=!1}).promise()},transitionOpen:function(e){return this.transitionsEnabled()&&!this.panel.isMaximized&&(this.template.transitionOpen&&this.isFirst||this.template.transitionRow&&e)},close:function(e,t){e=!!a.boolean(e)&&e;var n=this,i=n.disableTransitions;return n.disableTransitions=e,n.doClose(t).then(function(){n.disableTransitions=i})},doClose:function(e){var n=this;return s.Deferred(function(t){n.panel.currentItem instanceof i.Item?(n.panel.currentItem.$el.removeClass(n.cls.visible),n.transitionClose(e)?r.start(n.$section,function(e){e.removeClass(n.cls.visible)},null,350).then(function(){n.panel.doClose(!0,!0).then(function(){t.resolve()},function(e){t.reject(e)})},function(e){t.reject(e)}):(n.$section.removeClass(n.cls.visible),n.panel.doClose(!0,!0).then(function(){t.resolve()},function(e){t.reject(e)}))):t.resolve()}).always(function(){n.$section.detach(),n.isFirst=!0}).promise()},transitionClose:function(e){return this.transitionsEnabled()&&!this.panel.isMaximized&&(this.template.transitionRow&&e||this.template.transitionOpen&&!e)},toggle:function(e){return e instanceof i.Item?this.panel.currentItem===e?this.close():this.open(e):t.reject()}}),i.template.register("foogrid",i.FooGridTemplate,{template:{classNames:"foogrid-panel",scroll:!0,scrollOffset:0,scrollSmooth:!1,loop:!0,external:"_blank",externalText:null,keyboard:!0,transitionRow:!0,transitionOpen:!0,noMobile:!0,info:"bottom",infoVisible:!0,infoOverlay:!1,buttons:{fullscreen:!1}}},{container:"foogallery foogrid",visible:"foogrid-visible"})}(FooGallery.$,FooGallery,FooGallery.utils.is,FooGallery.utils.fn,(FooGallery.utils.obj,FooGallery.utils.transition)),function(i,r){i.SliderTemplate=i.Template.extend({construct:function(e,t){var n=this;n._super(r.extend({},e,{paging:{type:"none"}}),t),n.items.ALLOW_CREATE=!1,n.items.ALLOW_APPEND=!1,n.panel=new i.Panel(n,n.template)},preInit:function(){var e,t=this;return!!t._super()&&(t.$el.toggleClass(t.cls.fitContainer,t.template.fitContainer),t.template.horizontal=t.$el.hasClass("fgs-horizontal")||t.template.horizontal,null===t.panel.opt.thumbs&&(t.panel.thumbs.opt.position=t.template.horizontal?"bottom":"right"),t.$el.hasClass("fgs-no-captions")&&(t.template.noCaptions=!0,t.panel.thumbs.opt.captions=!t.template.noCaptions),t.$el.hasClass("fgs-content-nav")&&(t.template.contentNav=!0,t.panel.opt.buttons.prev=t.panel.opt.buttons.next=t.template.contentNav),null===t.panel.opt.button&&(t.panel.opt.button=this.getPanelButtonClass()),t.panel.info.isEnabled()&&"default"===t.panel.info.opt.align&&(e=null,t.$el.hasClass("fg-c-l")&&(e="left"),t.$el.hasClass("fg-c-c")&&(e="center"),t.$el.hasClass("fg-c-r")&&(e="right"),null!==(e=t.$el.hasClass("fg-c-j")?"justified":e)&&(t.panel.info.opt.align=e)),!0)},ready:function(){var e=this;return!!e._super()&&(e.panel.appendTo(e.$el),e.panel.load(e.state.current.item),!0)},destroy:function(e){var t=this._super.bind(this);return this.panel.destroy().then(function(){return t(e)})},getPanelButtonClass:function(){var e=this.$el.prop("className"),e=/(?:^|\s)fgs-(purple|red|green|blue|orange)(?:$|\s)/.exec(e);return null!=e&&2<=e.length?"fg-button-"+e[1]:null}}),i.template.register("slider",i.SliderTemplate,{template:{horizontal:!1,noCaptions:!1,contentNav:!1,fitContainer:!1,fitMedia:!0,transition:"horizontal",hoverButtons:!0,preserveButtonSpace:!1,noMobile:!0,thumbs:null,thumbsSmall:!0,info:"top",infoVisible:!0,buttons:{close:!1,info:!1,maximize:!1,fullscreen:!1}}},{container:"foogallery fg-slider",fitContainer:"fg-fit-container"})}((FooGallery.$,FooGallery),(FooGallery.utils,FooGallery.utils.obj)),function(i,o,e,l,r,s){o.StackAlbum=e.Class.extend({construct:function(e,t){var n=this;n.$el=l.jq(e)?e:i(e),n.el=n.$el.get(0),n.opt=r.extend({},o.StackAlbum.defaults,t,n.$el.data("foogallery")),n.$back=n.$el.find(".fg-header-back"),n.$active=n.$el.find(".fg-header-active"),n.$piles=n.$el.find(".fg-piles"),n.piles=n.$piles.find(".fg-pile").map(function(e,t){return new o.StackAlbum.Pile(n,t,{index:e})}).get(),n.ignoreResize=!1,n.robserver=new ResizeObserver(function(){!n.ignoreResize&&n.$el.is(":visible")&&n.layout(!0)})},init:function(){var e=this;e.piles.forEach(function(e){e.init()}),e.$back.on("click.foogallery",{self:e},e.onBackClick),e.robserver.observe(e.el)},destroy:function(){this.robserver.disconnect(),this.$back.off(".foogallery"),this.piles.forEach(function(e){e.destroy()})},getLayoutInfo:function(){var e=this,t=e.opt.gutter+2*e.opt.border;return{maxWidth:e.$el.width(),space:t,halfSpace:t/2,itemWidth:e.opt.itemWidth,itemHeight:e.opt.itemHeight,itemOuterWidth:e.opt.itemWidth+2*e.opt.border,itemOuterHeight:e.opt.itemHeight+2*e.opt.border,blockWidth:e.opt.itemWidth+t,blockHeight:e.opt.itemHeight+t,border:e.opt.border,doubleBorder:2*e.opt.border,gutter:e.opt.gutter,halfGutter:e.opt.gutter/2}},layout:function(e){var t,n=this;e&&(n.$el.addClass("fg-disable-transitions"),n.$el.prop("offsetWidth")),n.hasActive?(t=n.activePile.layout(),n.activePile.setPosition(0,0,t.width,t.height)):t=n.layoutPiles(),n.$piles.css({width:t.width+"px",height:t.height+"px"}),e&&n.$el.removeClass("fg-disable-transitions")},layoutPiles:function(i){var r=this.getLayoutInfo(),o=0,s=1,a=0;return i=l.fn(i)?i:function(){},this.piles.forEach(function(e){var t=o,n=((o+=r.blockWidth)>r.maxWidth&&(t=0,o=r.blockWidth,s++),r.blockHeight*(s-1));i(e,n,t,r.blockWidth,r.blockHeight),e.setPosition(n,t,r.blockWidth,r.blockHeight),a<o&&(a=o)}),{width:a,height:r.blockHeight*s}},setActive:function(t){var n,i=this,e=i.activePile,r=e instanceof o.StackAlbum.Pile;t=t instanceof o.StackAlbum.Pile?t:null,i.activePile=t,i.hasActive=null!==t,r&&e.collapse(),i.ignoreResize=!0,i.hasActive?(i.piles.forEach(function(e){e!==t&&e.hide(i.activePile)}),n=i.activePile.expand(),i.$active.text(t.title),i.$el.addClass("fg-has-active")):(n=i.layoutPiles(function(e){e.show()}),i.$el.removeClass("fg-has-active")),s.start(i.$piles,function(e){e.css({width:n.width+"px",height:n.height+"px"})},null,350).then(function(){i.ignoreResize=!1})},onBackClick:function(e){e.preventDefault(),e.stopPropagation(),e.data.self.setActive(null)}}),o.StackAlbum.defaults={gutter:50,itemWidth:150,itemHeight:150,border:10,angleStep:1,randomAngle:!1}}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.obj,FooGallery.utils.transition),function(r,o,e,s,a){o.StackAlbum.Pile=e.Class.extend({construct:function(e,t,n){var i=this;i.album=e,i.$el=s.jq(t)?t:r(t),i.opt=a.extend({},o.StackAlbum.Pile.defaults,n,i.$el.data()),i.title=i.opt.title,i.items=i.$el.find(".fg-pile-item").map(function(e,t){return new o.StackAlbum.Item(i,t,{index:e})}).get(),i.$cover=r("<div/>",{class:"fg-pile-cover"}).append(r("<div/>",{class:"fg-pile-cover-content"}).append(r("<span/>",{class:"fg-pile-cover-title",text:i.opt.title}),r("<span/>",{class:"fg-pile-cover-count",text:i.items.length}))),i.top=0,i.left=0,i.isExpanded=!1},init:function(){var n=this,i=n.album.opt,r=n.getAngles(i.angleStep),o=i.randomAngle?n.randomAngle(r):i.angleStep;n.$cover.on("click.foogallery",{self:n},n.onCoverClick),n.items.forEach(function(e,t){e.init(),3<t||(0===t?(e.$el.addClass("fg-has-cover").append(n.$cover),e.load()):(t%2==0?e.setAngle(-o):e.setAngle(o),i.randomAngle?o=n.randomAngle(r):o+=i.angleStep))})},destroy:function(){this.$cover.remove(),this.items.forEach(function(e,t){0===t&&e.$el.removeClass("fg-has-cover"),e.destroy()})},getAngles:function(e){for(var t=[],n=1;n<=3;n++)t.push(n*e);return t},randomAngle:function(e){var t=e.length,t=Math.floor(Math.random()*+t+0),e=e.splice(t,1);return 1===e.length?e[0]:0},setPosition:function(e,t,n,i){this.top=e,this.left=t,s.number(n)&&s.number(i)?this.$el.css({top:e+"px",left:t+"px",width:n+"px",height:i+"px"}):this.$el.css({top:e+"px",left:t+"px"})},layout:function(){var i=this.album.getLayoutInfo(),r=0,o=1,s=!1,a=0;return this.items.forEach(function(e){(r+=i.halfGutter)>i.maxWidth&&(r=i.halfGutter,o++,s=!0);var t=r,n=(r+=i.itemOuterWidth+i.halfGutter,!s&&r>i.maxWidth&&(t=i.halfGutter,r=i.blockWidth,o++),i.blockHeight*(o-1)+i.halfGutter);s=!1,e.setPosition(n,t,i.itemOuterWidth,i.itemOuterHeight),e.isLoaded||e.load(),a<r&&(a=r)}),{width:a,height:i.blockHeight*o}},expand:function(){var e;return this.$el.removeClass("fg-collapsed").addClass("fg-expanded"),e=this.layout(),this.setPosition(0,0,e.width,e.height),this.isExpanded=!0,e},collapse:function(){var e=this,t=e.album.getLayoutInfo(),n=(e.$el.removeClass("fg-expanded").addClass("fg-collapsed"),e.items.forEach(function(e){e.setPosition(t.halfGutter,t.halfGutter,t.itemOuterWidth,t.itemOuterHeight)}),{width:t.blockWidth,height:t.blockHeight});return e.setPosition(0,0,n.width,n.height),e.isExpanded=!1,n},show:function(){this.$el.removeClass("fg-hidden fg-expanded fg-collapsed")},hide:function(e){e instanceof o.StackAlbum.Pile&&this.setPosition(e.top,e.left),this.$el.addClass("fg-hidden")},onCoverClick:function(e){e.preventDefault(),e.stopPropagation();e=e.data.self;e.album.setActive(e)}}),o.StackAlbum.Pile.defaults={index:-1,title:null}}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.obj),function(r,o,e,s,a){o.StackAlbum.Item=e.Class.extend({construct:function(e,t,n){var i=this;i.$el=s.jq(t)?t:r(t),i.opt=a.extend({},o.StackAlbum.Item.defaults,n,i.$el.data()),i.$thumb=i.$el.find(".fg-pile-item-thumb"),i.$image=i.$el.find(".fg-pile-item-image"),i.isLoaded=!1,i.isLoading=!1,i._loading=null},init:function(){},destroy:function(){},setAngle:function(e){this.$el.css({transform:"rotate("+e+"deg)"})},setPosition:function(e,t,n,i){this.$el.css({top:e+"px",left:t+"px",width:n+"px",height:i+"px"})},load:function(){var t=this;return s.promise(t._loading)?t._loading:t._loading=r.Deferred(function(e){t.$el.addClass("fg-loading"),t.isLoading=!0,t.$image.on({"load.foogallery":function(){t.$image.off(".foogallery"),t.$el.removeClass("fg-loading"),t.isLoading=!1,t.isLoaded=!0,e.resolve()},"error.foogallery":function(){t.$image.off(".foogallery"),t.$el.removeClass("fg-loading"),t.isLoading=!1,t.isLoaded=!0,e.reject()}}),t.$image.prop("src",t.$image.attr(t.opt.src)).prop("srcset",t.$image.attr(t.opt.srcset))}).promise()}}),o.StackAlbum.Item.defaults={index:-1,src:"data-src-fg",srcset:"data-srcset-fg"}}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.obj),function(i,r,e){i.fn.foogalleryStackAlbum=function(e){return this.each(function(e,t){var t=i(t),n=t.data("__FooGalleryAlbum__");n instanceof r.StackAlbum&&n.destroy(),(n=new r.StackAlbum(t)).init(),t.data("__FooGalleryAlbum__",n)})},r.loadStackAlbums=r.reloadStackAlbums=function(){i(function(){i(".foogallery-stack-album:not(.fg-ready)").foogalleryStackAlbum()}),e.ready(function(){i(".foogallery-stack-album.fg-ready").foogalleryStackAlbum()})},r.loadStackAlbums()}(FooGallery.$,FooGallery,FooGallery.utils),function(s,a,e,t,i){a.triggerPostLoad=function(e,t,n,i){var r,o=e.target;if(o instanceof a.Template&&o.initialized&&("after-page-change"===e.type&&!i||"after-filter-change"===e.type))try{if(0<o.$el.parents(".fbx-item").length)return;o.$el.hasClass("fbx-instance")&&window.FOOBOX&&s.fn.foobox?(r=s.extend({},window.FOOBOX.o,o.opt.protected?{images:{noRightClick:!0}}:{}),o.$el.foobox(r)):s("body").trigger("post-load")}catch(e){console.error(e)}},a.autoDefaults={on:{"after-page-change after-filter-change":a.triggerPostLoad}},a.autoEnabled=!0,a.auto=function(e){a.autoDefaults=t.merge(a.autoDefaults,e)},a.globalsMerged=!1,a.mergeGlobals=function(){if(!0!==a.globalsMerged&&window.FooGallery_il8n&&i.object(window.FooGallery_il8n)){var e,t=window.FooGallery_il8n;for(e in t)if(t.hasOwnProperty(e)&&a[e]instanceof a.Factory&&i.object(t[e]))for(var n in t[e])t[e].hasOwnProperty(n)&&a[e].configure(n,null,null,t[e][n]);a.globalsMerged=!0}},a.load=a.reload=function(){s(function(){a.mergeGlobals(),a.autoEnabled&&s('[id^="foogallery-gallery-"]:not(.fg-ready)').foogallery(a.autoDefaults)}),e.ready(function(){a.mergeGlobals(),a.autoEnabled&&s('[id^="foogallery-gallery-"].fg-ready').foogallery(a.autoDefaults)})},a.load()}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.obj,FooGallery.utils.is);