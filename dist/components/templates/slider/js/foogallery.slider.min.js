/*
* FooGallery - The Most Intuitive and Extensible Gallery Creation and Management Tool Ever Created for WordPress
* @version 1.2.6
* @link 
* @copyright Steven Usher & Brad Vincent 2015
* @license Released under the GPLv3 license.
*/

!function(a,b,c,d,e,f){b.SliderTemplate=b.Template.extend({construct:function(c,d){var f=this;f._super(e.extend({},c,{paging:{type:"none"}}),d),f.$contentContainer=a(),f.$contentStage=a(),f.$itemContainer=a(),f.$itemStage=a(),f.$itemPrev=a(),f.$itemNext=a(),f.selected=null,f.helper=new b.VideoHelper(f.template.player),f.horizontal=f.template.horizontal,f.noCaptions=f.template.noCaptions,f.useViewport=f.template.useViewport,f.breakpoints=f.template.breakpoints,f.allowPageScroll=f.template.allowPageScroll,f.contentNav=f.template.contentNav,f.allBreakpointClasses=a.map(f.breakpoints,function(a){return a.classes}).join(" "),f._contentWidth=0,f._contentHeight=0,f._firstVisible=-1,f._lastVisible=-1,f._breakpoint=null},createChildren:function(){var b=this;return[a("<div/>",{class:b.cls.contentContainer}).append(a("<div/>",{class:b.cls.contentPrev}),a("<div/>",{class:b.cls.contentStage}),a("<div/>",{class:b.cls.contentNext})),a("<div/>",{class:b.cls.itemContainer}).append(a("<div/>",{class:b.cls.itemPrev}),a("<div/>",{class:b.cls.itemStage}),a("<div/>",{class:b.cls.itemNext}))]},destroyChildren:function(){var a=this,b=a.$el.find(a.sel.item.elem).detach();a.$el.find(a.sel.contentContainer).remove(),a.$el.find(a.sel.itemContainer).remove(),a.$el.append(b)},getContainerWidth:function(){var a=this;return a.$el.is(":visible")?a.$el.outerWidth():a.$el.parents(":visible:first").innerWidth()},onPreInit:function(a,b){b.$contentContainer=b.$el.find(b.sel.contentContainer),b.$contentStage=b.$el.find(b.sel.contentStage),b.$itemContainer=b.$el.find(b.sel.itemContainer),b.$itemStage=b.$el.find(b.sel.itemStage),b.$itemPrev=b.$el.find(b.sel.itemPrev),b.$itemNext=b.$el.find(b.sel.itemNext),b.$contentPrev=b.$el.find(b.sel.contentPrev),b.$contentNext=b.$el.find(b.sel.contentNext),b.horizontal=b.$el.hasClass(b.cls.horizontal)||b.horizontal,b.horizontal&&b.$el.addClass(b.cls.horizontal),b.noCaptions=b.$el.hasClass(b.cls.noCaptions)||b.noCaptions,b.noCaptions&&b.$el.addClass(b.cls.noCaptions),b.contentNav=b.$el.hasClass(b.cls.contentNav)||b.contentNav,b.contentNav&&b.$el.addClass(b.cls.contentNav)},onInit:function(b,c){a(window).on("resize.fg-slider",{self:c},c.throttle(c.onWindowResize,c.template.throttle)),c.$itemPrev.on("click.fg-slider",{self:c},c.onPrevClick),c.$itemNext.on("click.fg-slider",{self:c},c.onNextClick),c.$contentPrev.on("click.fg-slider",{self:c},c.onContentPrevClick),c.$contentNext.on("click.fg-slider",{self:c},c.onContentNextClick),c.$contentContainer.fgswipe({data:{self:c},allowPageScroll:c.allowPageScroll,swipe:c.onContentSwipe}),c.$itemContainer.fgswipe({data:{self:c},swipe:c.onItemSwipe}).on("DOMMouseScroll.fg-slider mousewheel.fg-slider",{self:c},c.onItemMouseWheel)},onFirstLoad:function(a,b){b.redraw(),b.setSelected(0)},onAfterFilterChange:function(a,b){b.selected=null,b.redraw(),b.setSelected(0)},onDestroy:function(b,c){a(window).off("resize.fg-slider"),c.$itemPrev.off("click.fg-slider"),c.$itemNext.off("click.fg-slider"),c.$contentPrev.off("click.fg-slider"),c.$contentNext.off("click.fg-slider"),c.$contentContainer.fgswipe("destroy"),c.$itemContainer.fgswipe("destroy").off("DOMMouseScroll.fg-slider mousewheel.fg-slider")},onParsedOrCreatedItem:function(b){if(!b.isError){var c=this;b.$anchor.add(b.$image).attr("draggable",!1),b.$anchor.add(b.$caption).off("click.foogallery"),b.$inner.on("click.foogallery",{self:c,item:b},c.onItemClick),b.$content=a("<div/>",{class:c.cls.content}).append(a("<div/>",{class:c.cls.contentImage})).append(a("<p/>",{class:c.cls.contentText}).html(b.caption).append(a("<small/>").html(b.description))),"video"===b.type?(b.index=-1,b.player=c.helper.getPlayer(b.href,{}),b.$content.append(a("<div/>",{class:c.cls.contentClose}).on("click.foogallery",{self:c,item:b},c.onCloseVideo),a("<div/>",{class:c.cls.contentPlay}).on("click.foogallery",{self:c,item:b},c.onPlayVideo))):"embed"===b.type&&(b.$embed=a("<div/>",{class:c.cls.embed}),b.$content.addClass(c.cls.embedable).append(b.$embed),b.$target=a(b.href).contents())}},onParsedItem:function(a,b,c){b.onParsedOrCreatedItem(c)},onCreatedItem:function(a,b,c){b.onParsedOrCreatedItem(c)},onDestroyedItem:function(c,d,e){"video"===e.type&&e.player instanceof b.VideoPlayer&&(e.player.$el.detach(),e.$el.add(e.$content).removeClass(d.cls.playing)),"embed"===e.type&&e.$target&&(e.$target.detach(),a(e.href).append(e.$target)),e.$el.add(e.$content).removeClass(d.cls.selected),e.$inner.off("click.foogallery")},onAppendItem:function(a,b,c){a.preventDefault(),b.$itemStage.append(c.$el),b.$contentStage.append(c.$content),c.isAttached=!0},onDetachItem:function(c,d,e){c.preventDefault(),"video"===e.type&&e.player instanceof b.VideoPlayer&&(e.player.$el.detach(),e.$el.add(e.$content).removeClass(d.cls.playing)),"embed"===e.type&&e.$target&&(e.$target.detach(),a(e.href).append(e.$target)),e.$el.add(e.$content).removeClass(d.cls.selected).detach(),e.isAttached=!1},onLayout:function(a,b){b.redraw()},onWindowResize:function(a){a.data.self.redraw()},getBreakpoint:function(){var b=this,c=b.useViewport?a(window).width():b.getContainerWidth();b.breakpoints.sort(function(a,b){return a.width-b.width});for(var d=0,e=b.breakpoints.length;d<e;d++)if(b.breakpoints[d].width>=c)return b.breakpoints[d];return b.breakpoints[b.breakpoints.length-1]},getMaxVisibleItems:function(){var a=this,b=a.noCaptions?a._breakpoint.items.h.noCaptions:a._breakpoint.items.h.captions;return a.horizontal?b:a._breakpoint.items.v},redraw:function(){var c=this,d=c.selected instanceof b.Item?c.selected.index:0,e=c.items.available(),f=e.length,g=c._breakpoint;c.$el.addClass("fgs-transitions-disabled"),c.horizontal=c.$el.hasClass(c.cls.horizontal),c.$el.toggleClass(c.cls.horizontal,c.horizontal),c.noCaptions=c.$el.hasClass(c.cls.noCaptions),c.$el.toggleClass(c.cls.noCaptions,c.noCaptions),c._breakpoint=c.getBreakpoint(),c.$el.removeClass(c.allBreakpointClasses).addClass(c._breakpoint.classes);var h=c.getMaxVisibleItems()-1,i=c.getContainerWidth();if(-1==c._firstVisible||-1==c._lastVisible?(c._firstVisible=0,c._lastVisible=h):c._breakpoint!=g&&(d>c._firstVisible+h&&(c._firstVisible+=d-(c._firstVisible+h)),c._firstVisible=d,c._lastVisible=d+h),c.$itemPrev.toggle(c._firstVisible>0),c.$itemNext.toggle(c._lastVisible<f-1),c._contentWidth=i-(c.horizontal?0:c.noCaptions?c._breakpoint.size.v.items.noCaptions:c._breakpoint.size.v.items.width),c._contentHeight=c.horizontal?c._breakpoint.size.h.height:c._breakpoint.size.v.height,f>0){c.$contentStage.width(c._contentWidth*f);var j=Math.max(i/c.getMaxVisibleItems());a.each(e,function(a,b){b.index=a,b.$content.width(c._contentWidth).css("left",a*c._contentWidth),c.horizontal?b.$el.css({width:j,left:a*j}):b.$el.css({width:"",left:""})}),c.$contentStage.css("transform","translateX(-"+d*c._contentWidth+"px)"),c._itemWidth=c.horizontal?j:c.noCaptions?c._breakpoint.size.v.items.noCaptions:c._breakpoint.size.v.items.width,c._itemHeight=c.horizontal?c._breakpoint.size.h.items:c._breakpoint.size.v.items.height,c.setVisible(c._firstVisible,!1)}c.$el.removeClass("fgs-transitions-disabled")},setEmbedSize:function(a){var b=this,c=b._contentHeight,d=a.$anchor.data("height"),e=b._contentWidth,f=a.$anchor.data("width"),g=c/d,h=e/f,i=0;i=g<h?g:h,i>0&&i<1?a.$embed.css({height:d*i,width:f*i}):a.$embed.css({height:"",width:""})},setSelected:function(c){var e=this,f=e.selected,g=c,h=e.items.available();if(d.number(c)&&(c=c<0?0:c>=h.length?h.length-1:c,g=h[c]),f!=g&&g instanceof b.Item){if(f instanceof b.Item&&("video"===f.type&&f.player instanceof b.VideoPlayer&&(f.player.$el.detach(),f.$el.add(f.$content).removeClass(e.cls.playing)),"embed"===f.type&&f.$target&&(f.$target.detach(),a(f.href).append(f.$target)),f.$el.add(f.$content).removeClass(e.cls.selected)),e.setBackgroundImage(g),e.$contentStage.css("transform","translateX(-"+g.index*e._contentWidth+"px)"),g.$el.add(g.$content).addClass(e.cls.selected),e.template.autoPlay&&"video"===g.type&&g.player instanceof b.VideoPlayer&&(g.$el.add(g.$content).addClass(e.cls.playing),g.player.appendTo(g.$content).load()),"embed"===g.type&&g.$target&&(g.$target.appendTo(g.$embed),e.setEmbedSize(g)),e.selected=g,g.index<=e._firstVisible||g.index>=e._lastVisible){var i=f instanceof b.Item&&g.index>f.index,j=i?g.index==e._lastVisible?g.index+1:g.index:g.index==e._firstVisible?g.index-1:g.index;e.setVisible(j,i)}var k=g.index-1,l=g.index+1;k=k<0?h.length-1:k>=h.length?0:k,l=l<0?h.length-1:l>=h.length?0:l,e.$contentPrev.data("index",k),e.$contentNext.data("index",l)}},setBackgroundImage:function(b){if("embed"!==b.type&&!b.isError&&!b.isBackgroundLoaded&&d.jq(b.$content)){var c=this,e="video"===b.type?b.cover:b.href,f=a("<div/>",{class:"fg-loader"}).appendTo(b.$content.addClass(c.cls.loading)),g=new Image;g.onload=function(){g.onload=g.onerror=null,f.remove(),b.$content.removeClass(c.cls.loading).find(c.sel.contentImage).css("background-image","url('"+e+"')")},g.onerror=function(){f.remove(),b.$content.removeClass(c.cls.loading)},g.src=e,g.complete&&g.onload(),b.isBackgroundLoaded=!0}},setVisible:function(a,b){var c=this,d=c.items.count(),e=c.getMaxVisibleItems()-1;if(a=a<0?0:a>=d?d-1:a,b&&(a=a-e<0?0:a-e),a>=0&&a<d){c._firstVisible=a,c._lastVisible=a+e;var g=c.horizontal?"translateX(-"+(a*c._itemWidth+1)+"px) translateY(0px)":"translateX(0px) translateY(-"+(a*c._itemHeight+1)+"px)";f.start(c.$itemStage,function(a){a.css("transform",g)}).then(function(){c.loadAvailable()})}else c.loadAvailable();c.$itemPrev.toggle(c._firstVisible>0),c.$itemNext.toggle(c._lastVisible<d-1)},onItemClick:function(a){a.preventDefault(),a.data.self.setSelected(a.data.item)},onContentPrevClick:function(a){a.preventDefault();var b=a.data.self;b.setSelected(b.$contentPrev.data("index"))},onContentNextClick:function(a){a.preventDefault();var b=a.data.self;b.setSelected(b.$contentNext.data("index"))},onPrevClick:function(a){a.preventDefault();var b=a.data.self;b.setVisible(b._firstVisible-1)},onNextClick:function(a){var b=a.data.self;b.setVisible(b._lastVisible+1,!0)},onPlayVideo:function(a){var b=a.data.self,c=a.data.item;c.$el.add(c.$content).addClass(b.cls.playing),c.player.appendTo(c.$content).load()},onCloseVideo:function(a){var b=a.data.self,c=a.data.item;c.player.$el.detach(),c.$el.add(c.$content).removeClass(b.cls.playing)},onItemMouseWheel:function(a){var b=a.data.self,c=b.items.count()-1,d=Math.max(-1,Math.min(1,a.originalEvent.wheelDelta||-a.originalEvent.detail));d>0&&b._firstVisible>0?(b.setVisible(b._firstVisible-1),a.preventDefault()):d<0&&b._lastVisible<c&&(b.setVisible(b._lastVisible+1,!0),a.preventDefault())},onItemSwipe:function(b,c){var d=c.self,e=1;d.horizontal?(e=Math.ceil(b.distance/d._itemWidth),-1!==a.inArray(b.direction,["NE","E","SE"])&&d.setVisible(d._firstVisible-e),-1!==a.inArray(b.direction,["NW","W","SW"])&&d.setVisible(d._lastVisible+e,!0)):(e=Math.ceil(b.distance/d._itemHeight),-1!==a.inArray(b.direction,["SW","S","SE"])&&d.setVisible(d._firstVisible-e),-1!==a.inArray(b.direction,["NW","N","NE"])&&d.setVisible(d._lastVisible+e,!0))},onContentSwipe:function(b,c){var d=c.self;-1!==a.inArray(b.direction,["NE","E","SE"])&&d.setSelected(d.selected.index-1),-1!==a.inArray(b.direction,["NW","W","SW"])&&d.setSelected(d.selected.index+1)}}),b.template.register("slider",b.SliderTemplate,{template:{horizontal:!1,useViewport:!1,noCaptions:!1,autoPlay:!1,contentNav:!1,allowPageScroll:{x:!1,y:!0},breakpoints:[{width:480,classes:"fgs-xs",items:{h:{captions:2,noCaptions:5},v:6},size:{h:{height:336,items:56},v:{height:336,items:{noCaptions:70,width:100,height:56}}}},{width:768,classes:"fgs-sm",items:{h:{captions:3,noCaptions:7},v:7},size:{h:{height:420,items:56},v:{height:392,items:{noCaptions:100,width:150,height:56}}}},{width:1024,classes:"fgs-md",items:{h:{captions:4,noCaptions:9},v:6},size:{h:{height:520,items:77},v:{height:461,items:{noCaptions:150,width:220,height:77}}}},{width:1280,classes:"fgs-lg",items:{h:{captions:5,noCaptions:11},v:7},size:{h:{height:546,items:77},v:{height:538,items:{noCaptions:150,width:280,height:77}}}},{width:1600,classes:"fgs-xl",items:{h:{captions:6,noCaptions:13},v:8},size:{h:{height:623,items:77},v:{height:615,items:{noCaptions:150,width:280,height:77}}}}],player:{autoPlay:!0,width:"100%",height:"100%"},throttle:150}},{container:"foogallery fg-slider",contentContainer:"fgs-content-container",contentStage:"fgs-content-stage",content:"fgs-content",contentImage:"fgs-content-image",contentText:"fgs-content-text",contentPlay:"fgs-content-play",contentClose:"fgs-content-close",contentPrev:"fgs-content-prev",contentNext:"fgs-content-next",contentNav:"fgs-content-nav",itemContainer:"fgs-item-container",itemStage:"fgs-item-stage",itemPrev:"fgs-item-prev",itemNext:"fgs-item-next",horizontal:"fgs-horizontal",selected:"fgs-selected",loading:"fgs-loading",playing:"fgs-playing",noCaptions:"fgs-no-captions",embed:"fgs-embed",embedable:"fgs-embedable"})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.obj,FooGallery.utils.transition);