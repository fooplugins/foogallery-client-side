/*
* FooGallery - The Most Intuitive and Extensible Gallery Creation and Management Tool Ever Created for WordPress
* @version 1.0.22
* @link 
* @copyright Steven Usher & Brad Vincent 2015
* @license Released under the GPLv3 license.
*/

!function(a,b,c,d,e){b.SliderTemplate=b.Template.extend({construct:function(c,d){var e=this;e._super(c,d),e.$contentContainer=a(),e.$contentStage=a(),e.$itemContainer=a(),e.$itemStage=a(),e.$itemPrev=a(),e.$itemNext=a(),e.selected=null,e.helper=new b.VideoHelper(e.template.player),e.horizontal=e.template.horizontal,e.noCaptions=e.template.noCaptions,e.useViewport=e.template.useViewport,e.breakpoints=e.template.breakpoints,e.allBreakpointClasses=a.map(e.breakpoints,function(a){return a.classes}).join(" "),e._contentWidth=0,e._contentHeight=0,e._firstVisible=-1,e._lastVisible=-1,e._breakpoint=null},create:function(){var b=this;return a("<div/>",{id:b.id,class:b.cls.container}).addClass(b.opt.classes).append(b.createChildren())},createChildren:function(){var b=this;return[a("<div/>",{class:b.cls.contentContainer}).append(a("<div/>",{class:b.cls.contentStage})),a("<div/>",{class:b.cls.itemContainer}).append(a("<div/>",{class:b.cls.itemPrev}),a("<div/>",{class:b.cls.itemStage}),a("<div/>",{class:b.cls.itemNext}))]},onPreInit:function(a,b){b.$el.addClass(b.cls.container).addClass(b.opt.classes),0==b.$el.children().length&&b.$el.append(b.createChildren()),b.$contentContainer=b.$el.find(b.sel.contentContainer),b.$contentStage=b.$el.find(b.sel.contentStage),b.$itemContainer=b.$el.find(b.sel.itemContainer),b.$itemStage=b.$el.find(b.sel.itemStage),b.$itemPrev=b.$el.find(b.sel.itemPrev),b.$itemNext=b.$el.find(b.sel.itemNext),b.horizontal=b.$el.hasClass(b.cls.horizontal)||b.horizontal,b.horizontal&&b.$el.addClass(b.cls.horizontal),b.noCaptions=b.$el.hasClass(b.cls.noCaptions)||b.noCaptions,b.noCaptions&&b.$el.addClass(b.cls.noCaptions)},onInit:function(b,c){a(window).on("resize.fg-slider",{self:c},c.throttle(c.onWindowResize,c.template.throttle)),c.$itemPrev.on("click.fg-slider",{self:c},c.onPrevClick),c.$itemNext.on("click.fg-slider",{self:c},c.onNextClick),c.$contentContainer.fgswipe({data:{self:c},swipe:c.onContentSwipe}),c.$itemContainer.fgswipe({data:{self:c},swipe:c.onItemSwipe}).on("DOMMouseScroll.fg-slider mousewheel.fg-slider",{self:c},c.onItemMouseWheel)},onFirstLoad:function(a,b){b.layout(),b.setSelected(0)},onAfterFilterChange:function(a,b){b.selected=null,b.layout(),b.setSelected(0)},onDestroy:function(b,c){a(window).off("resize.fg-slider"),c.$itemPrev.off("click.fg-slider"),c.$itemNext.off("click.fg-slider"),c.$contentContainer.fgswipe("destroy"),c.$itemContainer.fgswipe("destroy").off("DOMMouseScroll.fg-slider mousewheel.fg-slider")},onParsedOrCreatedItem:function(b){if(!b.isError){var c=this;b.$anchor.add(b.$image).attr("draggable",!1),b.$anchor.add(b.$caption).off("click.foogallery"),b.$inner.on("click.foogallery",{self:c,item:b},c.onItemClick),b.$content=a("<div/>",{class:c.cls.content}).append(a("<p/>",{class:c.cls.contentText}).html(b.caption).append(a("<small/>").html(b.description))),"video"===b.type?(b.index=-1,b.player=c.helper.getPlayer(b.href,{}),b.$content.css("background-image","url("+b.cover+")").append(a("<div/>",{class:c.cls.contentClose}).on("click.foogallery",{self:c,item:b},c.onCloseVideo),a("<div/>",{class:c.cls.contentPlay}).on("click.foogallery",{self:c,item:b},c.onPlayVideo))):b.$content.css("background-image","url("+b.href+")")}},onParsedItem:function(a,b,c){b.onParsedOrCreatedItem(c)},onCreatedItem:function(a,b,c){b.onParsedOrCreatedItem(c)},onAppendItem:function(a,b,c){a.preventDefault(),b.$itemStage.append(c.$el),b.$contentStage.append(c.$content),c.isAttached=!0},onDetachItem:function(a,c,d){a.preventDefault(),"video"===d.type&&d.player instanceof b.VideoPlayer&&(d.player.$el.detach(),d.$el.add(d.$content).removeClass(c.cls.playing)),d.$el.add(d.$content).removeClass(c.cls.selected).detach(),d.isAttached=!1},onLayout:function(a,b){b.layout()},onWindowResize:function(a){a.data.self.layout()},getBreakpoint:function(){var b=this,c=b.useViewport?a(window).width():b.$el.outerWidth();b.breakpoints.sort(function(a,b){return a.width-b.width});for(var d=0,e=b.breakpoints.length;d<e;d++)if(b.breakpoints[d].width>=c)return b.breakpoints[d];return b.breakpoints[b.breakpoints.length-1]},getMaxVisibleItems:function(){var a=this,b=a.noCaptions?a._breakpoint.items.h.noCaptions:a._breakpoint.items.h.captions;return a.horizontal?b:a._breakpoint.items.v},layout:function(){var c=this,d=c.selected instanceof b.Item?c.selected.index:0,e=c.items.available(),f=e.length,g=c._breakpoint;c._breakpoint=c.getBreakpoint(),c.$el.removeClass(c.allBreakpointClasses).addClass(c._breakpoint.classes);var h=c.getMaxVisibleItems()-1;if(-1==c._firstVisible||-1==c._lastVisible?(c._firstVisible=0,c._lastVisible=h):c._breakpoint!=g&&(d>c._firstVisible+h&&(c._firstVisible+=d-(c._firstVisible+h)),c._firstVisible=d,c._lastVisible=d+h),c.$itemPrev.toggle(c._firstVisible>0),c.$itemNext.toggle(c._lastVisible<f-1),c._contentWidth=c.$contentContainer.width(),c._contentHeight=c.$contentContainer.height(),f>0){c.$contentStage.width(c._contentWidth*f);var i=Math.max((c._contentWidth+1)/c.getMaxVisibleItems());a.each(e,function(a,b){b.index=a,b.$content.width(c._contentWidth).css("left",a*c._contentWidth),c.horizontal&&b.$el.css({width:i,left:a*i})}),c.$contentStage.css("transform","translateX(-"+d*c._contentWidth+"px)"),c._itemWidth=e[0].$el.outerWidth(),c._itemHeight=e[0].$el.outerHeight()}},setSelected:function(a){var c=this,e=c.selected,f=a;if(d.number(a)){var g=c.items.available();a=a<0?0:a>=g.length?g.length-1:a,f=g[a]}if(e!=f&&f instanceof b.Item&&(e instanceof b.Item&&("video"===e.type&&e.player instanceof b.VideoPlayer&&(e.player.$el.detach(),e.$el.add(e.$content).removeClass(c.cls.playing)),e.$el.add(e.$content).removeClass(c.cls.selected)),c.$contentStage.css("transform","translateX(-"+f.index*c._contentWidth+"px)"),f.$el.add(f.$content).addClass(c.cls.selected),c.template.autoPlay&&"video"===f.type&&f.player instanceof b.VideoPlayer&&(f.$el.add(f.$content).addClass(c.cls.playing),f.player.appendTo(f.$content).load()),c.selected=f,f.index<=c._firstVisible||f.index>=c._lastVisible)){var h=e instanceof b.Item&&f.index>e.index,i=h?f.index==c._lastVisible?f.index+1:f.index:f.index==c._firstVisible?f.index-1:f.index;c.setVisible(i,h)}},setVisible:function(a,b){var c=this,d=c.items.count(),f=c.getMaxVisibleItems()-1;if(a=a<0?0:a>=d?d-1:a,b&&(a=a-f<0?0:a-f),a>=0&&a<d){c._firstVisible=a,c._lastVisible=a+f;var g=c.horizontal?"translateX(-"+(a*c._itemWidth+1)+"px) translateY(0px)":"translateX(0px) translateY(-"+(a*c._itemHeight+1)+"px)";e.start(c.$itemStage,function(a){a.css("transform",g)}).then(function(){c.loadAvailable()})}else c.loadAvailable();c.$itemPrev.toggle(c._firstVisible>0),c.$itemNext.toggle(c._lastVisible<d-1)},onItemClick:function(a){a.preventDefault(),a.data.self.setSelected(a.data.item)},onPrevClick:function(a){a.preventDefault();var b=a.data.self;b.setVisible(b._firstVisible-1)},onNextClick:function(a){var b=a.data.self;b.setVisible(b._lastVisible+1,!0)},onPlayVideo:function(a){var b=a.data.self,c=a.data.item;c.$el.add(c.$content).addClass(b.cls.playing),c.player.appendTo(c.$content).load()},onCloseVideo:function(a){var b=a.data.self,c=a.data.item;c.player.$el.detach(),c.$el.add(c.$content).removeClass(b.cls.playing)},onItemMouseWheel:function(a){var b=a.data.self,c=b.items.count()-1,d=Math.max(-1,Math.min(1,a.originalEvent.wheelDelta||-a.originalEvent.detail));d>0&&b._firstVisible>0?(b.setVisible(b._firstVisible-1),a.preventDefault()):d<0&&b._lastVisible<c&&(b.setVisible(b._lastVisible+1,!0),a.preventDefault())},onItemSwipe:function(b,c){var d=c.self,e=1;d.horizontal?(e=Math.ceil(b.distance/d._itemWidth),-1!==a.inArray(b.direction,["NE","E","SE"])&&d.setVisible(d._firstVisible-e),-1!==a.inArray(b.direction,["NW","W","SW"])&&d.setVisible(d._lastVisible+e,!0)):(e=Math.ceil(b.distance/d._itemHeight),-1!==a.inArray(b.direction,["SW","S","SE"])&&d.setVisible(d._firstVisible-e),-1!==a.inArray(b.direction,["NW","N","NE"])&&d.setVisible(d._lastVisible+e,!0))},onContentSwipe:function(b,c){var d=c.self;-1!==a.inArray(b.direction,["NE","E","SE"])&&d.setSelected(d.selected.index-1),-1!==a.inArray(b.direction,["NW","W","SW"])&&d.setSelected(d.selected.index+1)},onFixItem:function(a){a.preventDefault()},onUnfixItem:function(a){a.preventDefault()}}),b.template.register("slider",b.SliderTemplate,{template:{horizontal:!1,useViewport:!1,noCaptions:!1,autoPlay:!1,breakpoints:[{width:480,classes:"fgs-xs",items:{h:{captions:2,noCaptions:5},v:6}},{width:768,classes:"fgs-sm",items:{h:{captions:3,noCaptions:7},v:7}},{width:1024,classes:"fgs-md",items:{h:{captions:4,noCaptions:9},v:6}},{width:1280,classes:"fgs-lg",items:{h:{captions:5,noCaptions:11},v:7}},{width:1600,classes:"fgs-xl",items:{h:{captions:6,noCaptions:13},v:8}}],player:{autoPlay:!0,width:"100%",height:"100%"},throttle:150}},{container:"foogallery fg-slider",contentContainer:"fgs-content-container",contentStage:"fgs-content-stage",content:"fgs-content",contentText:"fgs-content-text",contentPlay:"fgs-content-play",contentClose:"fgs-content-close",itemContainer:"fgs-item-container",itemStage:"fgs-item-stage",itemPrev:"fgs-item-prev",itemNext:"fgs-item-next",horizontal:"fgs-horizontal",selected:"fgs-selected",playing:"fgs-playing",noCaptions:"fgs-no-captions"})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.transition);