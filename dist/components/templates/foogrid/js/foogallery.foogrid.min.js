/*
* FooGallery - The Most Intuitive and Extensible Gallery Creation and Management Tool Ever Created for WordPress
* @version 1.2.10
* @link 
* @copyright Steven Usher & Brad Vincent 2015
* @license Released under the GPLv3 license.
*/

!function(a,b,c,d,e){b.GridPro=b.Component.extend({construct:function(a,b){var c=this;c._super(a),c.opt=b,c.$el=null,c.isFirst=!0},preinit:function(){var b=this;b.$el=a("<section/>",{class:"foogrid-content"}),b.tmpl.panel.opt.transition="none",b.tmpl.$el.hasClass("foogrid-transition-horizontal")&&(b.tmpl.panel.opt.transition="horizontal"),b.tmpl.$el.hasClass("foogrid-transition-vertical")&&(b.tmpl.panel.opt.transition="vertical"),b.tmpl.$el.hasClass("foogrid-transition-fade")&&(b.tmpl.panel.opt.transition="fade"),b.tmpl.$el.hasClass("foogrid-caption-below")&&(b.tmpl.panel.opt.caption="bottom"),b.tmpl.$el.hasClass("foogrid-caption-right")&&(b.tmpl.panel.opt.caption="right")},init:function(){},destroy:function(){var a=this;a.$el.remove(),a._super()},layout:function(a,b){},onParsedOrCreatedItem:function(a){if(!a.isError){var b=this;a.$anchor.on("click.gg",{self:b,item:a},b.onAnchorClick)}},transitionsEnabled:function(){return e.supported&&!this.disableTransitions&&this.tmpl.panel.hasTransition},isNewRow:function(a){var b=this;return b.getOffsetTop(b.tmpl.panel.currentItem)!==b.getOffsetTop(a)},getOffsetTop:function(a){return a instanceof b.Item&&a.isCreated?a.$el.offset().top:0},scrollTo:function(b,d,e){var f=this;b=(c.number(b)?b:0)-+f.opt.scrollOffset,d=!c.boolean(d)||d,e=c.number(e)?e:300;var g=a("#wpadminbar"),h=a("html, body");return 1===g.length&&(b-=g.height()),a.Deferred(function(a){f.opt.scroll&&d?f.opt.scrollSmooth&&!f.tmpl.panel.isExpanded?h.animate({scrollTop:b},e,function(){a.resolve()}):(h.scrollTop(b),a.resolve()):a.resolve()})},open:function(c){var d=this;if(-1!==c.index){var e=d.tmpl.panel,f=d.isNewRow(c);return e.currentItem instanceof b.Item&&f&&!e.isExpanded?d.doClose(f).then(function(){return d.doOpen(c,f)}):d.doOpen(c,f)}return a.when()},doOpen:function(b,c){var d=this,f=d.tmpl.panel;return a.Deferred(function(a){d.scrollTo(d.getOffsetTop(b),c||d.isFirst).then(function(){b.$el.after(d.$el),f.isAttached||f.appendTo(d.$el),d.transitionsEnabled()&&!f.isExpanded&&(d.opt.transitionOpen&&d.isFirst||d.opt.transitionRow&&c)?(d.isFirst=!1,e.start(d.$el,"foogrid-visible",!0,350).then(function(){a.resolve()})):(d.$el.addClass("foogrid-visible"),a.resolve())})}).then(function(){return f.load(b)}).then(function(){return d.tmpl.breakpoints.check(),d.$el.focus(),d.isBusy=!1,d.scrollTo(d.getOffsetTop(b),!0)}).promise()},close:function(a){a=!!c.boolean(a)&&a;var b=this;return b.disableTransitions=a,b.doClose(!1).then(function(){b.disableTransitions=!1})},doClose:function(c){var d=this,f=d.tmpl.panel;return a.Deferred(function(a){f.currentItem instanceof b.Item&&f.doClose().then(function(){d.transitionsEnabled()&&!f.isExpanded&&(d.opt.transitionRow&&c||d.opt.transitionOpen&&!c)?e.start(d.$el,"foogrid-visible",!1,350).then(function(){a.resolve()}):(d.$el.removeClass("foogrid-visible"),a.resolve())})}).always(function(){c||(f.detach(),d.$el.detach(),d.isFirst=!0)}).promise()},toggle:function(a){var c=this,e=c.tmpl.panel;return a instanceof b.Item?e.currentItem===a?c.close():c.open(a):d.reject()},onAnchorClick:function(a){a.preventDefault(),a.data.self.toggle(a.data.item)}})}(FooGallery.$,FooGallery,FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.transition),function(a,b,c){b.FooGridTemplate=b.Template.extend({construct:function(a,d){var e=this;e._super(c.extend({},a,{panel:{enabled:!0}}),d),e.foogrid=new b.GridPro(e,e.template),e.hadState=!1},onPreInit:function(a,b){b.foogrid.preinit()},onInit:function(a,b){b.foogrid.init()},onDestroy:function(a,b){b.foogrid.destroy()},onNextPanel:function(a,b,c,d,e){a.preventDefault(),b.foogrid.open(e)},onPrevPanel:function(a,b,c,d,e){a.preventDefault(),b.foogrid.open(e)},onClosePanel:function(a,b,c){a.preventDefault(),b.foogrid.close()},onParsedItem:function(a,b,c){b.foogrid.onParsedOrCreatedItem(c)},onCreatedItem:function(a,b,c){b.foogrid.onParsedOrCreatedItem(c)},onAfterState:function(a,b,c){c.item&&(b.foogrid.layout(!0,c.item.index),b.foogrid.open(c.item.index),b.hadState=!0)},onFirstLoad:function(a,b){b.foogrid.layout(!b.hadState)},onReady:function(a,b){b.foogrid.layout()},onBeforePageChange:function(a,b,c,d,e,f){f||b.foogrid.close(!0)},onAfterPageChange:function(a,b,c,d,e){e||b.foogrid.layout(!0)},onBeforeFilterChange:function(a,b,c,d,e){b.foogrid.close(!0)},onAfterFilterChange:function(a,b){b.foogrid.layout(!0)}}),b.template.register("foogrid",b.FooGridTemplate,{template:{scroll:!0,scrollOffset:0,scrollSmooth:!0,loop:!0,external:"_blank",externalText:null,keyboard:!0,transitionRow:!0,transitionOpen:!0},panel:{enabled:!0,theme:"fg-light",highlight:"fg-highlight-blue",caption:"none"}},{container:"foogallery foogrid"})}(FooGallery.$,FooGallery,FooGallery.utils.obj);