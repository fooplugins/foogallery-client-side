/*
* FooGallery - The Most Intuitive and Extensible Gallery Creation and Management Tool Ever Created for WordPress
* @version 1.3.6
* @link 
* @copyright Steven Usher & Brad Vincent 2015
* @license Released under the GPLv3 license.
*/

!function(a,b,c,d,e,f){b.FooGridTemplate=b.Template.extend({construct:function(a,c){var d=this;d._super(a,c),d.$section=null,d.panel=new b.Panel(d,d.template),d.isFirst=!1},onPreInit:function(b,c){c.$section=a("<section/>",{class:"foogrid-content"}),"none"===c.panel.opt.transition&&(c.$el.hasClass("foogrid-transition-horizontal")&&(c.panel.opt.transition="horizontal"),c.$el.hasClass("foogrid-transition-vertical")&&(c.panel.opt.transition="vertical"),c.$el.hasClass("foogrid-transition-fade")&&(c.panel.opt.transition="fade")),"none"===c.panel.opt.info&&(c.$el.hasClass("foogrid-caption-below")&&(c.panel.opt.info="bottom"),c.$el.hasClass("foogrid-caption-right")&&(c.panel.opt.info="right")),null===c.panel.opt.theme&&(c.panel.opt.theme=c.getCSSClass("theme")),"fg-light"===c.panel.opt.theme&&null===c.panel.opt.button&&(c.panel.opt.button="fg-button-blue"),"fg-dark"===c.panel.opt.theme&&null===c.panel.opt.button&&(c.panel.opt.button="fg-button-dark")},ready:function(){var a=this;return!!a._super()&&(b.breakpoints.register(a.$el,a.template.outerBreakpoints),!0)},destroy:function(a){var c=this,d=c._super.bind(c);return c.panel.destroy().then(function(){return b.breakpoints.remove(c.$el),c.$section.remove(),d(a)})},onPanelNext:function(a,b,c,d,e){a.preventDefault(),b.open(e)},onPanelPrev:function(a,b,c,d,e){a.preventDefault(),b.open(e)},onPanelClose:function(a,b,c){a.preventDefault(),b.close(!1,!0)},onPanelAreaLoad:function(a,b,c,d){"content"===c.name&&d.item.$el.addClass(b.cls.visible)},onPanelAreaUnload:function(a,b,c,d){"content"===c.name&&d.item.$el.removeClass(b.cls.visible)},onParsedItem:function(b,c,d){d.isError||(d.$anchor.on("click.gg",{self:c,item:d},c.onAnchorClick),d.$el.append(a("<span/>").addClass([c.cls.currentPointer,c.panel.opt.theme].join(" "))))},onCreatedItem:function(b,c,d){d.isError||(d.$anchor.on("click.gg",{self:c,item:d},c.onAnchorClick),d.$el.append(a("<span/>").addClass([c.cls.currentPointer,c.panel.opt.theme].join(" "))))},onDestroyItem:function(a,b,c){c.isError||(c.$anchor.off("click.gg",b.onAnchorClick),c.$el.find(b.sel.currentPointer).remove())},onAfterState:function(a,c,d){d.item instanceof b.Item&&c.open(d.item)},onBeforePageChange:function(a,b,c,d,e,f){f||b.panel.isMaximized||b.close(!0,b.panel.isAttached)},onBeforeFilterChange:function(a,b,c,d,e){b.panel.isMaximized||b.close(!0,b.panel.isAttached)},onAnchorClick:function(a){a.preventDefault(),a.data.self.toggle(a.data.item)},transitionsEnabled:function(){return f.supported&&!this.disableTransitions&&this.panel.hasTransition},isNewRow:function(a){var b=this;return b.getOffsetTop(b.panel.currentItem)!==b.getOffsetTop(a)},getOffsetTop:function(a){return a instanceof b.Item&&a.isCreated?a.$el.offset().top:0},scrollTo:function(b,d,e){var f=this;b=(c.number(b)?b:0)-+f.template.scrollOffset,d=!c.boolean(d)||d,e=c.number(e)?e:300;var g=a("#wpadminbar"),h=a("html, body");return 1===g.length&&(b-=g.height()),a.Deferred(function(a){f.template.scroll&&d?f.template.scrollSmooth&&!f.panel.isMaximized?h.animate({scrollTop:b},e,function(){a.resolve()}):(h.scrollTop(b),a.resolve()):a.resolve()})},open:function(c){var d=this;if(-1!==c.index){var e=d.isNewRow(c);return d.panel.currentItem instanceof b.Item&&e&&!d.panel.isMaximized?d.doClose(e).then(function(){return d.pages&&!d.pages.contains(d.pages.current,c)&&d.pages.goto(d.pages.find(c)),d.doOpen(c,e)}):(d.pages&&!d.pages.contains(d.pages.current,c)&&d.pages.goto(d.pages.find(c)),d.doOpen(c,e))}return a.when()},doOpen:function(b,c){var d=this;return a.Deferred(function(a){d.scrollTo(d.getOffsetTop(b),c||d.isFirst).then(function(){d.panel.appendTo(d.$section),c&&b.$el.after(d.$section),d.transitionOpen(c)?(d.isFirst=!1,f.start(d.$section,d.cls.visible,!0,350).then(function(){a.resolve()})):(d.$section.addClass(d.cls.visible),a.resolve())})}).then(function(){return d.scrollTo(d.getOffsetTop(b),!0)}).then(function(){return d.panel.load(b)}).then(function(){d.$section.focus(),d.isBusy=!1}).promise()},transitionOpen:function(a){return this.transitionsEnabled()&&!this.panel.isMaximized&&(this.template.transitionOpen&&this.isFirst||this.template.transitionRow&&a)},close:function(a,b){a=!!c.boolean(a)&&a;var d=this,e=d.disableTransitions;return d.disableTransitions=a,d.doClose(b).then(function(){d.disableTransitions=e})},doClose:function(c){var d=this;return a.Deferred(function(a){d.panel.currentItem instanceof b.Item?(c&&d.panel.currentItem.$el.removeClass(d.cls.visible),d.transitionClose(c)?f.start(d.$section,d.cls.visible,!1,350).then(function(){d.panel.doClose(!0,!0).then(function(){a.resolve()})}):(d.$section.removeClass(d.cls.visible),d.panel.doClose(!0,!0).then(function(){a.resolve()}))):a.resolve()}).always(function(){d.$section.detach(),d.isFirst=!0}).promise()},transitionClose:function(a){return this.transitionsEnabled()&&!this.panel.isMaximized&&(this.template.transitionRow&&a||this.template.transitionOpen&&!a)},toggle:function(a){var c=this;return a instanceof b.Item?c.panel.currentItem===a?c.close():c.open(a):d.reject()}}),b.template.register("foogrid",b.FooGridTemplate,{template:{classNames:"foogrid-panel",scroll:!0,scrollOffset:0,scrollSmooth:!1,loop:!0,external:"_blank",externalText:null,keyboard:!0,transitionRow:!0,transitionOpen:!0,info:"bottom",infoVisible:!0,infoOverlay:!1,buttons:{fullscreen:!1},outerBreakpoints:{"x-small":480,small:768,medium:1024,large:1280,"x-large":1600}}},{container:"foogallery foogrid",currentPointer:"fg-current-pointer",visible:"foogrid-visible"})}(FooGallery.$,FooGallery,FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.obj,FooGallery.utils.transition);