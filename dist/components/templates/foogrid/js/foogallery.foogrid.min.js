/*
* FooGallery - The Most Intuitive and Extensible Gallery Creation and Management Tool Ever Created for WordPress
* @version 1.2.4
* @link 
* @copyright Steven Usher & Brad Vincent 2015
* @license Released under the GPLv3 license.
*/

!function(a,b,c,d){function e(b,c){if(!(this instanceof e))return new e(b,c);this.$el=a(b).addClass("foogrid"),this.options=this._options(c,this.$el.data()),this.id=this.options.id||f--,this.deeplinking=new e.Deeplinking(this),this.parser=new e.Parser(this.options.parser),this.content=new e.Content(this),this.items=[],this.disableTransitions=!1}var f=-1;e.defaults={id:null,scroll:!0,scrollOffset:0,scrollSmooth:!0,loop:!0,index:null,external:"_blank",externalText:null,keyboard:!0,transitionRow:!0,transitionOpen:!0,deeplinking:!1,deeplinkingPrefix:"foogrid",video:{},parser:{}},e.prototype.init=function(){this.layout(!0)},e.prototype.layout=function(b,c){var d=this;b&&(a.each(d.items,function(a,b){b.destroy()}),d.items=a.map(a.makeArray(d.$el.find(".fg-item")),function(a,b){return new e.Item(d,a,b)})),d.content.layout(b,c)},e.prototype.destroy=function(){a.each(this.items,function(a,b){b.destroy()}),this.content.destroy(),this.parser.destroy(),this.deeplinking.destroy()},e.prototype._options=function(b,c){var f=a.extend(!0,{},e.defaults,b);return d.number(c.id)&&(f.id=c.id),d.boolean(c.loop)&&(f.loop=c.loop),d.boolean(c.scroll)&&(f.scroll=c.scroll),d.boolean(c.scrollSmooth)&&(f.scrollSmooth=c.scrollSmooth),d.boolean(c.scrollOffset)&&(f.scrollOffset=c.scrollOffset),d.string(c.external)&&(f.external=c.external),d.string(c.externalText)&&(f.externalText=c.externalText),d.boolean(c.keyboard)&&(f.keyboard=c.keyboard),d.boolean(c.transitionRow)&&(f.transitionRow=c.transitionRow),d.boolean(c.transitionOpen)&&(f.transitionOpen=c.transitionOpen),d.boolean(c.deeplinking)&&(f.deeplinking=c.deeplinking),d.string(c.deeplinkingPrefix)&&(f.deeplinkingPrefix=c.deeplinkingPrefix),f},e.prototype.redraw=function(){this.content.redraw()},e.prototype.captions=function(){return this.$el.hasClass("foogrid-caption-below")||this.$el.hasClass("foogrid-caption-right")},e.prototype.transitions=function(){return!this.disableTransitions&&(this.$el.hasClass("foogrid-transition-fade")||this.$el.hasClass("foogrid-transition-horizontal")||this.$el.hasClass("foogrid-transition-vertical"))},e.prototype.open=function(a){return this.content.open(a)},e.prototype.toggle=function(a){return this.content.toggle(a)},e.prototype.prev=function(){return this.content.prev()},e.prototype.next=function(){return this.content.next()},e.prototype.isActive=function(){return this.content.active instanceof e.Item},e.prototype.close=function(a){a=!!d.boolean(a)&&a;var b=this;return b.disableTransitions=a,b.content.close().then(function(){b.disableTransitions=!1})},b.FooGrid=e,a.fn.foogrid=function(b){return this.each(function(c,f){var g=a(this),h=g.data("__FooGrid__");d(h,e)&&h.destroy(),g.data("__FooGrid__",new e(f,b))})}}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(a,b,c,d){b&&(b.Parser=function(a){if(!(this instanceof b.Parser))return new b.Parser(a);this._init(a)},b.Parser.defaults={url:["attr:href","data:url","data:image","data:video"],external:["data:external","attr:href","data:url","data:image","data:video"],type:{image:/\.(jpg|jpeg|png|gif|bmp)/i,video:/youtube(-nocookie)?\.com\/(watch|v|embed)|youtu\.be|vimeo\.com|\.mp4|\.ogv|\.wmv|\.webm|(.+)?(wistia\.(com|net)|wi\.st)\/.*|(www.)?dailymotion\.com|dai\.ly/i,iframe:/^(?!.*?(youtube(-nocookie)?\.com\/(watch|v|embed)|youtu\.be|vimeo\.com|\.mp4|\.ogv|\.wmv|\.webm|(.+)?(wistia\.(com|net)|wi\.st)\/.*|(www.)?dailymotion\.com|dai\.ly|\.(jpg|jpeg|png|gif|bmp)($|\?|#)))https?:\/\/.*?/i,html:/^#.+?$/i},thumbnail:["attr:src","data:thumbnail"],title:["data:captionTitle","data:title","attr:title"],description:["data:captionDesc","data:description","attr:alt"],width:["data:width"],height:["data:height"]},b.Parser.prototype._init=function(c){this.options=a.extend(!0,{},b.Parser.defaults,c),this._a=document.createElement("a")},b.Parser.prototype.destroy=function(){},b.Parser.prototype.parse=function(a){var b=this._type(a),c=parseInt(this._width(a)),e=parseInt(this._height(a)),f={url:this._url(a,b),external:this._external(a),type:b,title:this._title(a),description:this._description(a),width:isNaN(c)?0:c,height:isNaN(e)?0:e};return"video"!==b&&"embed"!==b||(f.thumbnail=this._thumbnail(a)),d.string(f.url)?f:null},b.Parser.prototype._full_url=function(a){return this._a.href=a,this._a.href},b.Parser.prototype._parse=function(b,c){var e,f=null,g=function(b,c){var e=c.split(":");return 2===e.length&&b instanceof a&&d.fn(b[e[0]])?b[e[0]](e[1]):null};return d.string(c)?f=g(b,c):d.array(c)&&a.each(c,function(a,c){if(!d.undef(e=g(b,c))&&null!==e)return f=e,!1}),f},b.Parser.prototype._url=function(a,b){var c=this._parse(a,this.options.url);return"embed"===b?c:this._full_url(c)},b.Parser.prototype._external=function(a){var b=this._parse(a,this.options.external);return this._full_url(b)},b.Parser.prototype._type=function(b){var c;if(d.string(c=b.data("type"))&&(c in this.options.type||"embed"===c))return c;c=b.attr("href");var e=this.options.type,f=null;return a.each(["image","video","html","iframe"],function(a,b){if(e[b]&&e[b].test(c))return f=b,!1}),f},b.Parser.prototype._thumbnail=function(a){var b,c;return 0!==(b=a.find("img")).length&&(c=this._parse(b,this.options.thumbnail))?c:null},b.Parser.prototype._title=function(a){return this._parse(a,this.options.title)},b.Parser.prototype._description=function(a){var b;if(b=this._parse(a,this.options.description))return b;var c;return 0!==(c=a.find("img")).length&&(b=this._parse(c,this.options.description))?b:null},b.Parser.prototype._width=function(a){return this._parse(a,this.options.width)},b.Parser.prototype._height=function(a){return this._parse(a,this.options.height)})}(FooGallery.$,FooGallery.FooGrid,FooGallery.utils,FooGallery.utils.is),function(a,b,c,d,e,f){c&&(c.Content=function(a){if(!(this instanceof c.Content))return new c.Content(a);this._init(a)},c.Content.prototype._init=function(b){this.grid=b,this.index=this.grid.options.index,this.active=null,this.$prev=null,this.$next=null,this.$close=null,this.$fullscreen=null,this.$external=null,this.$wrap=a("<div/>"),this.fullscreen=!1,this.busy=!1,this.first=!0,this.$li=this.$createContent()},c.Content.prototype.destroy=function(){this.$prev.off("click.gg",this.onPrevClick),this.$next.off("click.gg",this.onNextClick),this.$close.off("click.gg",this.onCloseClick),this.$fullscreen.off("click.gg",this.onFullscreenClick),this.$wrap.remove(),this.$li.remove(),this.index=this.grid.options.index,this.active=this.$prev=this.$next=this.$close=this.$fullscreen=this.$external=this.$wrap=null,this.fullscreen=!1,this.busy=!1},c.Content.prototype.layout=function(a,b){a&&(this.index=e.number(b)?b:0,this.active=null,this.fullscreen=!1,this.busy=!1,this.first=!0),this._loop()},c.Content.prototype.redraw=function(){this._loop()},c.Content.prototype.$createContent=function(){var b=a("<section/>",{class:"foogrid-content"});return b.append(this.$createNav()),this.grid.options.keyboard&&b.attr("tabindex",1).on("keydown",{self:this},this.onKeyDown),b},c.Content.prototype.$createNav=function(){return this.$prev=a("<span/>",{class:"foogrid-nav-prev"}).on("click.gg",{self:this},this.onPrevClick).append("<i/>"),this.$next=a("<span/>",{class:"foogrid-nav-next"}).on("click.gg",{self:this},this.onNextClick).append("<i/>"),this.$close=a("<span/>",{class:"foogrid-nav-close"}).on("click.gg",{self:this},this.onCloseClick),this.$fullscreen=a("<span/>",{class:"foogrid-nav-fullscreen"}).on("click.gg",{self:this},this.onFullscreenClick),this.$external=a("<a/>",{class:"foogrid-nav-external",target:this.grid.options.external}),e.string(this.grid.options.externalText)&&""!==this.grid.options.externalText&&this.$external.addClass("foogrid-external-text").html(this.grid.options.externalText),[this.$prev,this.$next,this.$close,this.$fullscreen,this.$external]},c.Content.prototype._index=function(a){a=a||0;var b=this.grid.items.length;this.index=a>-1&&a<b?a:b>0&&a<0?this.grid.options.loop?b-1:0:b>0&&a>=b?this.grid.options.loop?0:b-1:null},c.Content.prototype._loop=function(){0!=this.index||this.grid.options.loop?this.$prev.removeClass("foogrid-disabled"):this.$prev.addClass("foogrid-disabled"),this.index!=this.grid.items.length-1||this.grid.options.loop?this.$next.removeClass("foogrid-disabled"):this.$next.addClass("foogrid-disabled")},c.Content.prototype.scrollTo=function(b,c,d){var f,g=this;return b=(e.number(b)?b:0)-+g.grid.options.scrollOffset,c=!e.boolean(c)||c,d=e.number(d)?d:300,1===(f=a("#wpadminbar")).length&&(b-=f.height()),a.Deferred(function(e){g.grid.options.scroll&&c?g.grid.options.scrollSmooth&&!g.fullscreen?a("html, body").animate({scrollTop:b},d,function(){e.resolve()}):(a("html, body").scrollTop(b),e.resolve()):e.resolve()})},c.Content.prototype._open=function(b,d,e){var g=this;return a.Deferred(function(a){b instanceof c.Item?(b.hasCaption?g.$li.addClass("foogrid-has-caption"):g.$li.removeClass("foogrid-has-caption"),g.scrollTo(b.$li.offset().top,d||g.first).then(function(){!g.first&&!d||g.fullscreen||b.$li.after(g.$li),g.$external.attr("href",b.content.external),g.grid.transitions()&&!g.fullscreen&&(g.grid.options.transitionOpen&&g.first||g.grid.options.transitionRow&&d)?(g.first=!1,f.start(g.$li,"foogrid-visible",!0,350).then(function(){a.resolve()})):a.resolve()})):a.resolve()}).always(function(){return g._loop(),g.$li.addClass("foogrid-visible").focus(),g.active=b,g.grid&&g.grid.deeplinking&&g.grid.deeplinking.set(b),g.busy=!1,b.open(e)})},c.Content.prototype.open=function(b){if(this.busy)return a.when();if(this.busy=!0,this._index(b),e.number(this.index)&&this.grid.items[this.index]instanceof c.Item){var d,f,g=this,h=this.active,i=this.grid.items[this.index],j=this.grid.items.length-1,k=!0,l=!1;if(h instanceof c.Item){if(d=i.bottom(),f=h.bottom(),l=d!=f,k=h.index<i.index,(0===i.index&&h.index===j||i.index===j&&0===h.index)&&(k=!k),g.$li.removeClass("foogrid-has-caption"),l&&!g.fullscreen)return g.busy=!1,g.close(k,l).then(function(){return g.busy=!0,g._open(i,l,k)});h.close(k)}return g._open(i,l,k)}return a.when()},c.Content.prototype.close=function(b,d){if(this.busy)return a.when();this.busy=!0;var e=this;return a.Deferred(function(a){e.active instanceof c.Item?e.active.close(b).then(function(){e.grid.transitions()&&!e.fullscreen&&(e.grid.options.transitionRow&&d||e.grid.options.transitionOpen&&!d)?f.start(e.$li,"foogrid-visible",!1,350).then(function(){a.resolve()}):a.resolve()}):a.resolve()}).always(function(){e.$li.removeClass("foogrid-visible foogrid-has-caption foogrid-fullscreen").detach(),e.$prev.add(e.$next).removeClass("foogrid-disabled"),e.fullscreen=!1,e.active=null,e.grid&&e.grid.deeplinking&&e.grid.deeplinking.clear(),e.busy=!1,d||(e.first=!0)})},c.Content.prototype.toggle=function(b){return this.busy?a.when():(this._index(b),e.number(this.index)&&this.grid.items[this.index]instanceof c.Item?this.active===this.grid.items[this.index]?this.close():this.open(b):a.when())},c.Content.prototype.prev=function(){return e.number(this.index)?this.open(this.index-1):a.when()},c.Content.prototype.next=function(){return e.number(this.index)?this.open(this.index+1):a.when()},c.Content.prototype.toggleFullscreen=function(){this.$li.hasClass("foogrid-fullscreen")?(this.active.$li.after(this.$li.removeClass("foogrid-fullscreen")),this.$wrap.remove(),this.$li.focus(),this.fullscreen=!1):(this.$wrap.attr("class",this.grid.$el.attr("class")).append(this.$li.addClass("foogrid-fullscreen")).appendTo("body"),this.$li.focus(),this.fullscreen=!0);var a=this.grid.$el.get(0);a.style.display="none",a.offsetHeight,a.style.display=""},c.Content.prototype.onPrevClick=function(a){a.preventDefault();var b=a.data.self;b.$prev.hasClass("foogrid-disabled")||b.prev()},c.Content.prototype.onNextClick=function(a){a.preventDefault();var b=a.data.self;b.$next.hasClass("foogrid-disabled")||b.next()},c.Content.prototype.onCloseClick=function(a){a.preventDefault(),a.data.self.close()},c.Content.prototype.onFullscreenClick=function(a){a.preventDefault(),a.data.self.toggleFullscreen()},c.Content.prototype.onKeyDown=function(a){var b=a.data.self;switch(a.which){case 39:b.next();break;case 37:b.prev();break;case 27:b.fullscreen?b.toggleFullscreen():b.close();break;case 13:a.altKey&&b.toggleFullscreen()}})}(FooGallery.$,FooGallery,FooGallery.FooGrid,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.transition),function(a,b,c,d,e){b&&(b.Item=function(a,c,d){if(!(this instanceof b.Item))return new b.Item(a,c,d);this._init(a,c,d)},b.Item.prototype._init=function(b,c,d){this.grid=b,this.index=d,this.$li=a(c).append("<span/>"),this.$link=this.$li.find(".fg-thumb").first().on("click.gg",{self:this},this.onClick),this.visible=!1,this.content=this.grid.parser.parse(this.$link),this.hash=this.grid.deeplinking.hash(this.content.external),this.hasCaption=!1,this.isCreated=!1,this.player=null,this.$content=null},b.Item.prototype.destroy=function(){this.player&&this.player.destroy(),this.player=null,this.$li.removeClass("foogrid-visible").children("span").remove(),this.$link.off("click.gg",this.onClick),this.isCreated&&this.$content.remove(),this.$content=null,this.visible=!1,this.hasCaption=!1,this.isCreated=!1,this.index=null,this.content={}},b.Item.prototype.$create=function(){var c,d,e=a("<div/>",{class:"foogrid-content-inner"});switch(this.content.type){case"image":e.addClass("foogrid-content-image"),d=a("<img/>",{src:this.content.url,class:"foogrid-image"});break;case"html":e.addClass("foogrid-content-html"),d=a(this.content.url).contents();break;case"embed":e.addClass("foogrid-content-embed"),d=a("<div/>",{class:"foogrid-embed"}).append(a(this.content.url).contents());break;case"video":e.addClass("foogrid-content-video"),this.player=new b.Player(this.grid,this.content.url),d=this.player.$el;break;case"iframe":default:e.addClass("foogrid-content-iframe"),d=a("<iframe/>",{src:this.content.url,class:"foogrid-iframe",frameborder:"no",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0})}return e.append(d),(c=this.$createCaption())&&(this.hasCaption=!0,e.addClass("foogrid-has-caption").append(c)),this.isCreated=!0,e},b.Item.prototype.$createCaption=function(){var b=d.string(this.content.title),c=d.string(this.content.description);if(b||c){var e=a("<div/>",{class:"foogrid-caption"}).append(a("<div/>",{class:"foogrid-caption-separator"}));return b&&e.append(a("<h4/>",{class:"foogrid-title"}).html(this.content.title)),c&&e.append(a("<p/>",{class:"foogrid-description"}).html(this.content.description)),e}return null},b.Item.prototype.setEmbedSize=function(){var a=this.$content.height(),b=this.content.height,c=this.$content.width(),d=this.content.width,e=a/b,f=c/d,g=0;g=e<f?e:f,g>0&&g<1?this.$content.children(".foogrid-embed").css({height:this.content.height*g,width:this.content.width*g}):this.$content.children(".foogrid-embed").css({height:"",width:""})},b.Item.prototype.open=function(b){var c=this;return a.Deferred(function(d){c.isCreated||(c.$content=c.$create()),c.visible=!0,b?c.$content.addClass("foogrid-reverse"):c.$content.removeClass("foogrid-reverse"),c.grid.content.$li.append(c.$content),c.$li.addClass("foogrid-visible"),c.grid.transitions()?e.start(c.$content,"foogrid-visible",!0,1e3).then(function(){"embed"===c.content.type&&(a(window).on("resize.foogrid",function(){c.setEmbedSize()}),c.setEmbedSize()),c.$content.removeClass("foogrid-reverse"),c.player&&c.player.options.autoplay&&c.player.play(),d.resolve()}):(c.$content.removeClass("foogrid-reverse").addClass("foogrid-visible"),c.player&&c.player.options.autoplay&&c.player.play(),d.resolve())})},b.Item.prototype.close=function(c){var d=this;return a.Deferred(function(f){d.visible=!1,d.player instanceof b.Player&&d.player.pause(),d.$li.removeClass("foogrid-visible"),c?d.$content.removeClass("foogrid-reverse"):d.$content.addClass("foogrid-reverse"),a(window).off("resize.foogrid"),d.grid.transitions()?e.start(d.$content,"foogrid-visible",!1,350).then(function(){d.$content.removeClass("foogrid-reverse").detach(),f.resolve()}):(d.$content.removeClass("foogrid-visible foogrid-reverse").detach(),f.resolve())})},b.Item.prototype.bottom=function(){return this.$li.offset().top+this.$li.height()},b.Item.prototype.onClick=function(a){a.preventDefault();var b=a.data.self;b.grid.toggle(b.index)})}(FooGallery.$,FooGallery.FooGrid,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.transition),function(a,b,c,d){b.Video=function(a,c){if(!(this instanceof b.Video))return new b.Video(a,c);this._init(a,c)},b.Video.prototype._init=function(b,c){this.autoplay=!!c,this._parse(b),this._mimeType(b);var d=navigator.userAgent.toLowerCase(),e=d.indexOf("msie ")>-1||d.indexOf("trident/")>-1||d.indexOf("edge/")>-1,f=!document.addEventListener;this.direct=!!this.hasMimeType&&-1!==a.inArray(this.mimeType,["video/mp4","video/wmv","video/ogg","video/webm"]),this.supported=!!this.hasMimeType&&(!this.direct||-1!==a.inArray(this.mimeType,e?f?[]:["video/mp4","video/wmv"]:["video/mp4","video/ogg","video/webm"]))},b.Video.prototype._parse=function(a){var b=a.split("#");this.hash=2==b.length?"#"+b[1]:"",b=b[0].split("?"),this.url=b[0];var c=this.url.match(/.*\/(.*)$/);this.id=c&&c.length>=2?c[1]:null,this.protocol="https"==a.substring(0,5)?"https:":"http:",this.params=[];for(var d,e=(2==b.length?b[1]:"").split(/[&;]/g),f=0,g=e.length;f<g;f++)d=e[f].split("="),2==d.length&&this.params.push({key:decodeURIComponent(d[0]),value:decodeURIComponent(d[1])})},b.Video.prototype._mimeType=function(a){this.mimeTypes={"video/youtube":/(www.)?youtube|youtu\.be/i,"video/vimeo":/(player.)?vimeo\.com/i,"video/wistia":/(.+)?(wistia\.(com|net)|wi\.st)\/.*/i,"video/daily":/(www.)?dailymotion\.com|dai\.ly/i,"video/mp4":/\.mp4/i,"video/webm":/\.webm/i,"video/wmv":/\.wmv/i,"video/ogg":/\.ogv/i},this.mimeType=null;for(var b in this.mimeTypes)this.mimeTypes.hasOwnProperty(b)&&this.mimeTypes[b].test(a)&&(this.mimeType=b);if(this.hasMimeType=null!==this.mimeType,"video/youtube"==this.mimeType)this.id=/embed\//i.test(this.url)?this.url.split(/embed\//i)[1].split(/[?&]/)[0]:a.split(/v\/|v=|youtu\.be\//i)[1].split(/[?&]/)[0],this.url=this.protocol+"//www.youtube.com/embed/"+this.id,this.autoplay&&this.param("autoplay","1"),this.param("modestbranding","1"),this.param("rel","0"),this.param("wmode","transparent"),this.param("showinfo","0");else if("video/vimeo"==this.mimeType)this.id=this.url.substr(this.url.lastIndexOf("/")+1),this.url=this.protocol+"//player.vimeo.com/video/"+this.id,this.autoplay&&this.param("autoplay","1"),this.param("badge","0"),this.param("portrait","0");else if("video/wistia"==this.mimeType){this.id=/embed\//i.test(this.url)?this.url.split(/embed\/.*?\//i)[1].split(/[?&]/)[0]:this.url.split(/medias\//)[1].split(/[?&]/)[0];var c=/playlists\//i.test(this.url);this.url=this.protocol+"//fast.wistia.net/embed/"+(c?"playlists":"iframe")+"/"+this.id,this.autoplay&&(c?this.param("media_0_0[autoPlay]","1"):this.param("autoPlay","1")),this.param("theme","")}else"video/daily"==this.mimeType&&(this.id=/\/video\//i.test(this.url)?this.url.split(/\/video\//i)[1].split(/[?&]/)[0].split(/[_]/)[0]:a.split(/dai\.ly/i)[1].split(/[?&]/)[0],this.url=this.protocol+"//www.dailymotion.com/embed/video/"+this.id,this.autoplay&&this.param("autoplay","1"),this.param("wmode","opaque"),this.param("info","0"),this.param("logo","0"),this.param("related","0"))},b.Video.prototype.param=function(a,b){for(var c=void 0===b,d="string"==typeof b&&""===b,e=this.params.length;e-- >0;)if(this.params[e].key==a)return c?this.params[e].value:void(d?this.params.splice(e,1):this.params[e].value=b);c||d||this.params.push({key:a,value:b})},b.Video.prototype.toString=function(){for(var a=this.params.length>0?"?":"",b=0,c=this.params.length;b<c;b++)0!=b&&(a+="&"),a+=encodeURIComponent(this.params[b].key)+"="+encodeURIComponent(this.params[b].value);return this.url+a+this.hash}}(FooGallery.$,FooGallery.FooGrid,FooGallery.utils,FooGallery.utils.is),function(a,b,c,d){b&&(b.Player=function(a,c){if(!(this instanceof b.Player))return new b.Player(a,c);this._init(a,c)},b.Player.defaults={width:1280,height:720,autoplay:!0},b.Player.prototype._init=function(c,d){this.grid=c,this.options=a.extend(!0,{},b.Player.defaults,this.grid.options),this.urls=this._parse(d),this.direct=this._direct(),this.$video=null,this.$el=this.$create(),this.$video instanceof a&&(this.video=this.$video[0])},b.Player.prototype._parse=function(c){if("string"==typeof c){c=c.split(",");for(var d=0,e=c.length;d<e;d++)c[d]=new b.Video(a.trim(c[d]),this.options.autoplay);return c}return[]},b.Player.prototype._direct=function(){if(!document.addEventListener)return!1;for(var a=0,b=this.urls.length;a<b;a++)if(this.urls[a].direct&&this.urls[a].supported)return!0;return!1},b.Player.prototype.$create=function(){var b=a("<div/>",{class:"foogrid-video"}).css({width:"100%",height:"100%",maxWidth:this.options.width,maxHeight:this.options.height});return this.direct?(this.$video=this.$createVideo(this.urls),this.video=this.$video.get(0),b.append(this.$video)):this.urls.length>0&&!this.urls[0].direct?b.append(this.$video=this.$createEmbed(this.urls[0])):null},b.Player.prototype.play=function(){this.video&&this.video instanceof HTMLVideoElement&&(this.video.load(),this.video.play())},b.Player.prototype.pause=function(){this.video&&this.video instanceof HTMLVideoElement&&this.video.pause()},b.Player.prototype.destroy=function(){this.direct&&this.$video&&this.$video.off("error loadeddata"),this.$el.remove(),this.$el=null},b.Player.prototype.$createVideo=function(b){function c(){for(var a=0,b=h.length;a<b;a++)h[0].removeEventListener("error",c,!1);g.removeEventListener("error",c,!1),g.removeEventListener("loadeddata",d,!1)}function d(){for(var a=0,b=h.length;a<b;a++)h[0].removeEventListener("error",c,!1);g.removeEventListener("loadeddata",d,!1),g.removeEventListener("error",c,!1)}for(var e,f=a("<video/>",{controls:!0,preload:!1}).css({width:"100%",height:"100%"}),g=f[0],h=[],i=0,j=b.length;i<j;i++)b[i].direct&&(e=a("<source/>",{type:b[i].mimeType,src:b[i].toString()}),e[0].addEventListener("error",c,!1),h.push(e[0]),f.append(e));return g.addEventListener("error",c,!1),g.addEventListener("loadeddata",d,!1),g.readyState<4?g.load():d(),f},b.Player.prototype.$createEmbed=function(b){return a("<iframe/>",{src:b,frameborder:"no",allow:"autoplay; fullscreen",width:this.options.width,height:this.options.height,webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0}).css({width:"100%",height:"100%"})})}(FooGallery.$,FooGallery.FooGrid,FooGallery.utils,FooGallery.utils.is),function(a,b,c,d,e){b&&(b.Deeplinking=function(a){if(!(this instanceof b.Deeplinking))return new b.Deeplinking(a);this._init(a)},b.Deeplinking.prototype._init=function(b){if(this.grid=b,this.grid.options.deeplinking&&window.history){a(window).on("popstate",{self:this},this.onPopState);var c=this;setTimeout(function(){c.check()},500)}},b.Deeplinking.prototype.destroy=function(){this.grid.options.deeplinking&&window.history&&a(window).off("popstate",this.onPopState)},b.Deeplinking.prototype.onPopState=function(a){a.data.self.check()},b.Deeplinking.prototype.hash=function(a){return["#!"+this.grid.options.deeplinkingPrefix,this.grid.id,e.fnv1a(a)].join("/")},b.Deeplinking.prototype.check=function(){var b=this,c=location.hash,e="#!"+b.grid.options.deeplinkingPrefix+"/";if(d.string(c)&&c.length>=e.length&&c.substr(0,e.length)===e){var f=c.split("/");if(3===f.length){var g=f[1];b.grid.id==g&&a.each(b.grid.items,function(a,d){if(d.hash==c)return b.grid.content.open(d.index),!1})}}},b.Deeplinking.prototype.clear=function(){this.grid.options.deeplinking&&window.history&&history.replaceState(null,"",location.href.split("#")[0])},b.Deeplinking.prototype.set=function(a){this.grid.options.deeplinking&&window.history&&history.replaceState(null,a.content.title,a.hash)})}(FooGallery.$,FooGallery.FooGrid,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.str),function(a,b,c){b.FooGridTemplate=b.Template.extend({construct:function(a,b){this._super(a,b),this.wasActive=!1},onPreInit:function(a,c){c.foogrid=new b.FooGrid(c.$el.get(0),c.template,c)},onInit:function(a,b){b.foogrid.init()},onFirstLoad:function(a,b){b.foogrid.layout(!0)},onReady:function(a,b){b.foogrid.layout()},onDestroy:function(a,b){b.foogrid.destroy()},onBeforePageChange:function(a,b,c,d,e,f){f||b.foogrid.close(!0)},onAfterPageChange:function(a,b,c,d,e){e||b.foogrid.layout(!0)},onBeforeFilterChange:function(a,b,c,d,e){b.foogrid.close(!0)},onAfterFilterChange:function(a,b){b.foogrid.layout(!0)}}),b.template.register("foogrid",b.FooGridTemplate,null,{container:"foogallery foogrid"})}(FooGallery.$,FooGallery,FooGallery.utils);