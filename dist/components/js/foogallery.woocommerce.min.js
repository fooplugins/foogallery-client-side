/*
* FooGallery - The Most Intuitive and Extensible Gallery Creation and Management Tool Ever Created for WordPress
* @version 2.0.44
* @link 
* @copyright Steven Usher & Brad Vincent 2015
* @license Released under the GPLv3 license.
*/
!function(l,o,i){o.template.configure("core",{},{woo:{button:"fg-woo-add-to-cart-ajax",disabled:"fg-disabled",added:"fg-woo-added",adding:"fg-woo-adding"}}),o.Item.prototype.hasWooCommerce=function(){return!!window.woocommerce_params},o.Item.prototype.getWooCommerceEndPoint=function(){return this.hasWooCommerce()?window.woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"):""},o.Item.prototype.onAddToCart=function(o){var e,t,a=o.data.self,r=l(this);if(a.hasWooCommerce())return e=a.tmpl.cls.woo,o.preventDefault(),r.hasClass(e.disabled)||(o=r.attr("data-variation-id")||a.productId,t=r.attr("data-quantity")||1,r.removeClass(e.added).addClass(e.adding).addClass(e.disabled),a.addToCart(r,o,t,!0).then(function(){r.removeClass(e.adding).removeClass(e.disabled).addClass(e.added)})),!1;console.log("woocommerce_params not found!")},o.Item.prototype.addToCart=function(o,e,t,a){var r=this,d=l(document.body),n="?add-to-cart="+e,e=[{name:"product_id",value:e},{name:"quantity",value:t},{name:"foogallery_attachment_id",value:r.id},{name:"foogallery_id",value:r.tmpl.id}];return d.trigger("adding_to_cart",[o,e]),l.ajax({type:"POST",url:r.getWooCommerceEndPoint(),data:e}).then(function(o){return o?o.error?a&&(i.string(o.product_url)&&(window.location=o.product_url),window.location=n):d.trigger("added_to_cart",[o.fragments,o.cart_hash]):console.log("An unexpected response was returned from the server.",o),o},function(o,e,t){console.log("FooGallery: Add to cart ajax error.",o,e,t),a&&(window.location=n)})},o.Item.override("doParseItem",function(o){var e=this;return!!e._super(o)&&(o.find(e.tmpl.sel.woo.button).on("click.foogallery",{self:e},e.onAddToCart),!0)}),o.Item.override("doCreateItem",function(){var o=this;return!!o._super()&&(o.$el.find(o.tmpl.sel.woo.button).on("click.foogallery",{self:o},o.onAddToCart),!0)}),o.Item.override("doDestroyItem",function(){var o=this;return o.isParsed&&o.$el.find(o.tmpl.sel.woo.button).off("click.foogallery"),o._super()})}(FooGallery.$,FooGallery,FooGallery.utils.is);