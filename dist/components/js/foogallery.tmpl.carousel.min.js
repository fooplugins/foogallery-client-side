/*
* FooGallery - The Most Intuitive and Extensible Gallery Creation and Management Tool Ever Created for WordPress
* @version 2.0.26
* @link 
* @copyright Steven Usher & Brad Vincent 2015
* @license Released under the GPLv3 license.
*/
!function(c,e,s,m){s.Progress=s.EventClass.extend({construct:function(e){var t=this;t._super(),t.percent=0,t.tickRate=m.number(e)?e:100,t.isPaused=!1,t.isActive=!1,t._intervalId=null,t._total=0,t._target=null,t.onTick=t.onTick.bind(t)},destroy:function(){this._reset(),this._super()},_reset:function(){var e=this;null!==e._intervalId&&clearInterval(e._intervalId),e.percent=0,e._total=0,e._intervalId=null,e._target=null,e.isActive=!1,e.isPaused=!1},stop:function(){var e=this;e.isActive&&(e._reset(),e.trigger("stop"))},start:function(e){var t=this;t.stop(),t.isActive||(t._total=1e3*e,t._target=Date.now()+t._total,t._intervalId=setInterval(t.onTick,t.tickRate),t.isActive=!0,t.trigger("start"))},pause:function(){var e=this;e.isActive&&!e.isPaused&&e.percent<100&&(null!==e._intervalId&&clearInterval(e._intervalId),e._intervalId=null,e._target=null,e.isPaused=!0,e.trigger("pause"))},resume:function(){var e,t=this;t.isActive&&t.isPaused?(e=t._total-t._total*t.percent/100,t._target=Date.now()+e,t._intervalId=setInterval(t.onTick,t.tickRate),t.isPaused=!1,t.trigger("resume")):0<t._total&&t.start(t._total/1e3)},onTick:function(){var e=this,t=e._total-Math.max(e._target-Date.now(),0);e.percent=Math.min(t/e._total*100,100),e.trigger("tick",[e.percent]),100<=e.percent&&(null!==e._intervalId&&clearInterval(e._intervalId),e._intervalId=null,e._target=null,e.isActive=!1,e.trigger("complete"))}}),c.Carousel=s.Class.extend({construct:function(e,t,n,r){var i=this;i.tmpl=e,i.el=e.el,i.opt=t,i.cls=n,i.sel=r,i.elem={inner:null,center:null,bottom:null,prev:null,next:null,progress:null},i.activeItem=null,i._itemWidth=0,i._leftExclude=[i.sel.activeItem,i.sel.nextItem].join(","),i._rightExclude=[i.sel.activeItem,i.sel.prevItem].join(","),i._centerListeners=new s.DOMEventListeners,i._listeners=new s.DOMEventListeners,i._progress=new s.Progress,i._canHover=window.matchMedia("(hover: hover)").matches,i.cache=new Map,i.timeouts=new s.Timeouts,i.interacted=!1,i._firstLayout=!0},getScreenX:function(e,t,n){return n/(n+t)*e},getVectorX:function(e,t,n){return(n+t)/n*e},getSequentialZFromScale:function(e,t,n){return n*(t*(e+1))},scaleToZ:function(e,t,n){return e*(1-t/(n+t))},init:function(){var e=this;e.elem={inner:e.el.querySelector(e.sel.inner),center:e.el.querySelector(e.sel.center),bottom:e.el.querySelector(e.sel.bottom),prev:e.el.querySelector(e.sel.prev),next:e.el.querySelector(e.sel.next),progress:e.el.querySelector(e.sel.progress)},150!==e.opt.perspective&&e.el.style.setProperty("--fg-carousel-perspective",e.opt.perspective+"px")},postInit:function(){var e=this;e.activeItem=e.tmpl.items.first(),e.initNavigation(),e.initPagination(),e.initSwipe(),e.initAutoplay()},initNavigation:function(){const t=this;t._listeners.add(t.elem.prev,"click",function(e){e.preventDefault(),t.interacted=!0,t.previous()}),"button"!==t.elem.prev.type&&(t.elem.prev.type="button"),t.elem.prev.appendChild(e.element("arrow-left")),t._listeners.add(t.elem.next,"click",function(e){e.preventDefault(),t.interacted=!0,t.next()}),"button"!==t.elem.next.type&&(t.elem.next.type="button"),t.elem.next.appendChild(e.element("arrow-right"))},initPagination:function(){const n=this;var e=n.tmpl.items.count();for(let t=0;t<e;t++){const r=document.createElement("button");r.type="button",r.classList.add(n.cls.bullet),0===t&&r.classList.add(n.cls.activeBullet),n._listeners.add(r,"click",function(e){e.preventDefault(),n.interacted=!0,n.goto(n.tmpl.items.get(t))}),n.elem.bottom.appendChild(r)}},initSwipe:function(){const t=this;let n=0,r;t._listeners.add(t.elem.inner,"touchstart",function(e){t.interacted=!0,n=e.changedTouches[0].screenX},{passive:!0}),t._listeners.add(t.elem.inner,"touchend",function(e){r=e.changedTouches[0].screenX,r<n?t.next():t.previous(),n=0},{passive:!0})},initAutoplay:function(){const n=this,t=n.opt.autoplay;if(!(t.time<=0)&&n.elem.progress instanceof HTMLElement){const r=n.elem.progress.style;function e(e,t){s.cancelFrame(null),s.requestFrame(function(){r.setProperty("width",e+"%"),t?r.setProperty("transition-duration","0s"):r.setProperty("transition-duration",n._progress.tickRate+"ms")})}n._progress.on({"start stop":function(){e(0,!0)},"pause resume":function(){e(n._progress.percent,!0)},tick:function(){e(n._progress.percent,!1)},complete:function(){n.next(function(){n._progress.start(t.time)})}}),"pause"===t.interaction&&(n._canHover?(n._listeners.add(n.el,"mouseenter",function(e){n._progress.pause()},{passive:!0}),n._listeners.add(n.el,"mouseleave",function(e){n._progress.resume()},{passive:!0})):(n._listeners.add(n.el,"touchstart",function(e){n.timeouts.delete("autoplay"),n._progress.pause()},{passive:!0}),n._listeners.add(n.el,"touchend",function(e){n.timeouts.set("autoplay",function(){n._progress.resume()},1e3*t.time)},{passive:!0}))),n._progress.start(t.time)}},getNext:function(e){return this.tmpl.items.next(e instanceof c.Item?e:this.activeItem,null,!0)},getPrev:function(e){return this.tmpl.items.prev(e instanceof c.Item?e:this.activeItem,null,!0)},goto:function(e,t){const n=this;if(e instanceof c.Item){const r=n.opt.autoplay,i=!n._canHover&&n.timeouts.has("autoplay"),s=(n.timeouts.delete("autoplay"),n.timeouts.delete("navigation"),n.activeItem=e,n.layout(),n._progress.isPaused);n._progress.isActive&&n._progress.stop(),n.timeouts.set("navigation",function(){0<r.time&&("pause"===r.interaction||"disable"===r.interaction&&!n.interacted)&&(n._progress.start(r.time),s&&n._progress.pause(),i&&n.timeouts.set("autoplay",function(){n._progress.resume()},1e3*r.time)),m.fn(t)&&t.call(n)},n.opt.speed)}},next:function(e){this.goto(this.getNext(),e)},previous:function(e){this.goto(this.getPrev(),e)},destroy:function(){var e=this;e.cache.clear(),e.timeouts.clear(),e._listeners.clear(),e._centerListeners.clear(),150!==e.opt.perspective&&e.el.style.removeProperty("--fg-carousel-perspective")},layout:function(e){const t=this;if(null===t.activeItem&&(t.activeItem=t.tmpl.items.first()),!m.number(e)&&t.cache.has("width")&&(e=t.cache.get("width")),m.number(e)){const n=t.getLayout(e);null!==t._layoutFrame&&s.cancelFrame(t._layoutFrame),t._layoutFrame=s.requestFrame(function(){t._layoutFrame=null,t.renderActive()&&(t.renderSide("left",t.sel.prevItem,t._leftExclude,t.cls.prevItem,n),t.renderSide("right",t.sel.nextItem,t._rightExclude,t.cls.nextItem,n),t._firstLayout=!1)})}},getLayout:function(e){var t=this;if(t.cache.has("layout")&&t.cache.get("width")===e)return t.cache.get("layout");var n=t.elem.center.getBoundingClientRect().width,r=t.elem.inner.getBoundingClientRect().width/2+n/2,n=t.calculate(n,r);return t.cache.set("width",e),t.cache.set("layout",n),n},round:function(e,t){t=Math.pow(10,t||0);return Math.round(e*t)/t},getShowPerSide:function(){var e=this.tmpl.items.count();let t=this.opt.maxItems;return("auto"===t||t<=0)&&(t=e%2==0?e-1:e),t%2==0&&--t,t<1&&(t=1),t>e&&(t=e%2==0?e-1:e),(t-1)/2},calculate:function(t,n,r,i){const s=this,p=[];m.number(r)||(r=s.opt.gutter.max),m.number(i)||(i=s.getShowPerSide());let o=t;for(let e=0;e<i;e++){var l=s.getSequentialZFromScale(e,s.opt.scale,s.opt.perspective),a=s.scaleToZ(t,l,s.opt.perspective),c=(t-a)/2,u=(o-=c,"%"===s.opt.gutter.unit?t*Math.abs(r/100):Math.abs(r)),u="%"===s.opt.gutter.unit?s.scaleToZ(u,l,s.opt.perspective):u;if(0<r?o+=u:o-=u,o+a+c>n)return r-1<s.opt.gutter.min?s.calculate(t,n,s.opt.gutter.max,i-1):s.calculate(t,n,r-1,i);u=s.getVectorX(o,l,s.opt.perspective);o+=a+c,p.push({x:u,z:l})}return p},cleanup:function(e,t,n){const r=this,i=m.string(n);Array.from(r.el.querySelectorAll(e)).forEach(function(e){e.classList.remove(t),r.opt.centerOnClick&&r._centerListeners.remove(e,"click"),i&&e.matches(n)||(e.style.removeProperty("transition-duration"),e.style.removeProperty("transform"),e.style.removeProperty("z-index"))})},renderActive:function(){const n=this;if(!(n.activeItem instanceof c.Item))return!1;const e=n.activeItem.el,r=(n.cleanup(n.sel.activeItem,n.cls.activeItem),e.classList.add(n.cls.activeItem),e.style.setProperty("transition-duration",n.opt.speed+"ms"),e.style.removeProperty("z-index"),e.style.removeProperty("transform"),n.tmpl.items.indexOf(n.activeItem));return Array.from(n.el.querySelectorAll(n.sel.bullet)).forEach(function(e,t){e.classList.remove(n.cls.activeBullet),t===r&&e.classList.add(n.cls.activeBullet)}),!0},renderSide:function(n,e,r,i,s){const o=this;if(-1!==["left","right"].indexOf(n)){o.cleanup(e,i,r);let t=o.activeItem;for(let e=0;e<s.length;e++){var l=s[e];const a="left"===n?o.getPrev(t):o.getNext(t);if(!(a instanceof c.Item))break;l="translate3d("+("left"===n?"-":"")+l.x+"px, 0,-"+l.z+"px)";a.el.classList.add(i),a.isLoaded||(a.el.style.setProperty("transition-duration","0ms"),a.el.style.setProperty("transform","translate3d(0,0,-"+o.opt.perspective+"px)"),a.el.offsetHeight),a.el.style.setProperty("transition-duration",(o._firstLayout?0:o.opt.speed)+"ms"),a.el.style.setProperty("transform",l),o.opt.centerOnClick&&o._centerListeners.add(a.el,"click",function(e){e.preventDefault(),e.stopPropagation(),o.goto(a)},!0),t=a}}}})}((FooGallery.$,FooGallery),FooGallery.icons,FooGallery.utils,FooGallery.utils.is),function(t,r){t.CarouselTemplate=t.Template.extend({construct:function(e,t){var n=this;n._super(r.extend({},e,{paging:{type:"none"}}),t),n.items.LAYOUT_AFTER_LOAD=!1,n.carousel=null,n.on({"pre-init":n.onPreInit,init:n.onInit,"post-init":n.onPostInit,destroyed:n.onDestroyed,"append-item":n.onAppendItem,"layout after-filter-change":n.onLayoutRequired},n)},onPreInit:function(){var e=this;e.carousel=new t.Carousel(e,e.template,e.cls.carousel,e.sel.carousel)},onInit:function(){this.carousel.init()},onPostInit:function(){this.carousel.postInit()},onDestroyed:function(){this.carousel instanceof t.Carousel&&this.carousel.destroy()},onAppendItem:function(e,t){e.preventDefault(),this.carousel.elem.inner.appendChild(t.el),t.isAttached=!0},onLayoutRequired:function(e){"after-filter-change"===e.type&&(this.carousel.activeItem=null,this.carousel.cache.delete("layout")),this.carousel.layout(this.lastWidth)}}),t.template.register("carousel",t.CarouselTemplate,{template:{maxItems:0,perspective:150,scale:.12,speed:300,centerOnClick:!0,gutter:{min:-40,max:-20,unit:"%"},autoplay:{time:0,interaction:"pause"}}},{container:"foogallery fg-carousel",carousel:{inner:"fg-carousel-inner",center:"fg-carousel-center",bottom:"fg-carousel-bottom",prev:"fg-carousel-prev",next:"fg-carousel-next",bullet:"fg-carousel-bullet",activeBullet:"fg-bullet-active",activeItem:"fg-item-active",prevItem:"fg-item-prev",nextItem:"fg-item-next",progress:"fg-carousel-progress"}})}((FooGallery.$,FooGallery),FooGallery.utils.obj);