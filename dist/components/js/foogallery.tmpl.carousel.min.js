/*
* FooGallery - The Most Intuitive and Extensible Gallery Creation and Management Tool Ever Created for WordPress
* @version 2.1.7
* @link 
* @copyright Steven Usher & Brad Vincent 2015
* @license Released under the GPLv3 license.
*/
!function(u,e,s,m){s.Progress=s.EventClass.extend({construct:function(e){var t=this;t._super(),t.percent=0,t.tickRate=m.number(e)?e:100,t.isPaused=!1,t.isActive=!1,t._intervalId=null,t._total=0,t._target=null,t.onTick=t.onTick.bind(t)},destroy:function(){this._reset(),this._super()},_reset:function(){var e=this;null!==e._intervalId&&clearInterval(e._intervalId),e.percent=0,e._total=0,e._intervalId=null,e._target=null,e.isActive=!1,e.isPaused=!1},stop:function(){var e=this;e.isActive&&(e._reset(),e.trigger("stop"))},start:function(e){var t=this;t.stop(),!t.isActive&&m.number(e)&&0<e&&(t._total=1e3*e,t._target=Date.now()+t._total,t._intervalId=setInterval(t.onTick,t.tickRate),t.isActive=!0,t.trigger("start"))},pause:function(){var e=this;e.isActive&&!e.isPaused&&e.percent<100&&(null!==e._intervalId&&clearInterval(e._intervalId),e._intervalId=null,e._target=null,e.isPaused=!0,e.trigger("pause"))},resume:function(){var e,t=this;t.isActive&&t.isPaused?(e=t._total-t._total*t.percent/100,t._target=Date.now()+e,t._intervalId=setInterval(t.onTick,t.tickRate),t.isPaused=!1,t.trigger("resume")):0<t._total&&t.start(t._total/1e3)},onTick:function(){var e=this,t=e._total-Math.max(e._target-Date.now(),0);e.percent=Math.min(t/e._total*100,100),e.trigger("tick",[e.percent]),100<=e.percent&&(null!==e._intervalId&&clearInterval(e._intervalId),e._intervalId=null,e._target=null,e.isActive=!1,e.trigger("complete"))}}),u.Carousel=s.Class.extend({construct:function(e,t,n,i){var r=this;r.tmpl=e,r.el=e.el,r.opt=t,r.cls=n,r.sel=i,r.elem={inner:null,center:null,bottom:null,prev:null,next:null,progress:null},r.activeItem=null,r._itemWidth=0,r._leftExclude=[r.sel.activeItem,r.sel.nextItem].join(","),r._rightExclude=[r.sel.activeItem,r.sel.prevItem].join(","),r._centerListeners=new s.DOMEventListeners,r._listeners=new s.DOMEventListeners,r._progress=new s.Progress,r._canHover=window.matchMedia("(hover: hover)").matches,r.cache=new Map,r.timeouts=new s.Timeouts,r.interacted=!1,r.isRTL=!1,r._firstLayout=!0},getScreenX:function(e,t,n){return n/(n+t)*e},getVectorX:function(e,t,n){return(n+t)/n*e},getSequentialZFromScale:function(e,t,n){return n*(t*(e+1))},scaleToZ:function(e,t,n){return e*(1-t/(n+t))},getDiff:function(e,t){return t<e?e-t:t-e},pause:function(){this._progress.pause()},resume:function(){this._progress.resume()},start:function(){"disable"===this.opt.autoplay.interaction&&this.interacted||this._progress.start(this.opt.autoplay.time)},stop:function(){this._progress.stop()},init:function(){var e=this;e.isRTL="rtl"===window.getComputedStyle(e.el).direction,e.elem={inner:e.el.querySelector(e.sel.inner),center:e.el.querySelector(e.sel.center),bottom:e.el.querySelector(e.sel.bottom),prev:e.el.querySelector(e.sel.prev),next:e.el.querySelector(e.sel.next),progress:e.el.querySelector(e.sel.progress)},150!==e.opt.perspective&&e.el.style.setProperty("--fg-carousel-perspective",e.opt.perspective+"px")},postInit:function(){var e=this;e.activeItem=e.tmpl.items.first(),e.initNavigation(),e.initPagination(),e.initSwipe(),e.initAutoplay()},initNavigation:function(){const t=this;t._listeners.add(t.elem.prev,"click",function(e){e.preventDefault(),t.interacted=!0,t.previous()}),"button"!==t.elem.prev.type&&(t.elem.prev.type="button"),t.elem.prev.appendChild(e.element("arrow-left")),t._listeners.add(t.elem.next,"click",function(e){e.preventDefault(),t.interacted=!0,t.next()}),"button"!==t.elem.next.type&&(t.elem.next.type="button"),t.elem.next.appendChild(e.element("arrow-right"))},initPagination:function(){const n=this;var e=n.tmpl.items.count();for(let t=0;t<e;t++){const i=document.createElement("button");i.type="button",i.classList.add(n.cls.bullet),0===t&&i.classList.add(n.cls.activeBullet),n._listeners.add(i,"click",function(e){e.preventDefault(),n.interacted=!0,n.goto(n.tmpl.items.get(t))}),n.elem.bottom.appendChild(i)}},initSwipe:function(){const t=this;let n=0,i=0,r=25*(window.devicePixelRatio||1);t._listeners.add(t.elem.inner,"touchstart",function(e){t.interacted=!0,n=e.changedTouches[0].screenX},{passive:!0}),t._listeners.add(t.elem.inner,"touchend",function(e){i=e.changedTouches[0].screenX,t.getDiff(n,i)>r&&(i<n?t.next():t.previous()),i=0,n=0},{passive:!0})},initAutoplay:function(){const n=this,t=n.opt.autoplay;if(!(t.time<=0)&&n.elem.progress instanceof HTMLElement){const i=n.elem.progress.style;function e(e,t){s.cancelFrame(null),s.requestFrame(function(){i.setProperty("width",e+"%"),t?i.setProperty("transition-duration","0s"):i.setProperty("transition-duration",n._progress.tickRate+"ms")})}n._progress.on({"start stop":function(){e(0,!0)},"pause resume":function(){e(n._progress.percent,!0)},tick:function(){e(n._progress.percent,!1)},complete:function(){n.next(function(){n._progress.start(t.time)})}}),"pause"===t.interaction&&(n._canHover?(n._listeners.add(n.el,"mouseenter",function(e){n._progress.pause()},{passive:!0}),n._listeners.add(n.el,"mouseleave",function(e){n._progress.resume()},{passive:!0})):(n._listeners.add(n.el,"touchstart",function(e){n.timeouts.delete("autoplay"),n._progress.pause()},{passive:!0}),n._listeners.add(n.el,"touchend",function(e){n.timeouts.set("autoplay",function(){n._progress.resume()},1e3*t.time)},{passive:!0}))),n._progress.start(t.time)}},getFirst:function(){return this.tmpl.items.first()},getNext:function(e){return this.tmpl.items.next(e instanceof u.Item?e:this.activeItem,null,!0)},getPrev:function(e){return this.tmpl.items.prev(e instanceof u.Item?e:this.activeItem,null,!0)},goto:function(e,t){const n=this;if(e instanceof u.Item){const i=n.opt.autoplay,r=!n._canHover&&n.timeouts.has("autoplay"),s=(n.timeouts.delete("autoplay"),n.timeouts.delete("navigation"),n._progress.isPaused);n._progress.isActive&&n._progress.stop(),n.activeItem=e,n.layout(),n.timeouts.set("navigation",function(){0<i.time&&("pause"===i.interaction||"disable"===i.interaction&&!n.interacted)&&(n._progress.start(i.time),s&&n._progress.pause(),r&&n.timeouts.set("autoplay",function(){n._progress.resume()},1e3*i.time)),m.fn(t)&&t.call(n)},n.opt.speed)}},next:function(e){this.goto(this.getNext(),e)},previous:function(e){this.goto(this.getPrev(),e)},destroy:function(){var e=this;e.cache.clear(),e.timeouts.clear(),e._listeners.clear(),e._centerListeners.clear(),150!==e.opt.perspective&&e.el.style.removeProperty("--fg-carousel-perspective")},getSize:function(e,t){var n=e.getBoundingClientRect();const i={width:n.width,height:n.height};return t&&(n=getComputedStyle(e),i.width-=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)+parseFloat(n.borderLeftWidth)+parseFloat(n.borderRightWidth),i.height-=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)+parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth)),i},layout:function(e){const t=this;if(null===t.activeItem&&(t.activeItem=t.tmpl.items.first()),!m.number(e)&&t.cache.has("width")&&(e=t.cache.get("width")),m.number(e)){const n=t.getLayout(e);null!==t._layoutFrame&&s.cancelFrame(t._layoutFrame),t._layoutFrame=s.requestFrame(function(){t._layoutFrame=null,t.renderActive(n)&&(t.renderSide("left",t.sel.prevItem,t._leftExclude,t.cls.prevItem,n),t.renderSide("right",t.sel.nextItem,t._rightExclude,t.cls.nextItem,n),t._firstLayout=!1)})}},getLayout:function(e){var t,n,i=this;return i.cache.has("layout")&&i.cache.get("width")===e?i.cache.get("layout"):(n=i.getSize(i.elem.center).width,t=i.getSize(i.elem.inner,!0).width/2+n/2,n=i.calculate(n,t),i.cache.set("width",e),0<n?.side?.length&&i.cache.set("layout",n),n)},round:function(e,t){t=Math.pow(10,t||0);return Math.round(e*t)/t},getShowPerSide:function(){var e=this.tmpl.items.count();let t=this.opt.maxItems;return(t="auto"===t||t<=0?e%2==0?e-1:e:t)%2==0&&--t,((t=(t=t<1?1:t)>e?e%2==0?e-1:e:t)-1)/2},calculate:function(i,r,s,o){var a=this;m.number(s)||(s=a.opt.gutter.max);const l={zIndex:(o=m.number(o)?o:a.getShowPerSide())+10,gutter:s,perSide:o,side:[]};if(0<i){let t=i,n=l.zIndex-1;for(let e=0;e<o;e++,n--){var c=a.getSequentialZFromScale(e,a.opt.scale,a.opt.perspective),u=a.scaleToZ(i,c,a.opt.perspective),p=(i-u)/2,d=(t-=p,"%"===a.opt.gutter.unit?i*Math.abs(s/100):Math.abs(s)),d="%"===a.opt.gutter.unit?a.scaleToZ(d,c,a.opt.perspective):d;if(0<s?t+=d:t-=d,t+u+p>r)return s-1<a.opt.gutter.min?a.calculate(i,r,a.opt.gutter.max,o-1):a.calculate(i,r,s-1,o);d=a.getVectorX(t,c,a.opt.perspective);t+=u+p,l.side.push({x:d,z:c,zIndex:n})}}return l},cleanup:function(e,t,n){const i=this,r=m.string(n);Array.from(i.el.querySelectorAll(e)).forEach(function(e){e.classList.remove(t),i.opt.centerOnClick&&i._centerListeners.remove(e,"click"),r&&e.matches(n)||(e.style.removeProperty("transition-duration"),e.style.removeProperty("transform"),e.style.removeProperty("z-index"))})},renderActive:function(e){const n=this;if(!(n.activeItem instanceof u.Item))return!1;const t=n.activeItem.el,i=(n.cleanup(n.sel.activeItem,n.cls.activeItem),t.classList.add(n.cls.activeItem),t.style.setProperty("transition-duration",(n._firstLayout?0:n.opt.speed)+"ms"),t.style.setProperty("z-index",e.zIndex),t.style.removeProperty("transform"),n.tmpl.items.indexOf(n.activeItem));return Array.from(n.el.querySelectorAll(n.sel.bullet)).forEach(function(e,t){e.classList.remove(n.cls.activeBullet),t===i&&e.classList.add(n.cls.activeBullet)}),!0},renderSide:function(n,e,i,r,s){const o=this;if(-1!==["left","right"].indexOf(n)){o.cleanup(e,r,i);let t=o.activeItem;for(let e=0;e<s.side.length;e++){var a=s.side[e];const c="left"===n?o.getPrev(t):o.getNext(t);if(!(c instanceof u.Item))break;var l="translate3d("+("left"===n&&!o.isRTL||"right"===n&&o.isRTL?"-":"")+a.x+"px, 0,-"+a.z+"px)";c.el.classList.add(r),c.isLoaded||(c.el.style.setProperty("transition-duration","0ms"),c.el.style.setProperty("transform","translate3d(0,0,-"+o.opt.perspective+"px)"),c.el.offsetHeight),c.el.style.setProperty("transition-duration",(o._firstLayout?0:o.opt.speed)+"ms"),c.el.style.setProperty("transform",l),c.el.style.setProperty("z-index",a.zIndex),o.opt.centerOnClick&&o._centerListeners.add(c.el,"click",function(e){e.preventDefault(),e.stopPropagation(),o.interacted=!0,o.goto(c)},!0),t=c}}}})}((FooGallery.$,FooGallery),FooGallery.icons,FooGallery.utils,FooGallery.utils.is),function(i,r){i.CarouselTemplate=i.Template.extend({construct:function(e,t){var n=this;n._super(r.extend({},e,{paging:{type:"none"}}),t),n.items.LAYOUT_AFTER_LOAD=!1,n.carousel=null,n.on({"pre-init":n.onPreInit,init:n.onInit,"post-init":n.onPostInit,destroyed:n.onDestroyed,"append-item":n.onAppendItem,"after-filter-change":n.onAfterFilterChange,layout:n.onLayout},n),i.Panel&&n.lightbox instanceof i.Panel&&n.lightbox.on({open:n.onLightboxOpen,closed:n.onLightboxClosed,next:n.onLightboxNext,prev:n.onLightboxPrev},n)},onPreInit:function(){var e=this;e.carousel=new i.Carousel(e,e.template,e.cls.carousel,e.sel.carousel)},onInit:function(){this.carousel.init()},onPostInit:function(){this.carousel.postInit()},onDestroyed:function(){this.carousel instanceof i.Carousel&&this.carousel.destroy()},onAppendItem:function(e,t){e.preventDefault(),this.carousel.elem.inner.appendChild(t.el),t.isAttached=!0},onAfterFilterChange:function(){this.carousel.cache.delete("layout"),this.carousel.interacted=!0,this.carousel.goto(this.carousel.getFirst())},onLayout:function(){this.carousel.layout(this.lastWidth)},onLightboxOpen:function(){this.carousel.interacted=!0,this.carousel.stop()},onLightboxClosed:function(){this.carousel.start()},onLightboxNext:function(){this.carousel.next()},onLightboxPrev:function(){this.carousel.previous()}}),i.template.register("carousel",i.CarouselTemplate,{template:{maxItems:0,perspective:150,scale:.12,speed:300,centerOnClick:!0,gutter:{min:-40,max:-20,unit:"%"},autoplay:{time:0,interaction:"pause"}}},{container:"foogallery fg-carousel",carousel:{inner:"fg-carousel-inner",center:"fg-carousel-center",bottom:"fg-carousel-bottom",prev:"fg-carousel-prev",next:"fg-carousel-next",bullet:"fg-carousel-bullet",activeBullet:"fg-bullet-active",activeItem:"fg-item-active",prevItem:"fg-item-prev",nextItem:"fg-item-next",progress:"fg-carousel-progress"}})}((FooGallery.$,FooGallery),FooGallery.utils.obj);