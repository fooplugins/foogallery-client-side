/*
* FooGallery - The Most Intuitive and Extensible Gallery Creation and Management Tool Ever Created for WordPress
* @version 2.0.15
* @link 
* @copyright Steven Usher & Brad Vincent 2015
* @license Released under the GPLv3 license.
*/

!function(a,b,c,d,e,f,g){var h=0;b.Panel=b.Component.extend({construct:function(a,g,i,j){var k=this;k.instanceId=++h,k._super(a),k.opt=e.extend({},k.tmpl.opt.panel,g),k.cls=e.extend({},k.tmpl.cls.panel,i),k.il8n=e.extend({},k.tmpl.il8n.panel,j);var l=k.cls.states;k.cls.states.all=Object.keys(l).map(function(a){return l[a]}).join(" "),k.cls.states.allLoading=[l.idle,l.loading,l.loaded,l.error].join(" "),k.cls.states.allProgress=[l.idle,l.started,l.stopped,l.paused].join(" "),k.sel=c.selectify(k.cls),k.videoSources=d.undef(b.Panel.Video)?[]:b.Panel.Video.sources.load(),k.buttons=new b.Panel.Buttons(k),k.content=new b.Panel.Content(k),k.info=new b.Panel.Info(k),k.thumbs=new b.Panel.Thumbs(k),k.areas=[k.content,k.info,k.thumbs],k.$el=null,k.el=null,k.isCreated=!1,k.isDestroyed=!1,k.isDestroying=!1,k.isAttached=!1,k.isLoading=!1,k.isLoaded=!1,k.isError=!1,k.isInline=!1,k.isMaximized=!1,k.isFullscreen=!1,k.hasTransition=!d.empty(k.cls.transition[k.opt.transition]),k.currentItem=null,k.prevItem=null,k.nextItem=null,k.lastBreakpoint=null,k.breakpointClassNames=k.opt.breakpoints.map(function(a){return"fg-"+a.name+" fg-"+a.name+"-width fg-"+a.name+"-height"}).concat(["fg-landscape","fg-portrait"]).join(" "),k.robserver=new ResizeObserver(f.throttle(function(a){k.destroying||k.destroyed||a.forEach(function(a){if(a.target===k.el){var b=c.getResizeObserverSize(a);k.onResize(b.width,b.height)}})},50)),k.__media={},k.__loading=null,k.tmpl.destroying||k.tmpl.destroyed||k.tmpl.on({"after-filter-change":k.onItemsChanged},k)},isVisible:function(a){return a instanceof b.Item&&!a.noLightbox&&!a.panelHide},onItemsChanged:function(a){var b=this;b.thumbs.isCreated&&b.tmpl.initialized&&(b.thumbs.doCreateThumbs(b.tmpl.items.available(b.isVisible)),b.isAttached&&b.load(b.tmpl.items.first(b.isVisible)))},create:function(){var a=this;if(!a.isCreated){a.trigger("create").isDefaultPrevented()||(a.isCreated=a.doCreate()),a.isCreated&&a.trigger("created")}return a.isCreated},doCreate:function(){var a=this;return a.$el=a.createElem(),a.el=a.$el.get(0),a.tmpl.opt.protected&&(a.el.oncontextmenu=function(a){return a.preventDefault(),!1}),a.opt.keyboard&&a.$el.attr("tabindex",-1).on("keydown.foogallery",{self:a},a.onKeyDown),a.areas.forEach(function(b){b.appendTo(a.$el)}),a.buttons.appendTo(a.content.$el),!0},createElem:function(){var b=this,c=b.cls.transition[b.opt.transition]||"";b.hasTransition=!d.empty(c);var e=[b.cls.elem,c,d.string(b.opt.theme)?b.opt.theme:b.tmpl.getCSSClass("theme","fg-dark"),d.string(b.opt.loadingIcon)?b.opt.loadingIcon:b.tmpl.getCSSClass("loadingIcon"),d.string(b.opt.hoverIcon)?b.opt.hoverIcon:b.tmpl.getCSSClass("hoverIcon"),d.string(b.opt.videoIcon)?b.opt.videoIcon:b.tmpl.getCSSClass("videoIcon"),d.boolean(b.opt.stickyVideoIcon)&&b.opt.stickyVideoIcon?b.cls.stickyVideoIcon:b.tmpl.getCSSClass("stickyVideoIcon"),d.string(b.opt.insetShadow)?b.opt.insetShadow:b.tmpl.getCSSClass("insetShadow"),d.string(b.opt.filter)?b.opt.filter:b.tmpl.getCSSClass("filter"),d.string(b.opt.hoverColor)?b.opt.hoverColor:b.tmpl.getCSSClass("hoverColor"),d.boolean(b.opt.hoverScale)&&b.opt.hoverScale?b.cls.hoverScale:b.tmpl.getCSSClass("hoverScale"),d.string(b.opt.button)?b.opt.button:"",d.string(b.opt.highlight)?b.opt.highlight:"",b.opt.stackSideAreas?b.cls.stackSideAreas:"",b.opt.preserveButtonSpace?b.cls.preserveButtonSpace:"",b.opt.fitMedia?b.cls.fitMedia:"",b.opt.noMobile?b.cls.noMobile:"",b.opt.hoverButtons?b.cls.hoverButtons:"",b.opt.classNames];return a("<div/>").addClass(e.join(" "))},destroy:function(){var b=this,c=b._super.bind(b);return b.isDestroyed?f.resolved:(b.isDestroying=!0,a.Deferred(function(a){if(b.isLoading&&d.promise(b.__loading))b.__loading.always(function(){var c=b.trigger("destroy");b.isDestroying=!1,c.isDefaultPrevented()||(b.isDestroyed=b.doDestroy()),b.isDestroyed&&b.trigger("destroyed"),a.resolve()});else{var c=b.trigger("destroy");b.isDestroying=!1,c.isDefaultPrevented()||(b.isDestroyed=b.doDestroy()),b.isDestroyed&&b.trigger("destroyed"),a.resolve()}}).then(function(){c()}).promise())},doDestroy:function(){var a=this;return a.buttons.destroy(),a.areas.reverse(),a.areas.forEach(function(a){a.destroy()}),a.detach(),a.isCreated&&a.$el.remove(),!0},appendTo:function(a){var b=this;if((b.isCreated||b.create())&&!b.isAttached){b.trigger("append",[a]).isDefaultPrevented()||(b.isAttached=b.doAppendTo(a)),b.isAttached&&b.trigger("appended",[a])}return b.isAttached},doAppendTo:function(b){var c=this,d=a(b),e=c.buttons.get("maximize");return c.isInline=!d.is("body"),c.$el.appendTo(d),e.set(!c.isInline,c.isInline&&e.isEnabled()),c.robserver.observe(c.el),c.areas.forEach(function(a){a.listen()}),null!==c.el.parentNode},detach:function(){var a=this;if(a.isCreated&&a.isAttached){a.trigger("detach").isDefaultPrevented()||(a.isAttached=!a.doDetach()),a.isAttached||a.trigger("detached")}return!a.isAttached},doDetach:function(){var a=this;return a.robserver.unobserve(a.el),a.areas.forEach(function(a){a.stopListening()}),a.$el.detach(),!0},resize:function(){var a=this;a.$el.removeClass(a.breakpointClassNames).addClass(a.lastBreakpoint),a.areas.forEach(function(a){a.resize()}),a.buttons.resize()},onResize:function(a,b){var c=this,d=c.getBreakpoint(a,b);c.lastBreakpoint!==d&&(c.lastBreakpoint=d,c.resize())},getBreakpoint:function(a,b){var c=this,d=[];return c.opt.breakpoints.forEach(function(c){var e=c.width<=a,f=c.height<=b;e&&f&&d.push("fg-"+c.name),e&&d.push("fg-"+c.name+"-width"),f&&d.push("fg-"+c.name+"-height")}),d.push(a>b?"fg-landscape":"fg-portrait"),d.length>0?d.join(" "):null},getMedia:function(a){return a instanceof b.Item?this.__media.hasOwnProperty(a.id)?this.__media[a.id]:this.__media[a.id]=b.Panel.media.make(a.type,this,a):null},getItem:function(a){var c=this,d=a;return d instanceof b.Item||(d=c.currentItem),d instanceof b.Item||(d=c.tmpl.items.first(c.isVisible)),a instanceof b.Item&&!c.isVisible(a)&&((d=c.tmpl.items.next(a,c.isVisible,c.opt.loop))instanceof b.Item||(d=c.tmpl.items.prev(a,c.isVisible,c.opt.loop))),d},load:function(c){var d=this;return(c=d.getItem(c))instanceof b.Item?c===d.currentItem?f.reject("item is currently loaded"):(d.isLoading=!0,d.isLoaded=!1,d.isError=!1,d.__loading=a.Deferred(function(a){if(!d.isCreated||!d.isAttached)return void a.rejectWith("not created or attached");var e=d.getMedia(c);return e instanceof b.Panel.Media?d.trigger("load",[e,c]).isDefaultPrevented()?void a.rejectWith("default prevented"):(d.currentItem=c,d.prevItem=d.tmpl.items.prev(c,d.isVisible,d.opt.loop),d.nextItem=d.tmpl.items.next(c,d.isVisible,d.opt.loop),void d.doLoad(e).then(a.resolve).fail(a.reject)):void a.rejectWith("no media to load")}).always(function(){d.isLoading=!1}).then(function(){d.isLoaded=!0,d.trigger("loaded",[c]),c.updateState()}).fail(function(){d.isError=!0,d.trigger("error",[c])}).promise()):f.reject("no item to load")},doLoad:function(b){var c=this,d=[];return c.buttons.beforeLoad(b),c.areas.forEach(function(a){d.push(a.load(b))}),a.when.apply(a,d).then(function(){c.buttons.afterLoad(b)}).promise()},open:function(a,b){var c=this;return a=c.getItem(a),c.trigger("open",[a,b]).isDefaultPrevented()?f.reject("default prevented"):c.doOpen(a,b).then(function(){c.trigger("opened",[a,b])})},doOpen:function(c,e){var f=this;return a.Deferred(function(a){if(!(c instanceof b.Item))return void a.rejectWith("item not instanceof FooGallery.Item");e=d.empty(e)?"body":e,f.isAttached||f.appendTo(e),f.isAttached?f.load(c).then(a.resolve).fail(a.reject):a.rejectWith("not attached")}).promise()},next:function(){var a=this,c=a.currentItem,d=a.nextItem;return d instanceof b.Item?a.trigger("next",[c,d]).isDefaultPrevented()?f.reject("default prevented"):a.doNext(d).then(function(){a.trigger("after-next",[c,d])}):f.reject("no next item")},doNext:function(a){return this.load(a)},prev:function(){var a=this,c=a.currentItem,d=a.prevItem;return d instanceof b.Item?a.trigger("prev",[c,d]).isDefaultPrevented()?f.reject("default prevented"):a.doPrev(d).then(function(){a.trigger("after-prev",[c,d])}):f.reject("no prev item")},doPrev:function(a){return this.load(a)},close:function(a){var b=this;return b.trigger("close",[b.currentItem]).isDefaultPrevented()?f.reject("default prevented"):b.doClose(a).then(function(){b.trigger("closed")})},doClose:function(b,c){c=!d.boolean(c)||c;var e=this;return a.Deferred(function(c){e.content.close(b).then(function(){var d=[];e.areas.forEach(function(a){a!==e.content&&d.push(a.close(b))}),a.when.apply(a,d).then(c.resolve).fail(c.reject)})}).always(function(){e.currentItem=null,e.buttons.close(),c&&e.detach(),e.tmpl.state.clear()}).promise()},trapFocus:function(){this.isCreated&&this.$el.on("keydown",{self:this},this.onTrapFocusKeydown)},releaseFocus:function(){this.isCreated&&this.$el.off("keydown",this.onTrapFocusKeydown)},onTrapFocusKeydown:function(b){if(9===b.keyCode){var c=b.data.self,d=a(b.target),e=d.parents("[role=dialog]");if(e.length){var f=e.find(c.opt.focusable.include).not(c.opt.focusable.exclude),g=f.first(),h=f.last(),i=b.shiftKey?g:h,j=b.shiftKey?h:g;i.length&&d.is(i)&&(b.preventDefault(),j.trigger("focus"))}}},onKeyDown:function(a){var b=a.data.self;switch(a.which){case 39:case 40:b.next();break;case 37:case 38:b.prev();break;case 27:var c;b.isFullscreen?(c=b.buttons.get("fullscreen"),c.exit()):b.isMaximized&&b.isInline?(c=b.buttons.get("maximize"),c.exit()):b.opt.buttons.close&&b.close()}}}),b.template.configure("core",{panel:{classNames:"",theme:null,button:null,highlight:null,loadingIcon:null,hoverIcon:null,videoIcon:null,stickyVideoIcon:null,hoverColor:null,hoverScale:null,insetShadow:null,filter:null,noMobile:!1,hoverButtons:!1,icons:"default",transition:"none",loop:!0,autoProgress:0,autoProgressStart:!0,fitMedia:!1,keyboard:!0,noScrollbars:!0,swipe:!0,stackSideAreas:!0,preserveButtonSpace:!0,info:"bottom",infoVisible:!1,infoOverlay:!0,infoAutoHide:!0,infoAlign:"default",exif:"none",cart:"none",cartVisible:!1,thumbs:"none",thumbsVisible:!0,thumbsCaptions:!0,thumbsCaptionsAlign:"default",thumbsSmall:!1,thumbsBestFit:!0,focusable:{include:"a[href], area[href], input, select, textarea, button, iframe, object, embed, [tabindex], [contenteditable]",exclude:"[tabindex=-1], [disabled], :hidden"},buttons:{prev:!0,next:!0,close:!0,maximize:!0,fullscreen:!0,autoProgress:!0,info:!0,thumbs:!1,cart:!1},breakpoints:[{name:"medium",width:480,height:480},{name:"large",width:768,height:640},{name:"x-large",width:1024,height:768}]}},{panel:{elem:"fg-panel",maximized:"fg-panel-maximized",fullscreen:"fg-panel-fullscreen",fitMedia:"fg-panel-fit-media",noScrollbars:"fg-panel-no-scroll",stackSideAreas:"fg-panel-area-stack",preserveButtonSpace:"fg-panel-preserve-button-space",hoverButtons:"fg-panel-hover-buttons",stickyVideoIcon:"fg-video-sticky",hoverScale:"fg-hover-scale",noMobile:"fg-panel-no-mobile",loader:"fg-loader",states:{idle:"fg-idle",loading:"fg-loading",loaded:"fg-loaded",error:"fg-error",visible:"fg-visible",reverse:"fg-reverse",selected:"fg-selected",disabled:"fg-disabled",hidden:"fg-hidden",started:"fg-started",stopped:"fg-stopped",paused:"fg-paused",noTransitions:"fg-no-transitions"},buttons:{container:"fg-panel-buttons",prev:"fg-panel-button fg-panel-button-prev",next:"fg-panel-button fg-panel-button-next",autoProgress:"fg-panel-button fg-panel-button-progress",close:"fg-panel-button fg-panel-button-close",fullscreen:"fg-panel-button fg-panel-button-fullscreen",maximize:"fg-panel-button fg-panel-button-maximize",info:"fg-panel-button fg-panel-button-info",thumbs:"fg-panel-button fg-panel-button-thumbs",cart:"fg-panel-button fg-panel-button-cart"},transition:{fade:"fg-panel-fade",horizontal:"fg-panel-horizontal",vertical:"fg-panel-vertical"},area:{elem:"fg-panel-area",inner:"fg-panel-area-inner"},content:{},sideArea:{toggle:"fg-panel-area-toggle",button:"fg-panel-area-button",visible:"fg-panel-area-visible",position:{top:"fg-panel-area-top",right:"fg-panel-area-right",bottom:"fg-panel-area-bottom",left:"fg-panel-area-left"}},info:{overlay:"fg-panel-info-overlay",align:{left:"fg-panel-media-caption-left",center:"fg-panel-media-caption-center",right:"fg-panel-media-caption-right",justified:"fg-panel-media-caption-justified"}},cart:{},thumbs:{prev:"fg-panel-thumbs-button fg-panel-thumbs-prev",next:"fg-panel-thumbs-button fg-panel-thumbs-next",viewport:"fg-panel-thumbs-viewport",stage:"fg-panel-thumbs-stage",noCaptions:"fg-panel-thumbs-no-captions",small:"fg-panel-thumbs-small",spacer:"fg-panel-thumb-spacer",thumb:{elem:"fg-panel-thumb",media:"fg-panel-thumb-media",overlay:"fg-panel-thumb-overlay",wrap:"fg-panel-thumb-wrap",image:"fg-panel-thumb-image",caption:"fg-panel-thumb-caption",title:"fg-panel-thumb-title",description:"fg-panel-thumb-description"},align:{left:"fg-panel-thumb-caption-left",center:"fg-panel-thumb-caption-center",right:"fg-panel-thumb-caption-right",justified:"fg-panel-thumb-caption-justified"}}}},{panel:{buttons:{prev:"Previous Media",next:"Next Media",close:"Close Modal",maximize:"Toggle Maximize",fullscreen:"Toggle Fullscreen",autoProgress:"Auto Progress",info:"Toggle Information",thumbs:"Toggle Thumbnails",cart:"Toggle Cart"}}})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.obj,FooGallery.utils.fn,FooGallery.utils.transition),function(a,b,c,d,e){b.Panel.Buttons=d.Class.extend({construct:function(a){this.panel=a,this.opt=a.opt.buttons,this.cls=a.cls.buttons,this.sel=a.sel.buttons,this.il8n=a.il8n.buttons,this.$el=null,this.isCreated=!1,this.isAttached=!1,this.__registered=[],this.registerCore()},registerCore:function(){this.register(new b.Panel.Button(this.panel,"prev",{icon:"arrow-left",label:this.il8n.prev,click:this.panel.prev.bind(this.panel),beforeLoad:function(a){this.disable(null==this.panel.prevItem)}}),10),this.register(new b.Panel.Button(this.panel,"next",{icon:"arrow-right",label:this.il8n.next,click:this.panel.next.bind(this.panel),beforeLoad:function(a){this.disable(null==this.panel.nextItem)}}),20),this.register(new b.Panel.AutoProgress(this.panel),30),this.register(new b.Panel.Maximize(this.panel),180),this.register(new b.Panel.Fullscreen(this.panel),190),this.register(new b.Panel.Button(this.panel,"close",{icon:"close",label:this.il8n.close,click:this.panel.close.bind(this.panel)}),200)},register:function(a,c){return a instanceof b.Panel.Button?this.__registered.push({name:a.name,button:a,priority:e.number(c)?c:99})-1:-1},get:function(a){for(var b=null,c=0,d=this.__registered.length;c<d;c++)if(this.__registered[c].name===a){b=this.__registered[c].button;break}return b},each:function(a,b){var c=this;b&&c.__registered.sort(function(a,b){return a.priority-b.priority}),c.__registered.forEach(function(b){a.call(c,b.button)})},toggle:function(a,b){var c=this.get(a);null!=c&&c.toggle(b)},disable:function(a,b){var c=this.get(a);null!=c&&c.disable(b)},destroy:function(){var a=this;return a.panel.trigger("buttons-destroy",[a]).isDefaultPrevented()||(a.isCreated=!a.doDestroy()),a.isCreated||a.panel.trigger("buttons-destroyed",[a]),!a.isCreated},doDestroy:function(){var a=this;return a.each(function(a){a.destroy()}),a.isCreated&&(a.detach(),a.$el.remove()),!0},create:function(){var a=this;if(!a.isCreated){a.panel.trigger("buttons-create",[a]).isDefaultPrevented()||(a.isCreated=a.doCreate()),a.isCreated&&a.panel.trigger("buttons-created",[a])}return a.isCreated},doCreate:function(){var b=this;return b.$el=a("<div/>").addClass(b.cls.container),b.each(function(a){a.appendTo(b.$el)},!0),!0},appendTo:function(a){var b=this;if(b.isCreated||b.create(),b.isCreated&&!b.isAttached){b.panel.trigger("buttons-append",[b,a]).isDefaultPrevented()||(b.isAttached=b.doAppendTo(a)),b.isAttached&&b.panel.trigger("buttons-appended",[b,a])}return b.isAttached},doAppendTo:function(a){return this.$el.appendTo(a),this.$el.parent().length>0},detach:function(){var a=this;if(a.isCreated&&a.isAttached){a.panel.trigger("buttons-detach",[a]).isDefaultPrevented()||(a.isAttached=!a.doDetach()),a.isAttached||a.panel.trigger("buttons-detached",[a])}return!a.isAttached},doDetach:function(){return this.$el.detach(),!0},beforeLoad:function(a){this.each(function(b){b.beforeLoad(a)})},afterLoad:function(a){this.each(function(b){b.afterLoad(a)})},close:function(){this.each(function(a){a.close()})},resize:function(){this.each(function(a){a.resize()})}})}(FooGallery.$,FooGallery,FooGallery.icons,FooGallery.utils,FooGallery.utils.is),function(a,b,c,d,e,f){b.Panel.Button=d.Class.extend({construct:function(b,c,d){this.panel=b,this.name=c,this.opt=f.extend({icon:null,label:null,visible:!!b.opt.buttons[c],disabled:!1,click:a.noop,beforeLoad:a.noop,afterLoad:a.noop,close:a.noop,resize:a.noop},d),this.cls={elem:b.cls.buttons[c],states:b.cls.states},this.$el=null,this.isVisible=this.opt.visible,this.isDisabled=this.opt.disabled,this.isCreated=!1,this.isAttached=!1},isEnabled:function(){return this.panel.opt.buttons.hasOwnProperty(this.name)&&this.panel.opt.buttons[this.name]},create:function(){var b=this;if(!b.isCreated){b.$el=a("<button/>",{type:"button","aria-label":b.opt.label,"aria-disabled":b.isDisabled,"aria-hidden":!b.isVisible}).addClass(b.cls.elem).on("click.foogallery",{self:b},b.onButtonClick),e.string(b.opt.icon)?b.$el.append(c.get(b.opt.icon,b.panel.opt.icons)):e.array(b.opt.icon)?b.opt.icon.forEach(function(a){b.$el.append(c.get(a,b.panel.opt.icons))}):e.fn(b.opt.icon)&&b.$el.append(b.opt.icon.call(this)),b.isCreated=!0;var d=b.isEnabled();b.toggle(d),b.disable(!d)}return b.isCreated},destroy:function(){return this.isCreated&&(this.$el.off("click.foogallery").remove(),this.isCreated=!1),!this.isCreated},appendTo:function(a){return!this.isCreated&&!this.create()||this.isAttached||this.$el.appendTo(a),this.isAttached},detach:function(){return this.isCreated&&this.isAttached&&this.$el.detach(),!this.isAttached},toggle:function(a){this.isCreated&&(this.isVisible=e.boolean(a)?a:!this.isVisible,this.$el.toggleClass(this.cls.states.hidden,!this.isVisible).attr("aria-hidden",!this.isVisible))},disable:function(a){this.isCreated&&(this.isDisabled=e.boolean(a)?a:!this.isDisabled,this.$el.toggleClass(this.cls.states.disabled,this.isDisabled).attr({"aria-disabled":this.isDisabled,disabled:this.isDisabled}))},beforeLoad:function(a){this.opt.beforeLoad.call(this,a)},afterLoad:function(a){this.opt.afterLoad.call(this,a)},close:function(){this.opt.close.call(this)},click:function(){this.opt.click.call(this)},resize:function(){this.opt.resize.call(this)},onButtonClick:function(a){a.preventDefault(),a.data.self.click()}})}(FooGallery.$,FooGallery,FooGallery.icons,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.obj),function(a,b,c){b.Panel.SideAreaButton=b.Panel.Button.extend({construct:function(a){this._super(a.panel,a.name,{icon:a.opt.icon,label:a.opt.label,autoHideArea:a.opt.autoHide,click:a.toggle.bind(a)}),this.area=a,this.__isVisible=null,this.__autoHide=null},beforeLoad:function(a){var b=this.area.isEnabled(),d=b&&this.area.canLoad(a);d||null!=this.__isVisible?d&&c.boolean(this.__isVisible)&&(this.area.toggle(this.__isVisible),this.__isVisible=null):(this.__isVisible=this.area.isVisible,this.area.toggle(!1)),b?this.disable(!d):this.toggle(d),this.checkAutoHide(b,d),this.opt.beforeLoad.call(this,a)},checkAutoHide:function(a,b){a&&b&&!0===this.opt.autoHideArea&&(null==this.__autoHide&&c.empty(this.panel.lastBreakpoint)?(this.__autoHide=this.area.isVisible,this.area.toggle(!1),this.area.button.toggle(!0)):c.boolean(this.__autoHide)&&!c.empty(this.panel.lastBreakpoint)&&(this.area.button.toggle(this.area.button.isEnabled()&&this.area.opt.toggle),this.area.toggle(this.__autoHide),this.__autoHide=null))},resize:function(){var a=this.area.isEnabled(),b=a&&this.area.canLoad(this.area.currentMedia);this.checkAutoHide(a,b)}})}(FooGallery.$,FooGallery,FooGallery.utils.is),function(a,b,c){b.Panel.AutoProgress=b.Panel.Button.extend({construct:function(a){var b=this;b.__stopped=!a.opt.autoProgressStart,b.__timer=new c.Timer,b._super(a,"autoProgress",{icon:"auto-progress",label:a.il8n.buttons.autoProgress}),b.$icon=null,b.$circle=null,b.circumference=0},isEnabled:function(){return this._super()&&this.panel.opt.autoProgress>0},create:function(){if(this._super()){this.$icon=this.$el.find("svg"),this.$circle=this.$icon.find("circle");var a=parseFloat(this.$circle.attr("r"));this.circumference=2*a*Math.PI,this.$circle.css({"stroke-dasharray":this.circumference+" "+this.circumference,"stroke-dashoffset":this.circumference+""}),this.__timer.on({"start resume":this.onStartOrResume,pause:this.onPause,stop:this.onStop,tick:this.onTick,"complete reset":this.onCompleteOrReset,complete:this.onComplete},this)}return this.isCreated},close:function(){this.__timer.pause(),this._super()},destroy:function(){return this.__timer.destroy(),this._super()},beforeLoad:function(a){this.isEnabled()&&this.__timer.reset(),this._super(a)},afterLoad:function(a){this.isEnabled()&&(this.__timer.countdown(this.panel.opt.autoProgress),this.__stopped&&this.__timer.pause()),this._super(a)},click:function(){this.__timer.isRunning?(this.__stopped=!0,this.__timer.pause()):this.__timer.canResume?(this.__stopped=!1,this.__timer.resume()):(this.__stopped=!1,this.__timer.restart()),this._super()},onStartOrResume:function(){this.$icon.removeClass(this.cls.states.allProgress).addClass(this.cls.states.started)},onPause:function(){this.$icon.removeClass(this.cls.states.allProgress).addClass(this.cls.states.paused)},onStop:function(){this.$icon.removeClass(this.cls.states.allProgress).addClass(this.cls.states.stopped)},onTick:function(a,b,c){var d=b/c*100;this.$circle.css("stroke-dashoffset",this.circumference-d/100*this.circumference)},onCompleteOrReset:function(){this.$icon.removeClass(this.cls.states.allProgress)},onComplete:function(){this.panel.next()}})}(FooGallery.$,FooGallery,FooGallery.utils),function(a,b,c){b.fullscreen=new c.FullscreenAPI,b.Panel.Fullscreen=b.Panel.Button.extend({construct:function(a){this._super(a,"fullscreen",{icon:["expand","shrink"],label:a.il8n.buttons.fullscreen})},create:function(){return!!this._super()&&(this.$el.attr("aria-pressed",!1),!0)},click:function(){var a=this,c=a.panel.el;b.fullscreen.toggle(c).then(function(){b.fullscreen.element()===c?(b.fullscreen.on("change error",a.onFullscreenChange,a),a.enter()):(b.fullscreen.off("change error",a.onFullscreenChange,a),a.exit())},function(a){console.debug("Error toggling fullscreen on element.",a,c)}),a._super()},onFullscreenChange:function(){b.fullscreen.element()!==this.panel.el&&this.exit()},enter:function(){this.panel.isFullscreen||(this.panel.isFullscreen=!0,this.panel.$el.addClass(this.panel.cls.fullscreen),this.panel.isMaximized||(this.panel.$el.attr({role:"dialog","aria-modal":!0}).trigger("focus"),this.panel.trapFocus()),this.isCreated&&this.$el.attr("aria-pressed",!0),this.panel.buttons.toggle("maximize",!1))},exit:function(){this.panel.isFullscreen&&(this.panel.$el.removeClass(this.panel.cls.fullscreen),this.panel.isMaximized||(this.panel.$el.attr({role:null,"aria-modal":null}).trigger("focus"),this.panel.releaseFocus()),this.isCreated&&this.$el.attr("aria-pressed",!1),this.panel.buttons.toggle("maximize",this.panel.isInline&&this.panel.buttons.opt.maximize),this.panel.isFullscreen=!1)}})}(FooGallery.$,FooGallery,FooGallery.utils),function(a,b,c){b.Panel.Maximize=b.Panel.Button.extend({construct:function(b){this._super(b,"maximize",{icon:"maximize",label:b.il8n.buttons.maximize}),this.scrollPosition=[],this.$placeholder=a("<span/>")},create:function(){return!!this._super()&&(this.$el.attr("aria-pressed",!1),!0)},click:function(){this.set(!this.panel.isMaximized),this._super()},close:function(){this.exit(),this._super()},set:function(a,b){a?this.enter():this.exit(),b=c.boolean(b)?b:this.isVisible,this.toggle(b)},enter:function(){this.panel.isMaximized||(this.panel.isMaximized=!0,this.$placeholder.insertAfter(this.panel.$el),this.panel.$el.appendTo("body").addClass(this.panel.cls.maximized).attr({role:"dialog","aria-modal":!0}).trigger("focus"),this.isCreated&&this.$el.attr("aria-pressed",!0),this.panel.trapFocus(),this.panel.opt.noScrollbars&&(this.scrollPosition=[window.scrollX,window.scrollY],a("html").addClass(this.panel.cls.noScrollbars)))},exit:function(){this.panel.isMaximized&&(this.panel.isMaximized=!1,this.panel.$el.removeClass(this.panel.cls.maximized).attr({role:null,"aria-modal":null}).insertBefore(this.$placeholder),this.panel.isInline&&this.panel.$el.trigger("focus"),this.$placeholder.detach(),this.isCreated&&this.$el.attr("aria-pressed",!1),this.panel.releaseFocus(),this.panel.opt.noScrollbars&&(a("html").removeClass(this.panel.cls.noScrollbars).prop("clientWidth"),c.array(this.scrollPosition)&&2===this.scrollPosition.length&&window.scrollTo(this.scrollPosition[0],this.scrollPosition[1]),this.scrollPosition=[]))}})}(FooGallery.$,FooGallery,FooGallery.utils.is),function(a,b,c,d,e,f,g){b.Panel.Area=c.Class.extend({construct:function(a,b,d,e){this.panel=a,this.name=b,this.opt=f.extend({waitForUnload:!0},d),this.cls=f.extend({elem:this.__cls(a.cls.area.elem,b,!0),inner:this.__cls(a.cls.area.inner,b,!0)},e),this.sel=c.selectify(this.cls),this.currentMedia=null,this.$el=null,this.$inner=null,this.isCreated=!1,this.isAttached=!1},__cls:function(a,b,c){var d=a.replace(/-area($|-)/,"-"+b+"$1");return c?[a,d].join(" "):d},create:function(){var a=this;if(!a.isCreated){a.panel.trigger("area-create",[a]).isDefaultPrevented()||(a.isCreated=a.doCreate()),a.isCreated&&a.panel.trigger("area-created",[a])}return a.isCreated},doCreate:function(){return this.$el=a("<div/>").addClass(this.cls.elem),this.$inner=a("<div/>").addClass(this.cls.inner).appendTo(this.$el),!0},destroy:function(){var a=this;if(a.isCreated){a.panel.trigger("area-destroy",[a]).isDefaultPrevented()||(a.isCreated=!a.doDestroy()),a.isCreated||a.panel.trigger("area-destroyed",[a])}return!a.isCreated},doDestroy:function(){return this.currentMedia instanceof b.Panel.Media&&this.currentMedia.detach(),this.$el.remove(),!0},appendTo:function(a){var b=this;if(b.isCreated||b.create(),b.isCreated&&!b.isAttached){b.panel.trigger("area-append",[b,a]).isDefaultPrevented()||(b.isAttached=b.doAppendTo(a)),b.isAttached&&b.panel.trigger("area-appended",[b,a])}return b.isAttached},doAppendTo:function(a){return this.$el.appendTo(a),this.$el.parent().length>0},detach:function(){var a=this;if(a.isCreated&&a.isAttached){a.panel.trigger("area-detach",[a]).isDefaultPrevented()||(a.isAttached=!a.doDetach()),a.isAttached||a.panel.trigger("area-detached",[a])}return!a.isAttached},doDetach:function(){return this.$el.detach(),!0},load:function(c){var d=this;return c instanceof b.Panel.Media?a.Deferred(function(a){var e=d.shouldReverseTransition(d.currentMedia,c);if(d.panel.trigger("area-load",[d,c,e]).isDefaultPrevented())return void a.rejectWith("default prevented");var f=d.currentMedia instanceof b.Panel.Media,g=d.currentMedia;d.opt.waitForUnload&&f?(d.panel.trigger("area-unload",[d,g]),d.doUnload(g,e).then(function(){d.panel.trigger("area-unloaded",[d,g]),d.currentMedia=c,d.panel.trigger("area-load",[d,c]),d.doLoad(c,e).then(a.resolve).fail(a.reject)}).fail(a.reject)):(f&&(d.panel.trigger("area-unload",[d,g]),d.doUnload(g,e).then(function(){d.panel.trigger("area-unloaded",[d,g])})),d.currentMedia=c,d.panel.trigger("area-load",[d,c]),d.doLoad(c,e).then(a.resolve).fail(a.reject))}).then(function(){d.panel.trigger("area-loaded",[d,c])}).fail(function(){d.panel.trigger("area-error",[d,c])}).promise():e.reject("unable to load media")},doLoad:function(a,b){return e.resolved},doUnload:function(a,b){return e.resolved},close:function(a){var c=this;if(c.currentMedia instanceof b.Panel.Media){var d=c.currentMedia;if(!a)return c.panel.trigger("area-unload",[c,d]),c.doUnload(d,!1).then(function(){c.panel.trigger("area-unloaded",[c,d]),c.currentMedia=null});c.panel.trigger("area-unload",[c,d]),c.doUnload(d,!1).then(function(){c.panel.trigger("area-unloaded",[c,d])}),c.currentMedia=null}return e.resolved},shouldReverseTransition:function(a,c){if(!(a instanceof b.Panel.Media&&c instanceof b.Panel.Media))return!0;var d=a.item.index<c.item.index,e=this.panel.tmpl.items.last(this.panel.isVisible);return e instanceof b.Item&&(0===c.item.index&&a.item.index===e.index||c.item.index===e.index&&0===a.item.index)&&(d=!d),d},listen:function(){},stopListening:function(){},resize:function(){}})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.obj,FooGallery.utils.str),function(a,b,c,d){b.Panel.Content=b.Panel.Area.extend({construct:function(a){this._super(a,"content",{waitForUnload:!1},a.cls.content),this.robserver=null},doCreate:function(){var a=this;return!!a._super()&&(a.panel.opt.swipe&&a.$inner.fgswipe({data:{self:a},swipe:a.onSwipe,allowPageScroll:!0}),a.robserver=new ResizeObserver(c.throttle(function(){a.panel instanceof b.Panel&&!a.panel.destroying&&!a.panel.destroyed&&a.resize()},50)),a.robserver.observe(a.$inner.get(0)),!0)},doDestroy:function(){return this.robserver instanceof ResizeObserver&&this.robserver.disconnect(),this.$inner.fgswipe("destroy"),this._super()},doLoad:function(b,c){var e=this,f=e.panel.cls.states;return a.Deferred(function(g){b.isCreated||b.create(),b.$el.toggleClass(f.reverse,c),b.appendTo(e.$inner);var h=[];e.panel.hasTransition?h.push(d.start(b.$el,function(a){a.addClass(f.visible)},null,350)):b.$el.addClass(f.visible),h.push(b.load()),a.when.apply(a,h).then(g.resolve).fail(g.reject)}).promise()},doUnload:function(b,c){var e=this,f=e.panel.cls.states;return a.Deferred(function(g){var h=[];b.isCreated&&(b.$el.toggleClass(f.reverse,!c),e.panel.hasTransition?h.push(d.start(b.$el,function(a){a.removeClass(f.visible)},null,350)):b.$el.removeClass(f.visible)),h.push(b.unload()),a.when.apply(a,h).then(g.resolve).fail(g.reject)}).always(function(){b.isCreated&&b.$el.removeClass(f.reverse),b.detach()}).promise()},onSwipe:function(a,b){var c=b.self;"E"===a.direction&&c.panel.prev(),"W"===a.direction&&c.panel.next()},resize:function(){this.currentMedia instanceof b.Panel.Media&&this.currentMedia.resize()}})}(FooGallery.$,FooGallery,FooGallery.utils.fn,FooGallery.utils.transition),function(a,b,c,d,e,f,g){b.Panel.SideArea=b.Panel.Area.extend({construct:function(a,b,c,d){var e=this,f=a.cls.sideArea;e._super(a,b,g.extend({icon:null,label:null,position:null,visible:!0,autoHide:!1,toggle:!!a.opt.buttons[b]},c),g.extend({toggle:this.__cls(f.toggle,b,!0),visible:this.__cls(f.visible,b),position:{top:this.__cls(f.position.top,b),right:this.__cls(f.position.right,b),bottom:this.__cls(f.position.bottom,b),left:this.__cls(f.position.left,b)}},d)),e.isVisible=e.opt.visible,e.allPositionClasses=Object.keys(e.cls.position).map(function(a){return e.cls.position[a]}).join(" "),e.button=e.registerButton()},registerButton:function(){var a=new b.Panel.SideAreaButton(this);return this.panel.buttons.register(a),a},doCreate:function(){return!!this._super()&&(this.opt.toggle&&a("<button/>",{type:"button"}).addClass(this.cls.toggle).append(c.get("circle-close",this.panel.opt.icons)).on("click.foogallery",{self:this},this.onToggleClick).appendTo(this.$inner),this.isEnabled()&&(this.panel.$el.toggleClass(this.cls.visible,this.isVisible),this.setPosition(this.opt.position)),!0)},isEnabled:function(){return this.cls.position.hasOwnProperty(this.opt.position)},canLoad:function(a){return a instanceof b.Panel.Media},getPosition:function(){return this.isEnabled()?this.cls.position[this.opt.position]:null},setPosition:function(a){this.opt.position=this.cls.position.hasOwnProperty(a)?a:null,e.jq(this.panel.$el)&&this.panel.$el.removeClass(this.allPositionClasses).addClass(this.getPosition())},toggle:function(a){this.isVisible=e.boolean(a)?a:!this.isVisible,e.jq(this.panel.$el)&&this.panel.$el.toggleClass(this.cls.visible,this.isVisible)},onToggleClick:function(a){a.preventDefault(),a.data.self.toggle()}})}(FooGallery.$,FooGallery,FooGallery.icons,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.obj),function(a,b,c,d){
b.Panel.Info=b.Panel.SideArea.extend({construct:function(a){this._super(a,"info",{icon:"info",label:a.il8n.buttons.info,position:a.opt.info,overlay:a.opt.infoOverlay,visible:a.opt.infoVisible,autoHide:a.opt.infoAutoHide,align:a.opt.infoAlign,waitForUnload:!1},a.cls.info),this.allPositionClasses+=" "+this.cls.overlay},doCreate:function(){var a=this;return!(!a.isEnabled()||!a._super())&&(c.string(a.opt.align)&&a.cls.align.hasOwnProperty(a.opt.align)&&a.panel.$el.addClass(a.cls.align[a.opt.align]),!0)},getPosition:function(){var a=this._super();return null!=a&&this.opt.overlay?a+" "+this.cls.overlay:a},setPosition:function(a,b){c.boolean(b)&&(this.opt.overlay=b),this._super(a)},canLoad:function(a){return this._super(a)&&a.caption.canLoad()},doLoad:function(a,b){return this.canLoad(a)&&(a.caption.appendTo(this.$inner),a.caption.load()),d.resolved},doUnload:function(a,b){return a.caption.unload(),a.caption.detach(),d.resolved}})}(FooGallery.$,FooGallery,FooGallery.utils.is,FooGallery.utils.fn),function(a,b,c,d,e,f,g){b.Panel.Thumbs=b.Panel.SideArea.extend({construct:function(a){this._super(a,"thumbs",{icon:"thumbs",label:a.il8n.buttons.thumbs,position:a.opt.thumbs,captions:a.opt.thumbsCaptions,align:a.opt.thumbsCaptionsAlign,small:a.opt.thumbsSmall,bestFit:a.opt.thumbsBestFit,toggle:!1,waitForUnload:!1},a.cls.thumbs),this.iobserver=null,this.robserver=null,this.$prev=null,this.$next=null,this.$viewport=null,this.$stage=null,this.$dummy=null,this.__items=[],this.__animationFrameId=null,this.info=this.getInfo(),this.selectedIndex=0,this.scrollIndex=0,this.lastIndex=0},isHorizontal:function(){return-1!==["top","bottom"].indexOf(this.opt.position)},doCreate:function(){var g=this;return!(!g.isEnabled()||!g._super())&&(g.opt.captions||g.panel.$el.addClass(g.cls.noCaptions),g.opt.small&&g.panel.$el.addClass(g.cls.small),e.string(g.opt.align)&&g.cls.align.hasOwnProperty(g.opt.align)&&g.panel.$el.addClass(g.cls.align[g.opt.align]),g.$prev=a("<button/>",{type:"button"}).addClass(g.cls.prev).append(c.get("arrow-left",g.panel.opt.icons)).on("click.foogallery",{self:g},g.onPrevClick).prependTo(g.$inner),g.$viewport=a("<div/>").addClass(g.cls.viewport).appendTo(g.$inner),g.$next=a("<button/>",{type:"button"}).addClass(g.cls.next).append(c.get("arrow-right",g.panel.opt.icons)).on("click.foogallery",{self:g},g.onNextClick).appendTo(g.$inner),g.$stage=a("<div/>").addClass(g.cls.stage).appendTo(g.$viewport),g.$dummy=a("<div/>").addClass(g.cls.thumb.elem).appendTo(g.$viewport),g.iobserver=new IntersectionObserver(function(a){a.forEach(function(a){a.isIntersecting&&(g.iobserver.unobserve(a.target),g.loadThumbElement(a.target))})},{root:g.$inner.get(0),rootMargin:"82px 300px"}),g.robserver=new ResizeObserver(f.throttle(function(a){if(a.length>0&&g.panel instanceof b.Panel&&!g.panel.destroying&&!g.panel.destroyed){var c=d.getResizeObserverSize(a[0]),e=g.info.viewport,f=Math.floor(Math.abs(c.width-e.width)),h=Math.floor(Math.abs(c.height-e.height));g.isVisible&&(f>1||h>1)&&g.resize()}},50)),g.doCreateThumbs(g.panel.tmpl.items.available(g.panel.isVisible)),!0)},doCreateThumbs:function(b){if(!e.empty(b)){var c=this;c.iobserver instanceof IntersectionObserver&&c.iobserver.takeRecords().forEach(function(a){c.iobserver.unobserve(a.target)}),c.__items=b,c.selectedIndex=0,c.scrollIndex=0,c.lastIndex=c.__items.length-1,c.$stage.empty(),b.forEach(function(a){var b=c.doCreateThumb(a).appendTo(c.$stage);c.iobserver.observe(b.get(0))}),c.$stage.append(a("<div/>").addClass(c.cls.spacer))}},doCreateThumb:function(b){var c=this,d=c.cls.thumb;return a("<figure/>").addClass(d.elem).addClass(b.getTypeClass()).addClass(c.panel.cls.states.idle).append(a("<div/>").addClass(d.media).append(a("<div/>").addClass(d.overlay),a("<div/>").addClass(d.wrap).append(a("<img/>",{title:b.title,alt:b.alt}).attr({draggable:!1}).addClass(d.image)),a("<div/>").addClass(c.panel.cls.loader)),a("<div/>").addClass(d.caption).append(a("<div/>").addClass(d.title).html(b.caption),a("<div/>").addClass(d.description).html(b.description))).data("item",b).on("click",{self:c,item:b},c.onThumbClick)},doDestroy:function(){return this.stopListening(),this.iobserver instanceof IntersectionObserver&&this.iobserver.disconnect(),this.robserver instanceof ResizeObserver&&this.robserver.disconnect(),this._super()},doLoad:function(a,b){if(this.isCreated){var c=this.__items.indexOf(a.item);-1!==c&&(this.makeVisible(c),this.$stage.find(this.sel.thumb.elem).removeClass(this.panel.cls.states.selected).eq(c).addClass(this.panel.cls.states.selected),this.selectedIndex=c)}return f.resolved},makeVisible:function(a,b){a<=this.scrollIndex?this.goto(a,b):a>=this.scrollIndex+this.info.count&&this.goto(a,b)},listen:function(){var a=this;a.stopListening(),a.isCreated&&(a.resize(),a.robserver.observe(a.$viewport.get(0)),a.$inner.fgswipe({data:{self:a},swipe:a.onSwipe,allowPageScroll:!0}).on("DOMMouseScroll.foogallery-panel-thumbs mousewheel.foogallery-panel-thumbs",{self:a},a.onMouseWheel))},stopListening:function(){this.isCreated&&(this.$inner.fgswipe("destroy").off(".foogallery-panel-thumbs"),this.$stage.find(this.sel.thumb).css({width:"",minWidth:"",height:"",minHeight:""}),this.robserver.unobserve(this.$viewport.get(0)))},loadThumbElement:function(b){var c=this,d=a(b),e=d.data("item"),f=d.find(c.sel.thumb.image).get(0),g=c.panel.cls.states;d.removeClass(g.allLoading).addClass(g.loading),f.onload=function(){f.onload=f.onerror=null,d.removeClass(g.allLoading).addClass(g.loaded)},f.onerror=function(){f.onload=f.onerror=null,d.removeClass(g.allLoading).addClass(g.error)},f.src=e.src,f.srcset=e.srcset,f.complete&&f.onload()},goto:function(b,c){var d=this;if(!d.isCreated)return f.reject("thumbs not created");b=b<0?0:b>d.lastIndex?d.lastIndex:b;var e=d.panel.cls.states,h=b>=d.scrollIndex+d.info.count,i=h?b-(d.info.count-1):b,j=d.lastIndex-(d.info.count-1);return i<0&&(i=0),j<0&&(j=0),i>j&&(i=j),a.Deferred(function(a){var b=d.$stage.find(d.sel.thumb.elem).eq(i);if(b.length>0){var f,h,j=i>d.scrollIndex,k=d.__items.length>=d.info.count;d.info.isHorizontal?(f=-b.prop("offsetLeft"),j&&(f+=d.info.remaining.width),k&&d.info.stage.width-Math.abs(f)<d.info.viewport.width&&(f=d.info.viewport.width-d.info.stage.width),h="translateX("+(f-1)+"px)"):(f=-b.prop("offsetTop"),j&&(f+=d.info.remaining.height),k&&d.info.stage.height-Math.abs(f)<d.info.viewport.height&&(f=d.info.viewport.height-d.info.stage.height),h="translateY("+(f-1)+"px)"),d.panel.hasTransition&&!c?g.start(d.$stage,function(a){a.css("transform",h)},null,350).then(function(){a.resolve()}).fail(a.reject):(d.$stage.addClass(e.noTransitions).css("transform",h),d.$stage.prop("offsetHeight"),d.$stage.removeClass(e.noTransitions),a.resolve())}else a.resolve()}).always(function(){d.scrollIndex=i,d.$prev.toggleClass(e.disabled,i<=0),d.$next.toggleClass(e.disabled,i>=j)}).promise()},getInfo:function(){var a=this.isHorizontal(),b={width:0,height:0},c={width:0,height:0},d={width:0,height:0},e={horizontal:0,vertical:0},f={width:0,height:0},g={width:0,height:0},h=0,i=0,j=this.__items.length;return this.isCreated&&(b={width:this.$viewport.innerWidth()+1,height:this.$viewport.innerHeight()+1},d={width:this.$dummy.outerWidth(),height:this.$dummy.outerHeight()},e={horizontal:Math.floor(b.width/d.width),vertical:Math.floor(b.height/d.height)},f={width:b.width/Math.min(j,e.horizontal),height:b.height/Math.min(j,e.vertical)},h=this.opt.bestFit?f.width:d.width,i=this.opt.bestFit?f.height:d.height,c={width:a?this.__items.length*h:h,height:a?i:this.__items.length*i},g={width:Math.floor(b.width-e.horizontal*h),height:Math.floor(b.height-e.vertical*i)}),{isHorizontal:a,viewport:b,stage:c,original:d,adjusted:f,remaining:g,counts:e,count:a?e.horizontal:e.vertical,width:h,height:i}},resize:function(){this.isCreated&&(this.info=this.getInfo(),this.opt.bestFit&&(this.info.isHorizontal?this.$stage.find(this.sel.thumb.elem).css({width:this.info.width,minWidth:this.info.width,height:"",minHeight:""}):this.$stage.find(this.sel.thumb.elem).css({height:this.info.height,minHeight:this.info.height,width:"",minWidth:""})),this.goto(this.scrollIndex,!0))},onThumbClick:function(a){a.preventDefault(),a.data.self.panel.load(a.data.item)},onPrevClick:function(a){a.preventDefault();var b=a.data.self;b.goto(b.scrollIndex-(b.info.count-1||1))},onNextClick:function(a){a.preventDefault();var b=a.data.self;b.goto(b.scrollIndex+(b.info.count-1||1))},onSwipe:function(a,b){var c=b.self,d=1;c.info.isHorizontal?(d=Math.ceil(a.distance/c.info.width),"E"===a.direction&&c.goto(c.scrollIndex-d),"W"===a.direction&&c.goto(c.scrollIndex+d)):(d=Math.ceil(a.distance/c.info.height),"S"===a.direction&&c.goto(c.scrollIndex-d),"N"===a.direction&&c.goto(c.scrollIndex+d))},onMouseWheel:function(a){var b=a.data.self,c=Math.max(-1,Math.min(1,a.originalEvent.wheelDelta||-a.originalEvent.detail));c>0?(b.goto(b.scrollIndex-1),a.preventDefault()):c<0&&(b.goto(b.scrollIndex+1),a.preventDefault())}})}(FooGallery.$,FooGallery,FooGallery.icons,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.transition),function(a,b,c,d,e,f,g,h){b.Panel.Media=c.Class.extend({construct:function(a,c){var d=this;d.panel=a,d.item=c,d.opt=f.extend({},a.opt.media),d.cls=f.extend({},a.cls.media),d.sel=f.extend({},a.sel.media),d.caption=new b.Panel.Media.Caption(a,d),d.product=new b.Panel.Media.Product(a,d),d.$el=null,d.$content=null,d.isCreated=!1,d.isAttached=!1,d.isLoading=!1,d.isLoaded=!1,d.isError=!1},getSize:function(a,b,c,e){var f=this,g={};return d.string(a)&&d.string(b)?(g[a]=d.size(c)?c:null,g[b]=d.size(e)?e:null,f.item.isCreated?(g[a]=f.item.$anchor.data(a)||g[a],g[b]=f.item.$anchor.data(b)||g[b],g):g):g},getSizes:function(){var a=this,b=a.getSize("width","height",a.opt.width,a.opt.height),c=a.getSize("maxWidth","maxHeight",a.opt.maxWidth,a.opt.maxHeight),d=a.getSize("minWidth","minHeight",a.opt.minWidth,a.opt.minHeight);return f.extend(b,c,d)},destroy:function(){var a=this;return a.panel.trigger("media-destroy",[a]).isDefaultPrevented()||(a.isCreated=!a.doDestroy()),a.isCreated||a.panel.trigger("media-destroyed",[a]),!a.isCreated},doDestroy:function(){var a=this;return a.isCreated&&(a.caption.destroy(),a.detach(),a.$el.remove()),!0},create:function(){var a=this;if(!a.isCreated&&d.string(a.item.href)){a.panel.trigger("media-create",[a]).isDefaultPrevented()||(a.isCreated=a.doCreate()),a.isCreated&&a.panel.trigger("media-created",[a])}return a.isCreated},doCreate:function(){var b=this;return b.$el=a("<div/>").addClass([b.cls.elem,b.cls.type].join(" ")).append(a("<div/>").addClass(b.panel.cls.loader)),b.$content=b.doCreateContent().addClass(b.cls.content).css(b.getSizes()).appendTo(b.$el),!0},doCreateContent:function(){return a()},appendTo:function(a){var b=this;if(b.isCreated||b.create(),b.isCreated&&!b.isAttached){b.panel.trigger("media-append",[b,a]).isDefaultPrevented()||(b.isAttached=b.doAppendTo(a)),b.isAttached&&b.panel.trigger("media-appended",[b,a])}return b.isAttached},doAppendTo:function(a){return this.$el.appendTo(a),this.$el.parent().length>0},detach:function(){var a=this;if(a.isCreated&&a.isAttached){a.panel.trigger("media-detach",[a]).isDefaultPrevented()||(a.isAttached=!a.doDetach()),a.isAttached||a.panel.trigger("media-detached",[a])}return!a.isAttached},doDetach:function(){return this.$el.detach(),!0},load:function(){var b=this,c=b.panel.cls.states;return a.Deferred(function(a){if(b.panel.trigger("media-load",[b]).isDefaultPrevented())return void a.rejectWith("default prevented");b.$el.removeClass(c.allLoading).addClass(c.loading),b.doLoad().then(a.resolve).fail(a.reject)}).always(function(){b.$el.removeClass(c.loading)}).then(function(){b.$el.addClass(c.loaded),b.panel.trigger("media-loaded",[b])}).fail(function(){b.$el.addClass(c.loaded),b.panel.trigger("media-error",[b])}).promise()},doLoad:function(){return e.resolved},unload:function(){var b=this;return a.Deferred(function(a){return b.isCreated&&b.isAttached?b.panel.trigger("media-unload",[b]).isDefaultPrevented()?void a.rejectWith("default prevented"):void b.doUnload().then(a.resolve).fail(a.reject):void a.rejectWith("not created or attached")}).then(function(){b.panel.trigger("media-unloaded",[b])}).promise()},doUnload:function(){return e.resolved},resize:function(){}}),b.template.configure("core",{panel:{media:{width:null,height:null,minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,attrs:{}}}},{panel:{media:{elem:"fg-media",type:"fg-media-unknown",content:"fg-media-content",caption:{elem:"fg-media-caption",title:"fg-media-caption-title",description:"fg-media-caption-description",exif:{elem:"fg-media-caption-exif",auto:"fg-media-caption-exif-auto",full:"fg-media-caption-exif-full",partial:"fg-media-caption-exif-partial",minimal:"fg-media-caption-exif-minimal",prop:"fg-media-caption-exif-prop",icon:"fg-media-caption-exif-icon",content:"fg-media-caption-exif-content",label:"fg-media-caption-exif-label",value:"fg-media-caption-exif-value",tooltip:"fg-media-caption-exif-tooltip",tooltipPointer:"fg-media-caption-exif-tooltip-pointer",showTooltip:"fg-media-caption-exif-show-tooltip"}},product:{elem:"fg-media-product",inner:"fg-media-product-inner",header:"fg-media-product-header",body:"fg-media-product-body",footer:"fg-media-product-footer"}}}}),b.Panel.media=new b.Factory}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.obj,FooGallery.utils.str,FooGallery.utils.transition),function(a,b,c,d,e,f,g,h,i){var j=!!window.matchMedia&&window.matchMedia("(hover: hover)").matches;b.Panel.Media.Caption=d.Class.extend({construct:function(a,b){var c=this;c.panel=a,c.media=b,c.opt=a.opt,c.cls=b.cls.caption,c.sel=b.sel.caption,c.$el=null,c.title=null,c.description=null,c.isCreated=!1,c.isAttached=!1,c.hasTitle=!1,c.hasDescription=!1,c.hasExif=!1,c.init(b.item)},canLoad:function(){return this.hasTitle||this.hasDescription||this.hasExif},init:function(a){if(a instanceof b.Item){var c,f,g=this,h=!1;if(a.isCreated){var i=a.$anchor.data()||{};c=e.string(i.lightboxTitle),f=e.string(i.lightboxDescription),(c||f)&&(h=!0,g.title=c?i.lightboxTitle:"",g.description=f?i.lightboxDescription:"")}else{var j=a.attr.anchor;c=e.string(j["data-lightbox-title"]),f=e.string(j["data-lightbox-description"]),(c||f)&&(h=!0,g.title=c?j["data-lightbox-title"]:"",g.description=f?j["data-lightbox-description"]:"")}h||(g.title=a.caption,g.description=a.description),g.hasTitle=!e.empty(g.title),g.hasDescription=!e.empty(g.description),g.hasExif=a.hasExif&&-1!==d.inArray(g.opt.exif,["auto","full","partial","minimal"])}},create:function(){if(!this.isCreated){this.panel.trigger("caption-create",[this]).isDefaultPrevented()||(this.isCreated=this.doCreate(),this.isCreated&&this.panel.trigger("caption-created",[this]))}return this.isCreated},doCreate:function(){var d=this;if(d.$el=a("<div/>").addClass(d.cls.elem),d.hasTitle&&d.$el.append(a("<div/>").addClass(d.cls.title).html(d.title)),d.hasDescription&&d.$el.append(a("<div/>").addClass(d.cls.description).html(d.description)),d.hasExif){var f=d.media.item.exif,g=a("<div/>",{class:d.cls.exif.elem}).addClass(d.cls.exif[d.opt.exif]);b.supportedExifProperties.forEach(function(b){if(!e.empty(f[b])){var i="exif-"+h.kebab(b),k=d.media.item.il8n.exif[b],l=f[b],m=a("<div/>",{class:d.cls.exif.prop}).append(a("<div/>",{class:d.cls.exif.icon}).append(c.get(i,d.opt.icons)),a("<div/>",{class:d.cls.exif.content}).append(a("<div/>",{class:d.cls.exif.label}).text(k),a("<div/>",{class:d.cls.exif.value}).text(l)),a("<span/>",{class:d.cls.exif.tooltip}).text(k+": "+l).append(a("<span/>",{class:d.cls.exif.tooltipPointer})));j||m.on("click",{self:d},d.onExifClick),g.append(m)}}),d.$el.append(g)}return!0},onExifClick:function(b){b.preventDefault();var c=b.data.self,d=a(this),e=d.find(c.sel.exif.tooltip),f=a(c.sel.exif.showTooltip);if(a(c.sel.exif.prop).removeClass(c.cls.exif.showTooltip).find(c.sel.exif.tooltip).css("left","").find(c.sel.exif.tooltipPointer).css("left",""),!f.is(d)){e.css("display","inline-block");var g=e.offset().left,h=g+e.outerWidth(),i=Math.ceil(h-window.innerWidth);i>0&&e.css("left","calc(50% - "+i+"px)").find(c.sel.exif.tooltipPointer).css("left","calc(50% + "+i+"px)"),g<0&&(g=Math.abs(g),e.css("left","calc(50% + "+g+"px)").find(c.sel.exif.tooltipPointer).css("left","calc(50% - "+g+"px)")),e.css("display",""),d.addClass(c.cls.exif.showTooltip)}},destroy:function(){if(this.isCreated){this.panel.trigger("caption-destroy",[this]).isDefaultPrevented()||(this.isCreated=!this.doDestroy(),this.isCreated||this.panel.trigger("caption-destroyed",[this]))}return!this.isCreated},doDestroy:function(){return this.$el.remove(),!0},appendTo:function(a){var b=this;if(b.isCreated||b.create(),b.isCreated&&!b.isAttached){b.panel.trigger("caption-append",[b,a]).isDefaultPrevented()||(b.isAttached=b.doAppendTo(a)),b.isAttached&&b.panel.trigger("caption-appended",[b,a])}return b.isAttached},doAppendTo:function(a){return this.$el.appendTo(a),this.$el.parent().length>0},detach:function(){var a=this;if(a.isCreated&&a.isAttached){a.panel.trigger("caption-detach",[a]).isDefaultPrevented()||(a.isAttached=!a.doDetach()),a.isAttached||a.panel.trigger("caption-detached",[a])}return!a.isAttached},doDetach:function(){return this.$el.detach(),!0},load:function(){var b=this,c=b.panel.cls.states;return a.Deferred(function(a){if(b.panel.trigger("caption-load",[b]).isDefaultPrevented())return void a.rejectWith("default prevented");b.$el.removeClass(c.allLoading).addClass(c.loading),b.doLoad().then(a.resolve).fail(a.reject)}).always(function(){b.$el.removeClass(c.loading)}).then(function(){b.$el.addClass(c.loaded),b.panel.trigger("caption-loaded",[b])}).fail(function(){b.$el.addClass(c.loaded),b.panel.trigger("caption-error",[b])}).promise()},doLoad:function(){return f.resolved},unload:function(){var b=this;return a.Deferred(function(a){return b.isCreated&&b.isAttached?b.panel.trigger("caption-unload",[b]).isDefaultPrevented()?void a.rejectWith("default prevented"):void b.doUnload().then(a.resolve).fail(a.reject):void a.rejectWith("not created or attached")}).then(function(){b.panel.trigger("caption-unloaded",[b])}).promise()},doUnload:function(){return f.resolved}})}(FooGallery.$,FooGallery,FooGallery.icons,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.obj,FooGallery.utils.str,FooGallery.utils.transition),function(a,b,c,d){b.Panel.Image=b.Panel.Media.extend({construct:function(a,b){this._super(a,b),d.extend(this.opt,a.opt.image),d.extend(this.cls,a.cls.image),d.extend(this.sel,a.sel.image),this.allFullClasses=[this.cls.fullWidth,this.cls.fullHeight].join(" ")},doCreateContent:function(){return a("<img/>").attr(this.opt.attrs)},resize:function(){var a=this;if(a.isCreated&&a.panel.opt.fitMedia){var b=a.$content.get(0);if(b.naturalWidth&&b.naturalHeight){var d,e=b.naturalWidth>=b.naturalHeight,f=e,g=a.$el.innerWidth(),h=a.$el.innerHeight();e?(d=g/b.naturalWidth,b.naturalHeight*d<h&&(f=!1)):(d=h/b.naturalHeight,b.naturalWidth*d<g&&(f=!0)),c.requestFrame(function(){a.$content.removeClass(a.allFullClasses).addClass(f?a.cls.fullWidth:a.cls.fullHeight)})}}},doLoad:function(){var b=this;return a.Deferred(function(a){var c=b.$content.get(0);c.onload=function(){c.onload=c.onerror=null,a.resolve(b)},c.onerror=function(){c.onload=c.onerror=null,a.rejectWith("error loading image")},c.src=b.item.href,c.complete&&c.onload()}).then(function(){b.resize()}).promise()}}),b.Panel.media.register("image",b.Panel.Image),b.template.configure("core",{panel:{image:{attrs:{draggable:!1}}}},{panel:{image:{type:"fg-media-image",fullWidth:"fg-media-full-width",fullHeight:"fg-media-full-height"}}})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.obj);