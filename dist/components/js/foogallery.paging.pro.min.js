/*
* FooGallery - The Most Intuitive and Extensible Gallery Creation and Management Tool Ever Created for WordPress
* @version 2.1.7
* @link 
* @copyright Steven Usher & Brad Vincent 2015
* @license Released under the GPLv3 license.
*/
!function(t,c,u){t.PagingFactory=t.Factory.extend({construct:function(){this.registered={}},register:function(t,e,n,s,i,r,a){e=this._super(t,e,a);return e&&((a=this.registered)[t].ctrl=c.fn(n)?n:null,a[t].opt=c.hash(s)?s:{},a[t].cls=c.hash(i)?i:{},a[t].il8n=c.hash(r)?r:{}),e},type:function(t){return c.hash(t)&&c.hash(t=t.paging)&&c.string(t.type)&&this.contains(t.type)?t.type:null},merge:function(t){t=u.extend({},t);var e=this,n=e.type(t),s=e.registered,i=s.default.opt,r=s.default.cls,a=s.default.il8n,l=c.hash(t.paging)?t.paging:{},o=c.hash(t.cls)&&c.hash(t.cls.paging)?u.extend({},t.cls.paging):{},p=c.hash(t.il8n)&&c.hash(t.il8n.paging)?u.extend({},t.il8n.paging):{};return c.hash(t.cls)||(t.cls={}),c.hash(t.il8n)||(t.il8n={}),"default"!==n&&e.contains(n)?(t.paging=u.extend({},i,s[n].opt,l,{type:n}),t.cls=u.extend(t.cls,{paging:r},{paging:s[n].cls},{paging:o}),t.il8n=u.extend(t.il8n,{paging:a},{paging:s[n].il8n},{paging:p})):(t.paging=u.extend({},i,l,{type:n}),t.cls=u.extend(t.cls,{paging:r},{paging:o}),t.il8n=u.extend(t.il8n,{paging:a},{paging:p})),t},hasCtrl:function(t){t=this.registered[t];return c.hash(t)&&c.fn(t.ctrl)},makeCtrl:function(t,e,n,s){t=this.registered[t];return c.hash(t)&&c.fn(t.ctrl)?new t.ctrl(e,n,s):null}}),t.paging=new t.PagingFactory}(FooGallery,FooGallery.utils.is,(FooGallery.utils.fn,FooGallery.utils.obj)),function(e,r,s,o){r.Paging=r.Component.extend({construct:function(t){var e=this;e._super(t),e.opt=e.tmpl.opt.paging,e.cls=e.tmpl.cls.paging,e.il8n=e.tmpl.il8n.paging,e.sel=e.tmpl.sel.paging,e.pushOrReplace=e.opt.pushOrReplace,e.type=e.opt.type,e.theme=e.opt.theme??t.getCSSClass("theme"),e.size=e.opt.size,e.position=e.opt.position,e.scrollToTop=e.opt.scrollToTop,e.current=0,e.total=0,e.ctrls=[],e._pages=[]},init:function(){},fromHash:function(t){t=parseInt(t);return isNaN(t)?null:t},toHash:function(t){return o.number(t)&&0<t?t.toString():null},getState:function(){return this.isValid(this.current)?this.current:null},setState:function(t){this.rebuild();var e=!1;t.item&&!this.contains(t.page,t.item)&&(t.page=this.find(t.item),t.page=0!==t.page?t.page:1,e=!0),this.set(t.page,e,!1,!1)},destroy:function(){var t=this;t._pages.splice(0,t._pages.length),e.each(t.ctrls.splice(0,t.ctrls.length),function(t,e){e.destroy()}),t._super()},build:function(){var t=this,e=t.tmpl.items.available();t.total=0<t.size&&0<e.length?Math.ceil(e.length/t.size):1;for(var n,s,i=0;i<t.total;i++)t._pages.push(e.splice(0,t.size));1<t.total&&r.paging.hasCtrl(t.type)&&("both"!==(n=t.position)&&"top"!==n||(s=r.paging.makeCtrl(t.type,t.tmpl,t,"top")).create()&&(s.append(),t.ctrls.push(s)),"both"!==n&&"bottom"!==n||(s=r.paging.makeCtrl(t.type,t.tmpl,t,"bottom")).create()&&(s.append(),t.ctrls.push(s)))},rebuild:function(){var t=this;t.current=0,t.total=0,t._pages.splice(0,t._pages.length),e.each(t.ctrls.splice(0,t.ctrls.length),function(t,e){e.destroy()}),t.build()},all:function(){return this._pages.slice()},available:function(){return this.get(this.current)},controls:function(n){this.isValid(n)&&e.each(this.ctrls,function(t,e){e.update(n)})},isValid:function(t){return o.number(t)&&0<t&&t<=this.total},number:function(t){return this.isValid(t)?t:0===this.current?1:this.current},create:function(t,e){var n=this,s=(t=n.number(t))-1,i=n._pages[s],e=e?n.tmpl.items.all():n._pages.reduce(function(t,e,n){return n===s?t:t.concat(e)},n.tmpl.items.unavailable());n.current=t,n.tmpl.items.detach(e),n.tmpl.items.create(i,!0)},get:function(t){return this.isValid(t)?(t=this.number(t),this._pages[t-1]):[]},set:function(t,e,n,s){var i=this;if(i.isValid(t)){i.controls(t);var r,a,l=i.number(t);if(l!==i.current)return a=i.current,!i.tmpl.trigger("before-page-change",[i.current,l,t=function(){var t;n=!o.boolean(n)||n,s=!!o.boolean(s)&&s,n&&1===i.current&&!i.tmpl.state.exists()&&(r=i.tmpl.state.get(),i.tmpl.state.update(r,i.pushOrReplace)),i.create(l,s),n&&(r=i.tmpl.state.get(),i.tmpl.state.update(r,i.pushOrReplace)),i.tmpl.trigger("page-change",[i.current,a,s]),i.scrollToTop&&o.boolean(e)&&e&&(0<(t=i.get(i.current)).length&&t[0].scrollTo("top")),i.tmpl.trigger("after-page-change",[i.current,a,s])},s]).isDefaultPrevented()&&(t(),!0)}return!1},find:function(t){for(var e=0,n=this._pages.length;e<n;e++)if(-1!==s.inArray(t,this._pages[e]))return e+1;return 0},contains:function(t,e){t=this.get(t);return-1!==s.inArray(e,t)},first:function(){this.goto(1)},last:function(){this.goto(this._pages.length)},prev:function(){this.goto(this.current-1)},next:function(){this.goto(this.current+1)},goto:function(t){this.set(t,!0)}}),r.PagingControl=r.Component.extend({construct:function(t,e,n){var s=this;s._super(t),s.pages=e,s.position=n,s.$container=null,s._containerExisted=!1,s._placeholderClasses=[]},create:function(){var n=this;return n.$container=e("#"+n.tmpl.id+"_paging-"+n.position),0<n.$container.length?(n._containerExisted=!0,n.$container.removeClass(function(t,e){return n._placeholderClasses=e.match(/(^|\s)fg-ph-\S+/g)||[],n._placeholderClasses.join(" ")}).addClass([n.pages.cls.container,n.pages.theme].join(" "))):n.$container=e("<nav/>",{class:[n.pages.cls.container,n.pages.theme].join(" ")}),!0},destroy:function(){var t=this;t._containerExisted?t.$container.empty().removeClass().addClass(t._placeholderClasses.join(" ")):t.$container.remove(),t.$container=null},append:function(){var t=this;t._containerExisted||("top"===t.position?t.$container.insertBefore(t.tmpl.$el):t.$container.insertAfter(t.tmpl.$el))},update:function(t){}}),r.paging.register("default",r.Paging,null,{type:"none",theme:null,size:30,pushOrReplace:"push",position:"none",scrollToTop:!0},{container:"fg-paging-container"},null,-100)}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(t,r,i,e){t.Infinite=t.Paging.extend({construct:function(t){this._super(t),this.distance=this.opt.distance,this._created=[]},init:function(){var t=this;t.checkBounds(),t.tmpl.$scrollParent.on("scroll"+t.tmpl.namespace,{self:t},e.throttle(function(){t.tmpl.destroying||t.tmpl.destroyed||t.checkBounds()},50))},destroy:function(){this.tmpl.$scrollParent.off(this.tmpl.namespace)},checkBounds:function(){var t=this,e=t.get(t.current);!t.tmpl.initializing&&!i.empty(e)&&t._created.length<t.total&&null!==(e=t.tmpl.el.getBoundingClientRect())&&e.bottom-window.innerHeight<t.distance&&(t.set(t.current+1,!1,!0,!1),t.checkBounds())},build:function(){this._super(),this._created=[]},available:function(){for(var t,e=[],n=0,s=this._created.length;n<s;n++)t=this.get(n+1),i.empty(t)||e.push.apply(e,t);return e},create:function(s,t){for(var e=this,n=(s=e.number(s),[]),t=t?e.tmpl.items.all():e._pages.reduce(function(t,e,n){return n<s?t:t.concat(e)},e.tmpl.items.unavailable()),i=0;i<s;i++)-1===r.inArray(i,e._created)&&(n.push.apply(n,e._pages[i]),e._created.push(i));e.current=s,e.tmpl.items.detach(t),e.tmpl.items.create(n,!0)}}),t.paging.register("infinite",t.Infinite,null,{type:"infinite",pushOrReplace:"replace",distance:200})}((FooGallery.$,FooGallery),FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn),function(n,t,r,i){t.LoadMore=t.Paging.extend({construct:function(t){this._super(t),this._created=[]},build:function(){this._super(),this._created=[]},create:function(s,t){for(var e=this,n=(s=e.number(s),[]),t=t?e.tmpl.items.all():e._pages.reduce(function(t,e,n){return n<s?t:t.concat(e)},e.tmpl.items.unavailable()),i=0;i<s;i++)-1===r.inArray(i,e._created)&&(n.push.apply(n,e._pages[i]),e._created.push(i));e.current=s,e.tmpl.items.detach(t),e.tmpl.items.create(n,!0)},available:function(){for(var t,e=[],n=0,s=this._created.length;n<s;n++)t=this.get(n+1),i.empty(t)||e.push.apply(e,t);return e},loadMore:function(){var t=this,e=t.get(t.current);!i.empty(e)&&t._created.length<t.total&&t.set(t.current+1,!1,!0,!1),t._created.length>=t.total&&(i.empty(t.ctrls)||n.each(t.ctrls.splice(0,t.ctrls.length),function(t,e){e.destroy()}))}}),t.LoadMoreControl=t.PagingControl.extend({construct:function(t,e,n){this._super(t,e,n),this.$button=null},create:function(){var t=this;return!!t._super()&&(t.$button=n("<button/>",{class:t.pages.cls.button,type:"button"}).html(t.pages.il8n.button).on("click.foogallery",{self:t},t.onButtonClick).appendTo(t.$container),!0)},destroy:function(){this.$button.off("click.foogallery",this.onButtonClick),this.$button=null,this._super()},onButtonClick:function(t){t.preventDefault(),t.data.self.pages.loadMore()}}),t.paging.register("loadMore",t.LoadMore,t.LoadMoreControl,{type:"loadMore",position:"bottom",pushOrReplace:"replace"},{button:"fg-load-more"},{button:"Load More"})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(o,t,l){t.Dots=t.Paging.extend({}),t.DotsControl=t.PagingControl.extend({construct:function(t,e,n){this._super(t,e,n),this.$list=null,this.$items=null},create:function(){var t=this;if(t._super()){for(var e,n=t.pages.cls,s=t.pages.il8n,i=[],r=o("<ul/>",{class:n.list}),a=0,l=t.pages.total;a<l;a++)i.push(e=t.createItem(a+1,s.page)),r.append(e);return t.$list=r,t.$items=o(o.map(i,function(t){return t.get()})),t.$container.append(r),!0}return!1},destroy:function(){var t=this,e=t.pages.sel;t.$list.find(e.link).off("click.foogallery",t.onLinkClick),t.$list=o(),t.$items=o(),t._super()},update:function(t){this.setSelected(t-1)},setSelected:function(t){var e=this,n=e.pages.cls,i=e.pages.il8n,r=e.pages.sel;e.$items.filter(r.selected).removeClass(n.selected).each(function(t,e){var e=o(e),n=e.data("label"),e=e.find(r.reader);l.string(n)&&0!==e.length&&e.html(n)}),e.$items.eq(t).addClass(n.selected).each(function(t,e){var e=o(e),n=e.find(r.reader),s=n.html();l.string(s)&&0!==n.length&&(e.data("label",s),n.html(i.current))})},createItem:function(t,e,n,s,i){n=l.string(n)?n:t,e=l.string(e)?e:"";var r=this.pages.opt,a=this.pages.cls,n=o("<a/>",{class:a.link,href:"#page-"+t}).html(n).on("click.foogallery",{self:this,page:t},this.onLinkClick),t=(l.empty(e)||n.attr("title",e.replace(/\{PAGE}/g,t).replace(/\{LIMIT}/g,r.limit+"")),i=l.string(i)?i:e,l.empty(i)||n.prepend(o("<span/>",{class:a.reader,text:i.replace(/\{PAGE}/g,"").replace(/\{LIMIT}/g,r.limit+"")})),o("<li/>",{class:a.item}).append(n));return s=l.string(s)?s:"",l.empty(s)||t.addClass(s),t},onLinkClick:function(t){t.preventDefault();var e=t.data.self,t=t.data.page,n=e.pages.sel;o(this).closest(n.item).is(n.disabled)||e.pages.set(t,!0)}}),t.paging.register("dots",t.Dots,t.DotsControl,{type:"dots",position:"both",pushOrReplace:"push"},{list:"fg-dots",item:"fg-dot-item",link:"fg-dot-link",disabled:"fg-disabled",selected:"fg-selected",visible:"fg-visible",reader:"fg-sr-only"},{current:"Current page",page:"Page {PAGE}"})}(FooGallery.$,FooGallery,(FooGallery.utils,FooGallery.utils.is)),function(i,t,e,a){t.Pagination=t.Dots.extend({construct:function(t){this._super(t),this.limit=this.opt.limit,this.showFirstLast=this.opt.showFirstLast,this.showPrevNext=this.opt.showPrevNext,this.showPrevNextMore=0!==this.opt.limit&&this.opt.showPrevNextMore,this.pageKeywords=["first","prev","prevMore","nextMore","next","last"],this.sel.firstPrev=[this.sel.first,this.sel.prev].join(","),this.sel.nextLast=[this.sel.next,this.sel.last].join(","),this.range={index:-1,start:-1,end:-1,changed:!1,selected:!1}},build:function(){this._super(),this.range={index:-1,start:-1,end:-1,changed:!1,selected:!1}},controls:function(t){var n=this;n.isValid(t)&&(n.range=n.getControlRange(t),i.each(n.ctrls,function(t,e){e.update(n.range)}))},isValid:function(t){return this._super(t)||this.isKeyword(t)},isKeyword:function(t){return a.string(t)&&-1!==e.inArray(t,this.pageKeywords)},number:function(t){var e=this;return"prevMore"!==(t="last"===(t="next"===(t="prev"===(t="first"===t?1:t)?e.current-1:t)?e.current+1:t)?e.total:t)&&"nextMore"!==t||(t=e.current),e._super(t)},getControlRange:function(t){var e=this;switch(t){case"prevMore":return e._range(e.range.start-1,!1,!1);case"nextMore":return e._range(e.range.end+1,!0,!1);default:return t=e.number(t),e._range(t-1,t<=e.current)}},_range:function(t,e,n){var s=this,i={index:t,start:s.range.start,end:s.range.end,changed:!1,selected:!a.boolean(n)||n};if(s.total<=s.limit||0===s.limit)i.start=0,i.end=s.total-1;else if(t<i.start||t>i.end){var n=t+(s.limit-1),r=t-(s.limit-1);if(e)for(i.start=t,i.end=n;i.end>s.total;)--i.start,--i.end;else for(i.start=r,i.end=t;i.start<0;)i.start+=1,i.end+=1}return i.changed=i.start!==s.range.start||i.end!==s.range.end,i.changed&&(s.range=i),i}}),t.PaginationControl=t.DotsControl.extend({construct:function(t,e,n){this._super(t,e,n),this.$buttons=i()},create:function(){var t,e,n,s=this;return!!s._super()&&(e=[],!(t=s.pages.total<=s.pages.limit||0===s.pages.limit)&&s.pages.showPrevNextMore&&(e.push(n=s.createButton("prevMore")),s.$list.prepend(n)),s.pages.showPrevNext&&(e.push(n=s.createButton("prev")),s.$list.prepend(n)),s.pages.showFirstLast&&(e.push(n=s.createButton("first")),s.$list.prepend(n)),!t&&s.pages.showPrevNextMore&&(e.push(n=s.createButton("nextMore")),s.$list.append(n)),s.pages.showPrevNext&&(e.push(n=s.createButton("next")),s.$list.append(n)),s.pages.showFirstLast&&(e.push(n=s.createButton("last")),s.$list.append(n)),s.$buttons=i(i.map(e,function(t){return t.get()})),!0)},destroy:function(){this.$buttons=null,this._super()},update:function(t){var e=this,n=e.pages.sel;t.changed&&e.setVisible(t.start,t.end),t.selected&&(e.setSelected(t.index),e.toggleDisabled(e.$buttons.filter(n.firstPrev),t.index<=0),e.toggleDisabled(e.$buttons.filter(n.nextLast),t.index>=e.pages.total-1)),e.toggleDisabled(e.$buttons.filter(n.prevMore),t.start<=0),e.toggleDisabled(e.$buttons.filter(n.nextMore),t.end>=e.pages.total-1)},setVisible:function(t,e){var n=this.pages.cls;this.$items.removeClass(n.visible).slice(t,e+1).addClass(n.visible)},toggleDisabled:function(t,e){var n=this.pages.cls,s=this.pages.sel;e?t.addClass(n.disabled).find(s.link).attr("tabindex",-1):t.removeClass(n.disabled).find(s.link).removeAttr("tabindex")},createButton:function(t){var e=this.pages.cls,n=this.pages.il8n;return this.createItem(t,n.labels[t],n.buttons[t],e.button+" "+e[t])}}),t.paging.register("pagination",t.Pagination,t.PaginationControl,{type:"pagination",position:"both",pushOrReplace:"push",limit:5,showPrevNext:!0,showFirstLast:!0,showPrevNextMore:!0},{list:"fg-pages",item:"fg-page-item",button:"fg-page-button",link:"fg-page-link",first:"fg-page-first",prev:"fg-page-prev",prevMore:"fg-page-prev-more",nextMore:"fg-page-next-more",next:"fg-page-next",last:"fg-page-last",disabled:"fg-disabled",selected:"fg-selected",visible:"fg-visible",reader:"fg-sr-only"},{buttons:{first:"&laquo;",prev:"&lsaquo;",next:"&rsaquo;",last:"&raquo;",prevMore:"&hellip;",nextMore:"&hellip;"},labels:{current:"Current page",page:"Page {PAGE}",first:"First page",prev:"Previous page",next:"Next page",last:"Last page",prevMore:"Show previous {LIMIT} pages",nextMore:"Show next {LIMIT} pages"}})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is);