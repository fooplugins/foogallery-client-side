/*
* FooGallery - The Most Intuitive and Extensible Gallery Creation and Management Tool Ever Created for WordPress
* @version 2.0.32
* @link 
* @copyright Steven Usher & Brad Vincent 2015
* @license Released under the GPLv3 license.
*/
!function(t,p,g){t.PagingFactory=t.Factory.extend({construct:function(){this.registered={}},register:function(t,e,n,i,s,a,r){e=this._super(t,e,r);return e&&((r=this.registered)[t].ctrl=p.fn(n)?n:null,r[t].opt=p.hash(i)?i:{},r[t].cls=p.hash(s)?s:{},r[t].il8n=p.hash(a)?a:{}),e},type:function(t){var e;return p.hash(t)&&p.hash(e=t.paging)&&p.string(e.type)&&this.contains(e.type)?e.type:null},merge:function(t){t=g.extend({},t);var e=this,n=e.type(t),i=e.registered,s=i.default.opt,a=i.default.cls,r=i.default.il8n,l=p.hash(t.paging)?t.paging:{},o=p.hash(t.cls)&&p.hash(t.cls.paging)?g.extend({},t.cls.paging):{},c=p.hash(t.il8n)&&p.hash(t.il8n.paging)?g.extend({},t.il8n.paging):{};return p.hash(t.cls)||(t.cls={}),p.hash(t.il8n)||(t.il8n={}),"default"!==n&&e.contains(n)?(t.paging=g.extend({},s,i[n].opt,l,{type:n}),t.cls=g.extend(t.cls,{paging:a},{paging:i[n].cls},{paging:o}),t.il8n=g.extend(t.il8n,{paging:r},{paging:i[n].il8n},{paging:c})):(t.paging=g.extend({},s,l,{type:n}),t.cls=g.extend(t.cls,{paging:a},{paging:o}),t.il8n=g.extend(t.il8n,{paging:r},{paging:c})),t},configure:function(t,e,n,i){var s;this.contains(t)&&(s=this.registered,g.extend(s[t].opt,e),g.extend(s[t].cls,n),g.extend(s[t].il8n,i))},hasCtrl:function(t){t=this.registered[t];return p.hash(t)&&p.fn(t.ctrl)},makeCtrl:function(t,e,n,i){t=this.registered[t];return p.hash(t)&&p.fn(t.ctrl)?new t.ctrl(e,n,i):null}}),t.paging=new t.PagingFactory}(FooGallery,FooGallery.utils.is,(FooGallery.utils.fn,FooGallery.utils.obj)),function(e,a,i,o){a.Paging=a.Component.extend({construct:function(t){var e=this;e._super(t),e.opt=e.tmpl.opt.paging,e.cls=e.tmpl.cls.paging,e.il8n=e.tmpl.il8n.paging,e.sel=e.tmpl.sel.paging,e.pushOrReplace=e.opt.pushOrReplace,e.type=e.opt.type,e.theme=e.opt.theme,e.size=e.opt.size,e.position=e.opt.position,e.scrollToTop=e.opt.scrollToTop,e.current=0,e.total=0,e.ctrls=[],e._pages=[]},init:function(){},fromHash:function(t){t=parseInt(t);return isNaN(t)?null:t},toHash:function(t){return o.number(t)&&0<t?t.toString():null},getState:function(){return this.isValid(this.current)?this.current:null},setState:function(t){this.rebuild();var e=!1;t.item&&!this.contains(t.page,t.item)&&(t.page=this.find(t.item),t.page=0!==t.page?t.page:1,e=!0),this.set(t.page,e,!1,!1)},destroy:function(){var t=this;t._pages.splice(0,t._pages.length),e.each(t.ctrls.splice(0,t.ctrls.length),function(t,e){e.destroy()}),t._super()},build:function(){var t=this,e=t.tmpl.items.available();t.total=0<t.size&&0<e.length?Math.ceil(e.length/t.size):1;for(var n,i,s=0;s<t.total;s++)t._pages.push(e.splice(0,t.size));1<t.total&&a.paging.hasCtrl(t.type)&&("both"!==(n=t.position)&&"top"!==n||(i=a.paging.makeCtrl(t.type,t.tmpl,t,"top")).create()&&(i.append(),t.ctrls.push(i)),"both"!==n&&"bottom"!==n||(i=a.paging.makeCtrl(t.type,t.tmpl,t,"bottom")).create()&&(i.append(),t.ctrls.push(i)))},rebuild:function(){var t=this;t.current=0,t.total=0,t._pages.splice(0,t._pages.length),e.each(t.ctrls.splice(0,t.ctrls.length),function(t,e){e.destroy()}),t.build()},all:function(){return this._pages.slice()},available:function(){return this.get(this.current)},controls:function(n){this.isValid(n)&&e.each(this.ctrls,function(t,e){e.update(n)})},isValid:function(t){return o.number(t)&&0<t&&t<=this.total},number:function(t){return this.isValid(t)?t:0===this.current?1:this.current},create:function(t,e){var n=this,i=(t=n.number(t))-1,s=n._pages[i],e=e?n.tmpl.items.all():n._pages.reduce(function(t,e,n){return n===i?t:t.concat(e)},n.tmpl.items.unavailable());n.current=t,n.tmpl.items.detach(e),n.tmpl.items.create(s,!0)},get:function(t){return this.isValid(t)?(t=this.number(t),this._pages[t-1]):[]},set:function(t,e,n,i){var s=this;if(s.isValid(t)){s.controls(t);var a,r,l=s.number(t);if(l!==s.current)return r=s.current,!s.tmpl.trigger("before-page-change",[s.current,l,t=function(){var t;n=!o.boolean(n)||n,i=!!o.boolean(i)&&i,n&&1===s.current&&!s.tmpl.state.exists()&&(a=s.tmpl.state.get(),s.tmpl.state.update(a,s.pushOrReplace)),s.create(l,i),n&&(a=s.tmpl.state.get(),s.tmpl.state.update(a,s.pushOrReplace)),s.tmpl.trigger("page-change",[s.current,r,i]),s.scrollToTop&&o.boolean(e)&&e&&(0<(t=s.get(s.current)).length&&t[0].scrollTo("top")),s.tmpl.trigger("after-page-change",[s.current,r,i])},i]).isDefaultPrevented()&&(t(),!0)}return!1},find:function(t){for(var e=0,n=this._pages.length;e<n;e++)if(-1!==i.inArray(t,this._pages[e]))return e+1;return 0},contains:function(t,e){t=this.get(t);return-1!==i.inArray(e,t)},first:function(){this.goto(1)},last:function(){this.goto(this._pages.length)},prev:function(){this.goto(this.current-1)},next:function(){this.goto(this.current+1)},goto:function(t){this.set(t,!0)}}),a.PagingControl=a.Component.extend({construct:function(t,e,n){var i=this;i._super(t),i.pages=e,i.position=n,i.$container=null,i._containerExisted=!1,i._placeholderClasses=[]},create:function(){var n=this;return n.$container=e("#"+n.tmpl.id+"_paging-"+n.position),0<n.$container.length?(n._containerExisted=!0,n.$container.removeClass(function(t,e){return n._placeholderClasses=e.match(/(^|\s)fg-ph-\S+/g)||[],n._placeholderClasses.join(" ")}).addClass([n.pages.cls.container,n.pages.theme].join(" "))):n.$container=e("<nav/>",{class:[n.pages.cls.container,n.pages.theme].join(" ")}),!0},destroy:function(){var t=this;t._containerExisted?t.$container.empty().removeClass().addClass(t._placeholderClasses.join(" ")):t.$container.remove(),t.$container=null},append:function(){var t=this;t._containerExisted||("top"===t.position?t.$container.insertBefore(t.tmpl.$el):t.$container.insertAfter(t.tmpl.$el))},update:function(t){}}),a.paging.register("default",a.Paging,null,{type:"none",theme:"fg-light",size:30,pushOrReplace:"push",position:"none",scrollToTop:!0},{container:"fg-paging-container"},null,-100)}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(o,t,l){t.Dots=t.Paging.extend({}),t.DotsControl=t.PagingControl.extend({construct:function(t,e,n){this._super(t,e,n),this.$list=null,this.$items=null},create:function(){var t=this;if(t._super()){for(var e,n=t.pages.cls,i=t.pages.il8n,s=[],a=o("<ul/>",{class:n.list}),r=0,l=t.pages.total;r<l;r++)s.push(e=t.createItem(r+1,i.page)),a.append(e);return t.$list=a,t.$items=o(o.map(s,function(t){return t.get()})),t.$container.append(a),!0}return!1},destroy:function(){var t=this,e=t.pages.sel;t.$list.find(e.link).off("click.foogallery",t.onLinkClick),t.$list=o(),t.$items=o(),t._super()},update:function(t){this.setSelected(t-1)},setSelected:function(t){var e=this,n=e.pages.cls,s=e.pages.il8n,a=e.pages.sel;e.$items.filter(a.selected).removeClass(n.selected).each(function(t,e){var e=o(e),n=e.data("label"),e=e.find(a.reader);l.string(n)&&0!==e.length&&e.html(n)}),e.$items.eq(t).addClass(n.selected).each(function(t,e){var e=o(e),n=e.find(a.reader),i=n.html();l.string(i)&&0!==n.length&&(e.data("label",i),n.html(s.current))})},createItem:function(t,e,n,i,s){n=l.string(n)?n:t,e=l.string(e)?e:"";var a=this.pages.opt,r=this.pages.cls,n=o("<a/>",{class:r.link,href:"#page-"+t}).html(n).on("click.foogallery",{self:this,page:t},this.onLinkClick),t=(l.empty(e)||n.attr("title",e.replace(/\{PAGE}/g,t).replace(/\{LIMIT}/g,a.limit+"")),s=l.string(s)?s:e,l.empty(s)||n.prepend(o("<span/>",{class:r.reader,text:s.replace(/\{PAGE}/g,"").replace(/\{LIMIT}/g,a.limit+"")})),o("<li/>",{class:r.item}).append(n));return i=l.string(i)?i:"",l.empty(i)||t.addClass(i),t},onLinkClick:function(t){t.preventDefault();var e=t.data.self,t=t.data.page,n=e.pages.sel;o(this).closest(n.item).is(n.disabled)||e.pages.set(t,!0)}}),t.paging.register("dots",t.Dots,t.DotsControl,{type:"dots",position:"both",pushOrReplace:"push"},{list:"fg-dots",item:"fg-dot-item",link:"fg-dot-link",disabled:"fg-disabled",selected:"fg-selected",visible:"fg-visible",reader:"fg-sr-only"},{current:"Current page",page:"Page {PAGE}"})}(FooGallery.$,FooGallery,(FooGallery.utils,FooGallery.utils.is));