/*
* FooGallery - The Most Intuitive and Extensible Gallery Creation and Management Tool Ever Created for WordPress
* @version 2.1.1
* @link 
* @copyright Steven Usher & Brad Vincent 2015
* @license Released under the GPLv3 license.
*/
!function(a,s,r,l,d,c){var u=0;s.Panel=s.Component.extend({construct:function(e,t,i,n){var o=this,a=(o.instanceId=++u,o._super(e),o.opt=d.extend({},o.tmpl.opt.panel,t),o.cls=d.extend({},o.tmpl.cls.panel,i),o.il8n=d.extend({},o.tmpl.il8n.panel,n),o.cls.states);o.cls.states.all=Object.keys(a).map(function(e){return a[e]}).join(" "),o.cls.states.allLoading=[a.idle,a.loading,a.loaded,a.error].join(" "),o.cls.states.allProgress=[a.idle,a.started,a.stopped,a.paused].join(" "),o.sel=r.selectify(o.cls),o.videoSources=l.undef(s.Panel.Video)?[]:s.Panel.Video.sources.load(o),o.buttons=new s.Panel.Buttons(o),o.content=new s.Panel.Content(o),o.info=new s.Panel.Info(o),o.thumbs=new s.Panel.Thumbs(o),o.areas=[o.content,o.info,o.thumbs],s.Panel.Cart&&(o.cart=new s.Panel.Cart(o),o.areas.push(o.cart)),o.$el=null,o.el=null,o.isCreated=!1,o.isDestroyed=!1,o.isDestroying=!1,o.isAttached=!1,o.isLoading=!1,o.isLoaded=!1,o.isError=!1,o.isInline=!1,o.isMaximized=!1,o.isFullscreen=!1,o.hasTransition=!l.empty(o.cls.transition[o.opt.transition]),o.currentItem=null,o.prevItem=null,o.nextItem=null,o.lastBreakpoint=null,o.isSmallScreen=!1,o.isMediumScreen=!1,o.isLargeScreen=!1,o.breakpointClassNames=o.opt.breakpoints.map(function(e){return"fg-"+e.name+" fg-"+e.name+"-width fg-"+e.name+"-height"}).concat(["fg-landscape","fg-portrait"]).join(" "),o.robserver=new ResizeObserver(c.throttle(function(e){o.destroying||o.destroyed||e.forEach(function(e){e.target===o.el&&(e=r.getResizeObserverSize(e),o.onResize(e.width,e.height))})},50)),o.__media={},o.__loading=null,o.tmpl.destroying||o.tmpl.destroyed||o.tmpl.on({"after-filter-change":o.onItemsChanged},o)},isVisible:function(e){return e instanceof s.Item&&!e.noLightbox&&!e.panelHide},onItemsChanged:function(e){var t=this;t.thumbs.isCreated&&t.tmpl.initialized&&(t.thumbs.doCreateThumbs(t.tmpl.items.available(t.isVisible)),t.isAttached&&t.load(t.tmpl.items.first(t.isVisible)))},create:function(){var e=this;return e.isCreated||(e.trigger("create").isDefaultPrevented()||(e.isCreated=e.doCreate()),e.isCreated&&e.trigger("created")),e.isCreated},doCreate:function(){var t=this;return t.$el=t.createElem(),t.el=t.$el.get(0),t.tmpl.opt.protected&&(t.el.oncontextmenu=function(e){return e.preventDefault(),!1}),t.opt.keyboard&&t.$el.attr("tabindex",-1).on("keydown.foogallery",{self:t},t.onKeyDown),t.areas.forEach(function(e){e.appendTo(t.$el)}),t.buttons.appendTo(t.content.$el),!0},createElem:function(){var e=this,t=e.cls.transition[e.opt.transition]||"",t=(e.hasTransition=!l.empty(t),[e.cls.elem,t,e.cls.buttons.portrait[e.opt.buttonsPortrait]||"",e.cls.buttons.landscape[e.opt.buttonsLandscape]||"",l.string(e.opt.theme)?e.opt.theme:e.tmpl.getCSSClass("theme","fg-dark"),l.string(e.opt.loadingIcon)?e.opt.loadingIcon:e.tmpl.getCSSClass("loadingIcon"),l.string(e.opt.hoverIcon)?e.opt.hoverIcon:e.tmpl.getCSSClass("hoverIcon"),l.string(e.opt.videoIcon)?e.opt.videoIcon:e.tmpl.getCSSClass("videoIcon"),l.boolean(e.opt.stickyVideoIcon)&&e.opt.stickyVideoIcon?e.cls.stickyVideoIcon:e.tmpl.getCSSClass("stickyVideoIcon"),l.string(e.opt.insetShadow)?e.opt.insetShadow:e.tmpl.getCSSClass("insetShadow"),l.string(e.opt.filter)?e.opt.filter:e.tmpl.getCSSClass("filter"),l.string(e.opt.hoverColor)?e.opt.hoverColor:e.tmpl.getCSSClass("hoverColor"),l.boolean(e.opt.hoverScale)&&e.opt.hoverScale?e.cls.hoverScale:e.tmpl.getCSSClass("hoverScale"),l.string(e.opt.button)?e.opt.button:"",l.string(e.opt.highlight)?e.opt.highlight:"",e.opt.stackSideAreas?e.cls.stackSideAreas:"",e.opt.preserveButtonSpace?e.cls.preserveButtonSpace:"",e.opt.fitMedia?e.cls.fitMedia:"",e.opt.noMobile?e.cls.noMobile:"",e.opt.hoverButtons?e.cls.hoverButtons:"",e.opt.classNames]);return a("<div/>").addClass(t.join(" "))},destroy:function(){var i=this,e=i._super.bind(i);return i.isDestroyed?c.resolved:(i.isDestroying=!0,a.Deferred(function(t){var e;i.isLoading&&l.promise(i.__loading)?i.__loading.always(function(){var e=i.trigger("destroy");i.isDestroying=!1,e.isDefaultPrevented()||(i.isDestroyed=i.doDestroy()),i.isDestroyed&&i.trigger("destroyed"),t.resolve()}):(e=i.trigger("destroy"),i.isDestroying=!1,e.isDefaultPrevented()||(i.isDestroyed=i.doDestroy()),i.isDestroyed&&i.trigger("destroyed"),t.resolve())}).then(function(){e()}).promise())},doDestroy:function(){var e=this;return e.buttons.destroy(),e.areas.reverse(),e.areas.forEach(function(e){e.destroy()}),e.detach(),e.isCreated&&e.$el.remove(),!0},appendTo:function(e){var t=this;return!t.isCreated&&!t.create()||t.isAttached||(t.trigger("append",[e]).isDefaultPrevented()||(t.isAttached=t.doAppendTo(e)),t.isAttached&&t.trigger("appended",[e])),t.isAttached},doAppendTo:function(e){var t=this,e=a(e),i=t.buttons.get("maximize");return t.isInline=!e.is("body"),t.$el.appendTo(e),i.set(!t.isInline,t.isInline&&i.isEnabled()),t.robserver.observe(t.el),t.areas.forEach(function(e){e.listen()}),null!==t.el.parentNode},detach:function(){var e=this;return e.isCreated&&e.isAttached&&(e.trigger("detach").isDefaultPrevented()||(e.isAttached=!e.doDetach()),e.isAttached||e.trigger("detached")),!e.isAttached},doDetach:function(){var e=this;return e.robserver.unobserve(e.el),e.areas.forEach(function(e){e.stopListening()}),e.$el.detach(),!0},resize:function(){var e=this;e.$el.removeClass(e.breakpointClassNames).addClass(e.lastBreakpoint),e.isMediumScreen=e.$el.hasClass("fg-medium"),e.isLargeScreen=e.$el.hasClass("fg-large"),e.isXLargeScreen=e.$el.hasClass("fg-x-large"),e.isSmallScreen=!e.isMediumScreen&&!e.isLargeScreen&&!e.isXLargeScreen,e.areas.forEach(function(e){e.resize()}),e.buttons.resize()},onResize:function(e,t){var i=this,e=i.getBreakpoint(e,t);i.lastBreakpoint!==e&&(i.lastBreakpoint=e,i.resize())},getBreakpoint:function(n,o){var a=[];return this.opt.breakpoints.forEach(function(e){var t=e.width<=n,i=e.height<=o;t&&i&&a.push("fg-"+e.name),t&&a.push("fg-"+e.name+"-width"),i&&a.push("fg-"+e.name+"-height")}),a.push(o<n?"fg-landscape":"fg-portrait"),0<a.length?a.join(" "):null},getMedia:function(e){return e instanceof s.Item?this.__media.hasOwnProperty(e.id)?this.__media[e.id]:this.__media[e.id]=s.Panel.media.make(e.type,this,e):null},getItem:function(e){var t=this,i=e;return(i=i instanceof s.Item?i:t.currentItem)instanceof s.Item||(i=t.tmpl.items.first(t.isVisible)),e instanceof s.Item&&!t.isVisible(e)&&((i=t.tmpl.items.next(e,t.isVisible,t.opt.loop))instanceof s.Item||(i=t.tmpl.items.prev(e,t.isVisible,t.opt.loop))),i},load:function(i){var n=this;return(i=n.getItem(i))instanceof s.Item?i===n.currentItem?c.reject("item is currently loaded"):(n.isLoading=!0,n.isLoaded=!1,n.isError=!1,n.__loading=a.Deferred(function(e){var t;n.isCreated&&n.isAttached?(t=n.getMedia(i))instanceof s.Panel.Media?n.trigger("load",[t,i]).isDefaultPrevented()?e.rejectWith("default prevented"):(n.currentItem=i,n.prevItem=n.tmpl.items.prev(i,n.isVisible,n.opt.loop),n.nextItem=n.tmpl.items.next(i,n.isVisible,n.opt.loop),n.doLoad(t).then(e.resolve).fail(e.reject)):e.rejectWith("no media to load"):e.rejectWith("not created or attached")}).always(function(){n.isLoading=!1}).then(function(){n.isLoaded=!0,n.trigger("loaded",[i]),i.updateState()}).fail(function(){n.isError=!0,n.trigger("error",[i])}).promise()):c.reject("no item to load")},doLoad:function(t){var e=this,i=[];return e.buttons.beforeLoad(t),e.areas.forEach(function(e){i.push(e.load(t))}),a.when.apply(a,i).then(function(){e.buttons.afterLoad(t)}).promise()},open:function(e,t){var i=this;return e=i.getItem(e),i.trigger("open",[e,t]).isDefaultPrevented()?c.reject("default prevented"):i.doOpen(e,t).then(function(){i.trigger("opened",[e,t])})},doOpen:function(t,i){var n=this;return a.Deferred(function(e){t instanceof s.Item?(i=l.empty(i)?"body":i,n.isAttached||n.appendTo(i),n.isAttached?n.load(t).then(e.resolve).fail(e.reject):e.rejectWith("not attached")):e.rejectWith("item not instanceof FooGallery.Item")}).promise()},next:function(){var e=this,t=e.currentItem,i=e.nextItem;return i instanceof s.Item?e.trigger("next",[t,i]).isDefaultPrevented()?c.reject("default prevented"):e.doNext(i).then(function(){e.trigger("after-next",[t,i])}):c.reject("no next item")},doNext:function(e){return this.load(e)},prev:function(){var e=this,t=e.currentItem,i=e.prevItem;return i instanceof s.Item?e.trigger("prev",[t,i]).isDefaultPrevented()?c.reject("default prevented"):e.doPrev(i).then(function(){e.trigger("after-prev",[t,i])}):c.reject("no prev item")},doPrev:function(e){return this.load(e)},close:function(e){var t=this;return t.trigger("close",[t.currentItem]).isDefaultPrevented()?c.reject("default prevented"):t.doClose(e).then(function(){t.trigger("closed")})},doClose:function(i,e){e=!l.boolean(e)||e;var n=this;return a.Deferred(function(e){n.content.close(i).then(function(){var t=[];n.areas.forEach(function(e){e!==n.content&&t.push(e.close(i))}),a.when.apply(a,t).then(e.resolve).fail(e.reject)})}).always(function(){n.currentItem=null,n.buttons.close(),e&&n.detach(),n.tmpl.state.clear()}).promise()},trapFocus:function(){this.isCreated&&this.$el.on("keydown",{self:this},this.onTrapFocusKeydown)},releaseFocus:function(){this.isCreated&&this.$el.off("keydown",this.onTrapFocusKeydown)},onTrapFocusKeydown:function(e){var t,i,n,o;9===e.keyCode&&(i=e.data.self,(o=(t=a(e.target)).parents("[role=dialog]")).length&&(i=(o=o.find(i.opt.focusable.include).not(i.opt.focusable.exclude)).first(),o=o.last(),n=e.shiftKey?i:o,o=e.shiftKey?o:i,n.length&&t.is(n)&&(e.preventDefault(),o.trigger("focus"))))},onKeyDown:function(e){var t=e.data.self;switch(e.which){case 39:case 40:t.next();break;case 37:case 38:t.prev();break;case 27:t.isFullscreen?t.buttons.get("fullscreen").exit():t.isMaximized&&t.isInline?t.buttons.get("maximize").exit():t.opt.buttons.close&&t.close()}}}),s.template.configure("core",{panel:{classNames:"",noMobile:!1,hoverButtons:!1,icons:"default",transition:"none",theme:null,button:null,highlight:null,loadingIcon:null,hoverIcon:null,videoIcon:null,stickyVideoIcon:null,hoverColor:null,hoverScale:null,insetShadow:null,filter:null,loop:!0,autoProgress:0,autoProgressStart:!0,fitMedia:!1,keyboard:!0,noScrollbars:!0,swipe:!0,stackSideAreas:!0,preserveButtonSpace:!0,buttonsPortrait:"top",buttonsLandscape:"right",admin:!1,info:"bottom",infoVisible:!1,infoOverlay:!0,infoAutoHide:!0,infoAlign:"default",exif:"none",cart:"none",cartAutoHide:!0,cartVisible:!1,cartOriginal:!1,cartOverlay:!0,cartAjax:null,cartNonce:null,cartTimeout:null,thumbs:"none",thumbsVisible:!0,thumbsCaptions:!0,thumbsCaptionsAlign:"default",thumbsSmall:!1,thumbsBestFit:!0,focusable:{include:"a[href], area[href], input, select, textarea, button, iframe, object, embed, [tabindex], [contenteditable]",exclude:"[tabindex=-1], [disabled], :hidden"},buttons:{prev:!0,next:!0,close:!0,maximize:!0,fullscreen:!0,autoProgress:!0,info:!0,thumbs:!1,cart:!0},breakpoints:[{name:"medium",width:800,height:800},{name:"large",width:1024,height:1024},{name:"x-large",width:1280,height:1280}]}},{panel:{elem:"fg-panel",maximized:"fg-panel-maximized",fullscreen:"fg-panel-fullscreen",fitMedia:"fg-panel-fit-media",noScrollbars:"fg-panel-no-scroll",stackSideAreas:"fg-panel-area-stack",preserveButtonSpace:"fg-panel-preserve-button-space",hoverButtons:"fg-panel-hover-buttons",stickyVideoIcon:"fg-video-sticky",hoverScale:"fg-hover-scale",noMobile:"fg-panel-no-mobile",loader:"fg-loader",states:{idle:"fg-idle",loading:"fg-loading",loaded:"fg-loaded",error:"fg-error",visible:"fg-visible",reverse:"fg-reverse",toggled:"fg-toggled",selected:"fg-selected",disabled:"fg-disabled",hidden:"fg-hidden",started:"fg-started",stopped:"fg-stopped",paused:"fg-paused",noTransitions:"fg-no-transitions"},buttons:{portrait:{top:"fg-panel-buttons-top",bottom:"fg-panel-buttons-bottom"},landscape:{right:"fg-panel-buttons-right",left:"fg-panel-buttons-left"},container:"fg-panel-buttons",prev:"fg-panel-button fg-panel-button-prev",next:"fg-panel-button fg-panel-button-next",autoProgress:"fg-panel-button fg-panel-button-progress",close:"fg-panel-button fg-panel-button-close",fullscreen:"fg-panel-button fg-panel-button-fullscreen",maximize:"fg-panel-button fg-panel-button-maximize",info:"fg-panel-button fg-panel-button-info",thumbs:"fg-panel-button fg-panel-button-thumbs",cart:"fg-panel-button fg-panel-button-cart"},transition:{fade:"fg-panel-fade",horizontal:"fg-panel-horizontal",vertical:"fg-panel-vertical"},area:{elem:"fg-panel-area",inner:"fg-panel-area-inner"},content:{},sideArea:{toggle:"fg-panel-area-toggle",button:"fg-panel-area-button",visible:"fg-panel-area-visible",position:{top:"fg-panel-area-top",right:"fg-panel-area-right",bottom:"fg-panel-area-bottom",left:"fg-panel-area-left"}},info:{overlay:"fg-panel-info-overlay",align:{left:"fg-panel-media-caption-left",center:"fg-panel-media-caption-center",right:"fg-panel-media-caption-right",justified:"fg-panel-media-caption-justified"}},cart:{original:"fg-panel-cart-original"},thumbs:{prev:"fg-panel-thumbs-button fg-panel-thumbs-prev",next:"fg-panel-thumbs-button fg-panel-thumbs-next",viewport:"fg-panel-thumbs-viewport",stage:"fg-panel-thumbs-stage",noCaptions:"fg-panel-thumbs-no-captions",small:"fg-panel-thumbs-small",spacer:"fg-panel-thumb-spacer",thumb:{elem:"fg-panel-thumb",media:"fg-panel-thumb-media",overlay:"fg-panel-thumb-overlay",wrap:"fg-panel-thumb-wrap",image:"fg-panel-thumb-image",caption:"fg-panel-thumb-caption",title:"fg-panel-thumb-title",description:"fg-panel-thumb-description"},align:{left:"fg-panel-thumb-caption-left",center:"fg-panel-thumb-caption-center",right:"fg-panel-thumb-caption-right",justified:"fg-panel-thumb-caption-justified"}}}},{panel:{buttons:{prev:"Previous Media",next:"Next Media",close:"Close Modal",maximize:"Toggle Maximize",fullscreen:"Toggle Fullscreen",autoProgress:"Auto Progress",info:"Toggle Information",thumbs:"Toggle Thumbnails",cart:"Toggle Cart"}}})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.obj,FooGallery.utils.fn,FooGallery.utils.transition),function(e,n,t,o){n.Panel.Buttons=t.Class.extend({construct:function(e){this.panel=e,this.opt=e.opt.buttons,this.cls=e.cls.buttons,this.sel=e.sel.buttons,this.il8n=e.il8n.buttons,this.$el=null,this.isCreated=!1,this.isAttached=!1,this.__registered=[],this.registerCore()},registerCore:function(){this.register(new n.Panel.Button(this.panel,"prev",{icon:"arrow-left",label:this.il8n.prev,click:this.panel.prev.bind(this.panel),beforeLoad:function(e){this.disable(null==this.panel.prevItem)}}),10),this.register(new n.Panel.Button(this.panel,"next",{icon:"arrow-right",label:this.il8n.next,click:this.panel.next.bind(this.panel),beforeLoad:function(e){this.disable(null==this.panel.nextItem)}}),20),this.register(new n.Panel.AutoProgress(this.panel),30),this.register(new n.Panel.Maximize(this.panel),180),this.register(new n.Panel.Fullscreen(this.panel),190),this.register(new n.Panel.Button(this.panel,"close",{icon:"close",label:this.il8n.close,click:this.panel.close.bind(this.panel)}),200)},register:function(e,t){return e instanceof n.Panel.Button?this.__registered.push({name:e.name,button:e,priority:o.number(t)?t:99})-1:-1},get:function(e){for(var t=null,i=0,n=this.__registered.length;i<n;i++)if(this.__registered[i].name===e){t=this.__registered[i].button;break}return t},each:function(t,e){var i=this;e&&i.__registered.sort(function(e,t){return e.priority-t.priority}),i.__registered.forEach(function(e){t.call(i,e.button)})},toggle:function(e,t){e=this.get(e);null!=e&&e.toggle(t)},disable:function(e,t){e=this.get(e);null!=e&&e.disable(t)},press:function(e,t){var i=this.get(e);this.panel.isSmallScreen&&t&&o.string(i.groupName)&&this.each(function(e){i!==e&&e instanceof n.Panel.SideAreaButton&&i.groupName===e.groupName&&e.area.toggle(!1)}),i.press(t)},destroy:function(){var e=this;return e.panel.trigger("buttons-destroy",[e]).isDefaultPrevented()||(e.isCreated=!e.doDestroy()),e.isCreated||e.panel.trigger("buttons-destroyed",[e]),!e.isCreated},doDestroy:function(){return this.each(function(e){e.destroy()}),this.isCreated&&(this.detach(),this.$el.remove()),!0},create:function(){var e=this;return e.isCreated||(e.panel.trigger("buttons-create",[e]).isDefaultPrevented()||(e.isCreated=e.doCreate()),e.isCreated&&e.panel.trigger("buttons-created",[e])),e.isCreated},doCreate:function(){var t=this;return t.$el=e("<div/>").addClass(t.cls.container),t.each(function(e){e.appendTo(t.$el)},!0),!0},appendTo:function(e){var t=this;return t.isCreated||t.create(),t.isCreated&&!t.isAttached&&(t.panel.trigger("buttons-append",[t,e]).isDefaultPrevented()||(t.isAttached=t.doAppendTo(e)),t.isAttached&&t.panel.trigger("buttons-appended",[t,e])),t.isAttached},doAppendTo:function(e){return this.$el.appendTo(e),0<this.$el.parent().length},detach:function(){var e=this;return e.isCreated&&e.isAttached&&(e.panel.trigger("buttons-detach",[e]).isDefaultPrevented()||(e.isAttached=!e.doDetach()),e.isAttached||e.panel.trigger("buttons-detached",[e])),!e.isAttached},doDetach:function(){return this.$el.detach(),!0},beforeLoad:function(t){this.each(function(e){e.beforeLoad(t)})},afterLoad:function(t){this.each(function(e){e.afterLoad(t)})},close:function(){this.each(function(e){e.close()})},resize:function(){this.each(function(e){e.resize()})}})}(FooGallery.$,FooGallery,(FooGallery.icons,FooGallery.utils),FooGallery.utils.is),function(n,e,i,t,o,a){e.Panel.Button=t.Class.extend({construct:function(e,t,i){this.panel=e,this.name=t,this.opt=a.extend({icon:null,label:null,visible:!!e.opt.buttons[t],disabled:!1,toggle:!1,pressed:!1,group:null,click:n.noop,beforeLoad:n.noop,afterLoad:n.noop,close:n.noop,resize:n.noop},i),this.cls={elem:e.cls.buttons[t],states:e.cls.states},this.$el=null,this.groupName=this.opt.group,this.isVisible=this.opt.visible,this.isDisabled=this.opt.disabled,this.isToggle=this.opt.toggle,this.isPressed=this.opt.pressed,this.isCreated=!1,this.isAttached=!1},isEnabled:function(){return this.panel.opt.buttons.hasOwnProperty(this.name)&&this.panel.opt.buttons[this.name]},create:function(){var e,t=this;return t.isCreated||(t.$el=n("<button/>",{type:"button","aria-label":t.opt.label,"aria-disabled":t.isDisabled,"aria-hidden":!t.isVisible}).addClass(t.cls.elem).on("click.foogallery",{self:t},t.onButtonClick),o.string(t.opt.icon)?t.$el.append(i.get(t.opt.icon,t.panel.opt.icons)):o.array(t.opt.icon)?t.opt.icon.forEach(function(e){t.$el.append(i.get(e,t.panel.opt.icons))}):o.fn(t.opt.icon)&&t.$el.append(t.opt.icon.call(this)),t.isCreated=!0,e=t.isEnabled(),t.toggle(e),t.disable(!e),t.isToggle&&t.press(t.opt.pressed)),t.isCreated},destroy:function(){return this.isCreated&&(this.$el.off("click.foogallery").remove(),this.isCreated=!1),!this.isCreated},appendTo:function(e){return!this.isCreated&&!this.create()||this.isAttached||this.$el.appendTo(e),this.isAttached},detach:function(){return this.isCreated&&this.isAttached&&this.$el.detach(),!this.isAttached},toggle:function(e){this.isCreated&&(this.isVisible=o.boolean(e)?e:!this.isVisible,this.$el.toggleClass(this.cls.states.hidden,!this.isVisible).attr("aria-hidden",!this.isVisible))},disable:function(e){this.isCreated&&(this.isDisabled=o.boolean(e)?e:!this.isDisabled,this.$el.toggleClass(this.cls.states.disabled,this.isDisabled).attr({"aria-disabled":this.isDisabled,disabled:this.isDisabled}))},press:function(e){this.isCreated&&(this.isPressed=e,this.$el.attr("aria-pressed",this.isPressed))},beforeLoad:function(e){this.opt.beforeLoad.call(this,e)},afterLoad:function(e){this.opt.afterLoad.call(this,e)},close:function(){this.opt.close.call(this)},click:function(){this.opt.click.call(this)},resize:function(){this.opt.resize.call(this)},onButtonClick:function(e){e.preventDefault(),e.data.self.click()}})}(FooGallery.$,FooGallery,FooGallery.icons,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.obj),function(e,n){e.Panel.SideAreaButton=e.Panel.Button.extend({construct:function(e){this._super(e.panel,e.name,{icon:e.opt.icon,label:e.opt.label,autoHideArea:e.opt.autoHide,click:e.toggle.bind(e),toggle:!0,pressed:e.opt.visible,group:e.opt.group}),this.area=e,this.__isVisible=null,this.__autoHide=null},beforeLoad:function(e){var t=this.area.isEnabled(),i=t&&this.area.canLoad(e);i||null!=this.__isVisible?i&&n.boolean(this.__isVisible)&&(this.area.toggle(this.__isVisible),this.__isVisible=null):(this.__isVisible=this.area.isVisible,this.area.toggle(!1)),t?this.disable(!i):this.toggle(i),this.checkAutoHide(t,i),this.opt.beforeLoad.call(this,e)},checkAutoHide:function(e,t){e&&t&&!0===this.opt.autoHideArea&&(null==this.__autoHide&&this.panel.isSmallScreen?(this.__autoHide=this.area.isVisible,this.area.toggle(!1),this.area.button.toggle(!0)):n.boolean(this.__autoHide)&&!this.panel.isSmallScreen&&(this.area.button.toggle(this.area.button.isEnabled()&&this.area.opt.toggle),this.area.toggle(this.__autoHide),this.__autoHide=null))},resize:function(){var e=this.area.isEnabled(),t=e&&this.area.canLoad(this.area.currentMedia);this.checkAutoHide(e,t)}})}((FooGallery.$,FooGallery),FooGallery.utils.is),function(e,i){e.Panel.AutoProgress=e.Panel.Button.extend({construct:function(e){var t=this;t.__stopped=!e.opt.autoProgressStart,t.__timer=new i.Timer,t._super(e,"autoProgress",{icon:"auto-progress",label:e.il8n.buttons.autoProgress}),t.$icon=null,t.$circle=null,t.circumference=0},isEnabled:function(){return this._super()&&0<this.panel.opt.autoProgress},create:function(){var e;return this._super()&&(this.$icon=this.$el.find("svg"),this.$circle=this.$icon.find("circle"),e=parseFloat(this.$circle.attr("r")),this.circumference=2*e*Math.PI,this.$circle.css({"stroke-dasharray":this.circumference+" "+this.circumference,"stroke-dashoffset":this.circumference+""}),this.__timer.on({"start resume":this.onStartOrResume,pause:this.onPause,stop:this.onStop,tick:this.onTick,"complete reset":this.onCompleteOrReset,complete:this.onComplete},this)),this.isCreated},close:function(){this.__timer.pause(),this._super()},destroy:function(){return this.__timer.destroy(),this._super()},beforeLoad:function(e){this.isEnabled()&&this.__timer.reset(),this._super(e)},afterLoad:function(e){this.isEnabled()&&(this.__timer.countdown(this.panel.opt.autoProgress),this.__stopped&&this.__timer.pause()),this._super(e)},click:function(){this.__timer.isRunning?(this.__stopped=!0,this.__timer.pause()):this.__timer.canResume?(this.__stopped=!1,this.__timer.resume()):(this.__stopped=!1,this.__timer.restart()),this._super()},onStartOrResume:function(){this.$icon.removeClass(this.cls.states.allProgress).addClass(this.cls.states.started)},onPause:function(){this.$icon.removeClass(this.cls.states.allProgress).addClass(this.cls.states.paused)},onStop:function(){this.$icon.removeClass(this.cls.states.allProgress).addClass(this.cls.states.stopped)},onTick:function(e,t,i){this.$circle.css("stroke-dashoffset",this.circumference-t/i*100/100*this.circumference)},onCompleteOrReset:function(){this.$icon.removeClass(this.cls.states.allProgress)},onComplete:function(){this.panel.next()}})}((FooGallery.$,FooGallery),FooGallery.utils),function(i,e){i.fullscreen=new e.FullscreenAPI,i.Panel.Fullscreen=i.Panel.Button.extend({construct:function(e){this._super(e,"fullscreen",{icon:["expand","shrink"],label:e.il8n.buttons.fullscreen,toggle:!0})},isEnabled:function(){return this._super()&&i.fullscreen.supported},click:function(){var e=this,t=e.panel.el;i.fullscreen.toggle(t).then(function(){i.fullscreen.element()===t?(i.fullscreen.on("change error",e.onFullscreenChange,e),e.enter()):(i.fullscreen.off("change error",e.onFullscreenChange,e),e.exit())},function(e){console.debug("Error toggling fullscreen on element.",e,t)}),e._super()},onFullscreenChange:function(){i.fullscreen.element()!==this.panel.el&&this.exit()},enter:function(){this.panel.isFullscreen||(this.panel.isFullscreen=!0,this.panel.$el.addClass(this.panel.cls.fullscreen),this.panel.isMaximized||(this.panel.$el.attr({role:"dialog","aria-modal":!0}).trigger("focus"),this.panel.trapFocus()),this.panel.buttons.press("fullscreen",!0),this.panel.buttons.toggle("maximize",!1))},exit:function(){this.panel.isFullscreen&&(this.panel.$el.removeClass(this.panel.cls.fullscreen),this.panel.isMaximized||(this.panel.$el.attr({role:null,"aria-modal":null}).trigger("focus"),this.panel.releaseFocus()),this.panel.buttons.press("fullscreen",!1),this.panel.buttons.toggle("maximize",this.panel.isInline&&this.panel.buttons.opt.maximize),this.panel.isFullscreen=!1)}})}((FooGallery.$,FooGallery),FooGallery.utils),function(t,e,i){e.Panel.Maximize=e.Panel.Button.extend({construct:function(e){this._super(e,"maximize",{icon:"maximize",label:e.il8n.buttons.maximize,toggle:!0}),this.scrollPosition=[],this.$placeholder=t("<span/>")},click:function(){this.set(!this.panel.isMaximized),this._super()},close:function(){this.exit(),this._super()},set:function(e,t){e?this.enter():this.exit(),t=i.boolean(t)?t:this.isVisible,this.toggle(t)},enter:function(){this.panel.isMaximized||(this.panel.isMaximized=!0,this.$placeholder.insertAfter(this.panel.$el),this.panel.$el.appendTo("body").addClass(this.panel.cls.maximized).attr({role:"dialog","aria-modal":!0}).trigger("focus"),this.panel.buttons.press("maximize",!0),this.panel.trapFocus(),this.panel.opt.noScrollbars&&(this.scrollPosition=[window.scrollX,window.scrollY],t("html").addClass(this.panel.cls.noScrollbars)))},exit:function(){this.panel.isMaximized&&(this.panel.isMaximized=!1,this.panel.$el.removeClass(this.panel.cls.maximized).attr({role:null,"aria-modal":null}).insertBefore(this.$placeholder),this.panel.isInline&&this.panel.$el.trigger("focus"),this.$placeholder.detach(),this.panel.buttons.press("maximize",!1),this.panel.releaseFocus(),this.panel.opt.noScrollbars&&(t("html").removeClass(this.panel.cls.noScrollbars).prop("clientWidth"),i.array(this.scrollPosition)&&2===this.scrollPosition.length&&window.scrollTo(this.scrollPosition[0],this.scrollPosition[1]),this.scrollPosition=[]))}})}(FooGallery.$,FooGallery,FooGallery.utils.is),function(e,s,o,n,a){s.Panel.Area=o.Class.extend({construct:function(e,t,i,n){this.panel=e,this.name=t,this.opt=a.extend({waitForUnload:!0},i),this.cls=a.extend({elem:this.__cls(e.cls.area.elem,t,!0),inner:this.__cls(e.cls.area.inner,t,!0)},n),this.sel=o.selectify(this.cls),this.currentMedia=null,this.$el=null,this.$inner=null,this.isCreated=!1,this.isAttached=!1},__cls:function(e,t,i){t=e.replace(/-area($|-)/,"-"+t+"$1");return i?[e,t].join(" "):t},create:function(){var e=this;return e.isCreated||(e.panel.trigger("area-create",[e]).isDefaultPrevented()||(e.isCreated=e.doCreate()),e.isCreated&&e.panel.trigger("area-created",[e])),e.isCreated},doCreate:function(){return this.$el=e("<div/>").addClass(this.cls.elem),this.$inner=e("<div/>").addClass(this.cls.inner).appendTo(this.$el),!0},destroy:function(){var e=this;return e.isCreated&&(e.panel.trigger("area-destroy",[e]).isDefaultPrevented()||(e.isCreated=!e.doDestroy()),e.isCreated||e.panel.trigger("area-destroyed",[e])),!e.isCreated},doDestroy:function(){return this.currentMedia instanceof s.Panel.Media&&this.currentMedia.detach(),this.$el.remove(),!0},appendTo:function(e){var t=this;return t.isCreated||t.create(),t.isCreated&&!t.isAttached&&(t.panel.trigger("area-append",[t,e]).isDefaultPrevented()||(t.isAttached=t.doAppendTo(e)),t.isAttached&&t.panel.trigger("area-appended",[t,e])),t.isAttached},doAppendTo:function(e){return this.$el.appendTo(e),0<this.$el.parent().length},detach:function(){var e=this;return e.isCreated&&e.isAttached&&(e.panel.trigger("area-detach",[e]).isDefaultPrevented()||(e.isAttached=!e.doDetach()),e.isAttached||e.panel.trigger("area-detached",[e])),!e.isAttached},doDetach:function(){return this.$el.detach(),!0},load:function(o){var a=this;return o instanceof s.Panel.Media?e.Deferred(function(e){var t,i,n=a.shouldReverseTransition(a.currentMedia,o);a.panel.trigger("area-load",[a,o,n]).isDefaultPrevented()?e.rejectWith("default prevented"):(t=a.currentMedia instanceof s.Panel.Media,i=a.currentMedia,(a.opt.waitForUnload&&t?(a.panel.trigger("area-unload",[a,i]),a.doUnload(i,n).then(function(){a.panel.trigger("area-unloaded",[a,i]),a.currentMedia=o,a.panel.trigger("area-load",[a,o]),a.doLoad(o,n).then(e.resolve).fail(e.reject)})):(t&&(a.panel.trigger("area-unload",[a,i]),a.doUnload(i,n).then(function(){a.panel.trigger("area-unloaded",[a,i])})),a.currentMedia=o,a.panel.trigger("area-load",[a,o]),a.doLoad(o,n).then(e.resolve))).fail(e.reject))}).then(function(){a.panel.trigger("area-loaded",[a,o])}).fail(function(){a.panel.trigger("area-error",[a,o])}).promise():n.reject("unable to load media")},doLoad:function(e,t){return n.resolved},doUnload:function(e,t){return n.resolved},close:function(e){var t=this;if(t.currentMedia instanceof s.Panel.Media){var i=t.currentMedia;if(!e)return t.panel.trigger("area-unload",[t,i]),t.doUnload(i,!1).then(function(){t.panel.trigger("area-unloaded",[t,i]),t.currentMedia=null});t.panel.trigger("area-unload",[t,i]),t.doUnload(i,!1).then(function(){t.panel.trigger("area-unloaded",[t,i])}),t.currentMedia=null}return n.resolved},shouldReverseTransition:function(e,t){var i,n;return!(e instanceof s.Panel.Media&&t instanceof s.Panel.Media)||(i=e.item.index<t.item.index,(n=this.panel.tmpl.items.last(this.panel.isVisible))instanceof s.Item&&(0===t.item.index&&e.item.index===n.index||t.item.index===n.index&&0===e.item.index)?!i:i)},listen:function(){},stopListening:function(){},resize:function(){}})}(FooGallery.$,FooGallery,FooGallery.utils,(FooGallery.utils.is,FooGallery.utils.fn),FooGallery.utils.obj,FooGallery.utils.str),function(s,t,i,r){t.Panel.Content=t.Panel.Area.extend({construct:function(e){this._super(e,"content",{waitForUnload:!1},e.cls.content),this.robserver=null},doCreate:function(){var e=this;return!!e._super()&&(e.panel.opt.swipe&&e.$inner.fgswipe({data:{self:e},swipe:e.onSwipe,allowPageScroll:!0}),e.robserver=new ResizeObserver(i.throttle(function(){e.panel instanceof t.Panel&&!e.panel.destroying&&!e.panel.destroyed&&e.resize()},50)),e.robserver.observe(e.$inner.get(0)),!0)},doDestroy:function(){return this.robserver instanceof ResizeObserver&&this.robserver.disconnect(),this.$inner.fgswipe("destroy"),this._super()},doLoad:function(i,n){var o=this,a=o.panel.cls.states;return s.Deferred(function(e){i.isCreated||i.create(),i.$el.toggleClass(a.reverse,n),i.appendTo(o.$inner);var t=[];o.panel.hasTransition?t.push(r.start(i.$el,function(e){e.addClass(a.visible)},null,350)):i.$el.addClass(a.visible),t.push(i.load()),s.when.apply(s,t).then(e.resolve).fail(e.reject)}).promise()},doUnload:function(i,n){var o=this,a=o.panel.cls.states;return s.Deferred(function(e){var t=[];i.isCreated&&(i.$el.toggleClass(a.reverse,!n),o.panel.hasTransition?t.push(r.start(i.$el,function(e){e.removeClass(a.visible)},null,350)):i.$el.removeClass(a.visible)),t.push(i.unload()),s.when.apply(s,t).then(e.resolve).fail(e.reject)}).always(function(){i.isCreated&&i.$el.removeClass(a.reverse),i.detach()}).promise()},onSwipe:function(e,t){t=t.self;"E"===e.direction&&t.panel.prev(),"W"===e.direction&&t.panel.next()},resize:function(){this.currentMedia instanceof t.Panel.Media&&this.currentMedia.resize()}})}(FooGallery.$,FooGallery,FooGallery.utils.fn,FooGallery.utils.transition),function(e,t,i,n,s){t.Panel.SideArea=t.Panel.Area.extend({construct:function(e,t,i,n){var o=this,a=e.cls.sideArea;o._super(e,t,s.extend({icon:null,label:null,position:null,visible:!0,autoHide:!1,toggle:!!e.opt.buttons[t]},i),s.extend({toggle:this.__cls(a.toggle,t,!0),visible:this.__cls(a.visible,t),position:{top:this.__cls(a.position.top,t),right:this.__cls(a.position.right,t),bottom:this.__cls(a.position.bottom,t),left:this.__cls(a.position.left,t)}},n)),o.isVisible=o.opt.visible,o.allPositionClasses=Object.keys(o.cls.position).map(function(e){return o.cls.position[e]}).join(" "),o.button=o.registerButton()},registerButton:function(){var e=new t.Panel.SideAreaButton(this);return this.panel.buttons.register(e),e},doCreate:function(){return!!this._super()&&(this.opt.toggle&&e("<button/>",{type:"button"}).addClass(this.cls.toggle).append(i.get("circle-close",this.panel.opt.icons)).on("click.foogallery",{self:this},this.onToggleClick).appendTo(this.$inner),this.isEnabled()&&(this.panel.$el.toggleClass(this.cls.visible,this.isVisible),this.setPosition(this.opt.position)),!0)},isEnabled:function(){return this.cls.position.hasOwnProperty(this.opt.position)},canLoad:function(e){return e instanceof t.Panel.Media},getPosition:function(){return this.isEnabled()?this.cls.position[this.opt.position]:null},setPosition:function(e){this.opt.position=this.cls.position.hasOwnProperty(e)?e:null,n.jq(this.panel.$el)&&this.panel.$el.removeClass(this.allPositionClasses).addClass(this.getPosition())},toggle:function(e){this.isVisible=n.boolean(e)?e:!this.isVisible,n.jq(this.panel.$el)&&this.panel.$el.toggleClass(this.cls.visible,this.isVisible),this.panel.buttons.press(this.name,this.isVisible)},onToggleClick:function(e){e.preventDefault(),e.data.self.toggle()}})}(FooGallery.$,FooGallery,FooGallery.icons,(FooGallery.utils,FooGallery.utils.is),(FooGallery.utils.fn,FooGallery.utils.obj)),function(e,i,n){e.Panel.Info=e.Panel.SideArea.extend({construct:function(e){this._super(e,"info",{icon:"info",label:e.il8n.buttons.info,position:e.opt.info,overlay:e.opt.infoOverlay,visible:e.opt.infoVisible,autoHide:e.opt.infoAutoHide,align:e.opt.infoAlign,waitForUnload:!1,group:"overlay"},e.cls.info),this.allPositionClasses+=" "+this.cls.overlay},doCreate:function(){var e=this;return!(!e.isEnabled()||!e._super())&&(i.string(e.opt.align)&&e.cls.align.hasOwnProperty(e.opt.align)&&e.panel.$el.addClass(e.cls.align[e.opt.align]),!0)},getPosition:function(){var e=this._super();return null!=e&&this.opt.overlay?e+" "+this.cls.overlay:e},setPosition:function(e,t){i.boolean(t)&&(this.opt.overlay=t),this._super(e)},canLoad:function(e){return this._super(e)&&e.caption.canLoad()},doLoad:function(e,t){return this.canLoad(e)&&(e.caption.appendTo(this.$inner),e.caption.load()),n.resolved},doUnload:function(e,t){return e.caption.unload(),e.caption.detach(),n.resolved}})}((FooGallery.$,FooGallery),FooGallery.utils.is,FooGallery.utils.fn),function(o,a,e,s,i,c,u){a.Panel.Thumbs=a.Panel.SideArea.extend({construct:function(e){this._super(e,"thumbs",{icon:"thumbs",label:e.il8n.buttons.thumbs,position:e.opt.thumbs,captions:e.opt.thumbsCaptions,align:e.opt.thumbsCaptionsAlign,small:e.opt.thumbsSmall,bestFit:e.opt.thumbsBestFit,toggle:!1,waitForUnload:!1},e.cls.thumbs),this.iobserver=null,this.robserver=null,this.$prev=null,this.$next=null,this.$viewport=null,this.$stage=null,this.$dummy=null,this.__items=[],this.__animationFrameId=null,this.info=this.getInfo(),this.selectedIndex=0,this.scrollIndex=0,this.lastIndex=0},isHorizontal:function(){return-1!==["top","bottom"].indexOf(this.opt.position)},doCreate:function(){var n=this;return!(!n.isEnabled()||!n._super())&&(n.opt.captions||n.panel.$el.addClass(n.cls.noCaptions),n.opt.small&&n.panel.$el.addClass(n.cls.small),i.string(n.opt.align)&&n.cls.align.hasOwnProperty(n.opt.align)&&n.panel.$el.addClass(n.cls.align[n.opt.align]),n.$prev=o("<button/>",{type:"button"}).addClass(n.cls.prev).append(e.get("arrow-left",n.panel.opt.icons)).on("click.foogallery",{self:n},n.onPrevClick).prependTo(n.$inner),n.$viewport=o("<div/>").addClass(n.cls.viewport).appendTo(n.$inner),n.$next=o("<button/>",{type:"button"}).addClass(n.cls.next).append(e.get("arrow-right",n.panel.opt.icons)).on("click.foogallery",{self:n},n.onNextClick).appendTo(n.$inner),n.$stage=o("<div/>").addClass(n.cls.stage).appendTo(n.$viewport),n.$dummy=o("<div/>").addClass(n.cls.thumb.elem).appendTo(n.$viewport),n.iobserver=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(n.iobserver.unobserve(e.target),n.loadThumbElement(e.target))})},{root:n.$inner.get(0),rootMargin:"82px 300px"}),n.robserver=new ResizeObserver(c.throttle(function(e){var t,i;0<e.length&&n.panel instanceof a.Panel&&!n.panel.destroying&&!n.panel.destroyed&&(e=s.getResizeObserverSize(e[0]),t=n.info.viewport,i=Math.floor(Math.abs(e.width-t.width)),e=Math.floor(Math.abs(e.height-t.height)),n.isVisible&&(1<i||1<e)&&n.resize())},50)),n.doCreateThumbs(n.panel.tmpl.items.available(n.panel.isVisible)),!0)},doCreateThumbs:function(e){var t;i.empty(e)||((t=this).iobserver instanceof IntersectionObserver&&t.iobserver.takeRecords().forEach(function(e){t.iobserver.unobserve(e.target)}),t.__items=e,t.selectedIndex=0,t.scrollIndex=0,t.lastIndex=t.__items.length-1,t.$stage.empty(),e.forEach(function(e){e=t.doCreateThumb(e).appendTo(t.$stage);t.iobserver.observe(e.get(0))}),t.$stage.append(o("<div/>").addClass(t.cls.spacer)))},doCreateThumb:function(e){var t=this,i=t.cls.thumb;return o("<figure/>").addClass(i.elem).addClass(e.getTypeClass()).addClass(t.panel.cls.states.idle).append(o("<div/>").addClass(i.media).append(o("<div/>").addClass(i.overlay),o("<div/>").addClass(i.wrap).append(o("<img/>",{title:e.title,alt:e.alt}).attr({draggable:!1}).addClass(i.image)),o("<div/>").addClass(t.panel.cls.loader)),o("<div/>").addClass(i.caption).append(o("<div/>").addClass(i.title).html(e.caption),o("<div/>").addClass(i.description).html(e.description))).data("item",e).on("click",{self:t,item:e},t.onThumbClick)},doDestroy:function(){return this.stopListening(),this.iobserver instanceof IntersectionObserver&&this.iobserver.disconnect(),this.robserver instanceof ResizeObserver&&this.robserver.disconnect(),this._super()},doLoad:function(e,t){return this.isCreated&&-1!==(e=this.__items.indexOf(e.item))&&(this.makeVisible(e),this.$stage.find(this.sel.thumb.elem).removeClass(this.panel.cls.states.selected).eq(e).addClass(this.panel.cls.states.selected),this.selectedIndex=e),c.resolved},makeVisible:function(e,t){(e<=this.scrollIndex||e>=this.scrollIndex+this.info.count)&&this.goto(e,t)},listen:function(){var e=this;e.stopListening(),e.isCreated&&(e.resize(),e.robserver.observe(e.$viewport.get(0)),e.$inner.fgswipe({data:{self:e},swipe:e.onSwipe,allowPageScroll:!0}).on("DOMMouseScroll.foogallery-panel-thumbs mousewheel.foogallery-panel-thumbs",{self:e},e.onMouseWheel))},stopListening:function(){this.isCreated&&(this.$inner.fgswipe("destroy").off(".foogallery-panel-thumbs"),this.$stage.find(this.sel.thumb).css({width:"",minWidth:"",height:"",minHeight:""}),this.robserver.unobserve(this.$viewport.get(0)))},loadThumbElement:function(e){var t=o(e),e=t.data("item"),i=t.find(this.sel.thumb.image).get(0),n=this.panel.cls.states;t.removeClass(n.allLoading).addClass(n.loading),i.onload=function(){i.onload=i.onerror=null,t.removeClass(n.allLoading).addClass(n.loaded)},i.onerror=function(){i.onload=i.onerror=null,t.removeClass(n.allLoading).addClass(n.error)},i.src=e.src,i.srcset=e.srcset,i.complete&&i.onload()},goto:function(e,s){var r=this;if(!r.isCreated)return c.reject("thumbs not created");e=e<0?0:e>r.lastIndex?r.lastIndex:e;var l=r.panel.cls.states,d=e>=r.scrollIndex+r.info.count?e-(r.info.count-1):e,t=r.lastIndex-(r.info.count-1);return(t=t<0?0:t)<(d=d<0?0:d)&&(d=t),o.Deferred(function(e){var t,i,n,o,a=r.$stage.find(r.sel.thumb.elem).eq(d);0<a.length?(t=d>r.scrollIndex,i=r.__items.length>=r.info.count,o=r.info.isHorizontal?(n=-a.prop("offsetLeft"),t&&(n+=r.info.remaining.width),"translateX("+((n=i&&r.info.stage.width-Math.abs(n)<r.info.viewport.width?r.info.viewport.width-r.info.stage.width:n)-1)+"px)"):(n=-a.prop("offsetTop"),t&&(n+=r.info.remaining.height),"translateY("+((n=i&&r.info.stage.height-Math.abs(n)<r.info.viewport.height?r.info.viewport.height-r.info.stage.height:n)-1)+"px)"),r.panel.hasTransition&&!s?u.start(r.$stage,function(e){e.css("transform",o)},null,350).then(function(){e.resolve()}).fail(e.reject):(r.$stage.addClass(l.noTransitions).css("transform",o),r.$stage.prop("offsetHeight"),r.$stage.removeClass(l.noTransitions),e.resolve())):e.resolve()}).always(function(){r.scrollIndex=d,r.$prev.toggleClass(l.disabled,d<=0),r.$next.toggleClass(l.disabled,t<=d)}).promise()},getInfo:function(){var e=this.isHorizontal(),t={width:0,height:0},i={width:0,height:0},n={width:0,height:0},o={horizontal:0,vertical:0},a={width:0,height:0},s={width:0,height:0},r=0,l=0,d=this.__items.length;return this.isCreated&&(t={width:this.$viewport.innerWidth()+1,height:this.$viewport.innerHeight()+1},n={width:this.$dummy.outerWidth(),height:this.$dummy.outerHeight()},o={horizontal:Math.floor(t.width/n.width),vertical:Math.floor(t.height/n.height)},a={width:t.width/Math.min(d,o.horizontal),height:t.height/Math.min(d,o.vertical)},r=(this.opt.bestFit?a:n).width,l=(this.opt.bestFit?a:n).height,i={width:e?this.__items.length*r:r,height:e?l:this.__items.length*l},s={width:Math.floor(t.width-o.horizontal*r),height:Math.floor(t.height-o.vertical*l)}),{isHorizontal:e,viewport:t,stage:i,original:n,adjusted:a,remaining:s,counts:o,count:e?o.horizontal:o.vertical,width:r,height:l}},resize:function(){this.isCreated&&(this.info=this.getInfo(),this.opt.bestFit&&(this.info.isHorizontal?this.$stage.find(this.sel.thumb.elem).css({width:this.info.width,minWidth:this.info.width,height:"",minHeight:""}):this.$stage.find(this.sel.thumb.elem).css({height:this.info.height,minHeight:this.info.height,width:"",minWidth:""})),this.goto(this.scrollIndex,!0))},onThumbClick:function(e){e.preventDefault(),e.data.self.panel.load(e.data.item)},onPrevClick:function(e){e.preventDefault();e=e.data.self;e.goto(e.scrollIndex-(e.info.count-1||1))},onNextClick:function(e){e.preventDefault();e=e.data.self;e.goto(e.scrollIndex+(e.info.count-1||1))},onSwipe:function(e,t){var t=t.self,i=1;t.info.isHorizontal?(i=Math.ceil(e.distance/t.info.width),"E"===e.direction&&t.goto(t.scrollIndex-i),"W"===e.direction&&t.goto(t.scrollIndex+i)):(i=Math.ceil(e.distance/t.info.height),"S"===e.direction&&t.goto(t.scrollIndex-i),"N"===e.direction&&t.goto(t.scrollIndex+i))},onMouseWheel:function(e){var t=e.data.self,i=Math.max(-1,Math.min(1,e.originalEvent.wheelDelta||-e.originalEvent.detail));0<i?(t.goto(t.scrollIndex-1),e.preventDefault()):i<0&&(t.goto(t.scrollIndex+1),e.preventDefault())}})}(FooGallery.$,FooGallery,FooGallery.icons,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.transition),function(e,i){e.Panel.Cart=e.Panel.SideArea.extend({construct:function(e){this._super(e,"cart",{icon:"cart",label:e.il8n.buttons.cart,position:e.opt.cart,visible:e.opt.cartVisible,autoHide:e.opt.cartAutoHide,waitForUnload:!1,group:"overlay"},e.cls.cart)},canLoad:function(e){return this._super(e)&&e.product.canLoad()},doLoad:function(e,t){return this.canLoad(e)&&(e.product.appendTo(this.$inner),e.product.load()),i.resolved},doUnload:function(e,t){return e.product.unload(),e.product.detach(),i.resolved}})}((FooGallery.$,FooGallery),FooGallery.utils.fn,FooGallery.utils.transition),function(n,o,e,a,t,s){o.Panel.Media=e.Class.extend({construct:function(e,t){var i=this;i.panel=e,i.item=t,i.opt=s.extend({},e.opt.media),i.cls=s.extend({},e.cls.media),i.sel=s.extend({},e.sel.media),i.il8n=s.extend({},e.il8n.media),i.caption=new o.Panel.Media.Caption(e,i),o.Panel.Media.Product&&(i.product=new o.Panel.Media.Product(e,i)),i.$el=null,i.$content=null,i.isCreated=!1,i.isAttached=!1,i.isLoading=!1,i.isLoaded=!1,i.isError=!1},getSize:function(e,t,i,n){var o={};return a.string(e)&&a.string(t)&&(o[e]=a.size(i)?i:null,o[t]=a.size(n)?n:null,this.item.isCreated&&(o[e]=this.item.$anchor.data(e)||o[e],o[t]=this.item.$anchor.data(t)||o[t])),o},getSizes:function(){var e=this,t=e.getSize("width","height",e.opt.width,e.opt.height),i=e.getSize("maxWidth","maxHeight",e.opt.maxWidth,e.opt.maxHeight),e=e.getSize("minWidth","minHeight",e.opt.minWidth,e.opt.minHeight);return s.extend(t,i,e)},destroy:function(){var e=this;return e.panel.trigger("media-destroy",[e]).isDefaultPrevented()||(e.isCreated=!e.doDestroy()),e.isCreated||e.panel.trigger("media-destroyed",[e]),!e.isCreated},doDestroy:function(){return this.isCreated&&(this.caption.destroy(),this.detach(),this.$el.remove()),!0},create:function(){var e=this;return!e.isCreated&&a.string(e.item.href)&&(e.panel.trigger("media-create",[e]).isDefaultPrevented()||(e.isCreated=e.doCreate()),e.isCreated&&e.panel.trigger("media-created",[e])),e.isCreated},doCreate:function(){var e=this;return e.$el=n("<div/>").addClass([e.cls.elem,e.cls.type].join(" ")).append(n("<div/>").addClass(e.panel.cls.loader)),e.$content=e.doCreateContent().addClass(e.cls.content).css(e.getSizes()).appendTo(e.$el),!0},doCreateContent:function(){return n()},appendTo:function(e){var t=this;return t.isCreated||t.create(),t.isCreated&&!t.isAttached&&(t.panel.trigger("media-append",[t,e]).isDefaultPrevented()||(t.isAttached=t.doAppendTo(e)),t.isAttached&&t.panel.trigger("media-appended",[t,e])),t.isAttached},doAppendTo:function(e){return this.$el.appendTo(e),0<this.$el.parent().length},detach:function(){var e=this;return e.isCreated&&e.isAttached&&(e.panel.trigger("media-detach",[e]).isDefaultPrevented()||(e.isAttached=!e.doDetach()),e.isAttached||e.panel.trigger("media-detached",[e])),!e.isAttached},doDetach:function(){return this.$el.detach(),!0},load:function(){var t=this,i=t.panel.cls.states;return n.Deferred(function(e){t.panel.trigger("media-load",[t]).isDefaultPrevented()?e.rejectWith("default prevented"):(t.$el.removeClass(i.allLoading).addClass(i.loading),t.doLoad().then(e.resolve).fail(e.reject))}).always(function(){t.$el.removeClass(i.loading)}).then(function(){t.$el.addClass(i.loaded),t.panel.trigger("media-loaded",[t])}).fail(function(){t.$el.addClass(i.loaded),t.panel.trigger("media-error",[t])}).promise()},doLoad:function(){return t.resolved},unload:function(){var t=this;return n.Deferred(function(e){t.isCreated&&t.isAttached?t.panel.trigger("media-unload",[t]).isDefaultPrevented()?e.rejectWith("default prevented"):t.doUnload().then(e.resolve).fail(e.reject):e.rejectWith("not created or attached")}).then(function(){t.panel.trigger("media-unloaded",[t])}).promise()},doUnload:function(){return t.resolved},resize:function(){}}),o.template.configure("core",{panel:{media:{width:null,height:null,minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,attrs:{}}}},{panel:{media:{elem:"fg-media",type:"fg-media-unknown",content:"fg-media-content",caption:{elem:"fg-media-caption",title:"fg-media-caption-title",description:"fg-media-caption-description",exif:{elem:"fg-media-caption-exif",auto:"fg-media-caption-exif-auto",full:"fg-media-caption-exif-full",partial:"fg-media-caption-exif-partial",minimal:"fg-media-caption-exif-minimal",prop:"fg-media-caption-exif-prop",icon:"fg-media-caption-exif-icon",content:"fg-media-caption-exif-content",label:"fg-media-caption-exif-label",value:"fg-media-caption-exif-value",tooltip:"fg-media-caption-exif-tooltip",tooltipPointer:"fg-media-caption-exif-tooltip-pointer",showTooltip:"fg-media-caption-exif-show-tooltip"}},product:{elem:"fg-media-product",inner:"fg-media-product-inner",header:"fg-media-product-header",body:"fg-media-product-body",footer:"fg-media-product-footer",button:"fg-panel-button",hidden:"fg-hidden",disabled:"fg-disabled",loading:"fg-loading"}}}},{panel:{media:{product:{title:"Product Information",addToCart:"Add to Cart",viewProduct:"View Product",success:"Successfully added to cart.",error:"Something went wrong adding to cart."}}}}),o.Panel.media=new o.Factory}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,FooGallery.utils.obj,(FooGallery.utils.str,FooGallery.utils.transition)),function(s,r,l,d,c,e,u){var h=!!window.matchMedia&&window.matchMedia("(hover: hover)").matches;r.Panel.Media.Caption=d.Class.extend({construct:function(e,t){var i=this;i.panel=e,i.media=t,i.opt=e.opt,i.cls=t.cls.caption,i.sel=t.sel.caption,i.$el=null,i.title=null,i.description=null,i.isCreated=!1,i.isAttached=!1,i.hasTitle=!1,i.hasDescription=!1,i.hasExif=!1,i.init(t.item)},canLoad:function(){return this.hasTitle||this.hasDescription||this.hasExif},init:function(e){var t,i,n,o,a;e instanceof r.Item&&(t=this,i=!1,e.isCreated?(a=e.$anchor.data()||{},n=c.string(a.lightboxTitle),o=c.string(a.lightboxDescription),(n||o)&&(i=!0,t.title=n?a.lightboxTitle:"",t.description=o?a.lightboxDescription:"")):(a=e.attr.anchor,n=c.string(a["data-lightbox-title"]),o=c.string(a["data-lightbox-description"]),(n||o)&&(i=!0,t.title=n?a["data-lightbox-title"]:"",t.description=o?a["data-lightbox-description"]:"")),i||(t.title=e.caption,t.description=e.description),t.hasTitle=!c.empty(t.title),t.hasDescription=!c.empty(t.description),t.hasExif=e.hasExif&&-1!==d.inArray(t.opt.exif,["auto","full","partial","minimal"]))},create:function(){return this.isCreated||this.panel.trigger("caption-create",[this]).isDefaultPrevented()||(this.isCreated=this.doCreate(),this.isCreated&&this.panel.trigger("caption-created",[this])),this.isCreated},doCreate:function(){var n,o,a=this;return a.$el=s("<div/>").addClass(a.cls.elem),a.hasTitle&&a.$el.append(s("<div/>").addClass(a.cls.title).html(a.title)),a.hasDescription&&a.$el.append(s("<div/>").addClass(a.cls.description).html(a.description)),a.hasExif&&(n=a.media.item.exif,o=s("<div/>",{class:a.cls.exif.elem}).addClass(a.cls.exif[a.opt.exif]),r.supportedExifProperties.forEach(function(e){var t,i;c.empty(n[e])||(i="exif-"+u.kebab(e),t=a.media.item.il8n.exif[e],e=n[e],i=s("<div/>",{class:a.cls.exif.prop}).append(s("<div/>",{class:a.cls.exif.icon}).append(l.get(i,a.opt.icons)),s("<div/>",{class:a.cls.exif.content}).append(s("<div/>",{class:a.cls.exif.label}).text(t),s("<div/>",{class:a.cls.exif.value}).text(e)),s("<span/>",{class:a.cls.exif.tooltip}).text(t+": "+e).append(s("<span/>",{class:a.cls.exif.tooltipPointer}))),h||i.on("click",{self:a},a.onExifClick),o.append(i))}),a.$el.append(o)),!0},onExifClick:function(e){e.preventDefault();var t,e=e.data.self,i=s(this),n=i.find(e.sel.exif.tooltip),o=s(e.sel.exif.showTooltip);s(e.sel.exif.prop).removeClass(e.cls.exif.showTooltip).find(e.sel.exif.tooltip).css("left","").find(e.sel.exif.tooltipPointer).css("left",""),o.is(i)||(n.css("display","inline-block"),t=(o=n.offset().left)+n.outerWidth(),0<(t=Math.ceil(t-window.innerWidth))&&n.css("left","calc(50% - "+t+"px)").find(e.sel.exif.tooltipPointer).css("left","calc(50% + "+t+"px)"),o<0&&(o=Math.abs(o),n.css("left","calc(50% + "+o+"px)").find(e.sel.exif.tooltipPointer).css("left","calc(50% - "+o+"px)")),n.css("display",""),i.addClass(e.cls.exif.showTooltip))},destroy:function(){return this.isCreated&&!this.panel.trigger("caption-destroy",[this]).isDefaultPrevented()&&(this.isCreated=!this.doDestroy(),this.isCreated||this.panel.trigger("caption-destroyed",[this])),!this.isCreated},doDestroy:function(){return this.$el.remove(),!0},appendTo:function(e){var t=this;return t.isCreated||t.create(),t.isCreated&&!t.isAttached&&(t.panel.trigger("caption-append",[t,e]).isDefaultPrevented()||(t.isAttached=t.doAppendTo(e)),t.isAttached&&t.panel.trigger("caption-appended",[t,e])),t.isAttached},doAppendTo:function(e){return this.$el.appendTo(e),0<this.$el.parent().length},detach:function(){var e=this;return e.isCreated&&e.isAttached&&(e.panel.trigger("caption-detach",[e]).isDefaultPrevented()||(e.isAttached=!e.doDetach()),e.isAttached||e.panel.trigger("caption-detached",[e])),!e.isAttached},doDetach:function(){return this.$el.detach(),!0},load:function(){var t=this,i=t.panel.cls.states;return s.Deferred(function(e){t.panel.trigger("caption-load",[t]).isDefaultPrevented()?e.rejectWith("default prevented"):(t.$el.removeClass(i.allLoading).addClass(i.loading),t.doLoad().then(e.resolve).fail(e.reject))}).always(function(){t.$el.removeClass(i.loading)}).then(function(){t.$el.addClass(i.loaded),t.panel.trigger("caption-loaded",[t])}).fail(function(){t.$el.addClass(i.loaded),t.panel.trigger("caption-error",[t])}).promise()},doLoad:function(){return e.resolved},unload:function(){var t=this;return s.Deferred(function(e){t.isCreated&&t.isAttached?t.panel.trigger("caption-unload",[t]).isDefaultPrevented()?e.rejectWith("default prevented"):t.doUnload().then(e.resolve).fail(e.reject):e.rejectWith("not created or attached")}).then(function(){t.panel.trigger("caption-unloaded",[t])}).promise()},doUnload:function(){return e.resolved}})}(FooGallery.$,FooGallery,FooGallery.icons,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,(FooGallery.utils.obj,FooGallery.utils.str),FooGallery.utils.transition),function(n,e,t,i,o){e.Panel.Media.Product=t.Class.extend({construct:function(e,t){var i=this;i.panel=e,i.media=t,i.opt=e.opt,i.cls=t.cls.product,i.sel=t.sel.product,i.il8n=t.il8n.product,i.$el=null,i.$inner=null,i.$header=null,i.$body=null,i.$footer=null,i.isCreated=!1,i.isAttached=!1,i.__loaded=null,i.__requestId=null},hasWooCommerce:function(){return!!window.woocommerce_params},canLoad:function(){return!i.empty(this.media.item.productId)&&(this.panel.opt.admin&&!this.hasWooCommerce()||this.hasWooCommerce())},create:function(){var e=this;return e.isCreated||e.panel.trigger("product-create",[e]).isDefaultPrevented()||(e.isCreated=e.doCreate(),e.isCreated&&e.panel.trigger("product-created",[e])),e.isCreated},doCreate:function(){var e=this;return e.$el=n("<div/>").addClass(e.cls.elem).append(n("<div/>").addClass(e.panel.cls.loader)),e.$inner=n("<div/>").addClass(e.cls.inner).appendTo(e.$el),e.$header=n("<div/>").addClass(e.cls.header).html(e.il8n.title).appendTo(e.$inner),e.$body=n("<div/>").addClass(e.cls.body).appendTo(e.$inner),e.$addToCart=n("<button/>").addClass(e.cls.button).html(e.il8n.addToCart).on("click",{self:e},e.onAddToCartClick),e.$viewProduct=n("<a/>").addClass(e.cls.button).html(e.il8n.viewProduct),e.$footer=n("<div/>").addClass(e.cls.footer).append(e.$addToCart).append(e.$viewProduct).appendTo(e.$inner),!0},destroy:function(){var e=this;return e.isCreated&&!e.panel.trigger("product-destroy",[e]).isDefaultPrevented()&&(e.isCreated=!e.doDestroy(),e.isCreated||e.panel.trigger("product-destroyed",[e])),!e.isCreated},doDestroy:function(){return this.$el.remove(),!0},appendTo:function(e){var t=this;return t.isCreated||t.create(),t.isCreated&&!t.isAttached&&(t.panel.trigger("product-append",[t,e]).isDefaultPrevented()||(t.isAttached=t.doAppendTo(e)),t.isAttached&&t.panel.trigger("product-appended",[t,e])),t.isAttached},doAppendTo:function(e){return this.$el.appendTo(e),0<this.$el.parent().length},detach:function(){var e=this;return e.isCreated&&e.isAttached&&(e.panel.trigger("product-detach",[e]).isDefaultPrevented()||(e.isAttached=!e.doDetach()),e.isAttached||e.panel.trigger("product-detached",[e])),!e.isAttached},doDetach:function(){return this.$el.detach(),!0},load:function(){var t=this,i=t.panel.cls.states;return n.Deferred(function(e){t.panel.trigger("product-load",[t]).isDefaultPrevented()?e.rejectWith("default prevented"):(t.$el.removeClass(i.allLoading).addClass(i.loading),t.doLoad().then(e.resolve).fail(e.reject))}).always(function(){t.$el.removeClass(i.loading)}).then(function(){t.$el.addClass(i.loaded),t.panel.trigger("product-loaded",[t])}).fail(function(){t.$el.addClass(i.loaded),t.panel.trigger("product-error",[t])}).promise()},doLoad:function(){var t=this;return null!==t.__loaded?t.__loaded:t.__loaded=n.ajax({type:"POST",url:t.panel.opt.cartAjax,data:{action:"foogallery_product_variations",nonce:t.panel.opt.cartNonce,nonce_time:t.panel.opt.cartTimeout,product_id:t.media.item.productId,gallery_id:t.panel.tmpl.id,attachment_id:t.media.item.id}}).then(function(e){e.error&&(console.log("Error fetching product information from server.",e.error),t.$footer.addClass(t.cls.hidden)),t.panel.opt.admin?t.$addToCart.toggleClass(t.cls.disabled,!0):t.$addToCart.toggleClass(t.cls.hidden,!t.hasWooCommerce()||!e.purchasable),i.string(e.product_url)?t.panel.opt.admin?t.$viewProduct.toggleClass(t.cls.disabled,!0):t.$viewProduct.prop("href",e.product_url):t.$viewProduct.toggleClass(t.cls.hidden,!0),t.$body.html(e.body).find("tr").on("click",{self:t},t.onRowClick),i.string(e.title)?t.$header.html(e.title):t.$header.html(t.il8n.title)}).promise()},unload:function(){var t=this;return n.Deferred(function(e){t.isCreated&&t.isAttached?t.panel.trigger("product-unload",[t]).isDefaultPrevented()?e.rejectWith("default prevented"):t.doUnload().then(e.resolve).fail(e.reject):e.rejectWith("not created or attached")}).then(function(){t.panel.trigger("product-unloaded",[t])}).promise()},doUnload:function(){return o.resolved},onAddToCartClick:function(e){e.preventDefault();var t=n(this),i=e.data.self,e=i.$body.find(":radio:checked").val()||i.media.item.productId;i.$addToCart.addClass(i.cls.disabled).addClass(i.cls.loading),i.media.item.addToCart(t,e,1,!1).then(function(e){!e||e.error?i.$footer.append("<p>"+i.il8n.error+"</p>"):i.$footer.append("<p>"+i.il8n.success+"</p>")}).always(function(){i.$addToCart.removeClass(i.cls.disabled).removeClass(i.cls.loading)})},onRowClick:function(e){n(e.target).is(":radio")||(e.preventDefault(),e.stopPropagation(),n(this).find(":radio").prop("checked",!0))}})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,(FooGallery.utils.obj,FooGallery.utils.transition)),function(e,t,r,i){t.Panel.Image=t.Panel.Media.extend({construct:function(e,t){this._super(e,t),i.extend(this.opt,e.opt.image),i.extend(this.cls,e.cls.image),i.extend(this.sel,e.sel.image),this.allFullClasses=[this.cls.fullWidth,this.cls.fullHeight].join(" ")},doCreateContent:function(){return e("<img/>").attr(this.opt.attrs)},resize:function(){var e,t,i,n,o,a,s=this;s.isCreated&&s.panel.opt.fitMedia&&((e=s.$content.get(0)).naturalWidth&&e.naturalHeight&&(t=e.naturalWidth>=e.naturalHeight,i=t,n=s.$el.innerWidth(),o=s.$el.innerHeight(),t?(a=n/e.naturalWidth,e.naturalHeight*a<o&&(i=!1)):(a=o/e.naturalHeight,e.naturalWidth*a<n&&(i=!0)),r.requestFrame(function(){s.$content.removeClass(s.allFullClasses).addClass(i?s.cls.fullWidth:s.cls.fullHeight)})))},doLoad:function(){var i=this;return e.Deferred(function(e){var t=i.$content.get(0);t.onload=function(){t.onload=t.onerror=null,e.resolve(i)},t.onerror=function(){t.onload=t.onerror=null,e.rejectWith("error loading image")},t.src=i.item.href,t.complete&&t.onload()}).then(function(){i.resize()}).promise()}}),t.Panel.media.register("image",t.Panel.Image),t.template.configure("core",{panel:{image:{attrs:{draggable:!1}}}},{panel:{image:{type:"fg-media-image",fullWidth:"fg-media-full-width",fullHeight:"fg-media-full-height"}}})}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.obj),function(e,t,i){t.Panel.Iframe=t.Panel.Media.extend({construct:function(e,t){this._super(e,t),i.extend(this.opt,e.opt.iframe),i.extend(this.cls,e.cls.iframe),i.extend(this.sel,e.sel.iframe)},doCreateContent:function(){return e("<iframe/>").attr(this.opt.attrs)},doLoad:function(){var t=this;return e.Deferred(function(e){t.$content.off("load error").on({load:function(){t.$content.off("load error"),e.resolve(t)},error:function(){t.$content.off("load error"),e.reject(t)}}),t.$content.attr("src",t.item.href)}).promise()}}),t.Panel.media.register("iframe",t.Panel.Iframe),t.template.configure("core",{panel:{iframe:{attrs:{src:"",frameborder:"no",allow:"autoplay; fullscreen",allowfullscreen:!0}}}},{panel:{iframe:{type:"fg-media-iframe"}}})}(FooGallery.$,FooGallery,(FooGallery.utils,FooGallery.utils.obj)),function(e,t,i,n){t.Panel.Html=t.Panel.Media.extend({construct:function(e,t){this._super(e,t),i.extend(this.opt,e.opt.html),i.extend(this.cls,e.cls.html),i.extend(this.sel,e.sel.html),this.$target=null},doCreate:function(){return!!this._super()&&(!(!n.startsWith(this.item.href,"#")||0===(this.$target=e(this.item.href)).length)||(this.$target=null,!1))},doCreateContent:function(){return e("<div/>").attr(this.opt.attrs)},doAppendTo:function(e){return!!this._super(e)&&(this.$content.append(this.$target.contents()),!0)},doDetach:function(){return this.$target.append(this.$content.contents()),this._super()}}),t.Panel.media.register("html",t.Panel.Html),t.template.configure("core",{panel:{html:{}}},{panel:{html:{type:"fg-media-html"}}})}(FooGallery.$,FooGallery,(FooGallery.utils,FooGallery.utils.obj),FooGallery.utils.str),function(e,i){e.Panel.Embed=e.Panel.Html.extend({construct:function(e,t){this._super(e,t),i.extend(this.opt,e.opt.embed),i.extend(this.cls,e.cls.embed),i.extend(this.sel,e.sel.embed)}}),e.Panel.media.register("embed",e.Panel.Embed),e.template.configure("core",{panel:{embed:{}}},{panel:{embed:{type:"fg-media-embed"}}})}((FooGallery.$,FooGallery),(FooGallery.utils,FooGallery.utils.obj),FooGallery.utils.str),function(n,e,d,i,c){e.Panel.Video=e.Panel.Media.extend({construct:function(e,t){this._super(e,t),i.extend(this.opt,e.opt.video),i.extend(this.cls,e.cls.video),i.extend(this.sel,e.sel.video),this.urls=[],this.isSelfHosted=!1},parseHref:function(){for(var e=this,t=e.item.href.split(","),i=[],n=0,o=t.length;n<o;n++)if(!d.empty(t[n]))for(var a=c.parts(t[n]),s=null,r=0,l=e.panel.videoSources.length;r<l;r++)if(e.panel.videoSources[r].canPlay(a)){s=e.panel.videoSources[r],i.push({parts:a,source:s,embed:s.getEmbedUrl(a,e.opt.autoPlay)});break}return i},doCreateContent:function(){return this.urls=this.parseHref(),this.isSelfHosted=0<n.map(this.urls,function(e){return!!e.source.selfHosted||null}).length,this.isSelfHosted?n("<video/>",this.opt.attrs.video):n("<iframe/>",this.opt.attrs.iframe).addClass("fitvidsignore")},doLoad:function(){var t=this;return n.Deferred(function(e){0===t.urls.length?e.rejectWith("no urls available"):(t.isSelfHosted?t.loadSelfHosted():t.loadIframe()).then(e.resolve).fail(e.reject)}).promise()},loadSelfHosted:function(){var i=this;return n.Deferred(function(t){i.$content.off("loadeddata error"),i.$content.find("source").remove(),d.empty(i.item.cover)||i.$content.attr("poster",i.item.cover),i.$content.on({loadeddata:function(){var e;i.$content.off("loadeddata error"),this.volume=i.opt.volume,i.opt.autoPlay&&void 0!==(e=this.play())&&e.catch(function(){console.log("Unable to autoplay video due to policy changes: https://developers.google.com/web/updates/2017/09/autoplay-policy-changes")}),t.resolve(i)},error:function(){i.$content.off("loadeddata error"),t.reject(i)}});var e=n.map(i.urls,function(e){return n("<source/>",{src:e.embed,mimeType:e.source.mimeType})});i.$content.append(e),i.$content.get(0).load()}).promise()},loadIframe:function(){var t=this;return n.Deferred(function(e){d.empty(t.item.cover)||t.$content.css("background-image","url('"+t.item.cover+"')"),t.$content.off("load error").on({load:function(){t.$content.off("load error"),e.resolve(t)},error:function(){t.$content.off("load error"),e.reject(t)}}),t.$content.attr("src",t.urls[0].embed)}).promise()}}),e.Panel.media.register("video",e.Panel.Video),e.template.configure("core",{panel:{video:{autoPlay:!1,volume:.2,privacyEnhanced:!0,attrs:{iframe:{src:"",frameborder:"no",allow:"autoplay; fullscreen",allowfullscreen:!0},video:{controls:!0,preload:!1,controlsList:"nodownload"}}}}},{panel:{video:{type:"fg-media-video"}}})}(FooGallery.$,FooGallery,(FooGallery.utils,FooGallery.utils.is),FooGallery.utils.obj,FooGallery.utils.url),function(e,s,r,l,i){var d=document.createElement("video");e.Panel.Video.Source=s.Class.extend({construct:function(e,t,i,n,o,a){this.panel=e,this.mimeType=t,this.regex=i,this.selfHosted=!!r.boolean(n)&&n,this.embedParams=r.array(o)?o:[],this.autoPlayParam=r.hash(a)?a:{},this.canPlayType=!this.selfHosted||!r.fn(d.canPlayType)||-1!==s.inArray(d.canPlayType(this.mimeType),["probably","maybe"])},canPlay:function(e){return this.canPlayType&&this.regex.test(e.href)},mergeParams:function(e,t){for(var i,n=this,o=0,a=n.embedParams.length;o<a;o++)i=n.embedParams[o],e.search=l.param(e.search,i.key,i.value);return r.empty(n.autoPlayParam)||(e.search=l.param(e.search,n.autoPlayParam.key,t?n.autoPlayParam.value:"")),e.search},getId:function(e){e=e.href.match(/.*\/(.*?)($|\?|#)/);return e&&2<=e.length?e[1]:null},getEmbedUrl:function(e,t){return e.search=this.mergeParams(e,t),i.join("/",location.protocol,"//",e.hostname,e.pathname)+e.search+e.hash}}),e.Panel.Video.sources=new e.Factory}((FooGallery.$,FooGallery),FooGallery.utils,FooGallery.utils.is,FooGallery.utils.url,FooGallery.utils.str),function(e){e.Panel.Video.Dailymotion=e.Panel.Video.Source.extend({construct:function(e){this._super(e,"video/daily",/(www.)?dailymotion\.com|dai\.ly/i,!1,[{key:"wmode",value:"opaque"},{key:"info",value:"0"},{key:"logo",value:"0"},{key:"related",value:"0"}],{key:"autoplay",value:"1"})},getId:function(e){return(/\/video\//i.test(e.href)?e.href.split(/\/video\//i)[1].split(/[?&]/)[0].split(/[_]/):e.href.split(/dai\.ly/i)[1].split(/[?&]/))[0]},getEmbedUrl:function(e,t){var i=this.getId(e);return e.search=this.mergeParams(e,t),"https://www.dailymotion.com/embed/video/"+i+e.search+e.hash}}),e.Panel.Video.sources.register("video/daily",e.Panel.Video.Dailymotion)}(FooGallery),function(e){e.Panel.Video.Mp4=e.Panel.Video.Source.extend({construct:function(e){this._super(e,"video/mp4",/\.mp4/i,!0)}}),e.Panel.Video.sources.register("video/mp4",e.Panel.Video.Mp4),e.Panel.Video.Webm=e.Panel.Video.Source.extend({construct:function(e){this._super(e,"video/webm",/\.webm/i,!0)}}),e.Panel.Video.sources.register("video/webm",e.Panel.Video.Webm),e.Panel.Video.Wmv=e.Panel.Video.Source.extend({construct:function(e){this._super(e,"video/wmv",/\.wmv/i,!0)}}),e.Panel.Video.sources.register("video/wmv",e.Panel.Video.Wmv),e.Panel.Video.Ogv=e.Panel.Video.Source.extend({construct:function(e){this._super(e,"video/ogg",/\.ogv|\.ogg/i,!0)}}),e.Panel.Video.sources.register("video/ogg",e.Panel.Video.Ogv)}(FooGallery),function(e){e.Panel.Video.Vimeo=e.Panel.Video.Source.extend({construct:function(e){this._super(e,"video/vimeo",/(player.)?vimeo\.com/i,!1,[{key:"badge",value:"0"},{key:"portrait",value:"0"}],{key:"autoplay",value:"1"})},getEmbedUrl:function(e,t){var i=this.getId(e);return e.search=this.mergeParams(e,t),"https://player.vimeo.com/video/"+i+e.search+e.hash}}),e.Panel.Video.sources.register("video/vimeo",e.Panel.Video.Vimeo)}(FooGallery),function(e,r,l){e.Panel.Video.Wistia=e.Panel.Video.Source.extend({construct:function(e){this._super(e,"video/wistia",/(.+)?(wistia\.(com|net)|wi\.st)\/.*/i,!1,[],{iframe:{key:"autoPlay",value:"1"},playlists:{key:"media_0_0[autoPlay]",value:"1"}})},getType:function(e){return/playlists\//i.test(e)?"playlists":"iframe"},mergeParams:function(e,t){for(var i,n,o=this,a=0,s=o.embedParams.length;a<s;a++)i=o.embedParams[a],e.search=l.param(e.search,i.key,i.value);return r.empty(o.autoPlayParam)||(n=o.autoPlayParam[o.getType(e.href)],e.search=l.param(e.search,n.key,t?n.value:"")),e.search},getId:function(e){return(/embed\//i.test(e.href)?e.href.split(/embed\/.*?\//i):e.href.split(/medias\//))[1].split(/[?&]/)[0]},getEmbedUrl:function(e,t){var i=this.getId(e);return e.search=this.mergeParams(e,t),"https://fast.wistia.net/embed/"+this.getType(e.href)+"/"+i+e.search+e.hash}}),e.Panel.Video.sources.register("video/wistia",e.Panel.Video.Wistia)}(FooGallery,FooGallery.utils.is,FooGallery.utils.url),function(e){e.Panel.Video.YouTube=e.Panel.Video.Source.extend({construct:function(e){this._super(e,"video/youtube",/(www.)?youtube|youtu\.be/i,!1,[{key:"modestbranding",value:"1"},{key:"rel",value:"0"},{key:"wmode",value:"transparent"},{key:"showinfo",value:"0"}],{key:"autoplay",value:"1"})},getId:function(e){return(/shorts\//i.test(e.href)?e.href.split(/shorts\//i):/embed\//i.test(e.href)?e.href.split(/embed\//i):e.href.split(/v\/|v=|youtu\.be\//i))[1].split(/[?&]/)[0]},getEmbedUrl:function(e,t){var i=this.getId(e);return e.search=this.mergeParams(e,t),"https://www.youtube"+(this.panel.opt.video.privacyEnhanced?"-nocookie":"")+".com/embed/"+i+e.search+e.hash}}),e.Panel.Video.sources.register("video/youtube",e.Panel.Video.YouTube)}(FooGallery),function(e){e.Panel.Video.TED=e.Panel.Video.Source.extend({construct:function(e){this._super(e,"video/ted",/(www.)?ted\.com/i,!1,[],{key:"autoplay",value:"1"})},getEmbedUrl:function(e,t){var i=this.getId(e);return e.search=this.mergeParams(e,t),"https://embed.ted.com/talks/"+i+e.search+e.hash}}),e.Panel.Video.sources.register("video/ted",e.Panel.Video.TED)}(FooGallery),function(e,i){e.Panel.Video.Facebook=e.Panel.Video.Source.extend({construct:function(e){this._super(e,"video/facebook",/(www.)?facebook\.com\/.*?\/videos\//i,!1,[{key:"show_text",value:"0"},{key:"show_caption",value:"0"}],{key:"autoplay",value:"1"})},getEmbedUrl:function(e,t){return"https://www.facebook.com/plugins/video.php"+i.param(this.mergeParams(e,t),"href",encodeURI(e.origin+e.pathname))+e.hash}}),e.Panel.Video.sources.register("video/facebook",e.Panel.Video.Facebook)}(FooGallery,FooGallery.utils.url),function(n,i,o){n.Lightbox=n.Panel.extend({construct:function(e,t){var i=this;i._super(e,t),i.opt.enabled&&i.tmpl instanceof n.Template&&!i.tmpl.destroying&&!i.tmpl.destroyed&&i.tmpl.on({"after-state":i.onAfterState,"anchor-click-item":i.onAnchorClickItem,destroyed:i.onDestroyedTemplate},i)},onAnchorClickItem:function(e,t){if(!t.noLightbox){e.preventDefault();try{this.open(t)}catch(e){console.error(e)}}},onDestroyedTemplate:function(){this.destroy()},onAfterState:function(e,t){if(t.item instanceof n.Item&&!t.item.noLightbox)try{this.open(t.item)}catch(e){console.error(e)}}}),n.template.configure("core",{lightbox:{enabled:!1}},{}),n.Template.override("construct",function(e,t){this._super(e,t);e=this.$el.data("foogalleryLightbox"),t=this.opt.lightbox.enabled||i.hash(e)||0<this.$el.length&&this.el.hasAttribute("data-foogallery-lightbox");this.opt.lightbox=o.extend({},this.opt.panel,this.opt.lightbox,{enabled:t},e),this.lightbox=t?new n.Lightbox(this,this.opt.lightbox):null})}((FooGallery.$,FooGallery),FooGallery.utils.is,FooGallery.utils.obj);