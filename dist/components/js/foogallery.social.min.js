/*
* FooGallery - The Most Intuitive and Extensible Gallery Creation and Management Tool Ever Created for WordPress
* @version 2.1.7
* @link 
* @copyright Steven Usher & Brad Vincent 2015
* @license Released under the GPLv3 license.
*/
!function(h,d,e,t){e?t?(d.template.configure("core",{social:{likes:!1,canLike:!1,comments:!1,hideCounts:!1,hideLikesZero:!1,hideLikesZeroCount:!0,hideCommentsZero:!0,hideCommentsZeroCount:!0,count:{roundingMode:"floor",roundingPriority:"lessPrecision",maximumSignificantDigits:3,maximumFractionDigits:1,notation:"compact",compactDisplay:"short"}},item:{likes:0,liked:!1,comments:0}}),d.Template.prototype.getCountFormatter=function(){return this._countFormatter||(this._countFormatter=new Intl.NumberFormat(this.getLanguage(),this.opt.social.count)),this._countFormatter},d.Item.prototype.onCommentsClicked=function(e){const t=e.data.self;t.showComments()},d.Item.prototype.onLikesClicked=function(e){const t=e.data.self;t.toggleLike()},d.Item.prototype.showComments=function(){this.tmpl?.lightbox?.open(this).then(()=>{this.tmpl.lightbox.areas.find(e=>"comments"===e.name)?.toggle(!0)})},d.Item.prototype.toggleLike=function(){const s=this.$socialOverlay.find(".fg-social-likes");return s.find(".fg-social-button-icon").replaceWith(d.icons.get("spinner").addClass("fg-social-button-icon")),e({method:"POST",path:"/foogallery/v1/likes",data:{attachment_id:this.id,gallery_id:this.tmpl.id}}).then(e=>{if(e){var e=this.tmpl["opt"]["social"];const t=this.tmpl.getCountFormatter();this.liked?(this.liked=!1,this.likes--):(this.liked=!0,this.likes++),s.find(".fg-social-button-count").text(t.format(this.likes)).toggleClass("fg-hidden",0===this.likes&&e?.hideLikesZeroCount),s.find(".fg-social-button-icon").replaceWith(d.icons.get(this.liked?"heart":"heart-outline").addClass("fg-social-button-icon")).toggleClass("fg-hidden",0===this.likes&&e?.hideLikesZero||e?.hideCounts)}})},d.Item.prototype.shouldShowCommentsButton=function(){return this.tmpl?.opt?.social?.comments&&this.tmpl?.lightbox instanceof d.Lightbox&&["top","right","bottom","left"].includes(this.tmpl.lightbox?.opt?.comments)},d.Item.prototype.createSocialOverlay=function(){const{opt:{social:e},$el:t}=this.tmpl;var s=!t.hasClass("fg-caption-hover"),o=s?"<span/>":"<div/>",o=(this.$socialOverlay=h(o).addClass("fg-social-overlay"),h(o).addClass("fg-social-buttons").appendTo(this.$socialOverlay));const i=this.tmpl.getCountFormatter();if(e?.likes){this.$anchor.attr({"data-likes":this.likes,"data-liked":this.liked});const n=h("<button/>").addClass("fg-social-button fg-social-likes").append(d.icons.get(this.liked?"heart":"heart-outline").addClass("fg-social-button-icon")).appendTo(o),r=h("<span/>").addClass("fg-social-button-count").text(i.format(this.likes)).appendTo(n);0!==this.likes&&!e?.hideCounts||(e?.hideLikesZero&&n.addClass("fg-hidden"),(e?.hideLikesZeroCount||e?.hideCounts)&&r.addClass("fg-hidden"))}if(this.shouldShowCommentsButton()){this.$anchor.attr({"data-comments":this.comments});const a=h("<button/>").addClass("fg-social-button fg-social-comments").append(d.icons.get("comment").addClass("fg-social-button-icon")).appendTo(o),l=h("<span/>").addClass("fg-social-button-count").text(i.format(this.comments)).appendTo(a);0!==this.comments&&!e?.hideCounts||(e?.hideCommentsZero&&a.addClass("fg-hidden"),(e?.hideCommentsZeroCount||e?.hideCounts)&&l.addClass("fg-hidden"))}s?this.$socialOverlay.appendTo(this.$anchor):this.$socialOverlay.appendTo(this.$inner)},d.Item.override("doParseItem",function(e){var t;return!!this._super(e)&&({social:e}=this.tmpl["opt"],t=this.$anchor.data(),this.likes=t?.likes??this.opt?.likes??0,this.liked=t?.liked??this.opt?.liked??!1,this.comments=t?.comments??this.opt?.comments??0,this.shareUrl=t?.shareUrl??this.opt?.shareUrl??"",this.$socialOverlay=this.$el.find(".fg-social-overlay"),e?.likes||e?.comments?(0===this.$socialOverlay.length&&this.createSocialOverlay(),e?.likes&&e?.canLike&&this.$socialOverlay.find(".fg-social-likes").addClass("fg-can-like").on("click",{self:this},this.onLikesClicked),this.shouldShowCommentsButton()&&this.$socialOverlay.find(".fg-social-comments").on("click",{self:this},this.onCommentsClicked)):this.$socialOverlay.remove(),!0)}),d.Item.override("doCreateItem",function(){return!!this._super()&&(this.likes=this.opt?.likes??0,this.liked=this.opt?.liked??!1,this.comments=this.opt?.comments??0,this.shareUrl=this.opt?.shareUrl??"",this.$socialOverlay=this.createSocialOverlay(),!0)}),d.Item.override("doDestroyItem",function(){return this.isParsed,this._super()})):console.error("FooGallery social depends on wp.url.addQueryArgs which is not available."):console.error("FooGallery social depends on wp.apiFetch which is not available.")}(jQuery,FooGallery,globalThis?.wp?.apiFetch,globalThis?.wp?.url?.addQueryArgs),function(i,n){n?.Panel&&n.Panel?.Media&&(n.template.configure("core",{panel:{share:"none",shareFacebookAppId:966242223397117,shareLinks:[],shareLinkOptions:{facebook:{urlFormat:"https://www.facebook.com/dialog/share?app_id={app_id}&display=popup&href={share_url}"},linkedin:{urlFormat:"https://linkedin.com/shareArticle?mini=true&url={share_url}&title={title}&summary={description}"},pinterest:{urlFormat:"https://pinterest.com/pin/create/bookmarklet/?url={share_url}&description={title}"},reddit:{urlFormat:"https://reddit.com/submit?url={share_url}&title={title}"},tumblr:{urlFormat:"https://www.tumblr.com/widgets/share/tool?canonicalUrl={share_url}&title={title}&caption={description}"},twitter:{urlFormat:"https://twitter.com/share?url={share_url}&text={title}"},download:{allow:["image"]},email:{}}}},{panel:{share:{}}},{panel:{share:{}}}),n.Panel.Media.prototype.canShare=function(){var{share:e,shareLinks:t=[]}=this.panel.opt,{shareUrl:s=""}=this.item;return["top","bottom"].includes(e)&&0<t.length&&""!==s},n.Panel.Media.prototype.getShareUrl=function(e,t){var s,{item:{shareUrl:o=""}={},caption:{title:i="",description:n=""}={},panel:{opt:{shareFacebookAppId:r=""}={}}={}}=this;let a="";if(["download","email"].includes(e)){if("download"===e)return o;if("email"===e)return e=""!==i?"subject="+encodeURIComponent(i):"",s="body="+encodeURIComponent(""!==n?n+" "+o:o),e?`mailto:?${e}&`+s:"mailto:?"+s}else a=(a=(a=(a=t.urlFormat.replaceAll(/\{share_url}/g,encodeURIComponent(o))).replaceAll(/\{title}/g,encodeURIComponent(i))).replaceAll(/\{description}/g,encodeURIComponent(n))).replaceAll(/\{app_id}/g,encodeURIComponent(r));return a},n.Panel.Media.prototype.$createShareLink=function(e){var{shareLinkOptions:t={}}=this.panel.opt;if(Object.hasOwn(t,e)){const s=t[e];if("download"===e&&!s?.allow?.includes(this.item.type))return i();t=this.getShareUrl(e,s);const o=i("<a/>",{href:t,target:"_blank",rel:"nofollow"}).addClass("fg-share-link fg-share-link-"+e).append(n.icons.get("social-"+e,this.panel.opt.icons).addClass("fg-share-link-icon"));return"download"===e&&o.attr("download",""),o}return i()},n.Panel.Media.override("doCreate",function(){if(this._super()){if(this.canShare()){const{share:e,shareLinks:t=[]}=this.panel.opt;this.$socialButtons=i("<div/>").addClass("fg-share-links fg-share-links-"+e),t.forEach(e=>{this.$socialButtons.append(this.$createShareLink(e))}),this.$socialButtons.appendTo(this.$el)}return!0}return!1}))}(jQuery,FooGallery,FooGallery.utils.is),function(e,s){e.Panel.Comments=e.Panel.SideArea.extend({construct:function(e){this._super(e,"comments",{icon:"comment",label:e.il8n.buttons.comments,position:e.opt.comments,overlay:e.opt.commentsOverlay,visible:e.opt.commentsVisible,autoHide:e.opt.commentsAutoHide,waitForUnload:!1,group:"overlay"},e.cls.comments)},canLoad:function(e){return this._super(e)&&e?.comments?.canLoad()},doLoad:function(e,t){return this.canLoad(e)&&(e?.comments?.appendTo(this.$inner),e?.comments?.load()),s.resolved},doUnload:function(e,t){return e?.comments?.unload(),e?.comments?.detach(),s.resolved}}),e.template.configure("core",{panel:{comments:"none",commentsOverlay:!0,commentsAutoHide:!0,commentsVisible:!1}},{panel:{comments:{}}},{panel:{buttons:{comments:"Comments"}}})}((FooGallery.$,FooGallery),FooGallery.utils.fn),function(T,$,t,e,A,s){$.Panel.Media.Comments=e.Class.extend({construct:function(e,t){this.panel=e,this.media=t,this.opt=e.opt,this.cls=t.cls.comments,this.sel=t.sel.comments,this.il8n=t.il8n.comments,this.$el=null,this.isCreated=!1,this.isAttached=!1,this.requireNameAndEmail=this.opt.commentsRequireNameAndEmail,this.requireLoggedIn=this.opt.commentsRequireLoggedIn,this.showCookieConsent=this.opt.commentsShowCookieConsent,this.showAvatar=this.opt.commentsShowAvatar,this.nestedDepth=this.opt.commentsNestedDepth,this.collapseNested=this.opt.commentsCollapseNested,this.showThreadLines=this.opt.commentsShowThreadLines,this.$el=null,this.$inner=null,this.$header=null,this.$body=null,this.$footer=null,this.$responses=null,this.form=[],this.currentAuthor=void 0,this.consented=!1,this.closed=!0,this.locked=!0,this.lookup=new Map,this.comments=[]},canLoad:function(){return A.string(this.media?.item?.id)&&A.string(this.media?.item?.tmpl?.id)},create:function(){if(!this.isCreated){const e=this.panel.trigger("comments-create",[this]);e.isDefaultPrevented()||(this.isCreated=this.doCreate(),this.isCreated&&this.panel.trigger("comments-created",[this]))}return this.isCreated},doCreate:function(){return this.$el=T("<div/>").addClass(this.cls.elem).append(T("<div/>").addClass(this.panel.cls.loader)),this.$inner=T("<div/>").addClass(this.cls.inner).appendTo(this.$el),this.$header=T("<div/>").addClass(this.cls.header).appendTo(this.$inner),this.$body=T("<div/>").addClass(this.cls.body).appendTo(this.$inner),this.$footer=T("<div/>").addClass(this.cls.footer).appendTo(this.$inner),!0},destroy:function(){if(this.isCreated){const e=this.panel.trigger("comments-destroy",[this]);e.isDefaultPrevented()||(this.isCreated=!this.doDestroy(),this.isCreated||this.panel.trigger("comments-destroyed",[this]))}return!this.isCreated},doDestroy:function(){return this.$el.remove(),!0},appendTo:function(e){if(this.isCreated||this.create(),this.isCreated&&!this.isAttached){const t=this.panel.trigger("comments-append",[this,e]);t.isDefaultPrevented()||(this.isAttached=this.doAppendTo(e)),this.isAttached&&this.panel.trigger("comments-appended",[this,e])}return this.isAttached},doAppendTo:function(e){return this.$el.appendTo(e),0<this.$el.parent().length},detach:function(){if(this.isCreated&&this.isAttached){const e=this.panel.trigger("comments-detach",[this]);e.isDefaultPrevented()||(this.isAttached=!this.doDetach()),this.isAttached||this.panel.trigger("comments-detached",[this])}return!this.isAttached},doDetach:function(){return this.$el.detach(),!0},load:function(){const s=this.panel.cls.states;return T.Deferred(e=>{const t=this.panel.trigger("comments-load",[this]);t.isDefaultPrevented()?e.rejectWith("default prevented"):(this.$el.removeClass(s.allLoading).addClass(s.loading),this.doLoad().then(e.resolve).catch(e.reject))}).always(()=>{this.$el.removeClass(s.loading)}).then(()=>{this.$el.addClass(s.loaded),this.panel.trigger("comments-loaded",[this])}).catch(()=>{this.$el.addClass(s.loaded),this.panel.trigger("comments-error",[this])}).promise()},doLoad:function(){return this._loaded||(this._loaded=this.fetch().then(e=>{this.currentAuthor=e?.currentAuthor,this.consented=A.hash(e?.currentAuthor),this.closed=e?.closed??!0,this.locked=this.closed||this.requireLoggedIn&&(A.undef(this.currentAuthor)||!A.number(this.currentAuthor?.id)||0===this.currentAuthor.id);var[e,t]=this.prepareComments(e?.comments,this.nestedDepth);this.comments=e,this.lookup=t,this.createComments()}))},unload:function(){return T.Deferred(e=>{if(this.isCreated&&this.isAttached){const t=this.panel.trigger("comments-unload",[this]);t.isDefaultPrevented()?e.rejectWith("default prevented"):this.doUnload().then(e.resolve).catch(e.reject)}else e.rejectWith("not created or attached")}).then(()=>{this.panel.trigger("comments-unloaded",[this])}).promise()},doUnload:function(){return s.resolved},fetch:function(){return globalThis.COMMENTS_LIST(globalThis.COMMENTS_ROLE,globalThis?.COMMENTS_OVERRIDE_LIST_RESPONSE)},upsert:function(e){return globalThis.COMMENTS_UPSERT(e,globalThis.COMMENTS_ROLE)},prepareComments:function(e,i){const t=new Map,s=[];let o=[];if(0<=i&&Array.isArray(e)){for(const n of e)A.boolean(n?.editable)||(n.editable=!1),A.boolean(n?.moderation)||(n.moderation=!1),n.isAtMaxDepth=!1,n.replies=[],n.depth=0,t.set(n.id,n);for(const r of e)if(A.number(r?.parentId)&&t.has(r.parentId)){const a=t.get(r.parentId);a.replies.push(r)}else s.push(r);if(i<=1)o=e.map(({replies:e,...t})=>({...t,replies:[],isAtMaxDepth:!0}));else{const l=(e,t)=>{const s=[];return e.forEach(e=>{s.push(e),0<e.replies.length&&s.push(...l(e.replies)),e.replies=[],e.isAtMaxDepth=!0,e.depth=t}),s},h=(e,o)=>e.flatMap(e=>{var t=i<=o;const s={...e,replies:[],isAtMaxDepth:t,depth:o};if(0<e.replies.length){if(t)return[s,...l(e.replies,o)];s.replies=h(e.replies,o+1)}return s});o=h(s,1)}}return[o,t]},formatCountText:function(e,t,s){return(1===s?e:t).replaceAll(/\{COUNT}/g,""+s)},getSummaryText:function(e){return this.formatCountText(this.il8n.responseCollapsedSingular,this.il8n.responseCollapsedPlural,e)},setHeaderText:function(){var e=this.lookup.size,e=0<e?this.formatCountText(this.il8n.titleSingular,this.il8n.titlePlural,e):this.il8n.formLeaveReply;this.$header.text(e)},createComments:function(){var e;this.destroyResponses(),this.destroyForm(),this.setHeaderText(),this.$responses=this.createResponses(this.comments),0<this.$responses.length&&(this.showThreadLines&&this.$responses.addClass(this.cls.responsesThreadLines),this.$body.empty().append(this.$responses)),this.locked||(this.form=this.createForm({author:this.currentAuthor}),0<this.form.length&&([e]=this.form,this.$footer.empty().append(e)))},destroyResponses:function(){this.$responses&&0<this.$responses.length&&this.$responses.remove()},createResponses:function(e){if(0<e.length){const s=T("<ul/>").addClass(this.cls.responses);return e.forEach(e=>{const t=this.createResponse(e);0<t.length&&t.appendTo(s)}),s}return T()},createResponse:function(t){const s=T("<li/>",{id:"comment_"+t.id}).addClass(this.cls.response);var e=t?.author,o=(this.showAvatar&&(o=T("<div/>").addClass(this.cls.responseAvatar).appendTo(s),T("<img/>",{alt:"",src:e?.avatar||"https://gravatar.com/avatar/?s=24&d=mp&r=g",width:"24",height:"24",loading:"lazy"}).appendTo(o)),T("<div/>").addClass(this.cls.responseHeader).appendTo(s));const i=T("<div/>").addClass(this.cls.responseAuthor).appendTo(o);var n=e?.name??"Anonymous",e=(A.string(e?.url)?i.append(T("<a/>",{href:e?.url,rel:"external nofollow ugc",target:"_blank"}).text(n)):i.append(T("<span/>").text(n)),T("<div/>").addClass(this.cls.responseSubheader).appendTo(o)),n=(T("<div/>").addClass(this.cls.responseDate).text(t?.date).appendTo(e),!this.locked&&t?.editable&&(s.addClass("fg-can-edit"),T("<button/>").addClass(this.cls.responseEdit).text(this.il8n.responseEdit).on("click",e=>{e.preventDefault(),this.destroyForm(),s.addClass("fg-is-editing"),this.form=this.createForm(t,()=>{s.removeClass("fg-is-editing"),s.get(0).scrollIntoView()}),0<this.form.length&&([e]=this.form,this.$footer.empty().append(e)),s.get(0).scrollIntoView()}).appendTo(e)),T("<div/>").addClass(this.cls.responseBody).appendTo(s)),o=(t?.moderation&&T("<div/>").addClass(this.cls.responseModeration).text(this.il8n.responseModeration).appendTo(n),T("<div/>").addClass(this.cls.responseContent).text(t?.content).appendTo(n),this.locked||t.isAtMaxDepth||(s.addClass("fg-can-reply"),T("<button/>").addClass(this.cls.responseReply).text(this.il8n.responseReply).on("click",e=>{e.preventDefault(),this.destroyForm(),s.addClass("fg-is-replying"),this.form=this.createForm({parentId:t.id,author:this.currentAuthor},()=>{s.removeClass("fg-is-replying"),s.get(0).scrollIntoView()}),0<this.form.length&&([e]=this.form,this.$footer.empty().append(e)),s.get(0).scrollIntoView(),console.log("reply")}).appendTo(n)),this.createResponses(t?.replies));if(0<o.length)if(s.addClass("fg-has-responses"),this.collapseNested){const r=T("<details/>").addClass(this.cls.responseReplies);r.append(this.$createCollapsableSummary(t.replies.length)),r.append(o).appendTo(s)}else{const a=T("<div/>").addClass(this.cls.responseReplies);a.append(o).appendTo(s)}return s},destroyForm:function(){if(0<this.form.length){const[e,t]=this.form;t(),e.remove()}},updateComment(e){const t=this.lookup.get(e.id),s=this.$el.find("#comment_"+e.id),o=(t.content=e?.content??"",t.author={...t.author,...e?.author??{}},s.children(this.sel.responseBody).children(this.sel.responseContent).text(t.content),s.children(this.sel.responseHeader).children(this.sel.responseAuthor));o.empty();e=t.author?.name??"Anonymous";A.string(t.author?.url)?o.append(T("<a/>",{href:t.author?.url,rel:"external nofollow ugc",target:"_blank"}).text(e)):o.append(T("<span/>").text(e))},insertComment(e){const s={...e,isAtMaxDepth:this.nestedDepth<=0,depth:0,replies:[],editable:e?.editable??!1,moderation:e?.moderation??!1};this.lookup.set(s.id,s);var o,e=()=>{var e;this.comments.push(s),0<this.$responses.length?(e=this.createResponse(s),this.$responses.append(e)):(this.$responses=this.createResponses(this.comments),0<this.$responses.length&&this.$responses.appendTo(this.$body))};if(A.number(s?.parentId)&&this.lookup.has(s.parentId)){let t=this.lookup.get(s.parentId);for(;!0===t?.isAtMaxDepth;)t=this.lookup.get(t?.parentId);if(t){s.depth=t.depth+1,s.isAtMaxDepth=s.depth>=this.nestedDepth,t.replies.push(s);const i=this.$el.find("#comment_"+t.id);if(0<i.length){let e=i.find(this.sel.responses);0<e.length?(o=this.createResponse(s),e.append(o),i.find(`> details${this.sel.responseReplies} > summary > span`).text(this.getSummaryText(t.replies.length))):0<(o=this.$createReplies(t.replies)).length&&i.addClass("fg-has-responses").append(o)}else console.log(`Cannot find '#comment_${t.id}', appending to root.`),e()}else e()}else e()},$createReplies:function(e){var t=this.createResponses(e);return 0<t.length?(this.collapseNested?T("<details/>").addClass(this.cls.responseReplies).append(this.$createCollapsableSummary(e.length)):T("<div/>").addClass(this.cls.responseReplies)).append(t):T()},$createCollapsableSummary:function(e){return T("<summary/>").append(t.get("circle-plus",this.panel.opt.icons),t.get("circle-minus",this.panel.opt.icons),T("<span/>").text(this.getSummaryText(e)))},createForm:function({parentId:e,id:t,author:s,content:o=""}={},i=()=>{}){var n=this.media.item.id,r=this.media.item.tmpl.id,a=$.generateGUID();const{requireNameAndEmail:l,showCookieConsent:h,lookup:d}=this,m=[],p=T("<form/>",{id:a,autocomplete:"off"}).addClass(this.cls.form),c=T("<fieldset/>").addClass(this.cls.formContent).appendTo(p);var u=()=>{p.off("submit",f),m.forEach(e=>e()),i()};const f=async e=>{e.preventDefault();const t=new FormData(e.target);this.consented=t.has("cookie_consent"),c.prop("disabled",!0),this.upsert(t).then(e=>{this.lookup.has(e.id)?this.updateComment(e):this.insertComment(e),this.setHeaderText(),this.destroyForm(),this.form=this.createForm({author:this.currentAuthor}),0<this.form.length&&([e]=this.form,this.$footer.empty().append(e))}).catch(e=>{console.error(e)})};p.on("submit",f),c.append(this.$createHiddenInput(a+"[gallery_id]",{name:"gallery_id",value:r})),c.append(this.$createHiddenInput(a+"[attachment_id]",{name:"attachment_id",value:n}));let g=this.il8n.formTitle,C=this.il8n.formCancel,y=this.il8n.formSubmit;r=!!e&&d.has(e),e&&d.has(e)&&(y=this.il8n.formSubmitReply,n=d.get(e),g=this.il8n.formTitleReply.replaceAll(/\{PARENT_AUTHOR_NAME}/g,n.author.name),C=this.il8n.formCancelReply,c.append(this.$createHiddenInput(a+"[parent_id]",{name:"parent_id",value:e}))),n=!!t,n&&(y=this.il8n.formSubmitEdit,g=this.il8n.formTitleEdit.replaceAll(/\{AUTHOR_NAME}/g,s.name),C=this.il8n.formCancelEdit,c.append(this.$createHiddenInput(a+"[comment_id]",{name:"comment_id",value:t}))),e=0===this.lookup.size,t=!n&&!r&&!e;if(!e){r=T("<div/>").text(g).addClass(this.cls.formTitle).appendTo(c);if(""!==C){let e=e=>{e.preventDefault(),this.destroyForm(),this.form=this.createForm({author:this.currentAuthor}),0<this.form.length&&([e]=this.form,this.$footer.empty().append(e))};const v=T("<button/>").addClass(this.cls.formCancel).text(C).on("click",e).appendTo(r);m.push(()=>v.off("click",e))}}T("<div/>").text(this.il8n.formNotes).addClass(this.cls.formNotes).appendTo(c);var[e]=this.$createTextArea(a+"[content]",this.il8n.formComment,{name:"content",maxlength:65525,rows:4,required:!0,text:o});if(c.append(e),s&&A.number(s?.id)&&0<s.id?c.append(this.$createHiddenInput(a+"[author_id]",{name:"author_id",value:s.id})):([r]=this.$createTextInput(a+"[author_name]",this.il8n.formName,{type:"text",name:"author_name",maxlength:245,required:l,value:s?.name}),[o]=(c.append(r),this.$createTextInput(a+"[author_email]",this.il8n.formEmail,{type:"email",name:"author_email",maxlength:100,required:l,value:s?.email})),[e]=(c.append(o),this.$createTextInput(a+"[author_url]",this.il8n.formWebsite,{type:"url",name:"author_url",maxlength:200,value:s?.url})),c.append(e),!n&&h&&([r]=this.$createCheckboxInput(a+"[cookie_consent]",this.il8n.formCookieConsent,{type:"checkbox",name:"cookie_consent",value:"yes",checked:this.consented}),c.append(r))),T("<button/>",{type:"submit"}).addClass(this.cls.formSubmit).text(y).appendTo(c),t){o=T("<div/>").addClass(this.cls.formLeaveReplyWrap);const b=e=>{e.preventDefault(),this.$footer.empty().append(p)},k=T("<button/>").addClass(this.cls.formLeaveReply).text(this.il8n.formLeaveReply).on("click",b).appendTo(o);return m.push(()=>k.off("click",b)),[T(p,o),u]}return[p,u]},$createHiddenInput:function(e,t={}){return T("<input/>",{id:e,type:"hidden",...t})},$createTextInput:function(e,t,s={}){var o=T("<div/>").addClass(this.cls.formControl),t=T("<label/>",{for:e}).addClass(this.cls.formControlLabel).text(s?.required?t+" *":t).appendTo(o);return[o,T("<input/>",{id:e,...s}).addClass(this.cls.formControlInput).appendTo(o),t]},$createTextArea:function(e,t,s={}){var o=T("<div/>").addClass(this.cls.formControl),t=T("<label/>",{for:e}).addClass(this.cls.formControlLabel).text(s?.required?t+" *":t).appendTo(o);return[o,T("<textarea/>",{id:e,...s}).addClass(this.cls.formControlInput).appendTo(o),t]},$createCheckboxInput:function(e,t,s={}){var o=T("<div/>").addClass(this.cls.formControl);return[o,T("<input/>",{id:e,...s}).addClass(this.cls.formControlCheckbox).appendTo(o),T("<label/>",{for:e}).addClass(this.cls.formControlLabel).text(s?.required?t+" *":t).appendTo(o)]}}),$.template.configure("core",{panel:{commentsRequireNameAndEmail:!0,commentsRequireLoggedIn:!0,commentsShowCookieConsent:!0,commentsShowAvatar:!0,commentsNestedDepth:5,commentsCollapseNested:!1,commentsShowThreadLines:!1}},{panel:{media:{comments:{elem:"fg-media-comments",inner:"fg-media-comments-inner",header:"fg-media-comments-title",body:"fg-media-comments-body",footer:"fg-media-comments-footer",responses:"fg-comments-responses",responsesThreadLines:"fg-comments-thread-lines",response:"fg-comments-response",responseAvatar:"fg-comments-avatar",responseHeader:"fg-comments-header",responseSubheader:"fg-comments-subheader",responseBody:"fg-comments-body",responseAuthor:"fg-comments-author",responseDate:"fg-comments-date",responseContent:"fg-comments-content",responseReply:"fg-comments-reply",responseEdit:"fg-comments-edit",responseModeration:"fg-comments-moderation",responseReplies:"fg-comments-replies",formLeaveReplyWrap:"fg-comments-form-leave-reply-wrap",formLeaveReply:"fg-comments-form-leave-reply fg-panel-button fg-panel-button-primary",form:"fg-comments-form",formContent:"fg-comments-form-content",formCancel:"fg-comments-form-cancel",formTitle:"fg-comments-form-title",formNotes:"fg-comments-form-notes",formControl:"fg-comments-form-control",formControlLabel:"fg-comments-form-control-label",formControlInput:"fg-comments-form-control-input",formControlCheckbox:"fg-comments-form-control-checkbox",formSubmit:"fg-comments-form-submit fg-panel-button fg-panel-button-primary"}}}},{panel:{media:{comments:{titleSingular:"{COUNT} response",titlePlural:"{COUNT} responses",responseEdit:"Edit",responseModeration:"Your comment is awaiting moderation. This is a preview; your comment will be visible after it has been approved.",responseReply:"Reply",responseCollapsedSingular:"{COUNT} more reply",responseCollapsedPlural:"{COUNT} more replies",errorLoading:"Error loading comments",errorPost:"Error posting comment",formLeaveReply:"Leave a Reply",formTitle:"Leave a Reply",formTitleReply:"Reply to {PARENT_AUTHOR_NAME}",formTitleEdit:"Edit {AUTHOR_NAME}'s Reply",formCancel:"Cancel",formCancelReply:"Cancel reply",formCancelEdit:"Cancel edit",formNotes:"Required fields are marked *",formName:"Name",formEmail:"Email",formWebsite:"Website",formComment:"Comment",formCookieConsent:"Save my name, email, and website in this browser for the next time I comment.",formSubmit:"Post Comment",formSubmitReply:"Post Comment",formSubmitEdit:"Update Comment"}}}})}(FooGallery.$,FooGallery,FooGallery.icons,FooGallery.utils,FooGallery.utils.is,FooGallery.utils.fn,(FooGallery.utils.obj,FooGallery.utils.str,FooGallery.utils.transition));