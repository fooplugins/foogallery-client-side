/*
* FooGallery - The Most Intuitive and Extensible Gallery Creation and Management Tool Ever Created for WordPress
* @version 0.0.1
* @link 
* @copyright Steven Usher & Brad Vincent 2015
* @license Released under the GPLv3 license.
*/
!function(a,b,c,d){b.SimplePortfolio=c.Class.extend({construct:function(c,d){this.$el=a(c),this.options=a.extend(!0,{},b.SimplePortfolio.defaults,d),this._items=[]},init:function(){var b=this;b._items=b.$el.find(".foogallery-item").map(function(b,c){var d=a(c),e=d.find(".foogallery-thumb"),f=e.find("img"),g=parseInt(f.attr("width")),h=parseInt(f.attr("height"));return d.width(g),f.css({width:g,height:h}),{index:b,width:g,height:d.outerHeight(),top:0,left:0,$item:d,$thumb:e}}).get(),a(window).on("resize.simple-portfolio",{self:b},b.onwindowresize),b.layout()},destroy:function(){a(window).off("resize.simple-portfolio")},round:function(a){return Math.round(2*a)/2},layout:function(a){a=!d.boolean(a)||a;for(var b,c=this,e=c.$el.width(),f=c.rows(e),g=0,h=0,i=f.length;h<i;h++)b=f[h],g=c.position(b,e,g,"center"),c.render(b);c.$el.height(g),a&&c.$el.width()<e&&c.layout(!1)},render:function(a){for(var b,c=0,d=a.items.length;c<d;c++)b=a.items[c],a.visible?b.$item.css({width:b.width,height:a.height,top:b.top,left:b.left,display:""}):b.$item.css("display","none")},position:function(a,b,c,d){var e=this,f=a.items[a.items.length-1],g=b-(f.left+f.width);a.index>0&&(c+=e.options.gutter),a.top=c;for(var h,i=0,j=a.items.length;i<j;i++)h=a.items[i],h.top=c,"center"===d?h.left+=g/2:"right"===d&&(h.left+=g);return c+a.height},items:function(){return a.map(this._items,function(a){return{index:a.index,width:a.width,height:a.height,$item:a.$item,$thumb:a.$thumb,top:a.top,left:a.left}})},rows:function(a){for(var b=this,c=b.items(),d=[],e=c.length>0,f=-1,g=0;e;){f+=1,f>0&&(g+=b.options.gutter);for(var h,i,j,k={index:f,visible:!0,top:g,width:0,height:0,items:[]},l=[],m=0,n=0,o=c.length;n<o&&(i=c[n],!((h=k.width+i.width)>a&&n>0));n++)h>a&&0==n&&(h=a,j=a/i.width,i.width=b.round(i.width*j),i.height=b.round(i.height*j),k.height=i.height),i.top=k.top,n>0&&(m+=b.options.gutter),n!==o-1&&(h+=b.options.gutter),i.left=m,m+=i.width,i.height>k.height&&(k.height=i.height),k.width=h,k.items.push(i),l.push(n);if(0===l.length){e=!1;break}l.sort(function(a,b){return b-a});for(var p=0,q=l.length;p<q;p++)c.splice(l[p],1);d.push(k),e=c.length>0}return d},onwindowresize:function(a){a.data.self.layout()}}),b.SimplePortfolio.defaults={gutter:40},a.fn.fgSimplePortfolio=function(c){return this.each(function(){var d=a.data(this,"__FooGallerySimplePortfolio__");d&&d.destroy(),d=new b.SimplePortfolio(this,c),d.init(),a.data(this,"__FooGallerySimplePortfolio__",d)})}}(FooGallery.$,FooGallery,FooGallery.utils,FooGallery.utils.is),function(a){a.ready(function(a){a(".foogallery-simple-portfolio").each(function(){var b=a(this),c=b.data("simple-portfolio-options"),d=b.data("loader-options");b.fgSimplePortfolio(c).fgLoader(a.extend(!0,{},d,{oninit:function(){a(window).trigger("resize")}}))})})}(FooGallery);